<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lazybones Kill PLAN</title>
  <subtitle>In me the tiger sniffs the rose</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://vrast.cn/"/>
  <updated>2019-04-30T05:54:24.610Z</updated>
  <id>http://vrast.cn/</id>
  
  <author>
    <name>keyle xiao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>项目管理与甘特图</title>
    <link href="http://vrast.cn/posts/cd9ab0aa/"/>
    <id>http://vrast.cn/posts/cd9ab0aa/</id>
    <published>2019-04-30T04:48:53.000Z</published>
    <updated>2019-04-30T05:54:24.610Z</updated>
    
    <content type="html"><![CDATA[<p>最近受一位蓝朋友影响看了一些项管相关的书，这里做一下记录。</p>
<a id="more"></a>
<p>   JIT   TOC</p>
<p><a href="https://baike.baidu.com/item/全面质量管理/82450?fromtitle=TQM&amp;fromid=1446922&amp;fr=aladdin" target="_blank" rel="external">TQM</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近受一位蓝朋友影响看了一些项管相关的书，这里做一下记录。&lt;/p&gt;
    
    </summary>
    
      <category term="gantt chart" scheme="http://vrast.cn/categories/gantt-chart/"/>
    
    
      <category term="project" scheme="http://vrast.cn/tags/project/"/>
    
  </entry>
  
  <entry>
    <title>none内容提纲</title>
    <link href="http://vrast.cn/posts/5b921b24/"/>
    <id>http://vrast.cn/posts/5b921b24/</id>
    <published>2019-04-26T14:29:33.000Z</published>
    <updated>2019-04-26T16:44:44.732Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>一直以来都想把我从业游戏以来的积累转化成体系，直到近期才下定决心整理出一本书，分享给社区。本篇提纲不定期修改。<br><a id="more"></a></p>
<h1 id="语言基础"><a href="#语言基础" class="headerlink" title="语言基础"></a>语言基础</h1><h3 id="C-Java-与-Objective-C"><a href="#C-Java-与-Objective-C" class="headerlink" title="C# Java 与 Objective-C"></a>C# Java 与 Objective-C</h3><h3 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="常用设计模式"><a href="#常用设计模式" class="headerlink" title="常用设计模式"></a>常用设计模式</h3><h3 id="综合案例-1"><a href="#综合案例-1" class="headerlink" title="综合案例"></a>综合案例</h3></blockquote>
<h1 id="辅助脚本语言"><a href="#辅助脚本语言" class="headerlink" title="辅助脚本语言"></a>辅助脚本语言</h1><h3 id="Lua-与-Python"><a href="#Lua-与-Python" class="headerlink" title="Lua 与 Python"></a>Lua 与 Python</h3><h3 id="综合案例-2"><a href="#综合案例-2" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="bat-与-Shell"><a href="#bat-与-Shell" class="headerlink" title="bat 与 Shell"></a>bat 与 Shell</h3><h3 id="综合案例-3"><a href="#综合案例-3" class="headerlink" title="综合案例"></a>综合案例</h3><h1 id="开发技巧"><a href="#开发技巧" class="headerlink" title="开发技巧"></a>开发技巧</h1><h3 id="代码风格与Bug概率之间的关系"><a href="#代码风格与Bug概率之间的关系" class="headerlink" title="代码风格与Bug概率之间的关系"></a>代码风格与Bug概率之间的关系</h3><h3 id="综合案例-4"><a href="#综合案例-4" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="小黄鸭调试法"><a href="#小黄鸭调试法" class="headerlink" title="小黄鸭调试法"></a>小黄鸭调试法</h3><h3 id="综合案例-5"><a href="#综合案例-5" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="代码优化案例"><a href="#代码优化案例" class="headerlink" title="代码优化案例"></a>代码优化案例</h3><h3 id="综合案例-6"><a href="#综合案例-6" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="不同平台的调试技巧"><a href="#不同平台的调试技巧" class="headerlink" title="不同平台的调试技巧"></a>不同平台的调试技巧</h3><h3 id="综合案例-7"><a href="#综合案例-7" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="学会发问"><a href="#学会发问" class="headerlink" title="学会发问"></a>学会发问</h3><h3 id="综合案例-8"><a href="#综合案例-8" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="使用搜索引擎处理现有问题"><a href="#使用搜索引擎处理现有问题" class="headerlink" title="使用搜索引擎处理现有问题"></a>使用搜索引擎处理现有问题</h3><h3 id="综合案例-9"><a href="#综合案例-9" class="headerlink" title="综合案例"></a>综合案例</h3><h1 id="扩展件开发"><a href="#扩展件开发" class="headerlink" title="扩展件开发"></a>扩展件开发</h1><h3 id="编辑器扩展使用技巧"><a href="#编辑器扩展使用技巧" class="headerlink" title="编辑器扩展使用技巧"></a>编辑器扩展使用技巧</h3><h3 id="综合案例-10"><a href="#综合案例-10" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="序列化以及资源处理管道"><a href="#序列化以及资源处理管道" class="headerlink" title="序列化以及资源处理管道"></a>序列化以及资源处理管道</h3><h3 id="综合案例-11"><a href="#综合案例-11" class="headerlink" title="综合案例"></a>综合案例</h3><h3 id="原生层插件的开发方法"><a href="#原生层插件的开发方法" class="headerlink" title="原生层插件的开发方法"></a>原生层插件的开发方法</h3><h3 id="综合案例-12"><a href="#综合案例-12" class="headerlink" title="综合案例"></a>综合案例</h3><p>暂时先写这里 后面的再列</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;一直以来都想把我从业游戏以来的积累转化成体系，直到近期才下定决心整理出一本书，分享给社区。本篇提纲不定期修改。&lt;br&gt;
    
    </summary>
    
      <category term="新书提纲" scheme="http://vrast.cn/categories/%E6%96%B0%E4%B9%A6%E6%8F%90%E7%BA%B2/"/>
    
    
      <category term="none" scheme="http://vrast.cn/tags/none/"/>
    
  </entry>
  
  <entry>
    <title>使用VisualStudio Code 预览.md文件</title>
    <link href="http://vrast.cn/posts/47642b6e/"/>
    <id>http://vrast.cn/posts/47642b6e/</id>
    <published>2019-04-19T14:44:21.000Z</published>
    <updated>2019-04-26T14:38:40.730Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>本篇是给一个小朋友看的，原话是这样的：“用VisualStudio Code 看不了Markdown文件 。” 那么按照本篇操作，你将可以方便的在VsCode中预览Markdown文件。</p>
</blockquote>
 <a id="more"></a>
<h1 id="给VisualStudio-Code安装Markdown预览插件"><a href="#给VisualStudio-Code安装Markdown预览插件" class="headerlink" title="给VisualStudio Code安装Markdown预览插件"></a>给VisualStudio Code安装Markdown预览插件</h1><p><img src="/uploads/WX20190419-225136@2x.png" alt="安装插件的步骤"></p>
<h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><p>安装完毕之后打开<code> .md </code>文件。就可以使用preview功能了。</p>
<p><img src="/uploads/WX20190419-225136@2x.png" alt="按一次Ctrl + Shift + v 就可以开启preview窗口了。"></p>
<p><img src="/uploads/WX20190419-225734@2x.png" alt="如果想要左右分屏 可以点一下这个小图标"></p>
<p><img src="/uploads/WX20190419-225904@2x.png" alt="分屏效果图"></p>
<p><img src="/uploads/WX20190419-225344@2x.png" alt="快捷键在插件内部也有介绍，非常的简单"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;本篇是给一个小朋友看的，原话是这样的：“用VisualStudio Code 看不了Markdown文件 。” 那么按照本篇操作，你将可以方便的在VsCode中预览Markdown文件。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Markdown" scheme="http://vrast.cn/categories/Markdown/"/>
    
    
      <category term="tools" scheme="http://vrast.cn/tags/tools/"/>
    
  </entry>
  
  <entry>
    <title>Mac平台Debug lua提示缺少socket.http组件</title>
    <link href="http://vrast.cn/posts/d708212d/"/>
    <id>http://vrast.cn/posts/d708212d/</id>
    <published>2019-04-18T02:35:02.000Z</published>
    <updated>2019-04-18T03:19:56.561Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>起因是这样的我想在Mac上配一下Lua Debug环境，在debug的时候会用到socket链接到调试器。在intelliJ中Debug的时候它提示我“module ‘socket.http’ not found” 然后我就去了解了一下Lua环境的配置，这里着重要提到Lua的包管理工具 <a href="https://luarocks.org" target="_blank" rel="external">luarocks</a>,还真是很方便缺什么直接就装什么。</p>
</blockquote>
<a id="more"></a>
<h1 id="安装luarocks"><a href="#安装luarocks" class="headerlink" title="安装luarocks"></a>安装luarocks</h1><p>直接用Homebrew就能安装，当然可以下载源码编译。<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">brew </span>update</div><div class="line"><span class="keyword">brew </span><span class="keyword">install </span>luarocks</div></pre></td></tr></table></figure></p>
<p>或者</p>
<ol>
<li>下载 <a href="https://luarocks.org/releases/luarocks-3.0.4.tar.gz" target="_blank" rel="external">https://luarocks.org/releases/luarocks-3.0.4.tar.gz</a></li>
<li>解压进入luarocks-3.0.4</li>
<li>编译 ./configure; sudo make bootstrap</li>
<li>安装luasocket sudo luarocks install luasocket</li>
</ol>
<p>这里需要注意如果你和我是使用Mac那么在第4步的时候需要切换到<code>/usr/local/share/lua/5.3</code>这个路径下。这是默认的lua文件存放位置。</p>
<h1 id="更多命令"><a href="#更多命令" class="headerlink" title="更多命令"></a>更多命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">luarocks <span class="built_in">help</span></div></pre></td></tr></table></figure>
<h1 id="关于插件"><a href="#关于插件" class="headerlink" title="关于插件"></a>关于插件</h1><p>我看了下好用的lua扩展还真不少<br><img src="/uploads/WX20190418-104738.png" alt="比如关于Protobuf的库"></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://stackoverflow.com/questions/16491242/module-socket-http-not-found-lua-on-imac" target="_blank" rel="external">“module ‘socket.http’ not found:” –Lua on iMac [closed]
</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;起因是这样的我想在Mac上配一下Lua Debug环境，在debug的时候会用到socket链接到调试器。在intelliJ中Debug的时候它提示我“module ‘socket.http’ not found” 然后我就去了解了一下Lua环境的配置，这里着重要提到Lua的包管理工具 &lt;a href=&quot;https://luarocks.org&quot;&gt;luarocks&lt;/a&gt;,还真是很方便缺什么直接就装什么。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="FAQ" scheme="http://vrast.cn/categories/FAQ/"/>
    
    
      <category term="Lua" scheme="http://vrast.cn/tags/Lua/"/>
    
  </entry>
  
  <entry>
    <title>UNITY Unable to instantiate UnityPlayerActivity</title>
    <link href="http://vrast.cn/posts/80d969f4/"/>
    <id>http://vrast.cn/posts/80d969f4/</id>
    <published>2019-04-11T08:11:24.000Z</published>
    <updated>2019-04-11T10:56:40.650Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>这段时间自从用了UNITY 2018.3.8F1 出现的bug很多，关于构建包的。不知道是不是 Unity 频繁更新导致的。截止到目前为止 我已经在UNITY HUB上看到了 UNITY2018.3.12.F1 这个版本了。我这边的遇到的问题主要体现在使用Gradle构建或者使用内置方式构建都会出现无法找到MainActivity。也就是Unity默认运行的那个Activity.即使我直接创建一个新的工程打包，亦是如此。<br><img src="/uploads/WX20190411-161531.png" alt="无法找到这个 unityplayer.UnityActivity 或者 xxx.xxx.xxx.UnityPlayerActivity"></p>
</blockquote>
<a id="more"></a>
<p><img src="/uploads/WX20190411-183559.png" alt="打开AndroidManifest.xml之后发现这边直接找不到。"></p>
<p><img src="/uploads/WX20190411-183859.png" alt="既然这样我直接用UNITY3D默认的"></p>
<p>好吧 解决了。</p>
<p>当然这并不是引发当前问题的根源，然而为什么会引发这个问题呢 ？ 于是我重新审视了一下代码</p>
<p><img src="/uploads/WX20190411-184808.png" alt="这段代码的继承类是 Activity"></p>
<h1 id="但是"><a href="#但是" class="headerlink" title="但是"></a>但是</h1><p><img src="/uploads/WX20190411-185258.png" alt="在老版本里是这样的，改成继承自UnityPlayerAcitivity问题解决。"></p>
<h1 id="所以-这又是Unity的BUG吗？"><a href="#所以-这又是Unity的BUG吗？" class="headerlink" title="所以 这又是Unity的BUG吗？"></a>所以 这又是Unity的BUG吗？</h1>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;这段时间自从用了UNITY 2018.3.8F1 出现的bug很多，关于构建包的。不知道是不是 Unity 频繁更新导致的。截止到目前为止 我已经在UNITY HUB上看到了 UNITY2018.3.12.F1 这个版本了。我这边的遇到的问题主要体现在使用Gradle构建或者使用内置方式构建都会出现无法找到MainActivity。也就是Unity默认运行的那个Activity.即使我直接创建一个新的工程打包，亦是如此。&lt;br&gt;&lt;img src=&quot;/uploads/WX20190411-161531.png&quot; alt=&quot;无法找到这个 unityplayer.UnityActivity 或者 xxx.xxx.xxx.UnityPlayerActivity&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="Android" scheme="http://vrast.cn/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>优化IL2CPP打包速度</title>
    <link href="http://vrast.cn/posts/b5ee8b26/"/>
    <id>http://vrast.cn/posts/b5ee8b26/</id>
    <published>2019-04-10T06:54:16.000Z</published>
    <updated>2019-04-10T07:31:36.780Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>今天有同事找我聊了一下关于打包的问题，他说在UNITY IL2CPP下编译速度过慢，切换成 mono 会快三分之一。这个速度有没有办法优化。我倒是没有什么实际优化打包速度的操作经验，让我来做一般就是资源层优化，当然这是最难也最容易做到的。但是他倒是给我提了几个不错的建议。我看了下UNITY的官网确实如此。本篇记录之。</p>
</blockquote>
<ul>
<li>降低硬盘读写(各种方案:关闭杀毒软件/用两块ssd项目与unity分开/等)</li>
<li>增量包构建会加速进程</li>
</ul>
<p>下面是UNITY官方的实践经验：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Optimizing IL2CPP build times</div><div class="line">Project build times can be much longer when building a project with IL2CPP</div><div class="line">. However, there are several ways to reduce the build time significantly:</div><div class="line"></div><div class="line"><span class="keyword">Use</span> incremental building</div><div class="line"></div><div class="line"><span class="keyword">When</span> <span class="keyword">using</span> incremental building, the C++ compiler <span class="keyword">only</span> recompiles files that have <span class="keyword">changed</span> since the <span class="keyword">last</span> build. <span class="keyword">To</span> <span class="keyword">use</span> incremental building, <span class="keyword">build</span> your <span class="keyword">project</span> <span class="keyword">to</span> a previous <span class="keyword">build</span> location (<span class="keyword">without</span> deleting the target <span class="keyword">directory</span>).</div><div class="line"></div><div class="line"><span class="keyword">Exclude</span> <span class="keyword">project</span> <span class="keyword">and</span> target <span class="keyword">build</span> folders <span class="keyword">from</span> anti-malware software scans</div><div class="line"></div><div class="line">You can improve <span class="keyword">build</span> times <span class="keyword">by</span> disabling anti-malware software <span class="keyword">before</span> building your project. (Testing <span class="keyword">by</span> Unity Technologies <span class="keyword">found</span> that <span class="keyword">build</span> times decreased <span class="keyword">by</span> <span class="number">50</span> – <span class="number">66</span>% <span class="keyword">after</span> disabling Windows Defender <span class="keyword">on</span> a <span class="keyword">fresh</span> Windows <span class="number">10</span> installation.)</div><div class="line"></div><div class="line"><span class="keyword">Store</span> your <span class="keyword">project</span> <span class="keyword">and</span> target <span class="keyword">build</span> folder <span class="keyword">on</span> a Solid State Drive (SSD)</div><div class="line"></div><div class="line">Solid State Drives (SSDs) have faster <span class="keyword">read</span>/write speed, <span class="keyword">when</span> compared <span class="keyword">to</span> traditional Hard Disk Drives (HDD). Converting IL code <span class="keyword">to</span> C++ <span class="keyword">and</span> compiling it involves a <span class="keyword">large</span> <span class="built_in">number</span> <span class="keyword">of</span> <span class="keyword">read</span>/write operations. A faster <span class="keyword">storage</span> device speeds up this process.</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;今天有同事找我聊了一下关于打包的问题，他说在UNITY IL2CPP下编译速度过慢，切换成 mono 会快三分之一。这个速度有没有办法优化。我倒是没有什么实际优化打包速度的操作经验，让我来做一般就是资源层优化，当然这是最难也最容易做到的。但是他倒是
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="BuildTimes" scheme="http://vrast.cn/tags/BuildTimes/"/>
    
  </entry>
  
  <entry>
    <title>安装Unity导出APK显示失败</title>
    <link href="http://vrast.cn/posts/434d7425/"/>
    <id>http://vrast.cn/posts/434d7425/</id>
    <published>2019-04-05T09:45:02.000Z</published>
    <updated>2019-05-06T02:18:20.064Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>遇到一个非常皮的问题，我更新了Android Studio的SDK Build Tools，直接将 Build Tools 29 rc1 与 rc2 都下载了。<br><img src="/uploads/WX20190405-174643.png" alt="我当时是直接更新到了 29 rc2"><br>直接导出项目在Android Studio中会直接显示 <strong>android studio ERROR: Failed to find Build Tools revision 29.0.0</strong><br>另外如果直接出APK然后安装会显示一个<strong>Installation error:INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION</strong> 这个报错信息是十分误导人的，网上的解决方案一般都是更改keystone或直接更改unity的项目导出模版。这样越改越偏。如果你也和我一样不妨试一下下面的方案。</p>
</blockquote>
<a id="more"></a>
<p>我在Stackoverflow上找到了一解决方案：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">For building a project, Unity3d uses a stable version of the Build Tools and not an rc (<span class="keyword">release</span> candidate).</div><div class="line"></div><div class="line">The Android SDK <span class="keyword">path</span> <span class="keyword">is</span> usually C:\<span class="keyword">Users</span>\&lt;username&gt;\AppData\<span class="keyword">Local</span>\Android\sdk\<span class="keyword">build</span>-tools\ <span class="keyword">delete</span> the <span class="number">29.0</span><span class="number">.0</span>-rc1 folder <span class="keyword">or</span> <span class="keyword">move</span> it <span class="keyword">out</span> <span class="keyword">to</span> anywhere. You could also remove the rc <span class="keyword">version</span> <span class="keyword">of</span> the SDK <span class="keyword">Build</span> Tools via Android Studio<span class="string">'s SDK manager.</span></div><div class="line"></div><div class="line">Doing that the project should build successfully.</div></pre></td></tr></table></figure>
<p>大意就是让我直接将下载的  Build Tools 29 rc1 与 rc2 先删除然后再打包。试了一下成功安装了。</p>
<p><img src="/uploads/WX20190405-175318.png" alt="安装成功了"></p>
<h1 id="UNITY的Build-Tools使用策略猜测"><a href="#UNITY的Build-Tools使用策略猜测" class="headerlink" title="UNITY的Build Tools使用策略猜测"></a>UNITY的Build Tools使用策略猜测</h1><p>经过上面的实力躺坑，可以推断如果你安装了更新的Build Tools，unity导出的时候就会使用最近更新的最新的那个，或许是路径拼接的问题，unity所引用的build tools只会引用前面的版本号 ，就像我遇到的一样 明明下载了 29 rc1 / 29 rc2 ，Unity偏偏不用执着的去找一个叫 29 的 Build Tools。</p>
<p>或许这是一个隐藏bug吧，希望Unity团队早日解决。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;遇到一个非常皮的问题，我更新了Android Studio的SDK Build Tools，直接将 Build Tools 29 rc1 与 rc2 都下载了。&lt;br&gt;&lt;img src=&quot;/uploads/WX20190405-174643.png&quot; alt=&quot;我当时是直接更新到了 29 rc2&quot;&gt;&lt;br&gt;直接导出项目在Android Studio中会直接显示 &lt;strong&gt;android studio ERROR: Failed to find Build Tools revision 29.0.0&lt;/strong&gt;&lt;br&gt;另外如果直接出APK然后安装会显示一个&lt;strong&gt;Installation error:INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION&lt;/strong&gt; 这个报错信息是十分误导人的，网上的解决方案一般都是更改keystone或直接更改unity的项目导出模版。这样越改越偏。如果你也和我一样不妨试一下下面的方案。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="ANDROID" scheme="http://vrast.cn/tags/ANDROID/"/>
    
  </entry>
  
  <entry>
    <title>使用Android Studio进行APK Profile</title>
    <link href="http://vrast.cn/posts/98741dc2/"/>
    <id>http://vrast.cn/posts/98741dc2/</id>
    <published>2019-04-04T08:02:23.000Z</published>
    <updated>2019-04-05T02:37:51.169Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>很多时候我们需要从Android端获取崩溃日志，但是手动adb比较麻烦。这时候就应该使用AndroidStudio了。</p>
</blockquote>
<a id="more"></a>
<h2 id="使用AndroidStudio进行Profile"><a href="#使用AndroidStudio进行Profile" class="headerlink" title="使用AndroidStudio进行Profile"></a>使用AndroidStudio进行Profile</h2><p><img src="/uploads/WX20190404-160013.png" alt="导入APK到IDE中"></p>
<p><img src="/uploads/WX20190405-100856.png" alt="选择需要启用调试的设备，也可以是真机(需要开启USB调试)"></p>
<p><img src="/uploads/WX20190405-101425.png" alt="使用logcat轻松获取当前Log，如果信息过多 你可以直接用Unity关键字过滤"></p>
<p>还有性能/内存等详细的分析这里有一份参考：<a href="https://blog.csdn.net/niubitianping/article/details/72617864" target="_blank" rel="external">Android studio中android profile（性能分析器）的使用</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;很多时候我们需要从Android端获取崩溃日志，但是手动adb比较麻烦。这时候就应该使用AndroidStudio了。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android Profile" scheme="http://vrast.cn/categories/Android-Profile/"/>
    
    
      <category term="APK" scheme="http://vrast.cn/tags/APK/"/>
    
  </entry>
  
  <entry>
    <title>UNITY移动端路径的注意事项</title>
    <link href="http://vrast.cn/posts/d425b5d3/"/>
    <id>http://vrast.cn/posts/d425b5d3/</id>
    <published>2019-04-04T06:41:42.000Z</published>
    <updated>2019-04-05T07:12:28.363Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>在移动端加载路径与Windwos或Mac上加载有一些区分,有时候资源文件找不到是在是查起来头疼。这里写一些推荐规范，从非开发角度就能避免这些问题。</p>
</blockquote>
<a id="more"></a>
<h2 id="路径大小写"><a href="#路径大小写" class="headerlink" title="路径大小写"></a>路径大小写</h2><p>在UNITY EDITOR下你不必关注路径大小写问题，⚠️ 注意：但是在移动端大小写是敏感的。</p>
<ul>
<li>建议所有AB包都保持小写的命名方式 </li>
<li>建议在加载文件的地方的留一个可以开关的宏定义用来查路径问题</li>
</ul>
<h2 id="StreamAssets目录的资源加载"><a href="#StreamAssets目录的资源加载" class="headerlink" title="StreamAssets目录的资源加载"></a>StreamAssets目录的资源加载</h2><p>StreamAsset目录中。在移动端File.IO不可用，⚠️ 注意：你需要使用www来加载当前目录下资源</p>
<p>你可以使用下面的代码块进行资源的同步加载，而不必非要放到携程里进行加载。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> (WWW www = <span class="keyword">new</span> WWW(path))</div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (!www.isDone)</div><div class="line">    &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> ms = <span class="keyword">new</span> MemoryStream(www.bytes))</div><div class="line">    &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="路径的隐含条件"><a href="#路径的隐含条件" class="headerlink" title="路径的隐含条件"></a>路径的隐含条件</h2><ul>
<li>建议统一使用www加载，避免大量的逻辑判断(比如是否需要拼接”file://“)</li>
<li>在StreamAsset目录下就不要使用 File.exsits 之类位于 System.IO命名空间下函数</li>
</ul>
<p>//在android下<br>Application.streamingAssetsPath = “jar:file://“ + Application.dataPath + “!/assets/“</p>
<p>//在pc &amp; mac端<br>Application.streamingAssetsPath = Application.dataPath + “/StreamingAssets”</p>
<p>//在iOS端<br>Application.streamingAssetsPath = Application.dataPath + “/Raw”</p>
<p><img src="/uploads/WX20190404-160429.png" alt="APK内StreamAsset目录结构"></p>
<p>当然你可以使用下面的代码块直接进行www加载路径的拼接</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">string</span> <span class="title">GetWWWLoadingPathAtStreamingAssetsFolder</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">string</span> path;</div><div class="line">    <span class="meta">#<span class="meta-keyword">if</span> UNITY_EDITOR</span></div><div class="line">    path = <span class="string">"file:"</span> + Application.dataPath + <span class="string">"/StreamingAssets"</span>;</div><div class="line">    <span class="meta">#<span class="meta-keyword">elif</span> UNITY_ANDROID</span></div><div class="line">    path = <span class="string">"jar:file://"</span>+ Application.dataPath + <span class="string">"!/assets/"</span>;</div><div class="line">    <span class="meta">#<span class="meta-keyword">elif</span> UNITY_IOS</span></div><div class="line">    path = <span class="string">"file:"</span> + Application.dataPath + <span class="string">"/Raw"</span>;</div><div class="line">    <span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">    <span class="comment">//Desktop (Mac OS or Windows)</span></div><div class="line">    path = <span class="string">"file:"</span>+ Application.dataPath + <span class="string">"/StreamingAssets"</span>;</div><div class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">    </div><div class="line">    <span class="keyword">return</span> path;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;在移动端加载路径与Windwos或Mac上加载有一些区分,有时候资源文件找不到是在是查起来头疼。这里写一些推荐规范，从非开发角度就能避免这些问题。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="MOBILE" scheme="http://vrast.cn/tags/MOBILE/"/>
    
  </entry>
  
  <entry>
    <title>XLua Generate Code Log显示代码找不到</title>
    <link href="http://vrast.cn/posts/aee063b0/"/>
    <id>http://vrast.cn/posts/aee063b0/</id>
    <published>2019-04-04T06:27:25.000Z</published>
    <updated>2019-04-05T03:05:19.642Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>项目内引用了Xlua插件，在Generate代码的时候发现一些函数没有找到。遂发现这是XLua的黑名单需要添加相应的函数。现在这里记录一下。</p>
</blockquote>
<p><img src="/uploads/WX20190404-143356.png" alt="参考Xlua example中Editor目录下的配置文件"></p>
<p>像下面一样将报错的函数添加到黑名单，然后重新生成代码即可</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[BlackList]</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;<span class="keyword">string</span>&gt;&gt; BlackList = <span class="keyword">new</span> List&lt;List&lt;<span class="keyword">string</span>&gt;&gt;()  &#123;</div><div class="line">    <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;()&#123;<span class="string">"UnityEngine.Light"</span>, <span class="string">"shadowRadius"</span>&#125;,</div><div class="line">    <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;()&#123;<span class="string">"UnityEngine.Light"</span>, <span class="string">"shadowAngle"</span>&#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;项目内引用了Xlua插件，在Generate代码的时候发现一些函数没有找到。遂发现这是XLua的黑名单需要添加相应的函数。现在这里记录一下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/WX20190404-14
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="XLua" scheme="http://vrast.cn/tags/XLua/"/>
    
  </entry>
  
  <entry>
    <title>使用Rider为UNITY项目生成DLL</title>
    <link href="http://vrast.cn/posts/b10c71c2/"/>
    <id>http://vrast.cn/posts/b10c71c2/</id>
    <published>2019-03-16T05:23:04.000Z</published>
    <updated>2019-03-16T05:57:31.927Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>技术中心有同事问我怎么方便的将库文件编译到UNITY中，并且方便调试。今日有空写一下案例. 无论你使用的是否是rider或者是其他(VisualStudio/Mono)，基本上都是这样处理。</p>
</blockquote>
<a id="more"></a>
<h2 id="操作演示"><a href="#操作演示" class="headerlink" title="操作演示"></a>操作演示</h2><p><img src="/uploads/WX20190316-132730@2x.png" alt="在与当前项目平行的目录建一个文件夹"></p>
<p><img src="/uploads/WeChat22cd6b5c46c3c16004d366949f7dbd96.png" alt="右键添加现有项目到解决方案，这里需要注意一下相对路径， 我的相对路径是这样的：&lt;code&gt;../../TEST2/Assets/Plugins&lt;/code&gt; "></p>
<p><img src="/uploads/WX20190316-134956@2x.png" alt="现在我们写一个测试函数 看 已经正常进入断点了"></p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>需要提前规范命名空间，并且划分好每块代码的职责范围。另外你需要确定当前所使用的.net framework 版本.</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;技术中心有同事问我怎么方便的将库文件编译到UNITY中，并且方便调试。今日有空写一下案例. 无论你使用的是否是rider或者是其他(VisualStudio/Mono)，基本上都是这样处理。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="Plugin" scheme="http://vrast.cn/tags/Plugin/"/>
    
  </entry>
  
  <entry>
    <title>SpriteAtlas 使用FAQ</title>
    <link href="http://vrast.cn/posts/583e3cbd/"/>
    <id>http://vrast.cn/posts/583e3cbd/</id>
    <published>2019-03-12T07:43:31.000Z</published>
    <updated>2019-04-04T06:38:25.320Z</updated>
    
    <content type="html"><![CDATA[<p>这两天详细的看了下U3D的新图集系统 SpriteAtlas ，目前为止觉得这个新系统用起来问题不大。但是在理解上有一些问题，我会在这里做一些记录。<br>在操作上，这个没什么问题。有问题的是SpriteAtlasManager这块，需要去理解一下调用机制。</p>
<a id="more"></a>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>UNITY每次更新旧操作方式都会变得更加简单，这次亦是如此。</p>
<h3 id="启用图集打包方式"><a href="#启用图集打包方式" class="headerlink" title="启用图集打包方式"></a>启用图集打包方式</h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">E<span class="function"><span class="title">dit</span>-&gt;</span> P<span class="function"><span class="title">rojectSettings</span> -&gt;</span> E<span class="function"><span class="title">ditor</span> -&gt;</span> S<span class="function"><span class="title">prite</span> Packer -&gt;</span> Mode</div><div class="line"></div><div class="line"> -&gt;  Enable For Builds：在打包时使用图集</div><div class="line"></div><div class="line"> -&gt;  AlwaysEnabled：保持图集状态</div></pre></td></tr></table></figure>
<h3 id="制作图集"><a href="#制作图集" class="headerlink" title="制作图集"></a>制作图集</h3><p>新建SpriteAtlas文件，将Sprite或者Sprite所在文件夹拖入Objects for Packing，按Pack Preview预览。</p>
<h3 id="变体"><a href="#变体" class="headerlink" title="变体"></a>变体</h3><p><img src="/uploads/spriteatlasdemo.png" alt="使用变体方便的制作低清晰度图集给低性能设备使用"></p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>SpriteAtlas -&gt; Include in Build : 勾选的话作用于编辑器中。取消后需要在代码中监听SpriteAtlasManager.atlasRequested事件来在程序中加载贴图集。</p>
<p>如果你准备用AB加载图集 或者 直接从Resources加载图集 建议你将 Include in Build 的选中去掉。避免重复的资源出现在包体里。</p>
<h2 id="机制"><a href="#机制" class="headerlink" title="机制"></a>机制</h2><h3 id="先加载后取值"><a href="#先加载后取值" class="headerlink" title="先加载后取值"></a>先加载后取值</h3><p>如果现在要在运行时从资源目录或者AB里加载出Prefab,这个时候我们需要先加载这个Prefab的代码上<code>先进行SpriteAtlas的加载工作</code> – 也就是需要保证这个Sprite所属SpriteAtlas已经被Load到运行时。</p>
<p>下面的代码是可以正常工作的：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> UnityEngine.U2D;</div><div class="line"><span class="keyword">using</span> UnityEngine.UI;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestSA</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">public</span> GameObject[] objs;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> SpriteAtlas at;</div><div class="line"></div><div class="line">	<span class="comment">// Start is called before the first frame update</span></div><div class="line">	<span class="function">IEnumerator <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">	&#123;</div><div class="line">		at = Resources.Load&lt;SpriteAtlas&gt;(<span class="string">"NewSpriteAtlas2"</span>);</div><div class="line">		<span class="function"><span class="keyword">yield</span> return new <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">3</span></span>)</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; objs.Length; i++)</div><div class="line">		&#123;</div><div class="line">			objs[i].SetActive(<span class="literal">true</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		objs[<span class="number">0</span>].GetComponent&lt;Image&gt;().sprite = at.GetSprite(<span class="string">"04"</span>);</div><div class="line">		objs[<span class="number">1</span>].GetComponent&lt;Image&gt;().sprite = at.GetSprite(<span class="string">"04"</span>);</div><div class="line">		objs[<span class="number">2</span>].GetComponent&lt;Image&gt;().sprite = at.GetSprite(<span class="string">"04"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>因为没有对 SpriteAtlasManager 中的回调函数进行监听，我们收获了一个Warning , 但是不影响编辑器中的正常显示 。</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">⚠️ SpriteAtlasManager.atlasRequested wasn<span class="symbol">'t</span> listened <span class="keyword">to</span> <span class="keyword">while</span> NewSpriteAtlas2 requested.</div></pre></td></tr></table></figure>
<p>如果你考虑上面的做法务必小心你在每次代码调用Sprite加载都已经Load过SpriteAtlas。这应该是需要写一个相应的模块去管理 SpriteAtlas - Sprite 的从属关系。</p>
<h3 id="先注册后取值"><a href="#先注册后取值" class="headerlink" title="先注册后取值"></a>先注册后取值</h3><p>第二种就简单一些了，这也是UNTIY推荐的方法。你不必每次都在代码前检测是否调用过图集加载之类或者其他加载图集相关代码。 你只需要在 SpriteAtlasManager 中注册 atlasRegistered . 在第一次加载相应图集的时候会自动调一次，这时候在该函数的回调中内你可以轻松的写一段加载图集的代码。</p>
<h3 id="加载时机"><a href="#加载时机" class="headerlink" title="加载时机"></a>加载时机</h3><p>哦对了，这个图集什么时候被加载 ？ 如果你实例化物体关联到Sprite 就会执行 <code>atlasRequested</code> 回调，在UNITY内部做了一个检测，如果该关联到的图集是第一次被关联到，那么才会调用一次。</p>
<p>Trigger when any Sprite was bound to SpriteAtlas but couldn’t locate the atlas asset during runtime.<br>This usually means the sprite was packed to an atlas which is not included in build<br>This callback does not expect an immediate response from the user. Instead, it passes on a System.Action. The user can load the atlas object later and use this System.Action to pass back the loaded atlas.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> UnityEngine.U2D;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AtlasLoader</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        SpriteAtlasManager.atlasRequested += RequestAtlas;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnDisable</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        SpriteAtlasManager.atlasRequested -= RequestAtlas;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">RequestAtlas</span>(<span class="params"><span class="keyword">string</span> tag, System.Action&lt;SpriteAtlas&gt; callback</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> sa = Resources.Load&lt;SpriteAtlas&gt;(tag);</div><div class="line">        callback(sa);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.litefeel.com/unity-2017-new-sprite-atlas/" target="_blank" rel="external">Unity2017的新spriteAtlas</a><br><a href="https://docs.unity3d.com/ScriptReference/U2D.SpriteAtlasManager.html" target="_blank" rel="external">SpriteAtlasManager</a><br><a href="https://forum.unity.com/threads/about-include-in-build-behaviour.481433/" target="_blank" rel="external">About “Include in Build” behaviour</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这两天详细的看了下U3D的新图集系统 SpriteAtlas ，目前为止觉得这个新系统用起来问题不大。但是在理解上有一些问题，我会在这里做一些记录。&lt;br&gt;在操作上，这个没什么问题。有问题的是SpriteAtlasManager这块，需要去理解一下调用机制。&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="UI" scheme="http://vrast.cn/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>UNITY新Prefab系统-2018</title>
    <link href="http://vrast.cn/posts/f258ca82/"/>
    <id>http://vrast.cn/posts/f258ca82/</id>
    <published>2019-03-01T01:44:01.000Z</published>
    <updated>2019-03-01T02:31:42.630Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近看了一下UNITY3D-2018的新Prefab系统，这里做一个记录。目前的情况看下来新Prefab系统还在不断的优化工作流，对于整体的概念应该是敲定下来了。未来应该是在编辑器层面上的优化和编辑细节上的调整。昨天看了UNITY的公开课。还是有点意思的，其中一个比较有趣的一个案例是某个客户由于场景层级太深，导致对某一个Prefab的递归修改卡了几十分钟最后官方出了一版优化到几分钟卡顿。这也从侧面说明了UNITY还是不断对编辑器进行改进的。对于我们来说应该也是一件很友好的事情。这东西需要总结的并不多，作为一个开箱即用的Prefab工作流，我认为UNITY官方处理的还是相当不错，作为美术或者非程序使用都是能很快上手的流程。<br>需要注意的是新Preafab的嵌套在Assetbundle中可不管你是不是嵌套或者变体，只要出现了多份Prefab就会出现多份资源。<br>第二个需要注意的是性能问题，你不能有太深的层级在你的prefab上。尽力告知美术让他多做prefab减少层级。<br>第三个就是尽量在非Assetbundle目录与Resource目录中使用新prefab系统，这样不会出现多份资源重复打包的问题。</p>
</blockquote>
<a id="more"></a>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>我这边也就顺着之前公开课的PPT大概浏览一遍，从个人的角度写一些笔记。因为前有视频后有PPT我就在这里做一些概念上的总结了。<br>新prefb系统功能如下：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Nested</span> Prefabs（嵌套式预制件）</div><div class="line">Prefab Overrides（预制件覆盖/重载）</div><div class="line">Prefab Variants（预制件变体）</div></pre></td></tr></table></figure></p>
<h2 id="Nested-Prefabs（嵌套式预制件）"><a href="#Nested-Prefabs（嵌套式预制件）" class="headerlink" title="Nested Prefabs（嵌套式预制件）"></a>Nested Prefabs（嵌套式预制件）</h2><p>嵌套Prefab的做法，让我举例说的话，从程序的角度打个比方。 如果一个prefab看作是一个类的话。那么嵌套prefab就是在一个类里面使用其他的类作为局部变量类似下面:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">PrefabMain</span></div><div class="line">&#123;</div><div class="line">    PrefabA a;</div><div class="line">    PreafaB b;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对于a,b变量来说 进行的任何更改对于PrefabMain来说都是没有关系的。</p>
<h2 id="Prefab-Overrides（预制件覆盖-重载）"><a href="#Prefab-Overrides（预制件覆盖-重载）" class="headerlink" title="Prefab Overrides（预制件覆盖/重载）"></a>Prefab Overrides（预制件覆盖/重载）</h2><p>这个概念就不提了，记得我们之前使用UNITY3D在场景里修改实例吗？这就叫Override。</p>
<h2 id="Prefab-Variants（预制件变体）"><a href="#Prefab-Variants（预制件变体）" class="headerlink" title="Prefab Variants（预制件变体）"></a>Prefab Variants（预制件变体）</h2><p>对于这个概念程序应该更好理解了。就像下面写的，下面就是PrefabA变体了，他继承了PrefabMain，如果说现在对 PrefabMain 进行了更改，马上就会体现到所有的继承了 PrefabMain 的Prefab上面去。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">PrefabA</span> : <span class="title">PrefabMain</span></div><div class="line">&#123;</div><div class="line">    PreafaB b;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近看了一下UNITY3D-2018的新Prefab系统，这里做一个记录。目前的情况看下来新Prefab系统还在不断的优化工作流，对于整体的概念应该是敲定下来了。未来应该是在编辑器层面上的优化和编辑细节上的调整。昨天看了UNITY的公开课。还是有点意思的，其中一个比较有趣的一个案例是某个客户由于场景层级太深，导致对某一个Prefab的递归修改卡了几十分钟最后官方出了一版优化到几分钟卡顿。这也从侧面说明了UNITY还是不断对编辑器进行改进的。对于我们来说应该也是一件很友好的事情。这东西需要总结的并不多，作为一个开箱即用的Prefab工作流，我认为UNITY官方处理的还是相当不错，作为美术或者非程序使用都是能很快上手的流程。&lt;br&gt;需要注意的是新Preafab的嵌套在Assetbundle中可不管你是不是嵌套或者变体，只要出现了多份Prefab就会出现多份资源。&lt;br&gt;第二个需要注意的是性能问题，你不能有太深的层级在你的prefab上。尽力告知美术让他多做prefab减少层级。&lt;br&gt;第三个就是尽量在非Assetbundle目录与Resource目录中使用新prefab系统，这样不会出现多份资源重复打包的问题。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="NewPrefabSystem" scheme="http://vrast.cn/tags/NewPrefabSystem/"/>
    
  </entry>
  
  <entry>
    <title>XCode 插件自动签名</title>
    <link href="http://vrast.cn/posts/2dde2a0b/"/>
    <id>http://vrast.cn/posts/2dde2a0b/</id>
    <published>2019-02-28T01:25:59.000Z</published>
    <updated>2019-02-28T01:45:32.401Z</updated>
    
    <content type="html"><![CDATA[<p>最近用XCode写一些C++的测试，遇到一个问题，我升级过XCode所以现在看不到所有的旧插件了，网上找了一圈，需要手动创建证书然后重新对之前的插件进行签名。最后我找到一个插件可以很方便的对之前插件进行恢复。<br><a id="more"></a></p>
<h2 id="关闭XCode"><a href="#关闭XCode" class="headerlink" title="关闭XCode"></a>关闭XCode</h2><p>别忘记关XCode，不然过程中还会提醒关闭。</p>
<h2 id="使用Gem下载"><a href="#使用Gem下载" class="headerlink" title="使用Gem下载"></a>使用Gem下载</h2><p>Gem 是Mac自带的Ruby内建的功能，所以Mac用户也不必纠结什么是Gem.就是一个插件下载器，使用下面的命令安装好工具<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="keyword">install</span> update_xcode_plugins</div></pre></td></tr></table></figure></p>
<p>当然你同样可以通过github下载 <a href="https://github.com/inket/update_xcode_plugins" target="_blank" rel="external">https://github.com/inket/update_xcode_plugins</a> </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">keyle@xiaonians-MacBook-Pro  ~  sudo gem install update_xcode_plugins</div><div class="line">Password:</div><div class="line">Fetching: colorize-<span class="number">0.8</span>.<span class="number">1</span><span class="selector-class">.gem</span> (<span class="number">100%</span>)</div><div class="line">Successfully installed colorize-<span class="number">0.8</span>.<span class="number">1</span></div><div class="line">Fetching: tins-<span class="number">1.20</span>.<span class="number">2</span><span class="selector-class">.gem</span> (<span class="number">100%</span>)</div><div class="line">Successfully installed tins-<span class="number">1.20</span>.<span class="number">2</span></div><div class="line">Fetching: term-ansicolor-<span class="number">1.7</span>.<span class="number">1</span><span class="selector-class">.gem</span> (<span class="number">100%</span>)</div><div class="line">Successfully installed term-ansicolor-<span class="number">1.7</span>.<span class="number">1</span></div><div class="line">Fetching: inquirer-<span class="number">0.2</span>.<span class="number">1</span><span class="selector-class">.gem</span> (<span class="number">100%</span>)</div><div class="line">Successfully installed inquirer-<span class="number">0.2</span>.<span class="number">1</span></div><div class="line">Fetching: update_xcode_plugins-<span class="number">0.4</span>.<span class="number">0</span><span class="selector-class">.gem</span> (<span class="number">100%</span>)</div><div class="line">Successfully installed update_xcode_plugins-<span class="number">0.4</span>.<span class="number">0</span></div><div class="line">Parsing documentation <span class="keyword">for</span> colorize-<span class="number">0.8</span>.<span class="number">1</span></div><div class="line">Installing ri documentation <span class="keyword">for</span> colorize-<span class="number">0.8</span>.<span class="number">1</span></div><div class="line">Parsing documentation <span class="keyword">for</span> tins-<span class="number">1.20</span>.<span class="number">2</span></div><div class="line">Installing ri documentation <span class="keyword">for</span> tins-<span class="number">1.20</span>.<span class="number">2</span></div><div class="line">Parsing documentation <span class="keyword">for</span> term-ansicolor-<span class="number">1.7</span>.<span class="number">1</span></div><div class="line">Installing ri documentation <span class="keyword">for</span> term-ansicolor-<span class="number">1.7</span>.<span class="number">1</span></div><div class="line">Parsing documentation <span class="keyword">for</span> inquirer-<span class="number">0.2</span>.<span class="number">1</span></div><div class="line">Installing ri documentation <span class="keyword">for</span> inquirer-<span class="number">0.2</span>.<span class="number">1</span></div><div class="line">Parsing documentation <span class="keyword">for</span> update_xcode_plugins-<span class="number">0.4</span>.<span class="number">0</span></div><div class="line">Installing ri documentation <span class="keyword">for</span> update_xcode_plugins-<span class="number">0.4</span>.<span class="number">0</span></div><div class="line">Done installing documentation <span class="keyword">for</span> colorize, tins, term-ansicolor, inquirer, update_xcode_plugins after <span class="number">1</span> seconds</div><div class="line"><span class="number">5</span> gems installed</div></pre></td></tr></table></figure>
<h2 id="查看本机现有XCode插件"><a href="#查看本机现有XCode插件" class="headerlink" title="查看本机现有XCode插件"></a>查看本机现有XCode插件</h2><p>使用 <code>update_xcode_plugins</code> 命令可以直接更新旧签名插件。<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">keyle@xiaonians-MacBook-Pro  ~  update_xcode_plugins</div><div class="line">Found:</div><div class="line">-<span class="ruby"> Xcode (<span class="number">10.1</span>) [D7881182-AD0<span class="number">0</span>-<span class="number">4</span>C36-A94D-F45FC9B0CF85]: <span class="regexp">/Applications/</span>Xcode.app</span></div><div class="line"></div><div class="line">Plugins:</div><div class="line">-<span class="ruby"> AutoIndentWithSave (<span class="number">1.0</span>)</span></div><div class="line">-<span class="ruby"> XToDo (<span class="number">1.0</span>)</span></div><div class="line">-<span class="ruby"> RSImageOptimPlugin (<span class="number">1.0</span>)</span></div><div class="line">-<span class="ruby"> Alcatraz (<span class="number">1.2</span>.<span class="number">1</span>)</span></div><div class="line">-<span class="ruby"> BBUDebuggerTuckAway (<span class="number">1.0</span>)</span></div><div class="line">-<span class="ruby"> Auto-Importer (<span class="number">1.0</span>)</span></div><div class="line">-<span class="ruby"> VVDocumenter-Xcode (<span class="number">1.0</span>)</span></div><div class="line">-<span class="ruby"> OMQuickHelp (<span class="number">1.0</span>.<span class="number">1</span>)</span></div><div class="line">-<span class="ruby"> AutoHighlightSymbol (<span class="number">1.1</span>)</span></div><div class="line">-<span class="ruby"> OMColorSense (<span class="number">1.0</span>.<span class="number">1</span>)</span></div><div class="line"></div><div class="line">Updating...</div><div class="line"></div><div class="line">Finished! 🎉</div><div class="line"></div><div class="line">It seems that you have Xcode 8+ installed!</div><div class="line">Some plugins might not work on recent versions of Xcode because of library validation.</div><div class="line">See https://github.com/alcatraz/Alcatraz/issues/475</div><div class="line"></div><div class="line">Run `update_xcode_plugins --unsign` to fix this.</div></pre></td></tr></table></figure></p>
<p>在上面他提升我的某些插件可能会有问题需要使用 <code>update_xcode_plugins –unsign</code> 解决一下。<br>执行这条命令之后我忘记关XCode，按照提示关闭XCode后继续。<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> keyle@xiaonians-MacBook-Pro  ~  update_xcode_plugins <span class="comment">--unsign</span></div><div class="line">Looking <span class="keyword">for</span> Xcode...</div><div class="line"></div><div class="line">Unsigning Xcode will make <span class="keyword">it</span> skip library validation allowing <span class="keyword">it</span> <span class="keyword">to</span> load plugins.</div><div class="line">However, an unsigned Xcode presents security risks, <span class="keyword">and</span> will be untrusted <span class="keyword">by</span> both Apple <span class="keyword">and</span> your system.</div><div class="line">This tool will create a backup <span class="keyword">and</span> allow you <span class="keyword">to</span> restore Xcode's signature <span class="keyword">by</span> <span class="built_in">running</span></div><div class="line">$ update_xcode_plugins <span class="comment">--restore</span></div><div class="line"></div><div class="line">Choose which Xcode you would like <span class="keyword">to</span> unsign (use arrows): Xcode (<span class="number">10.1</span>) [Signed]: /Applications/Xcode.app</div><div class="line">Unsign xcodebuild too?: Yes</div><div class="line"></div><div class="line">Unsigning...</div><div class="line"></div><div class="line">* Changing ownership <span class="keyword">of</span> /Applications/Xcode.app/Contents/MacOS (will be restored <span class="keyword">after</span>)</div><div class="line">* Restored ownership <span class="keyword">of</span> /Applications/Xcode.app/Contents/MacOS</div><div class="line"></div><div class="line">* Changing ownership <span class="keyword">of</span> /Applications/Xcode.app/Contents/Developer/usr/bin (will be restored <span class="keyword">after</span>)</div><div class="line">* Restored ownership <span class="keyword">of</span> /Applications/Xcode.app/Contents/Developer/usr/bin</div><div class="line">Finish</div></pre></td></tr></table></figure></p>
<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p>这应该是我安装插件以来最轻松愉快的体验了。</p>
<p><img src="/uploads/QQ20190228-094023@2x.png" alt="看到Window菜单下的PackageManager了"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近用XCode写一些C++的测试，遇到一个问题，我升级过XCode所以现在看不到所有的旧插件了，网上找了一圈，需要手动创建证书然后重新对之前的插件进行签名。最后我找到一个插件可以很方便的对之前插件进行恢复。&lt;br&gt;
    
    </summary>
    
      <category term="XCode" scheme="http://vrast.cn/categories/XCode/"/>
    
    
      <category term="Plugins" scheme="http://vrast.cn/tags/Plugins/"/>
    
  </entry>
  
  <entry>
    <title>C# 4.0 - 7.0 新语法特性小结</title>
    <link href="http://vrast.cn/posts/594d3124/"/>
    <id>http://vrast.cn/posts/594d3124/</id>
    <published>2019-02-20T09:53:59.000Z</published>
    <updated>2019-02-26T01:03:34.456Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>本篇总结一些 C# 4.0 - 7.0的语法特性。 如今都是距离5.xUnity盛行的时代都过去两年多了，该看一看新语法不然要落伍啦。</p>
</blockquote>
<p>UNITY版本与C#版本关系<br>Unity 5.5.4  自带的Mono也可以支持C# 6，在mcs.rsp文件中添加一行：-langversion:6即可。<br>Unity 2017.1 C# 6.0 试验性地支持新脚本运行时。This includes Mono 4.8 and IL2CPP with support for C# 6 and .NET 4.6<br>Unity 2018.1 C# 7.2 </p>
<p>总的来说新特性还是在2018的运行环境下比较稳定，所以建议在2018下再去放开使用。下面列出的特性基本上都可以在2018中使用。不能使用的部分已经做了标注,下面是正文:</p>
<a id="more"></a>
<h1 id="比较重要的一些特性"><a href="#比较重要的一些特性" class="headerlink" title="比较重要的一些特性"></a>比较重要的一些特性</h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"><span class="comment">//---------静态引用，下面用到此命名空间下的函数可以直接调用---------- </span></div><div class="line"><span class="keyword">using</span> <span class="keyword">static</span> System.Console;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">Test1</span></div><div class="line">&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">public</span> Random random;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> Level &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="number">1</span>_000_000;</div><div class="line">        </div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> Hp =&gt; ++Level;</div><div class="line">        </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">var</span> p = <span class="keyword">new</span> Program();</div><div class="line">            </div><div class="line">            <span class="comment">//------------新属性赋值--------------</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</div><div class="line">            &#123;</div><div class="line">                p.PrintLog(p.Hp);</div><div class="line"><span class="comment">//                运行结果:</span></div><div class="line"><span class="comment">//                1000001</span></div><div class="line"><span class="comment">//                1000002</span></div><div class="line"><span class="comment">//                1000003</span></div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            </div><div class="line">            <span class="comment">//------------新异常条件与$字符串拼接--------------</span></div><div class="line">            <span class="keyword">try</span></div><div class="line">            &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Test Expection"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">catch</span> (Exception e) when (p.Hp == <span class="number">1000004</span>) <span class="comment">//新增条件设置 可以制定捕捉异常的条件</span></div><div class="line">            &#123;</div><div class="line">                WriteLine</div><div class="line">                (</div><div class="line">                    <span class="keyword">string</span>.Format(<span class="string">$"当前信息<span class="subst">&#123;e.Message&#125;</span>,hp为<span class="subst">&#123;p.Hp&#125;</span>"</span>) <span class="comment">//使用$符号即可使用花括号自定义拼接</span></div><div class="line">                );</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            </div><div class="line">            <span class="comment">//------------?.空指判断--------------</span></div><div class="line">            p.PrintLog(p.random?.Next(<span class="number">0</span>,<span class="number">10</span>));<span class="comment">//这行代码并不会执行 因为 random为null ,使用 ?. 来控制当前函数是否执行</span></div><div class="line"></div><div class="line">            </div><div class="line">            <span class="comment">//-------------下面两行是等价的，您可以使用下划线代替参数传入，相应也获取不到变更对象-----------------</span></div><div class="line">            <span class="comment">//p.PrintObject(out var test_p);  现在可以直接在括号内定义一个想要传入的参数</span></div><div class="line">            p.PrintObject(<span class="keyword">out</span> _); </div><div class="line">            </div><div class="line"></div><div class="line">            <span class="comment">//-------局部函数----------</span></div><div class="line">            PrintLog(<span class="string">"直接调用下面的局部函数，使用局部函数优于使用lambda"</span>); <span class="comment">//局部函数并未有代码行数上的优先级</span></div><div class="line">            <span class="function"><span class="keyword">void</span> <span class="title">PrintLog</span>(<span class="params"><span class="keyword">string</span> content</span>) </span>=&gt; WriteLine(content);</div><div class="line">            </div><div class="line">            <span class="comment">//-------使用return ref 减小开销----------</span></div><div class="line"><span class="comment">//            PrintLog(p.Avg(1,2).ToString());</span></div><div class="line">            </div><div class="line">            </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 使用 ref 减少值类型的复制   在 C#7.3中实现</span></div><div class="line"><span class="comment">//        public ref float Avg(int a, int b)</span></div><div class="line"><span class="comment">//        &#123;</span></div><div class="line"><span class="comment">//             float _avg = (a + b) / 2.0f;</span></div><div class="line"><span class="comment">//             return ref _avg;</span></div><div class="line"><span class="comment">//        &#125;</span></div><div class="line">        </div><div class="line"></div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintObject</span>(<span class="params"><span class="keyword">out</span> <span class="keyword">object</span> obj</span>)</span></div><div class="line">        &#123;</div><div class="line">            obj = <span class="keyword">new</span> Program();</div><div class="line">            WriteLine(<span class="keyword">nameof</span>(obj)); <span class="comment">// 使用 nameof 系统关键字来或者当前变量名</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//简略定义函数</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintLog</span>(<span class="params"><span class="keyword">int</span>? content</span>) </span>=&gt; WriteLine(content); <span class="comment">//静态引用 System.Console 命名空间，直接调用 Console.WriteLine 简写为 WriteLine</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>#元组分开列一下<br>元组和Lua,python,swift里的元组几乎大同小异。但是作为C#的最最重要的新工具还是着重测试一下。主要代码您可以直接参考下面列出的类，其中有一点没有描述，就是关于元组<code>== 运算符 </code> 的计算，他是从左到右依次比对的。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">Test1</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//-----元组的默认定义与访问方式--------</span></div><div class="line">            <span class="keyword">var</span> tuple_2 = (<span class="string">"content1"</span>,<span class="string">"content2"</span>);</div><div class="line">            Console.WriteLine(tuple_2.Item1 + tuple_2.Item2);</div><div class="line">            </div><div class="line">            <span class="comment">//同样的也可以像给变量起名一般自己定一个"变量名"</span></div><div class="line">            <span class="keyword">var</span> tuple_1 = (str1 : <span class="string">"content1"</span>,str2 : <span class="string">"content2"</span>);</div><div class="line">            Console.WriteLine(tuple_1.str1 + tuple_1.str2);</div><div class="line"></div><div class="line">            <span class="comment">//元组可以直接由函数返回</span></div><div class="line">            <span class="keyword">var</span> method_1 = Program.MethodTest();</div><div class="line">            Console.WriteLine(method_1.a + method_1.b);</div><div class="line">            </div><div class="line">            <span class="comment">//-----元组的解构-------</span></div><div class="line">            <span class="keyword">var</span> testCls = <span class="keyword">new</span> MyClass&#123; A = <span class="number">1</span>,B = <span class="number">2</span>,C = <span class="number">3</span>&#125;;</div><div class="line">            <span class="keyword">var</span>(args1, args2, args3) = testCls;</div><div class="line">            Console.WriteLine(<span class="string">$"当前args1:<span class="subst">&#123;args1&#125;</span>,args2:<span class="subst">&#123;args2&#125;</span>,args3:<span class="subst">&#123;args3&#125;</span>"</span>);</div><div class="line">            </div><div class="line">            <span class="comment">//元组解构的优先级默认如果本类中有实现则执行本类内部实现，如果没有则执行外部，如扩展函数</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">static</span> (<span class="keyword">int</span> a, <span class="keyword">int</span> b) MethodTest()</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">var</span> t = (<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">            <span class="keyword">return</span> t;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> A &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> B &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> C &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line">        </div><div class="line"><span class="comment">//        public void Deconstruct(out int a,out int b,out int c)</span></div><div class="line"><span class="comment">//        &#123;</span></div><div class="line"><span class="comment">//            a = A;</span></div><div class="line"><span class="comment">//            b = B;</span></div><div class="line"><span class="comment">//            c = C;</span></div><div class="line"><span class="comment">//        &#125;</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Extension4Tuple</span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Deconstruct</span>(<span class="params"><span class="keyword">this</span> MyClass cls, <span class="keyword">out</span> <span class="keyword">int</span> a, <span class="keyword">out</span> <span class="keyword">int</span> b, <span class="keyword">out</span> <span class="keyword">int</span> c</span>)</span></div><div class="line">        &#123;</div><div class="line">            a = <span class="number">10</span>;</div><div class="line">            b = <span class="number">11</span>;</div><div class="line">            c = <span class="number">12</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/tuples" target="_blank" rel="external">微软文档</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;本篇总结一些 C# 4.0 - 7.0的语法特性。 如今都是距离5.xUnity盛行的时代都过去两年多了，该看一看新语法不然要落伍啦。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;UNITY版本与C#版本关系&lt;br&gt;Unity 5.5.4  自带的Mono也可以支持C# 6，在mcs.rsp文件中添加一行：-langversion:6即可。&lt;br&gt;Unity 2017.1 C# 6.0 试验性地支持新脚本运行时。This includes Mono 4.8 and IL2CPP with support for C# 6 and .NET 4.6&lt;br&gt;Unity 2018.1 C# 7.2 &lt;/p&gt;
&lt;p&gt;总的来说新特性还是在2018的运行环境下比较稳定，所以建议在2018下再去放开使用。下面列出的特性基本上都可以在2018中使用。不能使用的部分已经做了标注,下面是正文:&lt;/p&gt;
    
    </summary>
    
    
      <category term="C#" scheme="http://vrast.cn/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Dispose接口的正确使用方法</title>
    <link href="http://vrast.cn/posts/6de8b164/"/>
    <id>http://vrast.cn/posts/6de8b164/</id>
    <published>2019-02-20T07:27:25.000Z</published>
    <updated>2019-02-21T13:14:24.468Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>我们知道在代码里自己写 Dispose 来释放一些资源。但是你真的用对了吗 ？ 本篇介绍一些不容易注意到的 GC 相关知识 。</p>
</blockquote>
<a id="more"></a>
<h1 id="到底什么时候需要使用到-IDispose-？"><a href="#到底什么时候需要使用到-IDispose-？" class="headerlink" title="到底什么时候需要使用到 IDispose ？"></a>到底什么时候需要使用到 IDispose ？</h1><p>当前类中出现 IO 操作。或者其他 跨语言调用,窗口和网络连接 之的非托管资源调用，这时才需要自己是实现一个IDispose 接口。其他的时候你并不需要去实现这样一个接口。我的做法是一般的类继承一个 IReset 接口，这个接口内只包含一个 Reset 函数 .<br>Dispose 接口是一个显示的调用，如果我们没有写这个接口，运行时他会在执行析构函数的时候清理资源。</p>
<h1 id="了解析构函数-终结器"><a href="#了解析构函数-终结器" class="headerlink" title="了解析构函数(终结器)"></a>了解析构函数(终结器)</h1><p>在使用Dispose 接口的同时 你或许同时会用到一个终结器。打个比方 如果你忘记显示调用 Dispose 函数的时候，程序还是会帮你清除非托管资源。</p>
<p>先观察以下析构函数<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">Car</span> </div><div class="line">&#123;</div><div class="line">    ~Car()  <span class="comment">// finalizer</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// cleanup statements...</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面的代码很简单，他等价于下面的代码</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Finalize</span>(<span class="params"></span>)  </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">try</span>  </div><div class="line">    &#123;  </div><div class="line">        <span class="comment">// Cleanup statements...  </span></div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">finally</span>  </div><div class="line">    &#123;  </div><div class="line">        <span class="keyword">base</span>.Finalize();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在你应该已经观察到这一行代码被隐式调用了,这行代码的意义是将当前运行时 Finalize 队列中创建一个条目，等待回收器来处理该队列。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">base</span>.Finalize();</div></pre></td></tr></table></figure>
<h1 id="正确的-“Dispose”"><a href="#正确的-“Dispose”" class="headerlink" title="正确的 “Dispose”"></a>正确的 “Dispose”</h1><p>我们再观察下面的代码<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// 这里实现了IDispose中的 Dispose方法</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//执行资源释放 xxxxxxxx</span></div><div class="line"></div><div class="line">        <span class="comment">//告诉GC此对象的Finalize方法不再需要调用</span></div><div class="line">        GC.SuppressFinalize(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ~MyClass()</div><div class="line">    &#123;</div><div class="line">        Dispose();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//下面我们使用using使用这个类</span></div><div class="line"><span class="keyword">using</span>(MyClass s = <span class="keyword">new</span> MyClass())&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>上面我们使用了 <code>GC.SuppressFinalize(this);</code> 函数，他会告诉GC的Finalize队列中移除当前，不必在执行 <code>Finalize()</code></p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><ol>
<li>在非托管资源操作中才去重写dispose接口，否则使用其他自定义接口去实现 Reset 操作</li>
<li>在非托管资源操作中才去重写析构函数，否则空析构函数也会造成不必要的性能损失</li>
<li>重写dispose接口的同时别忘了重写析构函数</li>
</ol>
<h1 id="文外话"><a href="#文外话" class="headerlink" title="文外话"></a>文外话</h1><p>在 C# 语言里对析构函数与终结器的描述似乎是同一个东西，这让我有一点困惑。我查询了一些论文他们是这样说的。如果你感兴趣也可以看一下</p>
<p>In the C# world the terms “destructor” and “finalizer” seem to be used pretty much interchangeably, which I suspect is because the C# specification describes the non-deterministic cleanup functionality using the word “destructor”, whereas the CLR documentation always uses the word “finalizer”, so within the realms of C# they mean the same thing.</p>
<p>However, in the C++/CLI specification there is a distinction made between the two. It allows both deterministic and non-deterministic cleanup, and uses the term “destructor” for the deterministic functionality and “finalizer” for the non-deterministic functionality:</p>
<p>在C＃世界术语“析构函数”和“终结”似乎要使用pretty多互换，我怀疑是因为C＃规范用字“析构函数”，描述了非确定性的清理功能，而CLR的文档始终使用单词“终结”，所以C＃的领域内，他们的意思是一样的。</p>
<p>然而，在C / CLI规范有两者之间作出区分。它同时允许确定性和非确定性的清理，并使用该确定的功能的非确定性的功能的术语“析构”和“终结”：</p>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/destructors" target="_blank" rel="external">Microsoft 编程指南</a></p>
<p><a href="http://www.it1352.com/382928.html" target="_blank" rel="external">析构函数和终结器的区别？(The difference between a destructor and a finalizer?</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;我们知道在代码里自己写 Dispose 来释放一些资源。但是你真的用对了吗 ？ 本篇介绍一些不容易注意到的 GC 相关知识 。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="C#" scheme="http://vrast.cn/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>C# language version history</title>
    <link href="http://vrast.cn/posts/d763b1b/"/>
    <id>http://vrast.cn/posts/d763b1b/</id>
    <published>2018-10-08T07:01:13.000Z</published>
    <updated>2018-10-08T06:45:48.709Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>These are the versions of C# known about at the time of this writing:</p>
</blockquote>
<ul>
<li>C# 1.0 released with .NET 1.0 and VS2002 (January 2002)</li>
<li>C# 1.2 (bizarrely enough); released with .NET 1.1 and VS2003 (April 2003). First version to call Dispose on IEnumerators which implemented IDisposable. A few other small features.</li>
<li>C# 2.0 released with .NET 2.0 and VS2005 (November 2005). Major new features: generics, anonymous methods, nullable types, iterator blocks</li>
<li>C# 3.0 released with .NET 3.5 and VS2008 (November 2007). Major new features: lambda expressions, extension methods, expression trees, anonymous types, implicit typing (var), query expressions</li>
<li>C# 4.0 released with .NET 4 and VS2010 (April 2010). Major new features: late binding (dynamic), delegate and interface generic variance, more COM support, named arguments, tuple data type and optional parameters</li>
<li>C# 5.0 released with .NET 4.5 and VS2012 (August 2012). Major features: async programming, caller info attributes. Breaking change: loop variable closure.</li>
<li>C# 6.0 released with .NET 4.6 and VS2015 (July 2015). Implemented by Roslyn. Features: initializers for automatically implemented properties, using directives to import static members, exception filters, element initializers, await in catch and finally, extension Add methods in collection initializers.</li>
<li>C# 7.0 released with .NET 4.7 and VS2017 (March 2017) Major new features: tuples, ref locals and ref return, pattern matching (including pattern-based switch statements), inline out parameter declarations, local functions, binary literals, digit separators, and arbitrary async returns.</li>
<li>C# 7.1 released with VS2017 v15.3 (August 2017) New features: async main, tuple member name inference, default expression, pattern matching with generics.</li>
<li>C# 7.2 released with VS2017 v15.5 (November 2017) New features: private protected access modifier, Span<t>, aka interior pointer, aka stackonly struct, everything else.</t></li>
<li>C# 7.3 released with VS2017 v15.7 (May 2018). New features: enum, delegate and unmanaged generic type constraints. ref reassignment. Unsafe improvements: stackalloc initialization, unpinned indexed fixed buffers, custom fixed statements. Improved overloading resolution. Expression variables in initializers and queries. == and != defined for tuples. Auto-properties’ backing fields can now be targeted by attributes.</li>
<li>C# 8.0 currently in preview. Expected new features: Non-nullable reference-types, IAsyncEnumerable<t> support, Ranges, and default interface methods.</t></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;These are the versions of C# known about at the time of this writing:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;C# 1.0 released with .NET 1
    
    </summary>
    
      <category term="SCRIPT" scheme="http://vrast.cn/categories/SCRIPT/"/>
    
    
      <category term="C#" scheme="http://vrast.cn/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>UNITY3D Timeline实践</title>
    <link href="http://vrast.cn/posts/cdaabbe3/"/>
    <id>http://vrast.cn/posts/cdaabbe3/</id>
    <published>2018-09-25T08:52:13.000Z</published>
    <updated>2018-10-25T01:22:47.492Z</updated>
    
    <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>如果您想动手尝试可以在AssetStore中获取到<a href="https://assetstore.unity.com/packages/essentials/default-playables-95266" target="_blank" rel="external">🔗 示例源码</a>，在 Default Playables 包中展示了大量的<strong>Playable API</strong>案例。在这里我们会挑比较有代表性的进行讲解。在案例中全部都是结合 <strong>Timeline</strong> 使用，由此可窥 “Playables API” 真是香饽饽，堪称万金油的存在。既能单独作为树型动画播放器使用又能够被 <strong>Timeline</strong> 所结合，不写代码也能做出复杂的游戏逻辑。当然 <strong>Timeline</strong> 同样适合处理各种动画需求等 如过场剧情，封面动画，甚至可以制作电影。本篇将会带大家从零开始使用Timeline进行剧情的编写，并且对相关 概念 以及 api 进行讲解。</p>
<a id="more"></a>
<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p><strong>Timeline</strong> 编辑器是一个什么样的存在 ？ 可以看作是强化版的 Animation 编辑器。他支持同时操控 N 个属性，就像是制作 flash 电影一样。在使用上策划编辑的时候不需要考虑脚本的实现只需要调用就行，程序这边不需要考虑调用时序只需要实现API并提供给策划即可。</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>.. 未完成 待续</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h1&gt;&lt;p&gt;如果您想动手尝试可以在AssetStore中获取到&lt;a href=&quot;https://assetstore.unity.com/packages/essentials/default-playables-95266&quot;&gt;🔗 示例源码&lt;/a&gt;，在 Default Playables 包中展示了大量的&lt;strong&gt;Playable API&lt;/strong&gt;案例。在这里我们会挑比较有代表性的进行讲解。在案例中全部都是结合 &lt;strong&gt;Timeline&lt;/strong&gt; 使用，由此可窥 “Playables API” 真是香饽饽，堪称万金油的存在。既能单独作为树型动画播放器使用又能够被 &lt;strong&gt;Timeline&lt;/strong&gt; 所结合，不写代码也能做出复杂的游戏逻辑。当然 &lt;strong&gt;Timeline&lt;/strong&gt; 同样适合处理各种动画需求等 如过场剧情，封面动画，甚至可以制作电影。本篇将会带大家从零开始使用Timeline进行剧情的编写，并且对相关 概念 以及 api 进行讲解。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Math Symbols in Markdown</title>
    <link href="http://vrast.cn/posts/183fa821/"/>
    <id>http://vrast.cn/posts/183fa821/</id>
    <published>2018-09-20T06:29:47.000Z</published>
    <updated>2018-09-20T07:20:39.128Z</updated>
    
    <content type="html"><![CDATA[<p>之前输入数学公式的一直用截图 自觉用户体验很差，最近发现用的这个主题带了好用的数学函数辅助，便一发不可收拾。顺便推荐一下我用的主题是<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="external">maupassant-hexo github</a> ,这里记录一下数学符的用法。</p>
<a id="more"></a>
<h1 id="maupassant-hexo的数学函数开启方式"><a href="#maupassant-hexo的数学函数开启方式" class="headerlink" title="maupassant-hexo的数学函数开启方式"></a>maupassant-hexo的数学函数开启方式</h1><p>其他的主题可能方式不一样 具体需要对照文档</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Math Equation</div><div class="line"></div><div class="line">Add</div><div class="line"></div><div class="line">mathjax: true</div><div class="line">in Hexo's _config.yml.</div><div class="line"></div><div class="line">In the post which you would like to use math equation, add mathjax: true in the front-matter. For example:</div><div class="line"></div><div class="line">title: Test Math</div><div class="line">date: 2016-04-05 14:16:00</div><div class="line">categories: math</div><div class="line">mathjax: true</div><div class="line">---</div><div class="line">The default math delimiters are $$...$$ and \\[...\\] for displayed mathematics, and $...$ and \\(...\\) for in-line mathematics.</div><div class="line"></div><div class="line">However, if your post contains dollar signs ($), and they appear often in non-mathematical parts, in other words, you want to use $ as dollar sign not inline math delimiter, please add</div><div class="line"></div><div class="line">mathjax2: true</div><div class="line">in Hexo's _config.yml instead of mathjax: true. Correspondingly, add mathjax2: true to the front-matter of the post in which you would like to use math equation.</div><div class="line"></div><div class="line">See the example.</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180920-143741.png" alt="添加标签则可用"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$</div><div class="line">    \\beta</div><div class="line">    \\alpha</div><div class="line">$</div></pre></td></tr></table></figure>
<p>效果如下：<br>$<br>    \beta<br>    \alpha<br>$ </p>
<p>或者这样以居中显示：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\\[\\beta \\alpha\\]</div></pre></td></tr></table></figure></p>
<p>\[\beta \alpha\]</p>
<h1 id="数学符"><a href="#数学符" class="headerlink" title="数学符"></a>数学符</h1><p>上面演示的 $\beta$ 之类的数学符号列表如下：</p>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\cos$</td>
<td>\cos</td>
</tr>
<tr>
<td>$\sin$</td>
<td>\sin</td>
</tr>
<tr>
<td>$\lim$</td>
<td>\lim</td>
</tr>
<tr>
<td>$\exp$</td>
<td>\exp</td>
</tr>
<tr>
<td>$\to$</td>
<td>\to</td>
</tr>
<tr>
<td>$\infty$</td>
<td>\infty</td>
</tr>
<tr>
<td>$\equiv$</td>
<td>\equiv</td>
</tr>
<tr>
<td>$\bmod$</td>
<td>\bmod</td>
</tr>
<tr>
<td>$\times$</td>
<td>\times</td>
</tr>
</tbody>
</table>
<h2 id="幂与指数"><a href="#幂与指数" class="headerlink" title="幂与指数"></a>幂与指数</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$k_{n+1}$</td>
<td>k_{n+1}</td>
</tr>
<tr>
<td>$n^2$</td>
<td>n^2</td>
</tr>
<tr>
<td>$k_n^2$</td>
<td>k_n^2</td>
</tr>
</tbody>
</table>
<h2 id="分数与二项式"><a href="#分数与二项式" class="headerlink" title="分数与二项式"></a>分数与二项式</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\frac{n!}{k!(n-k)!}$</td>
<td>\frac{n!}{k!(n-k)!}</td>
</tr>
<tr>
<td>$\binom{n}{k}$</td>
<td>\binom{n}{k}</td>
</tr>
<tr>
<td>$\frac{\frac{x}{1}}{x - y}$</td>
<td>\frac{\frac{x}{1}}{x - y}</td>
</tr>
<tr>
<td>$^3/_7$</td>
<td>^3/_7</td>
</tr>
</tbody>
</table>
<h2 id="根"><a href="#根" class="headerlink" title="根"></a>根</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\sqrt{k}$</td>
<td>\sqrt{k}</td>
</tr>
<tr>
<td>$\sqrt[n]{k}$</td>
<td>\sqrt[n]{k}</td>
</tr>
</tbody>
</table>
<h2 id="运算必须符"><a href="#运算必须符" class="headerlink" title="运算必须符"></a>运算必须符</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\sum_{i=1}^{10} t_i$</td>
<td>\sum_{i=1}^{10} t_i</td>
</tr>
<tr>
<td>$\int_0^\infty \mathrm{e}^{-x}\,\mathrm{d}x$</td>
<td>\int_0^\infty \mathrm{e}^{-x}\,\mathrm{d}x</td>
</tr>
<tr>
<td>$\sum$</td>
<td>\sum</td>
</tr>
<tr>
<td>$\prod$</td>
<td>\prod</td>
</tr>
<tr>
<td>$\coprod$</td>
<td>\coprod</td>
</tr>
<tr>
<td>$\bigoplus$</td>
<td>\bigoplus</td>
</tr>
<tr>
<td>$\bigotimes$</td>
<td>\bigotimes</td>
</tr>
<tr>
<td>$\bigodot$</td>
<td>\bigodot</td>
</tr>
<tr>
<td>$\bigcup$</td>
<td>\bigcup</td>
</tr>
<tr>
<td>$\bigcap$</td>
<td>\bigcap</td>
</tr>
<tr>
<td>$\biguplus$</td>
<td>\biguplus</td>
</tr>
<tr>
<td>$\bigsqcup$</td>
<td>\bigsqcup</td>
</tr>
<tr>
<td>$\bigvee$</td>
<td>\bigvee</td>
</tr>
<tr>
<td>$\bigwedge$</td>
<td>\bigwedge</td>
</tr>
<tr>
<td>$\int$</td>
<td>\int</td>
</tr>
<tr>
<td>$\oint$</td>
<td>\oint</td>
</tr>
<tr>
<td>$\iint$</td>
<td>\iint</td>
</tr>
<tr>
<td>$\iiint$</td>
<td>\iiint</td>
</tr>
<tr>
<td>$\idotsint$</td>
<td>\idotsint</td>
</tr>
<tr>
<td>$\sum_{\substack{0&lt;i&lt;m\0&lt;j&lt;n}} P(i, j)$</td>
<td>\sum_{\substack{0&lt;i&lt;m\0&lt;j&lt;n}} P(i, j)</td>
</tr>
<tr>
<td>$\int\limits_a^b$</td>
<td>\int\limits_a^b</td>
</tr>
<tr>
<td>$a’$ $a^{\prime}$</td>
<td>a` a^{\prime}</td>
</tr>
<tr>
<td>$a’’$</td>
<td>a’’</td>
</tr>
<tr>
<td>$\hat{a}$</td>
<td>hat{a}</td>
</tr>
<tr>
<td>$\bar{a}$</td>
<td>\bar{a}</td>
</tr>
<tr>
<td>$\grave{a}$</td>
<td>\grave{a}</td>
</tr>
<tr>
<td>$\acute{a}$</td>
<td>\acute{a}</td>
</tr>
<tr>
<td>$\dot{a}$</td>
<td>\dot{a}</td>
</tr>
<tr>
<td>$\ddot{a}$</td>
<td>\ddot{a}</td>
</tr>
<tr>
<td>$\not{a}$</td>
<td>\not{a}</td>
</tr>
<tr>
<td>$\mathring{a}$</td>
<td>\mathring{a}</td>
</tr>
<tr>
<td>$\overrightarrow{AB}$</td>
<td>\overrightarrow{AB}</td>
</tr>
<tr>
<td>$\overleftarrow{AB}$</td>
<td>\overleftarrow{AB}</td>
</tr>
<tr>
<td>$a’’’$</td>
<td>a’’’</td>
</tr>
<tr>
<td>$\overline{aaa}$</td>
<td>\overline{aaa}</td>
</tr>
<tr>
<td>$\check{a}$</td>
<td>\check{a}</td>
</tr>
<tr>
<td>$\vec{a}$</td>
<td>\vec{a}</td>
</tr>
<tr>
<td>$\underline{a}$</td>
<td>\underline{a}</td>
</tr>
<tr>
<td>$\color{red}x$</td>
<td>\color{red}x</td>
</tr>
<tr>
<td>$\pm$</td>
<td>\pm</td>
</tr>
<tr>
<td>$\mp$</td>
<td>\mp</td>
</tr>
<tr>
<td>$\int y \mathrm{d}x$</td>
<td>\int y \mathrm{d}x</td>
</tr>
<tr>
<td>$\,$</td>
<td>\,</td>
</tr>
<tr>
<td>$\:$</td>
<td>\:</td>
</tr>
<tr>
<td>$\;$</td>
<td>\;</td>
</tr>
<tr>
<td>$!$</td>
<td>!</td>
</tr>
<tr>
<td>$\int y\, \mathrm{d}x$</td>
<td>\int y\, \mathrm{d}x</td>
</tr>
<tr>
<td>$\dots$</td>
<td>\dots</td>
</tr>
<tr>
<td>$\ldots$</td>
<td>\ldots</td>
</tr>
<tr>
<td>$\cdots$</td>
<td>\cdots</td>
</tr>
<tr>
<td>$\vdots$</td>
<td>\vdots</td>
</tr>
<tr>
<td>$\ddots$</td>
<td>\ddots</td>
</tr>
</tbody>
</table>
<h2 id="括弧"><a href="#括弧" class="headerlink" title="括弧"></a>括弧</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$(a) $</td>
<td>(a)</td>
</tr>
<tr>
<td>$[a]  $</td>
<td>[a]</td>
</tr>
<tr>
<td>$a  $</td>
<td>{a}</td>
</tr>
<tr>
<td>$\langle f \rangle  $</td>
<td>\langle f \rangle</td>
</tr>
<tr>
<td>$\lfloor f \rfloor $</td>
<td>\lfloor f \rfloor</td>
</tr>
<tr>
<td>$\lceil f \rceil$</td>
<td>\lceil f \rceil</td>
</tr>
<tr>
<td>$\ulcorner f \urcorner$</td>
<td>\ulcorner f \urcorner</td>
</tr>
</tbody>
</table>
<p><a href="http://csrgxtu.github.io/2015/03/20/Writing-Mathematic-Fomulars-in-Markdown/" target="_blank" rel="external">🔗 Writing Mathematic Fomulars in Markdown – Archer Reilly</a></p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=fcrespo82.markdown-table-formatter#overview" target="_blank" rel="external">🔗 Markdown Table Formatter</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;之前输入数学公式的一直用截图 自觉用户体验很差，最近发现用的这个主题带了好用的数学函数辅助，便一发不可收拾。顺便推荐一下我用的主题是&lt;a href=&quot;https://github.com/tufu9441/maupassant-hexo&quot;&gt;maupassant-hexo github&lt;/a&gt; ,这里记录一下数学符的用法。&lt;/p&gt;
    
    </summary>
    
      <category term="Markdown" scheme="http://vrast.cn/categories/Markdown/"/>
    
    
      <category term="Math" scheme="http://vrast.cn/tags/Math/"/>
    
  </entry>
  
  <entry>
    <title>UNITY3D Playables API实践(下)</title>
    <link href="http://vrast.cn/posts/323c9fde/"/>
    <id>http://vrast.cn/posts/323c9fde/</id>
    <published>2018-09-19T09:33:28.000Z</published>
    <updated>2018-09-28T02:34:40.026Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>上篇给大家介绍了 “Playables API” 的使用方法与背后的意义，本篇将会进一步带大家深入其中。 本篇重点还是会放到  “Playables API” 上，不会对 <strong>Timeline</strong> 进行集中讲解，但是搞明白了 “Playables API” 也就意味着理解了 <strong>Timeline</strong> 最复杂的部分，到时候学起来也会非常的快。</p>
</blockquote>
<a id="more"></a>
<h1 id="快速回顾"><a href="#快速回顾" class="headerlink" title="快速回顾"></a>快速回顾</h1><p>在本篇开始前我们先快速的回顾一下上篇的内容：</p>
<ol>
<li><p>“Playables API” 的意义 ？<br>答：替换Legacy动画系统，并兼容Timeline 。</p>
</li>
<li><p>如何创建 “Playables 树 ？</p>
</li>
</ol>
<p>答：五行代码就可以快速创建！</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable = AnimationClipPlayable.Create(playableGraph, clip);</div><div class="line">playableOutput.SetSourcePlayable(clipPlayable);</div><div class="line"></div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
<ol>
<li>没有图形化界面时我们该如何记忆节点链接方式 ？<br>答：右输入(数量) 左输出(数量)，根节点有左边口，普通节点两边有 。</li>
</ol>
<h1 id="正文：更复杂的API运用方式"><a href="#正文：更复杂的API运用方式" class="headerlink" title="正文：更复杂的API运用方式"></a>正文：更复杂的API运用方式</h1><h2 id="使用-Animation-Layer"><a href="#使用-Animation-Layer" class="headerlink" title="使用 Animation Layer"></a>使用 Animation Layer</h2><p>上一篇我们提到使用 XXXMixerPlayable 可以用来融合多个动画/音频等。那么想在一个角色的身上同时播两个或多个互不干扰的动画该如何处理呢？ </p>
<p>想必大家都想到了，没错，就是使用 Animation Layer (动画层) 的技术。在 Animator 中常使用 Avatar Mask 来设置不同部位的遮罩，让其他部分的动画各司其职。</p>
<p>现在我们来看一看 Animation Layer 技术如何在 “Playerable API” 中使用吧。</p>
<p><img src="/uploads/bodylowermask.png" alt="第一步先制作遮罩，关闭身体上半的动画控制"></p>
<p>代码案例如下，您可以看见这里与上一篇我们讲到的 <strong>AnimationMixerPlayable</strong> 是不是保持了高度一致 ？ 这可不是架构的功劳，而是得益于代码风格的统一。无论是在 <strong>AnimationMixerPlayable</strong> 或 <strong>AnimationLayerMixerPlayable</strong> 其中都有统一的静态函数 <code>Create</code> ,良好的代码风格能让阅读者轻松掌握代码规律，从而减少阅读时间 。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> AnimationClip clip1;</div><div class="line"><span class="keyword">public</span> AnimationClip clip2;</div><div class="line"><span class="keyword">private</span> Animator _animator;</div><div class="line"><span class="keyword">private</span> AnimationLayerMixerPlayable mixerPlayable;</div><div class="line"><span class="keyword">public</span>  <span class="keyword">float</span> weight = <span class="number">.5</span>f;</div><div class="line"></div><div class="line"><span class="keyword">public</span> AvatarMask LowerMask;</div><div class="line"></div><div class="line"><span class="keyword">public</span> PlayableGraph playableGraph;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line">    <span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line">    mixerPlayable = AnimationLayerMixerPlayable.Create(playableGraph, <span class="number">2</span>);</div><div class="line">    mixerPlayable.SetLayerMaskFromAvatarMask(<span class="number">1</span>,LowerMask);<span class="comment">//设置遮罩到1层</span></div><div class="line">    </div><div class="line">    playableOutput.SetSourcePlayable(mixerPlayable);</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip1);</div><div class="line">    <span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line">    </div><div class="line">    mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//设置权重1</span></div><div class="line">    mixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable2,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//设置权重1</span></div><div class="line">    </div><div class="line">    playableGraph.Play();</div><div class="line">    </div><div class="line">    GraphVisualizerClient.Show(playableGraph);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>请注意上面有一些不同与之前的看到的 <strong>AnimationMixerPlayable</strong> ，这里连接的两个动画权重均为1.为什么不是 0.5 与 0.5 ?<br>因为现在是同时播放不同于融合。融合需要两种动画过渡权重，而分层则是将模型分为两个区间，0区间播放Clip1，1区间播放Clip2，这是完全同步又独立的。</p>
<p><img src="/uploads/QQ20180927-105649-HD.gif" alt="效果图：上身播放跳跃，下身播放跑动"></p>
<h2 id="动态添加动画"><a href="#动态添加动画" class="headerlink" title="动态添加动画"></a>动态添加动画</h2><p>之前我们使用<strong>Animator</strong>的时候需要将所有使用到的动画都加入其中。现在我们使用 <strong>ConnectInput &amp; DisconnectInput</strong> API 就能轻易的切换动画。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (Input.GetKeyUp(KeyCode.A))</div><div class="line">    &#123;</div><div class="line">        mixerPlayable.DisconnectInput(<span class="number">0</span>);</div><div class="line">        <span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip3);</div><div class="line">        mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180927-120130-HD.gif" alt="效果图：上身切换到胜利动画，下身播放跑动"></p>
<h3 id="动态切换的优化"><a href="#动态切换的优化" class="headerlink" title="动态切换的优化"></a>动态切换的优化</h3><p>刚才我们实现了动态的切换动画。效果是达到了，可是动画是硬过渡。如果现在只有<code>Connect  &amp; Disconnect</code>接口那么API真的无法帮我们达到动画的融合过渡！<br>现在我们现在来优化一下这段动画硬切的过程，使其达到融合过渡的效果(淡入淡出)。</p>
<h4 id="方式一-使用AnimationMixerPlayable-API"><a href="#方式一-使用AnimationMixerPlayable-API" class="headerlink" title="方式一 使用AnimationMixerPlayable API"></a>方式一 使用AnimationMixerPlayable API</h4><p>使用动画融合节点控制权重实现动画融合，使用这种方式需要实现一个自定义Playable，以list作为容器才能实现复用，否则就是hardcode了 。下面代码展示了最简方式使用融合节点。<br><img src="/uploads/QQ20180927-163146-HD.gif" alt="效果图：上身融合跳跃与胜利动画"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mixerPlayable = AnimationMixerPlayable.Create(layerMixerPlayable.GetGraph(),<span class="number">2</span>);</div><div class="line"><span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip1);</div><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line"><span class="keyword">var</span> clipPlayable3 = AnimationClipPlayable.Create(playableGraph, clip3);</div><div class="line"></div><div class="line">mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">mixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable3,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"></div><div class="line">layerMixerPlayable.ConnectInput(<span class="number">0</span>,mixerPlayable,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">layerMixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable2,<span class="number">0</span>,<span class="number">1</span>);</div></pre></td></tr></table></figure>
<h4 id="方式二-使用Animator"><a href="#方式二-使用Animator" class="headerlink" title="方式二 使用Animator"></a>方式二 使用Animator</h4><p><img src="/uploads/QQ20180927-170717.png" alt="效果图：创建融合状态机"><br>同样的我们使用融合状态机实现这个过渡效果。这种方式(Animator+PlayableAPI))让策划或者美术配置也是一种不错的选择。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">animatorController = AnimatorControllerPlayable.Create(layerMixerPlayable.GetGraph(), animationController);</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line"></div><div class="line">layerMixerPlayable.ConnectInput(<span class="number">0</span>,animatorController,<span class="number">0</span>,<span class="number">1</span>);</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180927-170915-HD.gif" alt="效果图：上身融合跳跃与胜利动画"></p>
<h4 id="方式三-纯Playable-API"><a href="#方式三-纯Playable-API" class="headerlink" title="方式三 纯Playable API"></a>方式三 纯Playable API</h4><p>下面我们要介绍的这种过渡模式是纯代码实现，类似与lengcy api里的Animation CrossFade. 原理就是利用<code>Connect  &amp; Disconnect</code> 动态开关节点实现过渡，完毕后重新连接回来。具体实现方式可参考 <strong>方式一</strong></p>
<h2 id="使用Bone-IK"><a href="#使用Bone-IK" class="headerlink" title="使用Bone IK"></a>使用Bone IK</h2><p><del> 现在我们再来看看更高级的用法 骨骼IK动画。如果我们需要做一些更逼真的效果IK技术是少不了的。为了方便展示 我们在这边Clone一下代码。</del></p>
<p>在我写本篇的时候我发现官方在 2018.8.29日 发过关于Playable API 调用IK动画的范例，这里就再重复的赘述。下面是原文链接 <a href="http://forum.china.unity3d.com/thread-32814-1-1.html" target="_blank" rel="external">🔗 [技术] 详解Animation C# Jobs</a></p>
<p>您可以直接克隆下面的代码范例中检验效果。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Clone https:<span class="comment">//github.com/KeyleXiao/animation-jobs-samples.git</span></div></pre></td></tr></table></figure>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>总体而言Playable API提供了更低层的操作方式，对于使用者的要求更高。如果您现在想要在项目中实践建议先不要用高级特性(ik部分)，因为这部分的功能目前还是实验性功能，API的相关文档并不完善。使用动画的控制API进行 Lengacy Animation的替换工作还是很有意义，不仅在与效率，与Timeline结合使用更能发挥出事半功倍的效果。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;上篇给大家介绍了 “Playables API” 的使用方法与背后的意义，本篇将会进一步带大家深入其中。 本篇重点还是会放到  “Playables API” 上，不会对 &lt;strong&gt;Timeline&lt;/strong&gt; 进行集中讲解，但是搞明白了 “Playables API” 也就意味着理解了 &lt;strong&gt;Timeline&lt;/strong&gt; 最复杂的部分，到时候学起来也会非常的快。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="ANIMATION" scheme="http://vrast.cn/tags/ANIMATION/"/>
    
  </entry>
  
</feed>
