<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lazybones Kill PLAN</title>
  <subtitle>In me the tiger sniffs the rose</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://vrast.cn/"/>
  <updated>2018-10-08T06:45:48.709Z</updated>
  <id>http://vrast.cn/</id>
  
  <author>
    <name>keyle xiao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>C# language version history</title>
    <link href="http://vrast.cn/posts/d763b1b/"/>
    <id>http://vrast.cn/posts/d763b1b/</id>
    <published>2018-10-08T07:01:13.000Z</published>
    <updated>2018-10-08T06:45:48.709Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>These are the versions of C# known about at the time of this writing:</p>
</blockquote>
<ul>
<li>C# 1.0 released with .NET 1.0 and VS2002 (January 2002)</li>
<li>C# 1.2 (bizarrely enough); released with .NET 1.1 and VS2003 (April 2003). First version to call Dispose on IEnumerators which implemented IDisposable. A few other small features.</li>
<li>C# 2.0 released with .NET 2.0 and VS2005 (November 2005). Major new features: generics, anonymous methods, nullable types, iterator blocks</li>
<li>C# 3.0 released with .NET 3.5 and VS2008 (November 2007). Major new features: lambda expressions, extension methods, expression trees, anonymous types, implicit typing (var), query expressions</li>
<li>C# 4.0 released with .NET 4 and VS2010 (April 2010). Major new features: late binding (dynamic), delegate and interface generic variance, more COM support, named arguments, tuple data type and optional parameters</li>
<li>C# 5.0 released with .NET 4.5 and VS2012 (August 2012). Major features: async programming, caller info attributes. Breaking change: loop variable closure.</li>
<li>C# 6.0 released with .NET 4.6 and VS2015 (July 2015). Implemented by Roslyn. Features: initializers for automatically implemented properties, using directives to import static members, exception filters, element initializers, await in catch and finally, extension Add methods in collection initializers.</li>
<li>C# 7.0 released with .NET 4.7 and VS2017 (March 2017) Major new features: tuples, ref locals and ref return, pattern matching (including pattern-based switch statements), inline out parameter declarations, local functions, binary literals, digit separators, and arbitrary async returns.</li>
<li>C# 7.1 released with VS2017 v15.3 (August 2017) New features: async main, tuple member name inference, default expression, pattern matching with generics.</li>
<li>C# 7.2 released with VS2017 v15.5 (November 2017) New features: private protected access modifier, Span<t>, aka interior pointer, aka stackonly struct, everything else.</t></li>
<li>C# 7.3 released with VS2017 v15.7 (May 2018). New features: enum, delegate and unmanaged generic type constraints. ref reassignment. Unsafe improvements: stackalloc initialization, unpinned indexed fixed buffers, custom fixed statements. Improved overloading resolution. Expression variables in initializers and queries. == and != defined for tuples. Auto-propertiesâ€™ backing fields can now be targeted by attributes.</li>
<li>C# 8.0 currently in preview. Expected new features: Non-nullable reference-types, IAsyncEnumerable<t> support, Ranges, and default interface methods.</t></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;These are the versions of C# known about at the time of this writing:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;C# 1.0 released with .NET 1
    
    </summary>
    
      <category term="SCRIPT" scheme="http://vrast.cn/categories/SCRIPT/"/>
    
    
      <category term="C#" scheme="http://vrast.cn/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>UNITY3D Timelineå®è·µ</title>
    <link href="http://vrast.cn/posts/cdaabbe3/"/>
    <id>http://vrast.cn/posts/cdaabbe3/</id>
    <published>2018-09-25T08:52:13.000Z</published>
    <updated>2018-10-12T03:18:55.658Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>å¦‚æœæ‚¨æƒ³åŠ¨æ‰‹å°è¯•å¯ä»¥åœ¨AssetStoreä¸­è·å–åˆ°<a href="https://assetstore.unity.com/packages/essentials/default-playables-95266" target="_blank" rel="external">ğŸ”— ç¤ºä¾‹æºç </a>ï¼Œåœ¨ Default Playables åŒ…ä¸­å±•ç¤ºäº†å¤§é‡çš„<strong>Playable API</strong>æ¡ˆä¾‹ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä¼šæŒ‘æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„è¿›è¡Œè®²è§£ã€‚åœ¨æ¡ˆä¾‹ä¸­å…¨éƒ¨éƒ½æ˜¯ç»“åˆ <strong>Timeline</strong> ä½¿ç”¨ï¼Œç”±æ­¤å¯çª¥ â€œPlayables APIâ€ çœŸæ˜¯é¦™é¥½é¥½ï¼Œå ªç§°ä¸‡é‡‘æ²¹çš„å­˜åœ¨ã€‚æ—¢èƒ½å•ç‹¬ä½œä¸ºæ ‘å‹åŠ¨ç”»æ’­æ”¾å™¨ä½¿ç”¨åˆèƒ½å¤Ÿè¢« <strong>Timeline</strong> æ‰€ç»“åˆï¼Œä¸å†™ä»£ç ä¹Ÿèƒ½åšå‡ºå¤æ‚çš„æ¸¸æˆé€»è¾‘ã€‚å½“ç„¶ <strong>Timeline</strong> åŒæ ·é€‚åˆå¤„ç†å„ç§åŠ¨ç”»éœ€æ±‚ç­‰ å¦‚è¿‡åœºå‰§æƒ…ï¼Œå°é¢åŠ¨ç”»ï¼Œç”šè‡³å¯ä»¥åˆ¶ä½œç”µå½±ã€‚æœ¬ç¯‡å°†ä¼šå¸¦å¤§å®¶ä»é›¶å¼€å§‹ä½¿ç”¨Timelineè¿›è¡Œå‰§æƒ…çš„ç¼–å†™ï¼Œå¹¶ä¸”å¯¹ç›¸å…³ æ¦‚å¿µ ä»¥åŠ api è¿›è¡Œè®²è§£ã€‚</p>
<a id="more"></a>
<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p><strong>Timeline</strong> ç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„å­˜åœ¨ ï¼Ÿ å¯ä»¥çœ‹ä½œæ˜¯å¼ºåŒ–ç‰ˆçš„ Animation ç¼–è¾‘å™¨ã€‚ä»–æ”¯æŒåŒæ—¶æ“æ§ N ä¸ªå±æ€§ï¼Œå°±åƒæ˜¯åˆ¶ä½œ flash ç”µå½±ä¸€æ ·ã€‚åœ¨ä½¿ç”¨ä¸Šç­–åˆ’ç¼–è¾‘çš„æ—¶å€™ä¸éœ€è¦è€ƒè™‘è„šæœ¬çš„å®ç°åªéœ€è¦è°ƒç”¨å°±è¡Œï¼Œç¨‹åºè¿™è¾¹ä¸éœ€è¦è€ƒè™‘è°ƒç”¨æ—¶åºåªéœ€è¦å®ç°APIå¹¶æä¾›ç»™ç­–åˆ’å³å¯ã€‚</p>
<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h1&gt;&lt;p&gt;å¦‚æœæ‚¨æƒ³åŠ¨æ‰‹å°è¯•å¯ä»¥åœ¨AssetStoreä¸­è·å–åˆ°&lt;a href=&quot;https://assetstore.unity.com/packages/essentials/default-playables-95266&quot;&gt;ğŸ”— ç¤ºä¾‹æºç &lt;/a&gt;ï¼Œåœ¨ Default Playables åŒ…ä¸­å±•ç¤ºäº†å¤§é‡çš„&lt;strong&gt;Playable API&lt;/strong&gt;æ¡ˆä¾‹ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä¼šæŒ‘æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„è¿›è¡Œè®²è§£ã€‚åœ¨æ¡ˆä¾‹ä¸­å…¨éƒ¨éƒ½æ˜¯ç»“åˆ &lt;strong&gt;Timeline&lt;/strong&gt; ä½¿ç”¨ï¼Œç”±æ­¤å¯çª¥ â€œPlayables APIâ€ çœŸæ˜¯é¦™é¥½é¥½ï¼Œå ªç§°ä¸‡é‡‘æ²¹çš„å­˜åœ¨ã€‚æ—¢èƒ½å•ç‹¬ä½œä¸ºæ ‘å‹åŠ¨ç”»æ’­æ”¾å™¨ä½¿ç”¨åˆèƒ½å¤Ÿè¢« &lt;strong&gt;Timeline&lt;/strong&gt; æ‰€ç»“åˆï¼Œä¸å†™ä»£ç ä¹Ÿèƒ½åšå‡ºå¤æ‚çš„æ¸¸æˆé€»è¾‘ã€‚å½“ç„¶ &lt;strong&gt;Timeline&lt;/strong&gt; åŒæ ·é€‚åˆå¤„ç†å„ç§åŠ¨ç”»éœ€æ±‚ç­‰ å¦‚è¿‡åœºå‰§æƒ…ï¼Œå°é¢åŠ¨ç”»ï¼Œç”šè‡³å¯ä»¥åˆ¶ä½œç”µå½±ã€‚æœ¬ç¯‡å°†ä¼šå¸¦å¤§å®¶ä»é›¶å¼€å§‹ä½¿ç”¨Timelineè¿›è¡Œå‰§æƒ…çš„ç¼–å†™ï¼Œå¹¶ä¸”å¯¹ç›¸å…³ æ¦‚å¿µ ä»¥åŠ api è¿›è¡Œè®²è§£ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Math Symbols in Markdown</title>
    <link href="http://vrast.cn/posts/183fa821/"/>
    <id>http://vrast.cn/posts/183fa821/</id>
    <published>2018-09-20T06:29:47.000Z</published>
    <updated>2018-09-20T07:20:39.128Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰è¾“å…¥æ•°å­¦å…¬å¼çš„ä¸€ç›´ç”¨æˆªå›¾ è‡ªè§‰ç”¨æˆ·ä½“éªŒå¾ˆå·®ï¼Œæœ€è¿‘å‘ç°ç”¨çš„è¿™ä¸ªä¸»é¢˜å¸¦äº†å¥½ç”¨çš„æ•°å­¦å‡½æ•°è¾…åŠ©ï¼Œä¾¿ä¸€å‘ä¸å¯æ”¶æ‹¾ã€‚é¡ºä¾¿æ¨èä¸€ä¸‹æˆ‘ç”¨çš„ä¸»é¢˜æ˜¯<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="external">maupassant-hexo github</a> ,è¿™é‡Œè®°å½•ä¸€ä¸‹æ•°å­¦ç¬¦çš„ç”¨æ³•ã€‚</p>
<a id="more"></a>
<h1 id="maupassant-hexoçš„æ•°å­¦å‡½æ•°å¼€å¯æ–¹å¼"><a href="#maupassant-hexoçš„æ•°å­¦å‡½æ•°å¼€å¯æ–¹å¼" class="headerlink" title="maupassant-hexoçš„æ•°å­¦å‡½æ•°å¼€å¯æ–¹å¼"></a>maupassant-hexoçš„æ•°å­¦å‡½æ•°å¼€å¯æ–¹å¼</h1><p>å…¶ä»–çš„ä¸»é¢˜å¯èƒ½æ–¹å¼ä¸ä¸€æ · å…·ä½“éœ€è¦å¯¹ç…§æ–‡æ¡£</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Math Equation</div><div class="line"></div><div class="line">Add</div><div class="line"></div><div class="line">mathjax: true</div><div class="line">in Hexo's _config.yml.</div><div class="line"></div><div class="line">In the post which you would like to use math equation, add mathjax: true in the front-matter. For example:</div><div class="line"></div><div class="line">title: Test Math</div><div class="line">date: 2016-04-05 14:16:00</div><div class="line">categories: math</div><div class="line">mathjax: true</div><div class="line">---</div><div class="line">The default math delimiters are $$...$$ and \\[...\\] for displayed mathematics, and $...$ and \\(...\\) for in-line mathematics.</div><div class="line"></div><div class="line">However, if your post contains dollar signs ($), and they appear often in non-mathematical parts, in other words, you want to use $ as dollar sign not inline math delimiter, please add</div><div class="line"></div><div class="line">mathjax2: true</div><div class="line">in Hexo's _config.yml instead of mathjax: true. Correspondingly, add mathjax2: true to the front-matter of the post in which you would like to use math equation.</div><div class="line"></div><div class="line">See the example.</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180920-143741.png" alt="æ·»åŠ æ ‡ç­¾åˆ™å¯ç”¨"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$</div><div class="line">    \\beta</div><div class="line">    \\alpha</div><div class="line">$</div></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<br>$<br>    \beta<br>    \alpha<br>$ </p>
<p>æˆ–è€…è¿™æ ·ä»¥å±…ä¸­æ˜¾ç¤ºï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\\[\\beta \\alpha\\]</div></pre></td></tr></table></figure></p>
<p>\[\beta \alpha\]</p>
<h1 id="æ•°å­¦ç¬¦"><a href="#æ•°å­¦ç¬¦" class="headerlink" title="æ•°å­¦ç¬¦"></a>æ•°å­¦ç¬¦</h1><p>ä¸Šé¢æ¼”ç¤ºçš„ $\beta$ ä¹‹ç±»çš„æ•°å­¦ç¬¦å·åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\cos$</td>
<td>\cos</td>
</tr>
<tr>
<td>$\sin$</td>
<td>\sin</td>
</tr>
<tr>
<td>$\lim$</td>
<td>\lim</td>
</tr>
<tr>
<td>$\exp$</td>
<td>\exp</td>
</tr>
<tr>
<td>$\to$</td>
<td>\to</td>
</tr>
<tr>
<td>$\infty$</td>
<td>\infty</td>
</tr>
<tr>
<td>$\equiv$</td>
<td>\equiv</td>
</tr>
<tr>
<td>$\bmod$</td>
<td>\bmod</td>
</tr>
<tr>
<td>$\times$</td>
<td>\times</td>
</tr>
</tbody>
</table>
<h2 id="å¹‚ä¸æŒ‡æ•°"><a href="#å¹‚ä¸æŒ‡æ•°" class="headerlink" title="å¹‚ä¸æŒ‡æ•°"></a>å¹‚ä¸æŒ‡æ•°</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$k_{n+1}$</td>
<td>k_{n+1}</td>
</tr>
<tr>
<td>$n^2$</td>
<td>n^2</td>
</tr>
<tr>
<td>$k_n^2$</td>
<td>k_n^2</td>
</tr>
</tbody>
</table>
<h2 id="åˆ†æ•°ä¸äºŒé¡¹å¼"><a href="#åˆ†æ•°ä¸äºŒé¡¹å¼" class="headerlink" title="åˆ†æ•°ä¸äºŒé¡¹å¼"></a>åˆ†æ•°ä¸äºŒé¡¹å¼</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\frac{n!}{k!(n-k)!}$</td>
<td>\frac{n!}{k!(n-k)!}</td>
</tr>
<tr>
<td>$\binom{n}{k}$</td>
<td>\binom{n}{k}</td>
</tr>
<tr>
<td>$\frac{\frac{x}{1}}{x - y}$</td>
<td>\frac{\frac{x}{1}}{x - y}</td>
</tr>
<tr>
<td>$^3/_7$</td>
<td>^3/_7</td>
</tr>
</tbody>
</table>
<h2 id="æ ¹"><a href="#æ ¹" class="headerlink" title="æ ¹"></a>æ ¹</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\sqrt{k}$</td>
<td>\sqrt{k}</td>
</tr>
<tr>
<td>$\sqrt[n]{k}$</td>
<td>\sqrt[n]{k}</td>
</tr>
</tbody>
</table>
<h2 id="è¿ç®—å¿…é¡»ç¬¦"><a href="#è¿ç®—å¿…é¡»ç¬¦" class="headerlink" title="è¿ç®—å¿…é¡»ç¬¦"></a>è¿ç®—å¿…é¡»ç¬¦</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\sum_{i=1}^{10} t_i$</td>
<td>\sum_{i=1}^{10} t_i</td>
</tr>
<tr>
<td>$\int_0^\infty \mathrm{e}^{-x}\,\mathrm{d}x$</td>
<td>\int_0^\infty \mathrm{e}^{-x}\,\mathrm{d}x</td>
</tr>
<tr>
<td>$\sum$</td>
<td>\sum</td>
</tr>
<tr>
<td>$\prod$</td>
<td>\prod</td>
</tr>
<tr>
<td>$\coprod$</td>
<td>\coprod</td>
</tr>
<tr>
<td>$\bigoplus$</td>
<td>\bigoplus</td>
</tr>
<tr>
<td>$\bigotimes$</td>
<td>\bigotimes</td>
</tr>
<tr>
<td>$\bigodot$</td>
<td>\bigodot</td>
</tr>
<tr>
<td>$\bigcup$</td>
<td>\bigcup</td>
</tr>
<tr>
<td>$\bigcap$</td>
<td>\bigcap</td>
</tr>
<tr>
<td>$\biguplus$</td>
<td>\biguplus</td>
</tr>
<tr>
<td>$\bigsqcup$</td>
<td>\bigsqcup</td>
</tr>
<tr>
<td>$\bigvee$</td>
<td>\bigvee</td>
</tr>
<tr>
<td>$\bigwedge$</td>
<td>\bigwedge</td>
</tr>
<tr>
<td>$\int$</td>
<td>\int</td>
</tr>
<tr>
<td>$\oint$</td>
<td>\oint</td>
</tr>
<tr>
<td>$\iint$</td>
<td>\iint</td>
</tr>
<tr>
<td>$\iiint$</td>
<td>\iiint</td>
</tr>
<tr>
<td>$\idotsint$</td>
<td>\idotsint</td>
</tr>
<tr>
<td>$\sum_{\substack{0&lt;i&lt;m\0&lt;j&lt;n}} P(i, j)$</td>
<td>\sum_{\substack{0&lt;i&lt;m\0&lt;j&lt;n}} P(i, j)</td>
</tr>
<tr>
<td>$\int\limits_a^b$</td>
<td>\int\limits_a^b</td>
</tr>
<tr>
<td>$aâ€™$ $a^{\prime}$</td>
<td>a` a^{\prime}</td>
</tr>
<tr>
<td>$aâ€™â€™$</td>
<td>aâ€™â€™</td>
</tr>
<tr>
<td>$\hat{a}$</td>
<td>hat{a}</td>
</tr>
<tr>
<td>$\bar{a}$</td>
<td>\bar{a}</td>
</tr>
<tr>
<td>$\grave{a}$</td>
<td>\grave{a}</td>
</tr>
<tr>
<td>$\acute{a}$</td>
<td>\acute{a}</td>
</tr>
<tr>
<td>$\dot{a}$</td>
<td>\dot{a}</td>
</tr>
<tr>
<td>$\ddot{a}$</td>
<td>\ddot{a}</td>
</tr>
<tr>
<td>$\not{a}$</td>
<td>\not{a}</td>
</tr>
<tr>
<td>$\mathring{a}$</td>
<td>\mathring{a}</td>
</tr>
<tr>
<td>$\overrightarrow{AB}$</td>
<td>\overrightarrow{AB}</td>
</tr>
<tr>
<td>$\overleftarrow{AB}$</td>
<td>\overleftarrow{AB}</td>
</tr>
<tr>
<td>$aâ€™â€™â€™$</td>
<td>aâ€™â€™â€™</td>
</tr>
<tr>
<td>$\overline{aaa}$</td>
<td>\overline{aaa}</td>
</tr>
<tr>
<td>$\check{a}$</td>
<td>\check{a}</td>
</tr>
<tr>
<td>$\vec{a}$</td>
<td>\vec{a}</td>
</tr>
<tr>
<td>$\underline{a}$</td>
<td>\underline{a}</td>
</tr>
<tr>
<td>$\color{red}x$</td>
<td>\color{red}x</td>
</tr>
<tr>
<td>$\pm$</td>
<td>\pm</td>
</tr>
<tr>
<td>$\mp$</td>
<td>\mp</td>
</tr>
<tr>
<td>$\int y \mathrm{d}x$</td>
<td>\int y \mathrm{d}x</td>
</tr>
<tr>
<td>$\,$</td>
<td>\,</td>
</tr>
<tr>
<td>$\:$</td>
<td>\:</td>
</tr>
<tr>
<td>$\;$</td>
<td>\;</td>
</tr>
<tr>
<td>$!$</td>
<td>!</td>
</tr>
<tr>
<td>$\int y\, \mathrm{d}x$</td>
<td>\int y\, \mathrm{d}x</td>
</tr>
<tr>
<td>$\dots$</td>
<td>\dots</td>
</tr>
<tr>
<td>$\ldots$</td>
<td>\ldots</td>
</tr>
<tr>
<td>$\cdots$</td>
<td>\cdots</td>
</tr>
<tr>
<td>$\vdots$</td>
<td>\vdots</td>
</tr>
<tr>
<td>$\ddots$</td>
<td>\ddots</td>
</tr>
</tbody>
</table>
<h2 id="æ‹¬å¼§"><a href="#æ‹¬å¼§" class="headerlink" title="æ‹¬å¼§"></a>æ‹¬å¼§</h2><table>
<thead>
<tr>
<th>Symbol</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>$(a) $</td>
<td>(a)</td>
</tr>
<tr>
<td>$[a]  $</td>
<td>[a]</td>
</tr>
<tr>
<td>$a  $</td>
<td>{a}</td>
</tr>
<tr>
<td>$\langle f \rangle  $</td>
<td>\langle f \rangle</td>
</tr>
<tr>
<td>$\lfloor f \rfloor $</td>
<td>\lfloor f \rfloor</td>
</tr>
<tr>
<td>$\lceil f \rceil$</td>
<td>\lceil f \rceil</td>
</tr>
<tr>
<td>$\ulcorner f \urcorner$</td>
<td>\ulcorner f \urcorner</td>
</tr>
</tbody>
</table>
<p><a href="http://csrgxtu.github.io/2015/03/20/Writing-Mathematic-Fomulars-in-Markdown/" target="_blank" rel="external">ğŸ”— Writing Mathematic Fomulars in Markdown â€“ Archer Reilly</a></p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=fcrespo82.markdown-table-formatter#overview" target="_blank" rel="external">ğŸ”— Markdown Table Formatter</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰è¾“å…¥æ•°å­¦å…¬å¼çš„ä¸€ç›´ç”¨æˆªå›¾ è‡ªè§‰ç”¨æˆ·ä½“éªŒå¾ˆå·®ï¼Œæœ€è¿‘å‘ç°ç”¨çš„è¿™ä¸ªä¸»é¢˜å¸¦äº†å¥½ç”¨çš„æ•°å­¦å‡½æ•°è¾…åŠ©ï¼Œä¾¿ä¸€å‘ä¸å¯æ”¶æ‹¾ã€‚é¡ºä¾¿æ¨èä¸€ä¸‹æˆ‘ç”¨çš„ä¸»é¢˜æ˜¯&lt;a href=&quot;https://github.com/tufu9441/maupassant-hexo&quot;&gt;maupassant-hexo github&lt;/a&gt; ,è¿™é‡Œè®°å½•ä¸€ä¸‹æ•°å­¦ç¬¦çš„ç”¨æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Markdown" scheme="http://vrast.cn/categories/Markdown/"/>
    
    
      <category term="Math" scheme="http://vrast.cn/tags/Math/"/>
    
  </entry>
  
  <entry>
    <title>UNITY3D Playables APIå®è·µ(ä¸‹)</title>
    <link href="http://vrast.cn/posts/323c9fde/"/>
    <id>http://vrast.cn/posts/323c9fde/</id>
    <published>2018-09-19T09:33:28.000Z</published>
    <updated>2018-09-28T02:34:40.026Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä¸Šç¯‡ç»™å¤§å®¶ä»‹ç»äº† â€œPlayables APIâ€ çš„ä½¿ç”¨æ–¹æ³•ä¸èƒŒåçš„æ„ä¹‰ï¼Œæœ¬ç¯‡å°†ä¼šè¿›ä¸€æ­¥å¸¦å¤§å®¶æ·±å…¥å…¶ä¸­ã€‚ æœ¬ç¯‡é‡ç‚¹è¿˜æ˜¯ä¼šæ”¾åˆ°  â€œPlayables APIâ€ ä¸Šï¼Œä¸ä¼šå¯¹ <strong>Timeline</strong> è¿›è¡Œé›†ä¸­è®²è§£ï¼Œä½†æ˜¯ææ˜ç™½äº† â€œPlayables APIâ€ ä¹Ÿå°±æ„å‘³ç€ç†è§£äº† <strong>Timeline</strong> æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œåˆ°æ—¶å€™å­¦èµ·æ¥ä¹Ÿä¼šéå¸¸çš„å¿«ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="å¿«é€Ÿå›é¡¾"><a href="#å¿«é€Ÿå›é¡¾" class="headerlink" title="å¿«é€Ÿå›é¡¾"></a>å¿«é€Ÿå›é¡¾</h1><p>åœ¨æœ¬ç¯‡å¼€å§‹å‰æˆ‘ä»¬å…ˆå¿«é€Ÿçš„å›é¡¾ä¸€ä¸‹ä¸Šç¯‡çš„å†…å®¹ï¼š</p>
<ol>
<li><p>â€œPlayables APIâ€ çš„æ„ä¹‰ ï¼Ÿ<br>ç­”ï¼šæ›¿æ¢LegacyåŠ¨ç”»ç³»ç»Ÿï¼Œå¹¶å…¼å®¹Timeline ã€‚</p>
</li>
<li><p>å¦‚ä½•åˆ›å»º â€œPlayables æ ‘ ï¼Ÿ</p>
</li>
</ol>
<p>ç­”ï¼šäº”è¡Œä»£ç å°±å¯ä»¥å¿«é€Ÿåˆ›å»ºï¼</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable = AnimationClipPlayable.Create(playableGraph, clip);</div><div class="line">playableOutput.SetSourcePlayable(clipPlayable);</div><div class="line"></div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
<ol>
<li>æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢æ—¶æˆ‘ä»¬è¯¥å¦‚ä½•è®°å¿†èŠ‚ç‚¹é“¾æ¥æ–¹å¼ ï¼Ÿ<br>ç­”ï¼šå³è¾“å…¥(æ•°é‡) å·¦è¾“å‡º(æ•°é‡)ï¼Œæ ¹èŠ‚ç‚¹æœ‰å·¦è¾¹å£ï¼Œæ™®é€šèŠ‚ç‚¹ä¸¤è¾¹æœ‰ ã€‚</li>
</ol>
<h1 id="æ­£æ–‡ï¼šæ›´å¤æ‚çš„APIè¿ç”¨æ–¹å¼"><a href="#æ­£æ–‡ï¼šæ›´å¤æ‚çš„APIè¿ç”¨æ–¹å¼" class="headerlink" title="æ­£æ–‡ï¼šæ›´å¤æ‚çš„APIè¿ç”¨æ–¹å¼"></a>æ­£æ–‡ï¼šæ›´å¤æ‚çš„APIè¿ç”¨æ–¹å¼</h1><h2 id="ä½¿ç”¨-Animation-Layer"><a href="#ä½¿ç”¨-Animation-Layer" class="headerlink" title="ä½¿ç”¨ Animation Layer"></a>ä½¿ç”¨ Animation Layer</h2><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬æåˆ°ä½¿ç”¨ XXXMixerPlayable å¯ä»¥ç”¨æ¥èåˆå¤šä¸ªåŠ¨ç”»/éŸ³é¢‘ç­‰ã€‚é‚£ä¹ˆæƒ³åœ¨ä¸€ä¸ªè§’è‰²çš„èº«ä¸ŠåŒæ—¶æ’­ä¸¤ä¸ªæˆ–å¤šä¸ªäº’ä¸å¹²æ‰°çš„åŠ¨ç”»è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ </p>
<p>æƒ³å¿…å¤§å®¶éƒ½æƒ³åˆ°äº†ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ä½¿ç”¨ Animation Layer (åŠ¨ç”»å±‚) çš„æŠ€æœ¯ã€‚åœ¨ Animator ä¸­å¸¸ä½¿ç”¨ Avatar Mask æ¥è®¾ç½®ä¸åŒéƒ¨ä½çš„é®ç½©ï¼Œè®©å…¶ä»–éƒ¨åˆ†çš„åŠ¨ç”»å„å¸å…¶èŒã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Animation Layer æŠ€æœ¯å¦‚ä½•åœ¨ â€œPlayerable APIâ€ ä¸­ä½¿ç”¨å§ã€‚</p>
<p><img src="/uploads/bodylowermask.png" alt="ç¬¬ä¸€æ­¥å…ˆåˆ¶ä½œé®ç½©ï¼Œå…³é—­èº«ä½“ä¸ŠåŠçš„åŠ¨ç”»æ§åˆ¶"></p>
<p>ä»£ç æ¡ˆä¾‹å¦‚ä¸‹ï¼Œæ‚¨å¯ä»¥çœ‹è§è¿™é‡Œä¸ä¸Šä¸€ç¯‡æˆ‘ä»¬è®²åˆ°çš„ <strong>AnimationMixerPlayable</strong> æ˜¯ä¸æ˜¯ä¿æŒäº†é«˜åº¦ä¸€è‡´ ï¼Ÿ è¿™å¯ä¸æ˜¯æ¶æ„çš„åŠŸåŠ³ï¼Œè€Œæ˜¯å¾—ç›Šäºä»£ç é£æ ¼çš„ç»Ÿä¸€ã€‚æ— è®ºæ˜¯åœ¨ <strong>AnimationMixerPlayable</strong> æˆ– <strong>AnimationLayerMixerPlayable</strong> å…¶ä¸­éƒ½æœ‰ç»Ÿä¸€çš„é™æ€å‡½æ•° <code>Create</code> ,è‰¯å¥½çš„ä»£ç é£æ ¼èƒ½è®©é˜…è¯»è€…è½»æ¾æŒæ¡ä»£ç è§„å¾‹ï¼Œä»è€Œå‡å°‘é˜…è¯»æ—¶é—´ ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> AnimationClip clip1;</div><div class="line"><span class="keyword">public</span> AnimationClip clip2;</div><div class="line"><span class="keyword">private</span> Animator _animator;</div><div class="line"><span class="keyword">private</span> AnimationLayerMixerPlayable mixerPlayable;</div><div class="line"><span class="keyword">public</span>  <span class="keyword">float</span> weight = <span class="number">.5</span>f;</div><div class="line"></div><div class="line"><span class="keyword">public</span> AvatarMask LowerMask;</div><div class="line"></div><div class="line"><span class="keyword">public</span> PlayableGraph playableGraph;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line">    <span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line">    mixerPlayable = AnimationLayerMixerPlayable.Create(playableGraph, <span class="number">2</span>);</div><div class="line">    mixerPlayable.SetLayerMaskFromAvatarMask(<span class="number">1</span>,LowerMask);<span class="comment">//è®¾ç½®é®ç½©åˆ°1å±‚</span></div><div class="line">    </div><div class="line">    playableOutput.SetSourcePlayable(mixerPlayable);</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip1);</div><div class="line">    <span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line">    </div><div class="line">    mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//è®¾ç½®æƒé‡1</span></div><div class="line">    mixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable2,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//è®¾ç½®æƒé‡1</span></div><div class="line">    </div><div class="line">    playableGraph.Play();</div><div class="line">    </div><div class="line">    GraphVisualizerClient.Show(playableGraph);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ä¸Šé¢æœ‰ä¸€äº›ä¸åŒä¸ä¹‹å‰çš„çœ‹åˆ°çš„ <strong>AnimationMixerPlayable</strong> ï¼Œè¿™é‡Œè¿æ¥çš„ä¸¤ä¸ªåŠ¨ç”»æƒé‡å‡ä¸º1.ä¸ºä»€ä¹ˆä¸æ˜¯ 0.5 ä¸ 0.5 ?<br>å› ä¸ºç°åœ¨æ˜¯åŒæ—¶æ’­æ”¾ä¸åŒäºèåˆã€‚èåˆéœ€è¦ä¸¤ç§åŠ¨ç”»è¿‡æ¸¡æƒé‡ï¼Œè€Œåˆ†å±‚åˆ™æ˜¯å°†æ¨¡å‹åˆ†ä¸ºä¸¤ä¸ªåŒºé—´ï¼Œ0åŒºé—´æ’­æ”¾Clip1ï¼Œ1åŒºé—´æ’­æ”¾Clip2ï¼Œè¿™æ˜¯å®Œå…¨åŒæ­¥åˆç‹¬ç«‹çš„ã€‚</p>
<p><img src="/uploads/QQ20180927-105649-HD.gif" alt="æ•ˆæœå›¾ï¼šä¸Šèº«æ’­æ”¾è·³è·ƒï¼Œä¸‹èº«æ’­æ”¾è·‘åŠ¨"></p>
<h2 id="åŠ¨æ€æ·»åŠ åŠ¨ç”»"><a href="#åŠ¨æ€æ·»åŠ åŠ¨ç”»" class="headerlink" title="åŠ¨æ€æ·»åŠ åŠ¨ç”»"></a>åŠ¨æ€æ·»åŠ åŠ¨ç”»</h2><p>ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨<strong>Animator</strong>çš„æ—¶å€™éœ€è¦å°†æ‰€æœ‰ä½¿ç”¨åˆ°çš„åŠ¨ç”»éƒ½åŠ å…¥å…¶ä¸­ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ <strong>ConnectInput &amp; DisconnectInput</strong> API å°±èƒ½è½»æ˜“çš„åˆ‡æ¢åŠ¨ç”»ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (Input.GetKeyUp(KeyCode.A))</div><div class="line">    &#123;</div><div class="line">        mixerPlayable.DisconnectInput(<span class="number">0</span>);</div><div class="line">        <span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip3);</div><div class="line">        mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180927-120130-HD.gif" alt="æ•ˆæœå›¾ï¼šä¸Šèº«åˆ‡æ¢åˆ°èƒœåˆ©åŠ¨ç”»ï¼Œä¸‹èº«æ’­æ”¾è·‘åŠ¨"></p>
<h3 id="åŠ¨æ€åˆ‡æ¢çš„ä¼˜åŒ–"><a href="#åŠ¨æ€åˆ‡æ¢çš„ä¼˜åŒ–" class="headerlink" title="åŠ¨æ€åˆ‡æ¢çš„ä¼˜åŒ–"></a>åŠ¨æ€åˆ‡æ¢çš„ä¼˜åŒ–</h3><p>åˆšæ‰æˆ‘ä»¬å®ç°äº†åŠ¨æ€çš„åˆ‡æ¢åŠ¨ç”»ã€‚æ•ˆæœæ˜¯è¾¾åˆ°äº†ï¼Œå¯æ˜¯åŠ¨ç”»æ˜¯ç¡¬è¿‡æ¸¡ã€‚å¦‚æœç°åœ¨åªæœ‰<code>Connect  &amp; Disconnect</code>æ¥å£é‚£ä¹ˆAPIçœŸçš„æ— æ³•å¸®æˆ‘ä»¬è¾¾åˆ°åŠ¨ç”»çš„èåˆè¿‡æ¸¡ï¼<br>ç°åœ¨æˆ‘ä»¬ç°åœ¨æ¥ä¼˜åŒ–ä¸€ä¸‹è¿™æ®µåŠ¨ç”»ç¡¬åˆ‡çš„è¿‡ç¨‹ï¼Œä½¿å…¶è¾¾åˆ°èåˆè¿‡æ¸¡çš„æ•ˆæœ(æ·¡å…¥æ·¡å‡º)ã€‚</p>
<h4 id="æ–¹å¼ä¸€-ä½¿ç”¨AnimationMixerPlayable-API"><a href="#æ–¹å¼ä¸€-ä½¿ç”¨AnimationMixerPlayable-API" class="headerlink" title="æ–¹å¼ä¸€ ä½¿ç”¨AnimationMixerPlayable API"></a>æ–¹å¼ä¸€ ä½¿ç”¨AnimationMixerPlayable API</h4><p>ä½¿ç”¨åŠ¨ç”»èåˆèŠ‚ç‚¹æ§åˆ¶æƒé‡å®ç°åŠ¨ç”»èåˆï¼Œä½¿ç”¨è¿™ç§æ–¹å¼éœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰Playableï¼Œä»¥listä½œä¸ºå®¹å™¨æ‰èƒ½å®ç°å¤ç”¨ï¼Œå¦åˆ™å°±æ˜¯hardcodeäº† ã€‚ä¸‹é¢ä»£ç å±•ç¤ºäº†æœ€ç®€æ–¹å¼ä½¿ç”¨èåˆèŠ‚ç‚¹ã€‚<br><img src="/uploads/QQ20180927-163146-HD.gif" alt="æ•ˆæœå›¾ï¼šä¸Šèº«èåˆè·³è·ƒä¸èƒœåˆ©åŠ¨ç”»"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mixerPlayable = AnimationMixerPlayable.Create(layerMixerPlayable.GetGraph(),<span class="number">2</span>);</div><div class="line"><span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip1);</div><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line"><span class="keyword">var</span> clipPlayable3 = AnimationClipPlayable.Create(playableGraph, clip3);</div><div class="line"></div><div class="line">mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">mixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable3,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"></div><div class="line">layerMixerPlayable.ConnectInput(<span class="number">0</span>,mixerPlayable,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">layerMixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable2,<span class="number">0</span>,<span class="number">1</span>);</div></pre></td></tr></table></figure>
<h4 id="æ–¹å¼äºŒ-ä½¿ç”¨Animator"><a href="#æ–¹å¼äºŒ-ä½¿ç”¨Animator" class="headerlink" title="æ–¹å¼äºŒ ä½¿ç”¨Animator"></a>æ–¹å¼äºŒ ä½¿ç”¨Animator</h4><p><img src="/uploads/QQ20180927-170717.png" alt="æ•ˆæœå›¾ï¼šåˆ›å»ºèåˆçŠ¶æ€æœº"><br>åŒæ ·çš„æˆ‘ä»¬ä½¿ç”¨èåˆçŠ¶æ€æœºå®ç°è¿™ä¸ªè¿‡æ¸¡æ•ˆæœã€‚è¿™ç§æ–¹å¼(Animator+PlayableAPI))è®©ç­–åˆ’æˆ–è€…ç¾æœ¯é…ç½®ä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">animatorController = AnimatorControllerPlayable.Create(layerMixerPlayable.GetGraph(), animationController);</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line"></div><div class="line">layerMixerPlayable.ConnectInput(<span class="number">0</span>,animatorController,<span class="number">0</span>,<span class="number">1</span>);</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180927-170915-HD.gif" alt="æ•ˆæœå›¾ï¼šä¸Šèº«èåˆè·³è·ƒä¸èƒœåˆ©åŠ¨ç”»"></p>
<h4 id="æ–¹å¼ä¸‰-çº¯Playable-API"><a href="#æ–¹å¼ä¸‰-çº¯Playable-API" class="headerlink" title="æ–¹å¼ä¸‰ çº¯Playable API"></a>æ–¹å¼ä¸‰ çº¯Playable API</h4><p>ä¸‹é¢æˆ‘ä»¬è¦ä»‹ç»çš„è¿™ç§è¿‡æ¸¡æ¨¡å¼æ˜¯çº¯ä»£ç å®ç°ï¼Œç±»ä¼¼ä¸lengcy apié‡Œçš„Animation CrossFade. åŸç†å°±æ˜¯åˆ©ç”¨<code>Connect  &amp; Disconnect</code> åŠ¨æ€å¼€å…³èŠ‚ç‚¹å®ç°è¿‡æ¸¡ï¼Œå®Œæ¯•åé‡æ–°è¿æ¥å›æ¥ã€‚å…·ä½“å®ç°æ–¹å¼å¯å‚è€ƒ <strong>æ–¹å¼ä¸€</strong></p>
<h2 id="ä½¿ç”¨Bone-IK"><a href="#ä½¿ç”¨Bone-IK" class="headerlink" title="ä½¿ç”¨Bone IK"></a>ä½¿ç”¨Bone IK</h2><p><del> ç°åœ¨æˆ‘ä»¬å†æ¥çœ‹çœ‹æ›´é«˜çº§çš„ç”¨æ³• éª¨éª¼IKåŠ¨ç”»ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åšä¸€äº›æ›´é€¼çœŸçš„æ•ˆæœIKæŠ€æœ¯æ˜¯å°‘ä¸äº†çš„ã€‚ä¸ºäº†æ–¹ä¾¿å±•ç¤º æˆ‘ä»¬åœ¨è¿™è¾¹Cloneä¸€ä¸‹ä»£ç ã€‚</del></p>
<p>åœ¨æˆ‘å†™æœ¬ç¯‡çš„æ—¶å€™æˆ‘å‘ç°å®˜æ–¹åœ¨ 2018.8.29æ—¥ å‘è¿‡å…³äºPlayable API è°ƒç”¨IKåŠ¨ç”»çš„èŒƒä¾‹ï¼Œè¿™é‡Œå°±å†é‡å¤çš„èµ˜è¿°ã€‚ä¸‹é¢æ˜¯åŸæ–‡é“¾æ¥ <a href="http://forum.china.unity3d.com/thread-32814-1-1.html" target="_blank" rel="external">ğŸ”— [æŠ€æœ¯] è¯¦è§£Animation C# Jobs</a></p>
<p>æ‚¨å¯ä»¥ç›´æ¥å…‹éš†ä¸‹é¢çš„ä»£ç èŒƒä¾‹ä¸­æ£€éªŒæ•ˆæœã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Clone https:<span class="comment">//github.com/KeyleXiao/animation-jobs-samples.git</span></div></pre></td></tr></table></figure>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æ€»ä½“è€Œè¨€Playable APIæä¾›äº†æ›´ä½å±‚çš„æ“ä½œæ–¹å¼ï¼Œå¯¹äºä½¿ç”¨è€…çš„è¦æ±‚æ›´é«˜ã€‚å¦‚æœæ‚¨ç°åœ¨æƒ³è¦åœ¨é¡¹ç›®ä¸­å®è·µå»ºè®®å…ˆä¸è¦ç”¨é«˜çº§ç‰¹æ€§(ikéƒ¨åˆ†)ï¼Œå› ä¸ºè¿™éƒ¨åˆ†çš„åŠŸèƒ½ç›®å‰è¿˜æ˜¯å®éªŒæ€§åŠŸèƒ½ï¼ŒAPIçš„ç›¸å…³æ–‡æ¡£å¹¶ä¸å®Œå–„ã€‚ä½¿ç”¨åŠ¨ç”»çš„æ§åˆ¶APIè¿›è¡Œ Lengacy Animationçš„æ›¿æ¢å·¥ä½œè¿˜æ˜¯å¾ˆæœ‰æ„ä¹‰ï¼Œä¸ä»…åœ¨ä¸æ•ˆç‡ï¼Œä¸Timelineç»“åˆä½¿ç”¨æ›´èƒ½å‘æŒ¥å‡ºäº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸Šç¯‡ç»™å¤§å®¶ä»‹ç»äº† â€œPlayables APIâ€ çš„ä½¿ç”¨æ–¹æ³•ä¸èƒŒåçš„æ„ä¹‰ï¼Œæœ¬ç¯‡å°†ä¼šè¿›ä¸€æ­¥å¸¦å¤§å®¶æ·±å…¥å…¶ä¸­ã€‚ æœ¬ç¯‡é‡ç‚¹è¿˜æ˜¯ä¼šæ”¾åˆ°  â€œPlayables APIâ€ ä¸Šï¼Œä¸ä¼šå¯¹ &lt;strong&gt;Timeline&lt;/strong&gt; è¿›è¡Œé›†ä¸­è®²è§£ï¼Œä½†æ˜¯ææ˜ç™½äº† â€œPlayables APIâ€ ä¹Ÿå°±æ„å‘³ç€ç†è§£äº† &lt;strong&gt;Timeline&lt;/strong&gt; æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œåˆ°æ—¶å€™å­¦èµ·æ¥ä¹Ÿä¼šéå¸¸çš„å¿«ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="ANIMATION" scheme="http://vrast.cn/tags/ANIMATION/"/>
    
  </entry>
  
  <entry>
    <title>GPUSkinning</title>
    <link href="http://vrast.cn/posts/fa938638/"/>
    <id>http://vrast.cn/posts/fa938638/</id>
    <published>2018-09-17T08:04:05.000Z</published>
    <updated>2018-09-21T07:32:22.331Z</updated>
    
    <content type="html"><![CDATA[<p>GPUSkinning æ•™ç¨‹å¤§çº²(UNITY3D)<br>èŠ‚ä¸€. åŸç†</p>
<ol>
<li>åŠ¨ç”»ï¼šç†è§£éª¨éª¼åŠ¨ç”»çš„è¿ä½œæ–¹å¼</li>
<li>æ¨¡å‹ï¼šç†è§£ç¾æœ¯çš„åˆ¶ä½œæµç¨‹</li>
<li>éª¨éª¼ï¼šç†è§£éª¨éª¼åŠ¨ç”»ä»¥åŠèƒŒåçš„æ•°å­¦æ„ä¹‰</li>
</ol>
<p>èŠ‚äºŒ. å®è·µ</p>
<ol>
<li>æŠ€æœ¯èƒŒæ™¯</li>
<li>ä½¿ç”¨GPUSkinning</li>
<li>å·¥ä½œåŸç†(é‡ç‚¹)</li>
<li>å®é™…æ•ˆæœ</li>
<li>å…¶ä»–å¯ä»¥åŒæ—¶è¿›è¡Œçš„ä¼˜åŒ–æ–¹æ¡ˆ</li>
</ol>
<a id="more"></a>
<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><h2 id="åŠ¨ç”»ï¼šéª¨éª¼åŠ¨ç”»çš„è¿ä½œæ–¹å¼"><a href="#åŠ¨ç”»ï¼šéª¨éª¼åŠ¨ç”»çš„è¿ä½œæ–¹å¼" class="headerlink" title="åŠ¨ç”»ï¼šéª¨éª¼åŠ¨ç”»çš„è¿ä½œæ–¹å¼"></a>åŠ¨ç”»ï¼šéª¨éª¼åŠ¨ç”»çš„è¿ä½œæ–¹å¼</h2><p>è®©ä»¬ä»è½»æ¾ä¸€ç‚¹çš„å†…å®¹å¼€å§‹æœ¬ç¯‡æ•™ç¨‹å§ã€‚</p>
<p>ã€€ã€€åœ¨çš„æ¸¸æˆä¸­ï¼Œéª¨éª¼åŠ¨ç”»çš„åŸºç¡€æ˜¯å…³é”®å¸§æŠ€æœ¯ï¼Œä»¬å…ˆé‡æ¸©ä¸€ä¸‹å…³é”®å¸§æŠ€æœ¯ã€‚</p>
<p>æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯<strong>å¸§åŠ¨ç”»</strong>ï¼šä»¬å°†ä¸€æ®µè¾ƒé•¿çš„åŠ¨ä½œåˆ†è§£æˆå‡ ä¸ªå…³é”®å¸§ï¼Œç„¶ååŸºäºæ­¤è¿›è¡ŒåŠ¨ç”»çš„åˆ¶ä½œã€‚å³ä½¿ç°åœ¨ä»¬ä½¿ç”¨çš„å·¥å…·æ›´æ–°æ¢ä»£ï¼Œåˆ¶ä½œåŠ¨ç”»çš„æ€è·¯è¿˜æ˜¯å¤§è‡´å¦‚æ­¤ï¼Œæ‹†åˆ†ä¸è¿‡æ¸¡ã€‚æ‰€æœ‰çš„å·¥å…·éƒ½æ˜¯å¸®ä»¬è‡ªåŠ¨å®Œå–„å…¶ä¸­çš„ç»†èŠ‚ã€‚</p>
<embed src="http://player.youku.com/player.php/sid/XMzgzMjMzNjg4NA==/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash">

<p><strong>Skinned Mesh</strong>ï¼šä¸­æ–‡ä¸€èˆ¬ç§°ä½œéª¨éª¼è’™çš®åŠ¨ç”»ï¼Œæ­£å¦‚å…¶åï¼Œè¿™ç§åŠ¨ç”»ä¸­åŒ…å«éª¨éª¼ï¼ˆ Bone ï¼‰å’Œè’™çš® (Skinned Mesh) ä¸¤ä¸ªéƒ¨åˆ†ï¼Œ Bone çš„å±‚æ¬¡ç»“æ„å’Œå…³èŠ‚åŠ¨ç”»ç±»ä¼¼ï¼Œ Mesh åˆ™å’Œå…³èŠ‚åŠ¨ç”»ä¸åŒï¼šå…³èŠ‚åŠ¨ç”»ä¸­æ˜¯ä½¿ç”¨å¤šä¸ªåˆ†æ•£çš„ Mesh, è€Œ Skinned Mesh ä¸­ Mesh æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸€ä¸ª Mesh, å®é™…ä¸Šå¦‚æœæ²¡æœ‰éª¨éª¼è®© Mesh è¿åŠ¨å˜å½¢ï¼Œ Mesh å°±å’Œé™æ€æ¨¡å‹ä¸€æ ·äº†ã€‚ Skinned Mesh æŠ€æœ¯çš„ç²¾ååœ¨äºè’™çš®ï¼Œæ‰€è°“çš„çš®å¹¶ä¸æ˜¯æ¨¡å‹çš„è´´å›¾ï¼ˆä¹Ÿè®¸ä¼šæœ‰äººè¿™ä¹ˆæƒ³è¿‡å§ï¼‰ï¼Œè€Œæ˜¯ Mesh æœ¬èº«ï¼Œè’™çš®æ˜¯æŒ‡å°† Mesh ä¸­çš„é¡¶ç‚¹é™„ç€ï¼ˆç»‘å®šï¼‰åœ¨éª¨éª¼ä¹‹ä¸Šï¼Œè€Œä¸”æ¯ä¸ªé¡¶ç‚¹å¯ä»¥è¢«å¤šä¸ªéª¨éª¼æ‰€æ§åˆ¶ï¼Œè¿™æ ·åœ¨å…³èŠ‚å¤„çš„é¡¶ç‚¹ç”±äºåŒæ—¶å—åˆ°çˆ¶å­éª¨éª¼çš„æ‹‰æ‰¯è€Œæ”¹å˜ä½ç½®å°±æ¶ˆé™¤äº†è£‚ç¼ã€‚ Skinned Mesh è¿™ä¸ªè¯ä»å­—é¢ä¸Šç†è§£ä¼¼ä¹æ˜¯æœ‰çš®çš„æ¨¡å‹ï¼Œå“¦ï¼Œå¦‚æœè´´å›¾æ˜¯çš®ï¼Œé‚£ä¹ˆæ™®é€šé™æ€æ¨¡å‹ä¸ä¹Ÿéƒ½æœ‰å—ï¼Ÿæ‰€ä»¥è§‰å¾—åº”è¯¥ç†è§£ä¸ºå…·æœ‰è’™çš®ä¿¡æ¯çš„ Mesh æˆ–å¯å½“åšçš®è‚¤ç”¨çš„ Mesh ï¼Œè¿™ä¸ªçš®è‚¤å°±æ˜¯ Mesh ã€‚è€Œä¸ºäº†æœ‰çš®è‚¤åŠŸèƒ½ï¼Œ Mesh è¿˜éœ€è¦è’™çš®ä¿¡æ¯ï¼Œå³ Skin æ•°æ®ï¼Œæ²¡æœ‰ Skin æ•°æ®å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„é™æ€ Mesh äº†ã€‚Skin æ•°æ®å†³å®šé¡¶ç‚¹å¦‚ä½•ç»‘å®šåˆ°éª¨éª¼ä¸Šã€‚é¡¶ç‚¹çš„ Skin æ•°æ®åŒ…æ‹¬é¡¶ç‚¹å—å“ªäº›éª¨éª¼å½±å“ä»¥åŠè¿™äº›éª¨éª¼å½±å“è¯¥é¡¶ç‚¹æ—¶çš„æƒé‡(weight) ï¼Œå¦å¤–</p>
<p><strong>Bone</strong>:å¯¹äºæ¯å—éª¨éª¼è¿˜éœ€è¦éª¨éª¼åç§»çŸ©é˜µ (BoneOffsetMatrix) ç”¨æ¥å°†é¡¶ç‚¹ä» Mesh ç©ºé—´å˜æ¢åˆ°éª¨éª¼ç©ºé—´ã€‚éª¨éª¼æ§åˆ¶è’™çš®è¿åŠ¨ï¼Œè€Œéª¨éª¼æœ¬èº«çš„è¿åŠ¨å‘¢ï¼Ÿå½“ç„¶æ˜¯åŠ¨ç”»æ•°æ®äº†ã€‚æ¯ä¸ªå…³é”®å¸§ä¸­åŒ…å«æ—¶é—´å’Œéª¨éª¼è¿åŠ¨ä¿¡æ¯ï¼Œè¿åŠ¨ä¿¡æ¯å¯ä»¥ç”¨ä¸€ä¸ªçŸ©é˜µç›´æ¥è¡¨ç¤ºéª¨éª¼æ–°çš„å˜æ¢ï¼Œä¹Ÿå¯ç”¨å››å…ƒæ•°è¡¨ç¤ºéª¨éª¼çš„æ—‹è½¬ï¼Œä¹Ÿå¯ä»¥éšä¾¿è‡ªå·±å®šä¹‰ä»€ä¹ˆåªè¦èƒ½è®©éª¨éª¼åŠ¨å°±è¡Œã€‚é™¤äº†ä½¿ç”¨ç¼–è¾‘è®¾å®šå¥½çš„åŠ¨ç”»å¸§æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰©ç†è®¡ç®—å¯¹éª¨éª¼è¿›è¡Œå®æ—¶æ§åˆ¶ã€‚</p>
<p><strong>UNITY3Dä¸­çš„Skinned Mesh Rendererç»„ä»¶</strong>:UNITY3Dåœ¨å¯¼å…¥æ¨¡å‹çš„æ—¶å€™è‡ªåŠ¨ä¼šç»™æ¨¡å‹é™„åŠ <strong>è’™çš®ç½‘æ ¼(Skinned Mesh Renderer)</strong>ï¼Œä½¿ç”¨Unityéª¨éª¼äººç‰©çš„ä¸»è¦ä¼˜åŠ¿æ˜¯å¯ä»¥ä½¿éª¨éª¼å—åˆ°ç‰©ç†å½±å“ï¼Œè­¬å¦‚ä½¿ç”¨è§’è‰²å¸ƒå¨ƒå¨ƒã€‚å¦‚ä¸‹å›¾æ‰€ç¤º<strong>Skinned Mesh Renderer</strong>ä¼šè‡ªåŠ¨å…³è”å…¶å¯¹åº”çš„éª¨éª¼ã€‚</p>
<p><img src="/uploads/WX20180918-155553.png" alt=""></p>
<h2 id="æ¨¡å‹ï¼šç†è§£ç¾æœ¯çš„åˆ¶ä½œæµç¨‹"><a href="#æ¨¡å‹ï¼šç†è§£ç¾æœ¯çš„åˆ¶ä½œæµç¨‹" class="headerlink" title="æ¨¡å‹ï¼šç†è§£ç¾æœ¯çš„åˆ¶ä½œæµç¨‹"></a>æ¨¡å‹ï¼šç†è§£ç¾æœ¯çš„åˆ¶ä½œæµç¨‹</h2><p>ã€€ä»¬åœ¨æœ¬æ–‡ä¸­ä¸»è¦è®¨è®ºåœ¨UNITY3Då†…çš„å®ç°æ–¹å¼ã€‚åœ¨UNITYä¸­å¸¸ç”¨T-Poseå±…å¤šã€‚ T-Poseæ–¹ä¾¿ä»¬å¯¹åº”éª¨éª¼ä¸è’™çš®æ–¹ä¾¿æ ¡éªŒè¡¨ç°ä¸éª¨éª¼ä½ç½®ä¸ä¸€è‡´çš„åœ°æ–¹ã€‚å¯¹äºæ¯ä¸ªéª¨éª¼ï¼Œç¾æœ¯åœ¨å»ºæ¨¡çš„æ—¶å€™å°±è¿›è¡Œäº†ç»‘å®šï¼Œå¯¹äºä»¬ç¨‹åºåªéœ€è¦è¿›è¡ŒåŠ¨ç”»çš„æ’­æ”¾ï¼Œä¸€èˆ¬åœ¨éª¨éª¼ä¸Šæœ‰ä¸€äº›é¢å¤–çš„æŒ‚ç‚¹ã€‚è¿™äº›æŒ‚ç‚¹æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„é¢å¤–çš„ç‚¹ï¼Œé€šå¸¸æä¾›ç»™ä»¬æŒ‚ä¸€äº›æ­¦å™¨æˆ–å…¶ä»–è£…å¤‡ç‰©ä½“çš„èŠ‚ç‚¹ã€‚åœ¨å®Œæˆå»ºæ¨¡åï¼Œåœ¨è¿›è¡Œéª¨éª¼ç»‘å®šçš„æ—¶å€™ï¼Œé€šå¸¸ç¾æœ¯ä¼šé€‰æ‹©æ¨¡å‹çš„ç›†éª¨åšä¸ºæ¨¡å‹çš„æ ¹éª¨éª¼ã€‚é‚£ä¹ˆåŸºäºæ ¹éª¨éª¼ï¼Œå¯ä»¥é€’æ¨å‡ºå„ä¸ªéª¨éª¼ç›¸å¯¹äºæ ¹éª¨çš„çˆ¶å­å…³ç³»ã€‚é€šè¿‡éª¨éª¼æ‰€åœ¨çš„ç©ºé—´ï¼Œå…¶åŸç‚¹ä»¬ä¼šé€‰æ‹©ä¸¤ä¸ªè„šä¹‹é—´çš„ä¸­ç‚¹ä½œä¸ºåŸç‚¹ï¼Œè¿™æ—¶å€™å°±ä¼šå‘ç°æ ¹éª¨éª¼å¹¶æ²¡æœ‰å’ŒåŸç‚¹é‡åˆï¼Œè¿™æ—¶ç¾æœ¯ä¼šæ„å»ºä¸€ä¸ªScene_Rootåšä¸ºé¢å¤–çš„éª¨éª¼ï¼Œå…¶ä½ç½®å°±ä¸ºä¸–ç•ŒåŸç‚¹ï¼Œè€ŒçœŸæ­£çš„æ ¹éª¨éª¼Bip01ä¼šä½œä¸ºScene_Rootçš„å”¯ä¸€å­éª¨éª¼ã€‚</p>
<p><img src="/uploads/unitychan.png" alt=""></p>
<h2 id="éª¨éª¼ï¼šç†è§£éª¨éª¼åŠ¨ç”»ä»¥åŠèƒŒåçš„æ•°å­¦æ„ä¹‰"><a href="#éª¨éª¼ï¼šç†è§£éª¨éª¼åŠ¨ç”»ä»¥åŠèƒŒåçš„æ•°å­¦æ„ä¹‰" class="headerlink" title="éª¨éª¼ï¼šç†è§£éª¨éª¼åŠ¨ç”»ä»¥åŠèƒŒåçš„æ•°å­¦æ„ä¹‰"></a>éª¨éª¼ï¼šç†è§£éª¨éª¼åŠ¨ç”»ä»¥åŠèƒŒåçš„æ•°å­¦æ„ä¹‰</h2><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸ªè§‚å¿µï¼š<strong>éª¨éª¼å†³å®šäº†æ¨¡å‹æ•´ä½“åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®å’Œæœå‘ã€‚</strong><br>é™æ€æ¨¡å‹æ²¡æœ‰éª¨éª¼ï¼Œä»¬åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­æ”¾ç½®é™æ€æ¨¡å‹æ—¶ï¼Œåªè¦æŒ‡å®šæ¨¡å‹è‡ªèº«åæ ‡ç³»åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®å’Œæœå‘ã€‚åœ¨éª¨éª¼åŠ¨ç”»ä¸­ï¼Œä¸æ˜¯æŠŠ Mesh ç›´æ¥æ”¾åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­ï¼Œ Mesh åªæ˜¯ä½œä¸º Skin ä½¿ç”¨çš„ï¼Œæ˜¯ä¾é™„äºéª¨éª¼çš„ï¼ŒçœŸæ­£å†³å®šæ¨¡å‹åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®å’Œæœå‘çš„æ˜¯éª¨éª¼ã€‚åœ¨æ¸²æŸ“é™æ€æ¨¡å‹æ—¶ï¼Œç”±äºæ¨¡å‹çš„é¡¶ç‚¹éƒ½æ˜¯å®šä¹‰åœ¨æ¨¡å‹åæ ‡ç³»ä¸­çš„ï¼Œæ‰€ä»¥å„é¡¶ç‚¹åªè¦ç»è¿‡æ¨¡å‹åæ ‡ç³»åˆ°ä¸–ç•Œåæ ‡ç³»çš„å˜æ¢åå°±å¯è¿›è¡Œæ¸²æŸ“ã€‚è€Œå¯¹äºéª¨éª¼åŠ¨ç”»ï¼Œä»¬è®¾ç½®æ¨¡å‹çš„ä½ç½®å’Œæœå‘ï¼Œå®é™…æ˜¯åœ¨è®¾ç½®æ ¹éª¨éª¼çš„ä½ç½®å’Œæœå‘ï¼Œç„¶åæ ¹æ®éª¨éª¼å±‚æ¬¡ç»“æ„ä¸­çˆ¶å­éª¨éª¼ä¹‹é—´çš„å˜æ¢å…³ç³»è®¡ç®—å‡ºå„ä¸ªéª¨éª¼çš„ä½ç½®å’Œæœå‘ï¼Œç„¶åæ ¹æ®éª¨éª¼å¯¹ Mesh ä¸­é¡¶ç‚¹çš„ç»‘å®šè®¡ç®—å‡ºé¡¶ç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„åæ ‡ï¼Œä»è€Œå¯¹é¡¶ç‚¹è¿›è¡Œæ¸²æŸ“ã€‚è¦è®°ä½ï¼Œåœ¨éª¨éª¼åŠ¨ç”»ä¸­ï¼Œéª¨éª¼æ‰æ˜¯æ¨¡å‹ä¸»ä½“ï¼Œ Mesh ä¸è¿‡æ˜¯ä¸€å±‚çš®ï¼Œä¸€ä»¶è¡£æœã€‚</p>
<p><img src="/uploads/bonejoint.png" alt=""><br>éª¨éª¼åªæ˜¯ä¸€ä¸ªå½¢è±¡çš„è¯´æ³•ï¼Œå®é™…ä¸Š<strong>éª¨éª¼å¯ç†è§£ä¸ºä¸€ä¸ªåæ ‡ç©ºé—´ï¼Œå…³èŠ‚å¯ç†è§£ä¸ºéª¨éª¼åæ ‡ç©ºé—´çš„åŸç‚¹</strong>ã€‚å…³èŠ‚çš„ä½ç½®ç”±å®ƒåœ¨çˆ¶éª¨éª¼åæ ‡ç©ºé—´ä¸­çš„ä½ç½®æè¿°ã€‚ä¸Šå›¾ä¸­æœ‰ä¸‰å—éª¨éª¼ï¼Œåˆ†åˆ«æ˜¯ä¸Šè‡‚ï¼Œå‰è‡‚å’Œä¸¤ä¸ªæ‰‹æŒ‡ã€‚ Clavicle( é”éª¨ ) æ˜¯ä¸€ä¸ªå…³èŠ‚ï¼Œå®ƒæ˜¯ä¸Šè‡‚çš„åŸç‚¹ï¼ŒåŒæ ·è‚˜å…³èŠ‚ (elbow joint) æ˜¯å‰è‡‚çš„åŸç‚¹ï¼Œè…•å…³èŠ‚ (wrist) æ˜¯æ‰‹æŒ‡éª¨éª¼çš„åŸç‚¹ã€‚å…³èŠ‚æ—¢å†³å®šäº†éª¨éª¼ç©ºé—´çš„ä½ç½®ï¼Œåˆæ˜¯éª¨éª¼ç©ºé—´çš„æ—‹è½¬å’Œç¼©æ”¾ä¸­å¿ƒã€‚ä¸ºä»€ä¹ˆç”¨ä¸€ä¸ª 4X4 çŸ©é˜µå°±å¯ä»¥è¡¨è¾¾ä¸€ä¸ªéª¨éª¼ï¼Œå› ä¸º 4X4 çŸ©é˜µä¸­å«æœ‰çš„å¹³ç§»åˆ†é‡å†³å®šäº†å…³èŠ‚çš„ä½ç½®ï¼Œæ—‹è½¬å’Œç¼©æ”¾åˆ†é‡å†³å®šäº†éª¨éª¼ç©ºé—´çš„æ—‹è½¬å’Œç¼©æ”¾ã€‚ä»¬æ¥çœ‹å‰è‡‚è¿™ä¸ªéª¨éª¼ï¼Œå…¶åŸç‚¹ä½ç½®æ˜¯ä½äºä¸Šè‡‚ä¸ŠæŸå¤„çš„ï¼Œå¯¹äºä¸Šè‡‚æ¥è¯´ï¼Œå®ƒçŸ¥é“è‡ªå·±çš„åæ ‡ç©ºé—´æŸå¤„ï¼ˆå³è‚˜å…³èŠ‚æ‰€åœ¨çš„ä½ç½®ï¼‰æœ‰ä¸€ä¸ªå­ç©ºé—´ï¼Œé‚£å°±æ˜¯å‰è‡‚ï¼Œè‡³äºå‰è‡‚é‡Œé¢æ˜¯å•¥å°±ä¸è€ƒè™‘äº†ã€‚å½“å‰è‡‚ç»•è‚˜å…³èŠ‚æ—‹è½¬æ—¶ï¼Œå®é™…æ˜¯å‰è‡‚åæ ‡ç©ºé—´åœ¨æ—‹è½¬ï¼Œä»è€Œå…¶ä¸­åŒ…å«çš„å­ç©ºé—´ä¹Ÿåœ¨ç»•è‚˜å…³èŠ‚æ—‹è½¬ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ finger éª¨éª¼ã€‚å’Œå®é™…ç”Ÿç‰©éª¨éª¼ä¸åŒçš„æ˜¯ï¼Œä»¬è¿™é‡Œçš„éª¨éª¼å¹¶æ²¡æœ‰å®è´¨çš„éª¨å¤´ï¼Œæ‰€ä»¥å‰è‡‚æ—‹è½¬æ—¶ï¼Œä»–è‡ªå·±æ²¡å•¥å¯è½¬çš„ï¼Œæ”¹å˜çš„åªæ˜¯åæ ‡ç©ºé—´çš„æœå‘ã€‚ä½ å¯ä»¥è¯´ä¸Šå›¾çš„è“çº¿åœ¨è½¬ï¼Œä½†å®é™…è“çº¿å¹¶ä¸å­˜åœ¨ï¼Œè“çº¿åªæ˜¯ç”»ä¸Šå»è¡¨ç¤ºéª¨éª¼ä¹‹é—´å…³ç³»çš„ï¼ŒçœŸæ­£è½¬çš„æ˜¯éª¨éª¼ç©ºé—´ï¼Œä»¬èƒ½çœ‹åˆ°åœ¨è½¬çš„æ˜¯ wrist joint ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ª finger éª¨éª¼çš„åæ ‡ç©ºé—´ï¼Œå› ä¸ºä»–ä»¬æ˜¯å­ç©ºé—´ï¼Œä¼šè·Ÿéšçˆ¶ç©ºé—´è¿åŠ¨ï¼Œå°±å¥½æ¯”äººè·Ÿç€åœ°çƒè½¬ä¸€æ ·ã€‚</p>
<p><strong>éª¨éª¼å°±æ˜¯åæ ‡ç©ºé—´ï¼Œéª¨éª¼å±‚æ¬¡å°±æ˜¯åµŒå¥—çš„åæ ‡ç©ºé—´ã€‚</strong>å…³èŠ‚åªæ˜¯æè¿°éª¨éª¼çš„ä½ç½®å³éª¨éª¼è‡ªå·±çš„åæ ‡ç©ºé—´åŸç‚¹åœ¨å…¶çˆ¶ç©ºé—´ä¸­çš„ä½ç½®ï¼Œç»•å…³èŠ‚æ—‹è½¬æ˜¯æŒ‡éª¨éª¼åæ ‡ç©ºé—´ï¼ˆåŒ…æ‹¬æ‰€æœ‰å­ç©ºé—´ï¼‰è‡ªèº«çš„æ—‹è½¬ï¼Œå¦‚æ­¤ç†è§£è¶³çŸ£ã€‚ä½†è¿˜æœ‰ä¸¤ä¸ªå¯èƒ½çš„ç–‘é—®ï¼Œä¸€æ˜¯éª¨éª¼çš„é•¿åº¦é—®é¢˜ï¼Œç”±äºéª¨éª¼æ˜¯åæ ‡ç©ºé—´ï¼Œæ²¡æœ‰æ‰€è°“çš„é•¿åº¦å’Œå®½åº¦çš„é™åˆ¶ï¼Œä»¬çœ‹åˆ°çš„é•¿åº¦ä¸€æ–¹é¢æ˜¯è’™çš®åçš„ç»“æœï¼Œå¦ä¸€æ–¹é¢å­éª¨éª¼çš„åŸç‚¹ï¼ˆä¹Ÿå°±æ˜¯å…³èŠ‚ï¼‰çš„ä½ç½®å¾€å¾€å†³å®šäº†è§†è§‰ä¸Šçˆ¶éª¨éª¼çš„é•¿åº¦ï¼Œæ¯”å¦‚è¿™é‡Œ upper arm çº¿æ®µçš„é•¿åº¦å®é™…æ˜¯ç”±elbow joint çš„ä½ç½®å†³å®šçš„ã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ‰‹æŒ‡çš„é‚£ä¸ªç«¯ç‚¹æ˜¯å•¥å•Šï¼Ÿå®é™…ä¸Šåœ¨ä»¬çš„ä¾‹å­ä¸­æ‰‹æŒ‡æ²¡æœ‰å­éª¨éª¼ï¼Œæ‰€ä»¥é‚£ä¸ªç«¯ç‚¹å¹¶ä¸å­˜åœ¨ï¼šï¼‰é‚£æ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºç”»ä¸Šå»çš„ã€‚å®é™…é—®é¢˜ä¸­æ€»æœ‰æœ€ä¸‹å±‚çš„éª¨éª¼ï¼Œä»–ä»¬ä¸èƒ½å†³å®šå…¶ä»–éª¨éª¼äº†ï¼Œä»–ä»¬çš„ä½œç”¨åªå‰©ä¸‹æ§åˆ¶ Mesh é¡¶ç‚¹ã€‚å¯¹äº†ï¼Œé‚£ä¹ˆæ‰‹æŒ‡çš„é•¿åº¦å¦‚ä½•ç¡®å®šï¼Ÿä»¬çœ‹åˆ°çš„é•¿åº¦åº”è¯¥æ˜¯ç”±æ‰‹æŒ‡éƒ¨åˆ†çš„é¡¶ç‚¹å’Œè’™çš®å†³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ç”± Mesh ä¸­å±äºæ‰‹æŒ‡çš„é‚£äº›ç‚¹ç¦»è…•å…³èŠ‚çš„è·ç¦»å†³å®šã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦å°†éª¨éª¼ç»„ç»‡æˆå±‚æ¬¡ç»“æ„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸ºäº†åšåŠ¨ç”»æ–¹ä¾¿ï¼Œè®¾æƒ³å¦‚æœåªæœ‰ä¸€å—éª¨éª¼ï¼Œé‚£ä¹ˆè®©ä»–åŠ¨èµ·æ¥å°±å¤ªç®€å•äº†ï¼ŒåŠ¨ç”»æ¯ä¸€å¸§ç›´æ¥æŒ‡å®šä»–çš„ä½ç½®å³å¯ã€‚å¦‚æœæ˜¯nå—å‘¢ï¼Ÿé€šè¿‡ç»„æˆä¸€ä¸ªå±‚æ¬¡ç»“æ„ï¼Œå°±å¯ä»¥é€šè¿‡çˆ¶éª¨éª¼æ§åˆ¶å­éª¨éª¼çš„è¿åŠ¨ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œæ”¹å˜æŸéª¨éª¼æ—¶å¹¶ä¸éœ€è¦è®¾ç½®å…¶ä¸‹å­éª¨éª¼çš„ä½ç½®ï¼Œå­éª¨éª¼çš„ä½ç½®ä¼šé€šè¿‡è®¡ç®—è‡ªåŠ¨å¾—åˆ°ã€‚ä¸Šæ–‡å·²ç»è¯´è¿‡ï¼Œçˆ¶å­éª¨éª¼ä¹‹é—´çš„å…³ç³»å¯ä»¥ç†è§£ä¸ºï¼Œ<strong>å­éª¨éª¼ä½äºçˆ¶éª¨éª¼çš„åæ ‡ç³»ä¸­</strong>ã€‚ä»¬çŸ¥é“ç‰©ä½“åœ¨åæ ‡ç³»ä¸­å¯ä»¥åšå¹³ç§»å˜æ¢ï¼Œä»¥åŠè‡ªèº«çš„æ—‹è½¬å’Œç¼©æ”¾å˜æ¢ã€‚å­éª¨éª¼åœ¨çˆ¶éª¨éª¼çš„åæ ‡ç³»ä¸­ä¹Ÿå¯ä»¥åšè¿™äº›å˜æ¢æ¥æ”¹å˜è‡ªå·±åœ¨å…¶çˆ¶éª¨éª¼åæ ‡ç³»ä¸­çš„ä½ç½®å’Œæœå‘ç­‰ã€‚é‚£ä¹ˆå¦‚ä½•è¡¨ç¤ºå‘¢ï¼Ÿç”±äº4X4çŸ©é˜µå¯ä»¥åŒæ—¶è¡¨ç¤ºä¸Šè¿°ä¸‰ç§å˜æ¢ï¼Œæ‰€ä»¥ä¸€èˆ¬æè¿°éª¨éª¼åœ¨å…¶çˆ¶éª¨éª¼åæ ‡ç³»ä¸­çš„å˜æ¢æ—¶ä½¿ç”¨ä¸€ä¸ªçŸ©é˜µï¼Œ<strong>ä¹Ÿå°±æ˜¯DirectX SkinnedMeshä¸­çš„FrameTransformMatrix</strong>ã€‚å®é™…ä¸Šè¿™ä¸æ˜¯å”¯ä¸€çš„æ–¹æ³•ï¼Œä½†åº”è¯¥æ˜¯å…¬è®¤çš„æ–¹æ³•ï¼Œå› ä¸ºçŸ©é˜µä¸å…‰å¯ä»¥åŒæ—¶è¡¨ç¤ºå¤šç§å˜æ¢è¿˜å¯ä»¥æ–¹ä¾¿çš„é€šè¿‡è¿ä¹˜è¿›è¡Œå˜æ¢çš„ç»„åˆï¼Œè¿™åœ¨å±‚æ¬¡ç»“æ„ä¸­éå¸¸æ–¹ä¾¿ã€‚</p>
<p><strong>Vertex blendingå…¬å¼</strong><br>ç°åœ¨è®©ä»¬ç”¨ä¸€ä¸ªå…¬å¼æ€»ç»“ä¸€ä¸‹Vertex blendingçš„æ•´ä¸ªè¿‡ç¨‹(ä½¿ç”¨çŸ©é˜µå˜æ¢)<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Vworld = Vmesh * BoneOffsetMatrix1 * CombindMatrix1 * Weight1</div><div class="line">+ Vmesh* BoneOffsetMatrix2 * CombinedMatrix2 * Weight2</div><div class="line">+ â€¦</div><div class="line">+ Vmesh * BoneOffsetMatrixN * CombindMatrixN * WeightN</div></pre></td></tr></table></figure></p>
<p>ï¼ˆè¿™ä¸ªå…¬å¼ä½¿ç”¨çš„æ˜¯è¡Œå‘é‡å·¦ä¹˜çŸ©é˜µï¼‰</p>
<p>ç”±äºBoneOffsetMatrixå’ŒCombined Matrixéƒ½æ˜¯çŸ©é˜µï¼Œå¯ä»¥å…ˆç›¸ä¹˜è¿™æ ·å°±å‡å°‘å¾ˆå¤šè®¡ç®—äº†ã€‚</p>
<h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h2 id="æŠ€æœ¯èƒŒæ™¯"><a href="#æŠ€æœ¯èƒŒæ™¯" class="headerlink" title="æŠ€æœ¯èƒŒæ™¯"></a>æŠ€æœ¯èƒŒæ™¯</h2><p>UNITY3Dé»˜è®¤çš„éª¨éª¼åŠ¨ç”»ç»„ä»¶[SKinnedMeshRender]ä½¿ç”¨çš„æ˜¯CPUè’™çš®ï¼Œå±å¹•å†…æ¨¡å‹è¾ƒå¤šçš„æ—¶å€™ä¼šé€ æˆCPUè´Ÿæ‹…è¿‡å¤§ï¼Œå¯¼è‡´å¡é¡¿ï¼Œæ‰‹æœºå‘çƒ­ç­‰ã€‚æ–°ç‰ˆæœ¬UNITY3Då¯ä»¥å¼€å¯GPU Skinningï¼Œä½†å…¶ä½¿ç”¨çš„ Transfrom feedback ä¼šå°†å¤§é‡é¡¶ç‚¹ä»GPUä¼ åˆ°CPUå†è®¡ç®—ï¼Œä»¥æ­¤æ¥å®ŒæˆåŠ¨ç”»èåˆæˆ–IKç­‰åŠŸèƒ½ã€‚å› æ­¤éœ€è¦é«˜æ•ˆçš„GPUè’™çš®æ–¹æ¡ˆã€‚</p>
<h2 id="ä½¿ç”¨GPUSkinning"><a href="#ä½¿ç”¨GPUSkinning" class="headerlink" title="ä½¿ç”¨GPUSkinning"></a>ä½¿ç”¨GPUSkinning</h2><ol>
<li>ä½¿ç”¨Unity Animation/Animatorå’ŒSkinnedMeshRendereråˆ¶ä½œè§’è‰²prefabï¼Œ ä¿è¯Animation/Animatorç»„ä»¶å­æ„ä»¶æœ‰SkinnedMeshRendererï¼ˆå¯ä»¥å‚è€ƒExampleç›®å½•ä¸­çš„ä¾‹å­ï¼‰</li>
<li>æ·»åŠ GPUSkinningSamplerè„šæœ¬åˆ°Animation/Animatorç»‘å®šçš„GameObjectä¸Š</li>
</ol>
<p><img src="/uploads/QQ20180919-151122@2x.png" alt=""></p>
<p>æ›´è¯¦ç»†çš„èµ„æ–™æ‚¨å¯å‚è€ƒ  <a href="http://gsdn.sdo.com/help/GRender/GpuSkinning/GpuSkinning.html" target="_blank" rel="external">GpuSkinningä½¿ç”¨æ‰‹å†Œ â€“ GSDN</a></p>
<h2 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h2><p>å½“åœºæ™¯ä¸­æœ‰å¾ˆå¤šäººç‰©åŠ¨ç”»æ¨¡å‹çš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡å¼€é”€ï¼Œè¿™äº›å¼€é”€é™¤äº† DrawCall å¤–ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†æ¥è‡ªäºéª¨éª¼åŠ¨ç”»ã€‚Unity å†…ç½®æä¾›äº† GPU Skinning çš„åŠŸèƒ½ï¼Œä½†æµ‹è¯•ä¸‹æ¥å¹¶æ²¡æœ‰å¯¹æ•´ä½“æ€§èƒ½æœ‰ä»»ä½•æå‡ï¼Œåè€Œæ•´ä½“çš„å¼€é”€å¢åŠ äº†ä¸å°‘ã€‚æœ‰å¾ˆå¤šç§æ–¹æ³•æ¥å‡å°éª¨éª¼åŠ¨ç”»çš„å¼€é”€ï¼Œæ¯ä¸€ç§æ–¹æ³•éƒ½æœ‰å…¶åˆ©å¼Šï¼Œéƒ½ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼Œè¿™é‡Œä»‹ç»çš„æ–¹æ³•åŒæ ·å¦‚æ­¤ã€‚å…¶å®æœ¬è´¨è¿˜æ˜¯ GPU Skinningï¼Œç”±ä»¬è‡ªå·±æ¥å®ç°ï¼Œä½†æ˜¯å’Œ Unity å†…ç½®çš„ GPU Skinning æœ‰æ‰€åŒºåˆ«ã€‚<br><img src="/uploads/QQ20180919-155831@2x.png" alt=""></p>
<p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒUnity è°ƒç”¨åˆ°äº† Opengl ES çš„ Transform Feedback æ¥å£ï¼Œè¿™ä¸ªæ¥å£è‡³å°‘è¦åˆ° OpenGL ES 3.0 æ‰æœ‰ã€‚</p>
<p>åœ¨å¼€å¯ GPUSkinning çš„æ—¶å€™ï¼ŒUnity ç¡®å®å·²ç»åœ¨ CPU ä¸­è¿›è¡Œäº†éª¨éª¼å˜æ¢ï¼Œè€Œåå°†çŸ©é˜µæ•°ç»„ä¼ é€’ç»™ Shaderï¼Œé€šè¿‡ Transform Feedback åï¼Œå°†ç»“æœå­˜å‚¨åˆ° Buffer Object ä¸­ï¼Œè¿™æ—¶ Buffer Object ä¸­å­˜å‚¨çš„é¡¶ç‚¹æ•°æ®å·²ç»æ˜¯è’™çš®å®Œæˆäº†ï¼Œæœ€åæ¸²æŸ“æ¨¡å‹çš„æ—¶å€™ç›´æ¥æ‹¿æ¥ç”¨å³å¯ã€‚ä¸‹é¢è¿™æ®µ glsl æ—¢æ˜¯è¾“å‡º Transform Feedback çš„ï¼Œä¹Ÿè¯æ˜äº†è¿™ç‚¹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#version 300 es</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_bone_count = <span class="number">32</span>;</div><div class="line"><span class="keyword">const</span> highp <span class="keyword">float</span> max_bone_count_inv = <span class="number">1.0</span> / <span class="keyword">float</span>(max_bone_count); </div><div class="line"><span class="keyword">const</span> highp <span class="keyword">float</span> half_texel = <span class="number">0.5</span> * max_bone_count_inv; </div><div class="line"><span class="keyword">in</span> vec3 in_vertex;</div><div class="line"><span class="keyword">in</span> vec3 in_normal;</div><div class="line"><span class="keyword">in</span> vec4 in_tangent;</div><div class="line"><span class="keyword">in</span> ivec2 in_boneIndices;</div><div class="line"><span class="keyword">in</span> vec2  in_boneWeights;</div><div class="line"><span class="keyword">out</span> vec3 out_pos;</div><div class="line"><span class="keyword">out</span> vec3 out_normal;</div><div class="line"><span class="keyword">out</span> vec4 out_tangent;</div><div class="line"></div><div class="line">uniform vec4 bones[max_bone_count*<span class="number">3</span>];</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> GET_MATRIX(idx) mat4( bones[int(idx)*3 + 0], bones[int(idx)*3 + 1], bones[int(idx)*3 + 2], vec4(0.0, 0.0, 0.0, 1.0))</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span>(<span class="params"><span class="keyword">void</span></span>)</span></div><div class="line">&#123;</div><div class="line">    vec4 inpos = vec4(in_vertex.xyz, <span class="number">1.0</span>);</div><div class="line">    mat4 localToWorldMatrix = GET_MATRIX(in_boneIndices.x) * in_boneWeights[<span class="number">0</span>];</div><div class="line">    <span class="keyword">if</span>(in_boneWeights[<span class="number">1</span>] &gt; <span class="number">0.0</span>)</div><div class="line">        localToWorldMatrix += GET_MATRIX(in_boneIndices.y) * in_boneWeights[<span class="number">1</span>] ;</div><div class="line">    out_pos = (inpos * localToWorldMatrix).xyz;</div><div class="line">    gl_Position = vec4(out_pos.xyz, <span class="number">1.0</span>);</div><div class="line">    out_normal = normalize( ( vec4(in_normal.xyz, <span class="number">0.0</span>) * localToWorldMatrix)).xyz;</div><div class="line">    out_tangent = vec4( normalize( ( vec4(in_tangent.xyz, <span class="number">0.0</span>) * localToWorldMatrix)).xyz, in_tangent.w);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ¬¡ä»¬è¦åŠ¨æ‰‹å®ç°çš„å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯ä¸ä½¿ç”¨ Transform Feedbackï¼Œå› ä¸ºè¦ä¿è¯åœ¨ OpenGL ES 2.0 ä¸Šä¹Ÿèƒ½è‰¯å¥½è¿è¡Œï¼Œå†µä¸”å¼•æ“ä¹Ÿæ²¡æœ‰æä¾›è¿™ä¹ˆåº•å±‚çš„æ¥å£ã€‚</p>
<p>å¤§è‡´çš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š</p>
<p>å°†éª¨éª¼åŠ¨ç”»æ•°æ®åºåˆ—åŒ–åˆ°è‡ªå®šä¹‰çš„æ•°æ®ç»“æ„ä¸­ã€‚è¿™ä¹ˆåšæ˜¯å› ä¸ºè¿™æ ·èƒ½å®Œå…¨æ‘†è„± Animation çš„æŸç¼šï¼Œå¹¶ä¸”å¯ä»¥åšåˆ° Optimize Game Objectsï¼ˆUnity ä¸­ä¸€ä¸ªåŠŸèƒ½ï¼Œå°†éª¨éª¼çš„å±‚çº§ç»“æ„ GameObjects å®Œå…¨å»æ‰ï¼Œå‡å°‘å¼€é”€ï¼‰ï¼ŒåŒæ—¶ä¸ä¸¢å¤±ç»‘ç‚¹ã€‚<br>åœ¨ CPU ä¸­è¿›è¡Œéª¨éª¼å˜æ¢ã€‚<br>å°†éª¨éª¼å˜æ¢çš„ç»“æœä¼ é€’ç»™ GPUï¼Œè¿›è¡Œè’™çš®ã€‚<br>å¾ˆç®€å•çš„ä¸‰å¤§æ­¥ï¼Œå¯¹äºä¼ ç»Ÿçš„éª¨éª¼åŠ¨ç”»æ¥è¯´æ²¡æœ‰ä»»ä½•ç‰¹æ®Šçš„æ­¥éª¤ï¼Œä¸‹é¢ä¼šå¯¹å…¶ä¸­çš„æ¯ä¸€æ­¥å±•å¼€è¯´æ˜ï¼Œå¹¶å°†å…¶ä¸­çš„ç»†èŠ‚è¯´æ¸…æ¥šã€‚</p>
<h3 id="æå–éª¨éª¼åŠ¨ç”»æ•°æ®"><a href="#æå–éª¨éª¼åŠ¨ç”»æ•°æ®" class="headerlink" title="æå–éª¨éª¼åŠ¨ç”»æ•°æ®"></a>æå–éª¨éª¼åŠ¨ç”»æ•°æ®</h3><p><img src="/uploads/QQ20180919-160038@2x.png" alt=""><br>ç›®çš„å°±æ˜¯å°†è¿™äº›æ•°æ®æå–å‡ºæ¥ï¼Œå­˜å‚¨åˆ°è‡ªå®šä¹‰çš„æ•°æ®ç»“æ„ä¸­ã€‚ä»£ç å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">EditorCurveBinding[] curvesBinding = AnimationUtility.GetCurveBindings(animClip);</div><div class="line"><span class="keyword">foreach</span>(<span class="keyword">var</span> curveBinding <span class="keyword">in</span> curvesBinding)</div><div class="line">&#123;</div><div class="line">    <span class="comment">// æ—‹è½¬</span></div><div class="line">    AnimationCurve curveRX = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalRotation.x"</span>);</div><div class="line">    AnimationCurve curveRY = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalRotation.y"</span>);</div><div class="line">    AnimationCurve curveRZ = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalRotation.z"</span>);</div><div class="line">    AnimationCurve curveRW = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalRotation.w"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// ä½ç§»</span></div><div class="line">    AnimationCurve curvePX = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalPosition.x"</span>);</div><div class="line">    AnimationCurve curvePY = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalPosition.y"</span>);</div><div class="line">    AnimationCurve curvePZ = AnimationUtility.GetEditorCurve(animClip, curveBinding.path, curveBinding.type, <span class="string">"m_LocalPosition.z"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// ä¸è€ƒè™‘ç¼©æ”¾ï¼Œå‡å®šæ‰€æœ‰éª¨éª¼çš„ç¼©æ”¾éƒ½æ˜¯ 1</span></div><div class="line"></div><div class="line">    <span class="keyword">float</span> curveRX_v = curveRX.Evaluate(second);</div><div class="line">    <span class="keyword">float</span> curveRY_v = curveRY.Evaluate(second);</div><div class="line">    <span class="keyword">float</span> curveRZ_v = curveRZ.Evaluate(second);</div><div class="line">    <span class="keyword">float</span> curveRW_v = curveRW.Evaluate(second);</div><div class="line"></div><div class="line">    <span class="keyword">float</span> curvePX_v = curvePX.Evaluate(second);</div><div class="line">    <span class="keyword">float</span> curvePY_v = curvePY.Evaluate(second);</div><div class="line">    <span class="keyword">float</span> curvePZ_v = curvePZ.Evaluate(second);</div><div class="line"></div><div class="line">    Vector3 translation = <span class="keyword">new</span> Vector3(curvePX_v, curvePY_v, curvePZ_v);</div><div class="line">    Quaternion rotation = <span class="keyword">new</span> Quaternion(curveRX_v, curveRY_v, curveRZ_v, curveRW_v);</div><div class="line">    NormalizeQuaternion(<span class="keyword">ref</span> rotation);</div><div class="line">    matrices.Add(</div><div class="line">        Matrix4x4.TRS(translation, rotation, Vector3.one)</div><div class="line">    );</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å…¶ä¸­æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‚ç¬¬ä¸€ï¼Œè¦æ¸…æ¥š AnimationCurve ä¸­æå–å‡ºæ¥çš„æ—‹è½¬é‡æ˜¯æ¬§æ‹‰è§’è¿˜æ˜¯å››å…ƒæ•°ï¼Œè¿™é‡Œä¸€å¼€å§‹å°±å¼„é”™äº†ï¼Œæƒ³å½“ç„¶è®¤ä¸ºæ˜¯æ¬§æ‹‰è§’ï¼Œæ‰€ä»¥éšåè®¡ç®—å¾—åˆ°çš„ç»“æœä¹Ÿå°±é”™äº†ã€‚ç¬¬äºŒï¼Œç”¨æ¥æ—‹è½¬çš„å››å…ƒæ•°ï¼Œå¿…é¡»æ˜¯å•ä½å››å…ƒæ•°ï¼ˆæ¨¡æ˜¯1ï¼‰ï¼Œå¦åˆ™ä½ ä¼šå¾—åˆ° Unity çš„ä¸€ä¸ªæŠ¥é”™ä¿¡æ¯ã€‚</p>
<p>ä»¥ä¸Šçš„ä»£ç ä¸­ï¼Œå°†æ¯ä¸€å¸§çš„æ•°æ®ä»¥ 30fps çš„é¢‘ç‡ç›´æ¥é‡‡æ ·äº†å‡ºæ¥ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä¸é‡‡æ ·å‡ºæ¥ï¼Œè€Œæ˜¯ç­‰éœ€è¦çš„æ—¶å€™å†ä» AnimationCurve ä¸­é‡‡æ ·ï¼Œè¿™æ ·ä¼šæ›´å¹³æ»‘ä½†æ˜¯è¿è¡Œæ—¶çš„è®¡ç®—é‡ä¹Ÿæ›´å¤šäº†ã€‚</p>
<h3 id="éª¨éª¼å˜æ¢"><a href="#éª¨éª¼å˜æ¢" class="headerlink" title="éª¨éª¼å˜æ¢"></a>éª¨éª¼å˜æ¢</h3><p>éª¨éª¼å˜æ¢æ˜¯æ‰€æœ‰ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†äº†ï¼Œçœ‹ä¼¼æŒºå¤æ‚ï¼Œå…¶å®æƒ³æ¸…æ¥šåä»£ç é‡æ˜¯æœ€å°‘çš„:<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// æ›´æ–° Walk åŠ¨ä½œçš„æ‰€æœ‰éª¨éª¼å˜æ¢</span></div><div class="line">    UpdateBoneAnimationMatrix(<span class="string">"Walk"</span>, second);</div><div class="line">    second += Time.deltaTime;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UpdateBoneAnimationMatrix</span>(<span class="params"><span class="keyword">string</span> animName, <span class="keyword">float</span> time</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// boneAnimation æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ç»“æ„</span></div><div class="line">    <span class="comment">// å…¶ä¸­å­˜å‚¨äº†åˆšæ‰ä» AnimationCurve ä¸­é‡‡æ ·åˆ°çš„åŠ¨ç”»æ•°æ®</span></div><div class="line">    GPUSkinning_BoneAnimation boneAnimation = GetBoneAnimation(animName);</div><div class="line">    <span class="keyword">int</span> frameIndex = (<span class="keyword">int</span>)(time * boneAnimation.fps) % (<span class="keyword">int</span>)(boneAnimation.length * boneAnimation.fps);</div><div class="line">    <span class="comment">// è·å–å½“å‰æ’­æ”¾çš„æ˜¯å“ªä¸€å¸§çš„åŠ¨ç”»æ•°æ®</span></div><div class="line">    GPUSkinning_BoneAnimationFrame frame = boneAnimation.frames[frameIndex];</div><div class="line"></div><div class="line">    <span class="comment">// åˆ·æ–°æ‰€æœ‰çš„éª¨æ¶åŠ¨ç”»çŸ©é˜µ</span></div><div class="line">    UpdateBoneTransformMatrix(bones[rootBoneIndex], Matrix4x4.identity, frame);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UpdateBoneTransformMatrix</span>(<span class="params">GPUSkinning_Bone bone, Matrix4x4 parentMatrix, GPUSkinning_BoneAnimationFrame frame</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> index = BoneAnimationFrameIndexOf(frame, bone);</div><div class="line">    Matrix4x4 mat = parentMatrix * frame.matrices[index];</div><div class="line">    <span class="comment">// å½“å‰éª¨éª¼</span></div><div class="line">    bone.animationMatrix = mat * bone.bindpose;</div><div class="line"></div><div class="line">    <span class="comment">// ç»§ç»­é€’å½’å­éª¨éª¼</span></div><div class="line">    GPUSkinning_Bone[] children = bone.children;</div><div class="line">    <span class="keyword">int</span> numChildren = children.Length;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numChildren; ++i)</div><div class="line">    &#123;</div><div class="line">        UpdateBoneTransformMatrix(children[i], mat, frame);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç®€å•æ¥è¯´éª¨éª¼å˜æ¢å°±æ˜¯ä¸€ä¸ªçŸ©é˜µä¹˜æ³•ï¼Œæ¯”å¦‚ bone0ï¼ˆç®€å†™ä¸ºb0ï¼‰ æ˜¯ bone1ï¼ˆç®€å†™ä¸ºb1ï¼‰ çš„çˆ¶éª¨éª¼ï¼š<br><img src="/uploads/QQ20180919-160341@2x.png" alt=""></p>
<p>æ³¨æ„è¿™é‡Œæ˜¯çŸ©é˜µå·¦ä¹˜ï¼ˆä»å³å¾€å·¦è¯»ï¼‰ï¼Œtrs æ˜¯ Matrix4x4.TRSï¼Œä¹Ÿå°±æ˜¯ä» AnmationCurve é‡‡æ ·åˆ°çš„æ•°æ®ã€‚<br>Bindpose çš„ä½œç”¨æ˜¯å°†æ¨¡å‹ç©ºé—´ä¸­çš„é¡¶ç‚¹åæ ‡å˜æ¢åˆ°éª¨éª¼ç©ºé—´ä¸­ï¼ˆæ˜¯éª¨éª¼çŸ©é˜µçš„é€†çŸ©é˜µï¼‰ï¼Œç„¶ååº”ç”¨å½“å‰éª¨éª¼çš„å˜æ¢ï¼Œæ²¿ç€å±‚çº§å…³ç³»ä¸€å±‚å±‚çš„å˜æ¢ä¸‹å»ã€‚</p>
<h3 id="è’™çš®"><a href="#è’™çš®" class="headerlink" title="è’™çš®"></a>è’™çš®</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    UpdateBoneAnimationMatrix(<span class="string">"Walk"</span>, second);</div><div class="line">    Play();</div><div class="line">    second += Time.deltaTime;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> Matrix4x4[] matricesUniformBlock = <span class="literal">null</span>;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Play</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> numBones = bones.Length;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numBones; ++i)</div><div class="line">    &#123;</div><div class="line">        matricesUniformBlock[i] = bones[i].animationMatrix;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// å°†éª¨éª¼å˜æ¢çš„ç»“æœä¼ é€’åˆ° Shader ä¸­</span></div><div class="line">    <span class="comment">// SetMatrixArrayè¿™æ˜¯ Unity5.4 ä¹‹åæä¾›çš„æ–°çš„ API</span></div><div class="line">    <span class="comment">// ä»¥å‰æ˜¯ä¸èƒ½ç›´æ¥ä¼ ä¸€ä¸ªæ•°ç»„çš„ï¼Œåªèƒ½ä¸€ä¸ªä¸ªå…ƒç´ å•ç‹¬ä¼ ï¼Œæ•ˆç‡å¾ˆä½</span></div><div class="line">    <span class="comment">// æ–°çš„ API å‡å°äº†å¼€é”€ï¼ˆçœ‹ä¸‹å›¾ï¼‰</span></div><div class="line">    newMtrl.SetMatrixArray(shaderPropID_Matrices<span class="comment">/*_Matrices*/</span>, matricesUniformBlock);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180919-160501@2x.png" alt=""><br>ç”±äºéª¨éª¼æ•°é‡å›ºå®šä¸º 24ï¼Œæ‰€ä»¥å›¾ä¸­çš„ 96 = 24 x 4</p>
<p>ä½¿ç”¨ SetMatrixArray å…¶å®æœ‰ç‚¹æµªè´¹äº†ï¼Œå› ä¸ºå¯¹äºä¸€ä¸ª 4x4 çš„çŸ©é˜µï¼ˆå››ä¸ªfloat4ï¼‰æ¥è¯´ï¼Œæœ€åä¸€ç»´æ°¸è¿œæ˜¯ ï¼ˆ0, 0, 0, 1ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ 3x4çš„çŸ©é˜µï¼ˆä¸‰ä¸ªfloat4ï¼‰ä»£æ›¿ï¼Œè¿™æ ·å°±å‡å°‘äº†æ•°æ®ä¼ é€’çš„å‹åŠ›ã€‚</p>
<p>ç°åœ¨æ‰€æœ‰çš„éª¨éª¼å˜æ¢çŸ©é˜µå·²ç»ä¼ é€’åˆ° Shader ä¸­äº†ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›æ•°æ®æ¥è’™çš®ï¼ˆå˜æ¢é¡¶ç‚¹åæ ‡ï¼‰</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨¡å‹ç¡®å®šä¸º 24 ä¸ªéª¨éª¼</span></div><div class="line"><span class="comment">// ä¸åŒçš„è®¾å¤‡å¯¹å¸¸é‡å¯„å­˜å™¨å­˜å‚¨çš„æœ€å¤§æ•°æ®é‡éƒ½æ˜¯æœ‰å·®åˆ«çš„ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„</span></div><div class="line">uniform float4x4 _Matrices[<span class="number">24</span>];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> appdata</div><div class="line">&#123;</div><div class="line">    float4 vertex : POSITION;</div><div class="line">    float2 uv : TEXCOORD0;</div><div class="line">    <span class="comment">// tangent å­˜å‚¨äº†éª¨éª¼ç´¢å¼•å’Œæƒé‡</span></div><div class="line">    <span class="comment">// tangent.x ç¬¬ä¸€æ ¹éª¨éª¼ç´¢å¼•</span></div><div class="line">    <span class="comment">// tangent.y ç¬¬ä¸€æ ¹éª¨éª¼æƒé‡</span></div><div class="line">    <span class="comment">// tangent.z ç¬¬äºŒæ ¹éª¨éª¼ç´¢å¼•</span></div><div class="line">    <span class="comment">// tangent.w ç¬¬äºŒæ ¹éª¨éª¼æƒé‡</span></div><div class="line">    float4 tangent : TANGENT;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function">v2f <span class="title">vert</span> (<span class="params">appdata v</span>)</span></div><div class="line">&#123;</div><div class="line">    v2f o;</div><div class="line"></div><div class="line">    <span class="comment">// è’™çš®</span></div><div class="line">    float4 pos = </div><div class="line">        mul(_Matrices[v.tangent.x], v.vertex) * v.tangent.y + </div><div class="line">        mul(_Matrices[v.tangent.z], v.vertex) * v.tangent.w;</div><div class="line"></div><div class="line">    <span class="comment">// æ³¨æ„ï¼Œå¦‚æœç”¨åˆ°äº† normalï¼Œä¹Ÿè¦åƒé¡¶ç‚¹ä¸€æ ·ç»è¿‡è’™çš®å¤„ç†å“¦</span></div><div class="line"></div><div class="line">    o.vertex = mul(UNITY_MATRIX_MVP, pos);</div><div class="line">    o.uv = TRANSFORM_TEX(v.uv, _MainTex);</div><div class="line">    <span class="keyword">return</span> o;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Mesh.tangents é‡Œé¢„å…ˆå­˜å‚¨äº†éª¨éª¼ç´¢å¼•å’Œæƒé‡</span></div><div class="line"><span class="comment">// tangent é‡Œåªå®¹å¾—ä¸‹ä¸¤ä¸ªéª¨éª¼èåˆ</span></div><div class="line">Vector4[] tangents = <span class="keyword">new</span> Vector4[mesh.vertexCount];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mesh.vertexCount; ++i)</div><div class="line">&#123;</div><div class="line">    BoneWeight boneWeight = mesh.boneWeights[i];</div><div class="line">    tangents[i].x = boneWeight.boneIndex0;</div><div class="line">    tangents[i].y = boneWeight.weight0;</div><div class="line">    tangents[i].z = boneWeight.boneIndex1;</div><div class="line">    tangents[i].w = boneWeight.weight1;</div><div class="line">&#125;</div><div class="line">newMesh.tangents = tangents;</div></pre></td></tr></table></figure>
<h2 id="å…¶ä»–å¯ä»¥åŒæ—¶è¿›è¡Œçš„ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#å…¶ä»–å¯ä»¥åŒæ—¶è¿›è¡Œçš„ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="å…¶ä»–å¯ä»¥åŒæ—¶è¿›è¡Œçš„ä¼˜åŒ–æ–¹æ¡ˆ"></a>å…¶ä»–å¯ä»¥åŒæ—¶è¿›è¡Œçš„ä¼˜åŒ–æ–¹æ¡ˆ</h2><ol>
<li>é™¤äº†ä½¿ç”¨GPUSkinningä¹‹å¤–ä»¬è¿˜å¯ä»¥é€‰æ‹©ä½¿ç”¨å±‚æ¬¡ç»†èŠ‚ï¼ˆLODï¼‰ï¼Œå®ƒæ˜¯æ ¹æ®ç‰©ä½“åœ¨æ¸¸æˆç”»é¢ä¸­æ‰€å è§†å›¾çš„ç™¾åˆ†æ¯”æ¥è°ƒç”¨ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹çš„ã€‚ç®€å•è€Œè¨€ï¼Œå°±æ˜¯å½“ä¸€ä¸ªç‰©ä½“è·ç¦»æ‘„åƒæœºæ¯”è¾ƒè¿œçš„æ—¶å€™ä½¿ç”¨ä½æ¨¡ï¼Œå½“ç‰©ä½“è·ç¦»æ‘„åƒæœºæ¯”è¾ƒè¿‘çš„æ—¶å€™ä½¿ç”¨é«˜æ¨¡ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–æ¸¸æˆæ¸²æŸ“æ•ˆç‡çš„å¸¸ç”¨æ–¹æ³•ï¼Œç¼ºç‚¹æ˜¯å ç”¨å¤§é‡å†…å­˜ã€‚ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œä¸€èˆ¬æ˜¯åœ¨è§£å†³è¿è¡Œæ—¶æµç•…åº¦çš„é—®é¢˜ï¼Œé‡‡ç”¨çš„æ˜¯ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ã€‚<br><strong>ç»“åˆGPUSkinningä¸LODå°†ä¼šå¤§å¤§æé«˜åŒå±æ•°é‡ï¼ŒåŒæ—¶ç›¸åº”çš„ç”»é¢ä¼šæœ‰æ‰€é™ä½ã€‚å¯æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œå¤„ç†ã€‚</strong></li>
</ol>
<ol>
<li>å¯ç”¨å¤šçº¿ç¨‹æ¸²æŸ“(Multithreading render) ï¼Œå¯ç”¨å¤šçº¿ç¨‹æ¸²æŸ“ä¹‹åæ¸²æŸ“æ•ˆç‡é«˜å‡ºä¸€åŠå·¦å³ã€‚åŸç†æ˜¯å°†Meshæ¸²æŸ“ä»»åŠ¡äº¤ç»™å¦å¤–çš„æ¸²æŸ“è¿›ç¨‹ä»¥æ­¤é™ä½å½“å‰è¿›ç¨‹çš„æ¸²æŸ“è€—æ—¶ã€‚<br><img src="/uploads/QQ20180919-145406.png" alt=""><br><img src="/uploads/multithreaded_rendering_0.png" alt=""></li>
</ol>
<ol>
<li>åœ¨æ¨¡å‹ä¸Šå¯ç”¨Optmize GameObjecté™ä½CPUè€—æ—¶<br>å¯ç”¨Optmize GameObjectä¹‹å‰<br><img src="/uploads/QQ20180919-150059.png" alt=""><br>å¯ç”¨Optmize GameObjectä¹‹å<br><img src="/uploads/QQ20180919-150223.png" alt=""><br>Optmize GameObjectä¼šæå¤§é™ä½éª¨éª¼æ•°ç›®å¯¹å¤šçº¿ç¨‹çš„å½±å“ï¼Œä»è€Œè¾¾åˆ°é™ä½ä¸»çº¿ç¨‹çš„CPUè€—æ—¶ã€‚</li>
</ol>
<p>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å‚è€ƒå¦‚ä¸‹é“¾æ¥:<br><a href="http://chengkehan.github.io/GPUSkinning.html" target="_blank" rel="external">ğŸ”— GPU Skinning -Jimâ€™s GameDev Blog</a><br><a href="https://v.qq.com/x/page/s05175xbjvd.html" target="_blank" rel="external">ğŸ”— Unityä¸­åŠ¨ç”»ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ-uwa</a><br><a href="https://www.youtube.com/watch?v=uDqjIdI4bF4&amp;t=660s" target="_blank" rel="external">ğŸ”— YouTube 12 Principles of Animation</a><br><a href="https://blog.csdn.net/n5/article/details/3105872" target="_blank" rel="external">ğŸ”— Skinned MeshåŸç†è§£æå’Œä¸€ä¸ªæœ€ç®€å•çš„å®ç°ç¤ºä¾‹</a><br><a href="hhttps://docs.unity3d.com/Manual/class-SkinnedMeshRenderer.html" target="_blank" rel="external">ğŸ”— Unityå®˜æ–¹æ–‡æ¡£ Skinned Mesh Renderer</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;GPUSkinning æ•™ç¨‹å¤§çº²(UNITY3D)&lt;br&gt;èŠ‚ä¸€. åŸç†&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŠ¨ç”»ï¼šç†è§£éª¨éª¼åŠ¨ç”»çš„è¿ä½œæ–¹å¼&lt;/li&gt;
&lt;li&gt;æ¨¡å‹ï¼šç†è§£ç¾æœ¯çš„åˆ¶ä½œæµç¨‹&lt;/li&gt;
&lt;li&gt;éª¨éª¼ï¼šç†è§£éª¨éª¼åŠ¨ç”»ä»¥åŠèƒŒåçš„æ•°å­¦æ„ä¹‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;èŠ‚äºŒ. å®è·µ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŠ€æœ¯èƒŒæ™¯&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨GPUSkinning&lt;/li&gt;
&lt;li&gt;å·¥ä½œåŸç†(é‡ç‚¹)&lt;/li&gt;
&lt;li&gt;å®é™…æ•ˆæœ&lt;/li&gt;
&lt;li&gt;å…¶ä»–å¯ä»¥åŒæ—¶è¿›è¡Œçš„ä¼˜åŒ–æ–¹æ¡ˆ&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="æ•™ç¨‹" scheme="http://vrast.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="GPUSkinning" scheme="http://vrast.cn/tags/GPUSkinning/"/>
    
  </entry>
  
  <entry>
    <title>UNITY3D Playables API å®è·µ(ä¸Š)</title>
    <link href="http://vrast.cn/posts/5df16bd2/"/>
    <id>http://vrast.cn/posts/5df16bd2/</id>
    <published>2018-09-07T07:01:13.000Z</published>
    <updated>2018-09-21T07:31:55.476Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>Playables API æ¨å‡ºå·²ç»ä¸€å¹´æœ‰ä½™(2017â€“07â€“04 New in Unity 2017.1)ã€‚å³ä½¿ä½ æ²¡æ—¶é—´å…¶ä»–çš„æ–°åŠŸèƒ½ï¼Œ ä¹Ÿåº”è¯¥çœ‹çœ‹è¿™ä¸ª <code>Playable API</code> .åšè¿‡å¤§å‹æ¸¸æˆçš„åŒå­¦æ— è®ºä½ æ˜¯åšè¿‡ 2Dæˆ–3D åªè¦ä½¿ç”¨è¿‡ Animaiton Controller,æˆ–å¤šæˆ–å°‘ä½“ä¼šè¿‡è¢« èœ˜è››ç½‘(å¤æ‚çŠ¶æ€æœºè¿‡æ¸¡) æ”¯é…çš„ææƒ§ã€‚å½“ä¸‹æœ‰äº† <code>Playable API</code> å¯ä¾›ä½¿ç”¨ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“çš„å‘ Legacy animation API çš„ä½¿ç”¨ä¹ æƒ¯é æ‹¢ â€” é«˜æ•ˆåŠæ˜“äºå®šåˆ¶ã€‚</p>
<p><img src="/uploads/WX20180907-152657.png" alt="ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºï¼Œå½“ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚"></p>
<font color="#185FB4">åœ¨æˆ‘çœ‹æ¥ Playable API çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ›¿æ¢æ‰LegacyåŠ¨ç”»ç³»ç»Ÿï¼Œå¹¶ä¸”å…¼å®¹Timelineï¼ˆæœ¬ç¯‡ä¸ä»‹ç»timeline æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹ï¼‰ã€‚æ€»çš„ä¸€ä¸ªè¯æ¦‚æ‹¬å°±æ˜¯ ã€dynamicallyã€‘ï¼Œå¦‚åŒä½¿ç”¨ç»„ä»¶ä¸€èˆ¬çš„çµæ´»ã€‚</font>

<blockquote>
<p>ç›®å‰æˆ‘åœ¨æµ‹è¯•ä¸­ä½¿ç”¨äº† UNITY2018.1+ ç¼–è¾‘å™¨ã€‚å¦‚æœä¸ä½¿ç”¨è¯¥å¯è§†åŒ–æ’ä»¶æ‚¨åœ¨ UNITY5.x ç‰ˆæœ¬å°±èƒ½ä½¿ç”¨<code>Playable API</code>ã€‚ ä½¿ç”¨5.xç‰ˆæœ¬çš„Playable API æ—¶è¯·æ³¨æ„åç»­çš„ä»£ç APIå˜æ›´ï¼ŒæŸäº›å‡½æ•°åæˆ–è°ƒç”¨æ–¹å¼å¯èƒ½å·²ç»æ›´æ”¹ï¼Œå¦‚æœä»æœªä½¿ç”¨è¿‡ å»ºè®®ä» UNITY2017+ å¼€å§‹å…¥æ‰‹ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="å‡†å¤‡å·¥ä½œ-å¯è·³è¿‡"><a href="#å‡†å¤‡å·¥ä½œ-å¯è·³è¿‡" class="headerlink" title="å‡†å¤‡å·¥ä½œ(å¯è·³è¿‡)"></a>å‡†å¤‡å·¥ä½œ(å¯è·³è¿‡)</h1><h2 id="è°ƒè¯•å·¥å…·-graph-visualizer"><a href="#è°ƒè¯•å·¥å…·-graph-visualizer" class="headerlink" title="è°ƒè¯•å·¥å…· graph-visualizer"></a>è°ƒè¯•å·¥å…· graph-visualizer</h2><p>æˆ‘ä»¬å…ˆClone UNITY TECHNOLOGIES æä¾›çš„ <code>Playable</code> å¯è§†åŒ–å·¥å…·ï¼Œä¾¿äºåç»­çš„ç†è§£ä¸è°ƒè¯•ã€‚<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/Unity-Technologies/graph-visualizer</div></pre></td></tr></table></figure></p>
<p>æˆ‘åœ¨è¿™é‡Œç›´æ¥å…‹éš†åˆ°æµ‹è¯•å·¥ç¨‹ä¸­ï¼Œç›®å‰æ­¤å·¥å…·æ”¯æŒçš„UNITYç‰ˆæœ¬å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Unity version</th>
<th>Release</th>
</tr>
</thead>
<tbody>
<tr>
<td> 2018.1+</td>
<td>v2.2 (master)</td>
</tr>
<tr>
<td> 2017.1+</td>
<td>v1.1</td>
</tr>
</tbody>
</table>
<h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p><img src="/uploads/WX20180911-144337@2x.png" alt="CloneæˆåŠŸå æ‰“å¼€ Window/graph-visualizer ,åœ¨åˆ›å»ºPlayGraphçš„åœ°æ–¹è°ƒç”¨ GraphVisualizerClient.Show(graph) å³å¯ï¼Œåœ¨è¿è¡Œæ—¶å¯çœ‹åˆ°åŠ¨æ€åˆ›å»ºçš„æ ‘å½¢ç»“æ„"></p>
<p><img src="/uploads/WX20180911-144513@2x.png" alt="æ‚¨å°†ä¼šå¾—åˆ°è¿™æ ·çš„ç”»é¢ å³ä¾§ä¸ºç¤ºèŒƒå›¾ä¾‹ï¼Œå¯æ‰‹åŠ¨å…³é—­ã€‚"></p>
<h1 id="PlayableåŸºç¡€ç»“æ„"><a href="#PlayableåŸºç¡€ç»“æ„" class="headerlink" title="PlayableåŸºç¡€ç»“æ„"></a>PlayableåŸºç¡€ç»“æ„</h1><p><img src="/uploads/QQ20180910-164716@2x.png" alt=""><br>è¿™ä¸¤ä¸ªç»“æ„ä½“æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆä¸Šæ–‡çš„ PlayableGraph ä¾‹å›¾æ¥æ€»ç»“ä¸€ä¸‹è§„å¾‹ã€‚ AnimationOutput æ˜¯æ ¹èŠ‚ç‚¹ï¼ŒPlayable æ˜¯å¯ä»¥é€šè¿‡ åä¸ºXXXXXMixerPlayable æ¥è¿›è¡Œç»„åˆ æˆ– å•ç‹¬ä½¿ç”¨ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªæ‰èƒ½æ„æˆæœ€ç®€å•çš„ PlayableGraphã€‚</p>
<p><img src="/uploads/WX20180911-150945@2x.png" alt="&lt;font color=#3976C3&gt;å°æŠ€å·§ï¼šç¼–è¾‘å™¨ä¸­è¾“å…¥MixerPlayable å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„Mixer(ç»“æ„ä½“)ï¼Œé€šè¿‡è¿™äº›ç±» æˆ‘ä»¬å¯ä»¥è½»æ˜“çš„å°†ä¸€ä¸ªä¸ªä¸åŒç§ç±»çš„èŠ‚ç‚¹è¿æ¥åœ¨ä¸€èµ·ä»è€Œå½¢æˆæ–°çš„æ ‘å½¢ç»“æ„ã€‚&lt;/font&gt;"></p>
<h1 id="å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹-åŠ¨ç”»çš„æ’­æ”¾"><a href="#å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹-åŠ¨ç”»çš„æ’­æ”¾" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹ åŠ¨ç”»çš„æ’­æ”¾"></a>å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹ åŠ¨ç”»çš„æ’­æ”¾</h1><h2 id="åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„-PlayableGraph"><a href="#åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„-PlayableGraph" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„ PlayableGraph"></a>åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„ PlayableGraph</h2><p><img src="/uploads/WX20180911-163559@2x.png" alt="æˆ‘ä»¬ä½¿ç”¨äº”è¡Œä»£ç å°±åˆ›å»ºäº†ä¸€ä¸ªæœ€åŸºç¡€çš„ PlayableGraphã€‚"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable = AnimationClipPlayable.Create(playableGraph, clip);</div><div class="line">playableOutput.SetSourcePlayable(clipPlayable);</div><div class="line"></div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
<p>âš ï¸ æ‚¨åŒæ ·å¯ä»¥ä½¿ç”¨ä¸€è¡Œä»£ç å°±èƒ½è°ƒç”¨æ­¤åŠ¨ç”»ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>Animator</strong>ä¸èƒ½ä¸ºç©ºï¼Œå¦åˆ™ç¼–è¾‘å™¨ä¼šç›´æ¥crashè€Œä¸æŠ¥å¼‚å¸¸ã€‚<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">AnimationPlayableUtilities.PlayClip(GetComponent&lt;Animator&gt;(), clip, <span class="keyword">out</span> playableGraph);</div></pre></td></tr></table></figure></p>
<h2 id="åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ"><a href="#åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ" class="headerlink" title="åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ"></a>åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ</h2><p><img src="/uploads/WX20180911-171707@2x.png" alt="è¿™é‡Œæˆ‘ä»¬æ–°å¢äº†å‡ è¡Œä»£ç ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æˆªå›¾æ‰€ç¤ºmixerèŠ‚ç‚¹ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ inputcount ä¸ outputcount ï¼Œé¡¾åæ€ä¹‰ã€‚æˆ‘ä»¬æ—¢å¯ä»¥ä» PlayableGraph çš„çº§åˆ«æŒ‡å®šä¸¤ä¸ªAnimationClipè¿æ¥åˆ°mixerä¸Šï¼Œå¯ä»¥ä½¿ç”¨mixer ç›´æ¥å»è¿›è¡Œé“¾æ¥ç‚¹è®¾ç½®ã€‚"><br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line">mixerPlayable = AnimationMixerPlayable.Create(playableGraph, <span class="number">2</span>);</div><div class="line">playableOutput.SetSourcePlayable(mixerPlayable);</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip1);</div><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line"></div><div class="line"><span class="comment">//playableGraph.Connect(clipPlayable1,0,mixerPlayable,0);</span></div><div class="line"><span class="comment">//playableGraph.Connect(clipPlayable2, 0, mixerPlayable, 1);</span></div><div class="line"><span class="comment">//ä¸Šé¢çš„ä¸¤è¡Œä¸ä¸‹é¢çš„ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„</span></div><div class="line">mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>);</div><div class="line">mixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable2,<span class="number">0</span>);</div><div class="line"></div><div class="line">weight = Mathf.Clamp01(weight);</div><div class="line">mixerPlayable.SetInputWeight(<span class="number">0</span>, <span class="number">1.0</span>f-weight);<span class="comment">//åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªæ•°æ®ç«¯å£çš„æƒé‡</span></div><div class="line">mixerPlayable.SetInputWeight(<span class="number">1</span>, weight);</div><div class="line"></div><div class="line">playableGraph.Play();</div><div class="line">GraphVisualizerClient.Show(playableGraph);</div></pre></td></tr></table></figure></p>
<h2 id="æ··åˆä½¿ç”¨-AnimationClip-ä¸-AnimatorController"><a href="#æ··åˆä½¿ç”¨-AnimationClip-ä¸-AnimatorController" class="headerlink" title="æ··åˆä½¿ç”¨ AnimationClip ä¸ AnimatorController"></a>æ··åˆä½¿ç”¨ AnimationClip ä¸ AnimatorController</h2><p>ä¿®æ”¹ä¸Šæ–‡ã€åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆã€‘æ‰€æä¾›çš„ä»£ç å— å³å¯ã€‚AnimatorController å¯ä»¥çœ‹ä½œæ˜¯ä¸€é¢—å­æ ‘ï¼Œå®ƒå¯ä»¥è½»æ˜“çš„ä½¿ç”¨<strong>mixerPlayable</strong>ä¸å…¶ä»–çš„clipè¿›è¡Œèåˆï¼Œè¿™ä¸€åˆ‡çš„ä¾¿åˆ©å½’åŠŸäºUNITYé‡å†™çš„é€šç”¨åŠ¨ç”»è°ƒç”¨å±‚ã€‚</p>
<p>åœ¨è§†é¢‘ä¸­æ‚¨å¯ä»¥è§‚å¯Ÿæœ€å·¦ä¾§åœ¨èåˆæƒé‡çš„å˜åŒ–ä¸‹ä¸¤é¢—æ ‘çš„èåˆæƒ…å†µï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimatorControllerPlayable.Create(playableGraph, controller);</div></pre></td></tr></table></figure></p>
<embed src="http://player.youku.com/player.php/sid/XMzgzMjMzNTM4NA==/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash">


<h2 id="å¢åŠ -PlayableGraph-çš„è¾“å‡ºå£-ç±»å‹"><a href="#å¢åŠ -PlayableGraph-çš„è¾“å‡ºå£-ç±»å‹" class="headerlink" title="å¢åŠ  PlayableGraph çš„è¾“å‡ºå£(ç±»å‹)"></a>å¢åŠ  PlayableGraph çš„è¾“å‡ºå£(ç±»å‹)</h2><p>çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬åº”è¯¥æ…¢æ…¢çš„æœ‰ä¸€äº›æ¦‚å¿µäº†</p>
<blockquote>
<p>è®°å¿†æŠ€å·§ï¼šå³è¾“å…¥å£(æ•°é‡) å·¦è¾“å‡ºå£(æ•°é‡)ã€‚ è¿™ä¸¤ä¸ªä¸œè¥¿è´¯ç©¿æ•´ä½“çš„è®¾è®¡ä¸­ã€‚å³ä½¿æœ€åŸºç¡€çš„ playable ç»„ä»¶éƒ½æœ‰è¿™ä¸¤ä¸ªå±æ€§ã€‚è¿™ä¸¤ä¸ªå±æ€§ä¹Ÿæ˜¯æˆ‘ä»¬è®¾è®¡ä¸€æ£µæ ‘çš„å¸¸è§„æ“ä½œã€‚PlayableGraph å°±æ˜¯è¿™é¢—æ ‘ï¼Œé¢å¤–éœ€è¦ç†è§£çš„æ˜¯ï¼š å®ƒå…è®¸(é™åˆ¶äº†) æˆ‘ä»¬éœ€è¦ç”¨ä¸åŒ ç±»å‹çš„ä¸»åˆ†æ”¯ ç„¶åæ‰æ‰©å±•å‡ºå…¶ä»–åˆ†æ”¯ã€‚</p>
</blockquote>
<p>âš ï¸ æ‰€æœ‰å­èŠ‚ç‚¹åˆå§‹åŒ–çš„æ—¶å€™éƒ½æ²¡æœ‰è®¾ç½®è¾“å‡ºè¾“å…¥ç«¯å£æ•°é‡ æ‚¨éœ€è¦æ‰‹åŠ¨æŒ‡æ´¾ã€‚å¦åˆ™ä¼šæŠ¥é”™:<font color="e70000">Connecting invalid input</font></p>
<p><img src="/uploads/ScreenShot2018-09-12at4.19.37PM.png" alt="&lt;font color=#3976C3&gt;å°æŠ€å·§ï¼šç¼–è¾‘å™¨ä¸­è¾“å…¥playableoutput å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„ç±»å‹(ç»“æ„ä½“)ï¼Œé€šè¿‡è¿™äº›ç±» æˆ‘ä»¬å¯ä»¥è½»æ˜“çš„ç»™PlayableGraphæ·»åŠ ä¸åŒç±»å‹çš„å­åˆ†æ”¯ã€‚&lt;/font&gt;"></p>
<p>ç›®å‰æˆ‘ä»¬å·²ç»ç”¨è¿‡äº†<code>AnimationPlayableOutput</code> ä¸‹é¢æ¼”ç¤ºä¸€äº› <code>AudioPlayableOutput</code> çš„æ¡ˆä¾‹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create();</div><div class="line"><span class="keyword">var</span> audioOutput = AudioPlayableOutput.Create(playableGraph, <span class="string">"Audio"</span>, GetComponent&lt;AudioSource&gt;());</div><div class="line"><span class="keyword">var</span> audioClipPlayable = AudioClipPlayable.Create(playableGraph, audioClip, <span class="literal">true</span>);</div><div class="line">audioOutput.SetSourcePlayable(audioClipPlayable);</div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180912-163420.png" alt="å€Ÿæ­¤ä»£ç æŠ›ç –å¼•ç‰ï¼Œå¦å¤–å‡ ç§ç±»å‹(ä¸»åˆ†æ”¯)ä¹Ÿæ˜¯åŒæ ·çš„ä½¿ç”¨æ–¹æ³•"></p>
<h2 id="æ§åˆ¶PlayableGraph-æ ‘-ä¸­çš„çŠ¶æ€åˆ‡æ¢"><a href="#æ§åˆ¶PlayableGraph-æ ‘-ä¸­çš„çŠ¶æ€åˆ‡æ¢" class="headerlink" title="æ§åˆ¶PlayableGraph(æ ‘)ä¸­çš„çŠ¶æ€åˆ‡æ¢"></a>æ§åˆ¶PlayableGraph(æ ‘)ä¸­çš„çŠ¶æ€åˆ‡æ¢</h2><p>å› ä¸º XXXPlayable éƒ½æ˜¯ç»§æ‰¿è‡ªåŒæ¥å£ï¼Œä»¥ä¸‹å‡½æ•°åŒæ ·é€‚ç”¨äºå…¶ä»–ç±»å‹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">audioClipPlayable.Pause();     <span class="comment">//æš‚åœ</span></div><div class="line">audioClipPlayable.Play();      <span class="comment">//æ’­æ”¾</span></div><div class="line">audioClipPlayable.SetDelay(<span class="number">1</span>); <span class="comment">//è®¾ç½®å»¶è¿Ÿ</span></div></pre></td></tr></table></figure>
<p>å‚è€ƒä»£ç ç‰‡æ®µ </p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">float</span> i = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    i += Time.deltaTime;</div><div class="line">    <span class="keyword">if</span> (i &gt; <span class="number">3</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (audioClipPlayable.GetPlayState() == PlayState.Paused)</div><div class="line">            audioClipPlayable.Play();</div><div class="line">        <span class="keyword">else</span></div><div class="line">            audioClipPlayable.Pause();</div><div class="line">        i = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ§åˆ¶æ ‘çš„æ—¶é—´"><a href="#æ§åˆ¶æ ‘çš„æ—¶é—´" class="headerlink" title="æ§åˆ¶æ ‘çš„æ—¶é—´"></a>æ§åˆ¶æ ‘çš„æ—¶é—´</h2><p>å› ä¸º XXXPlayable éƒ½æ˜¯ç»§æ‰¿è‡ªåŒæ¥å£ï¼Œä»¥ä¸‹å‡½æ•°åŒæ ·é€‚ç”¨äºå…¶ä»–ç±»å‹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">float</span> time;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    playableGraph = PlayableGraph.Create();</div><div class="line"></div><div class="line">    clipPlayable = AnimationPlayableUtilities.PlayClip(GetComponent&lt;Animator&gt;(), clip, <span class="keyword">out</span> playableGraph);</div><div class="line">    clipPlayable.Pause();</div><div class="line"></div><div class="line">    playableGraph.Play();</div><div class="line">    GraphVisualizerClient.Show(playableGraph);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    weight = Mathf.Clamp01(weight);</div><div class="line">    clipPlayable.SetTime(time);    <span class="comment">//æ§åˆ¶æ’­æ”¾è¿›åº¦,æ— ä¸Šé™è¶…å‡ºéƒ¨åˆ†è‡ªåŠ¨å¾ªç¯åŠ¨ç”»</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è§†é¢‘ä¸­æ‚¨å¯ä»¥è§‚å¯Ÿæ—¶é—´çš„å‰è¿›ä¸åé€€ç›´æ¥ä½œç”¨äºå½“å‰åŠ¨ç”»èŠ‚ç‚¹ï¼š</p>
<embed src="http://player.youku.com/player.php/sid/XMzgzMjMzNzQwMA==/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash">


<h2 id="ä½¿ç”¨-PlayableBehaviour"><a href="#ä½¿ç”¨-PlayableBehaviour" class="headerlink" title="ä½¿ç”¨ PlayableBehaviour"></a>ä½¿ç”¨ PlayableBehaviour</h2><p>é¡¾åæ€ä¹‰ <strong>PlayableBehaviour</strong> å°±æ˜¯è‡ªå·±å®šä¹‰çš„Playableè¡Œä¸ºï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª <strong>PlayQueuePlayable</strong> å¹¶ä¸”åˆ¶å®šä¸€äº›ç‰¹æ®Šçš„é€»è¾‘åœ¨å…¶ä¸­ï¼ˆå¾ªç¯æ’­æ”¾clipï¼‰ã€‚</p>
<ol>
<li>æˆ‘ä»¬å…ˆçœ‹ä¸‹å®ƒæ˜¯å¦‚ä½•åˆå§‹åŒ–çš„ï¼š<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> playQueuePlayable = ScriptPlayable&lt;PlayQueuePlayable&gt;.Create(playableGraph);<span class="comment">//æ³›å‹å·¥å‚</span></div><div class="line"><span class="keyword">var</span> playQueue = playQueuePlayable.GetBehaviour();<span class="comment">//å®¹å™¨å‡½æ•° è·å–é¥®ç”¨</span></div><div class="line">playQueue.Initialize(clipsToPlay, playQueuePlayable, playableGraph);<span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰åˆå§‹åŒ–å‡½æ•°</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>ä»ç¬¬äºŒè¡Œä»£ç ä¸­ä½¿ç”¨äº†æ³›å‹å·¥å‚æ¥åˆ›å»º <strong>playablebehavior</strong> æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„å®¹å™¨ï¼Œè€Œå¹¶æ˜¯å¼€ç®±å³ç”¨çš„æ ‘èŠ‚ç‚¹ã€‚</p>
<ol>
<li>å®¹å™¨åˆå§‹åŒ–å®Œæ¯•ï¼Œå°†å®ƒè®¾ç½®ä¸ºä¸»åŠ¨ç”»åˆ†æ”¯çš„ä¸‹ä¸€çº§èŠ‚ç‚¹ï¼Œæ“ä½œå®Œæ¯•ã€‚<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"Animation"</span>, GetComponent&lt;Animator&gt;());</div><div class="line">playableOutput.SetSourcePlayable(playQueuePlayable,<span class="number">0</span>);</div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
</li>
</ol>
<p>é‚£ä¹ˆç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå®¹å™¨ã€‚ç°åœ¨å¼€å§‹æ¢ç©¶å®¹å™¨çš„å†…éƒ¨å®ç°ï¼š</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnGraphStart</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnGraphStop</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPlayableCreate</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPlayableDestroy</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBehaviourDelay</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBehaviourPlay</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBehaviourPause</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrepareData</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrepareFrame</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ProcessFrame</span>(<span class="params">Playable playable, FrameData info, <span class="keyword">object</span> playerData</span>)</span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨ç”»å‘¨æœŸå†…çš„å¤§éƒ¨åˆ†æ£€æµ‹ä¸åˆ¤æ–­æˆ‘ä»¬éƒ½èƒ½åœ¨è¿™é‡Œè¿›è¡Œ.</p>
<p>æœ€åæˆ‘ä»¬å†çœ‹ä¸€ä¸‹è‡ªå®šä¹‰ç±» <strong>PlayQueuePlayable</strong> çš„è¡Œä¸ºé€»è¾‘ã€‚</p>
<ol>
<li><p>ä¸Šæ–‡æåˆ°çš„ <strong>Initialize</strong> å‡½æ•°ï¼Œè¿™é‡ŒåŠ¨æ€åˆ›å»ºäº† <em>AnimationClipPlayable</em> å¹¶ä¸”æŒ‡æ´¾ç«¯å£é“¾æ¥åˆ°äº† <em>PlayQueuePlayable</em> </p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Initialize</span>(<span class="params">AnimationClip[] clipsToPlay, Playable owner, PlayableGraph graph</span>)</span></div><div class="line">&#123;</div><div class="line">    owner.SetInputCount(<span class="number">1</span>);</div><div class="line">    mixer = AnimationMixerPlayable.Create(graph, clipsToPlay.Length);</div><div class="line">    graph.Connect(mixer, <span class="number">0</span>, owner, <span class="number">0</span>);</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> clipIndex = <span class="number">0</span> ; clipIndex &lt; mixer.GetInputCount() ; ++clipIndex)</div><div class="line">    &#123;</div><div class="line">        graph.Connect(AnimationClipPlayable.Create(graph, clipsToPlay[clipIndex]), <span class="number">0</span>, mixer, clipIndex);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>é‡å†™ <strong>PrepareFrame</strong> å‡½æ•°ï¼Œç”¨æ¥æ£€æµ‹åŠ¨ç”»å¸§åœ¨æ’­æ”¾å‰çš„é€»è¾‘(ä¸€å¸§è°ƒä¸€æ¬¡) è¿™é‡Œéœ€è¦é¿å…å¤æ‚çš„æ£€æµ‹é€»è¾‘ï¼Œæˆ‘ä»¬å®ç°äº†ç®€å•çš„è½®æ’­é€»è¾‘ï¼šè®©åŠ¨ç”»ä¸€ä¸ªæ¥ä¸€ä¸ªçš„åˆ‡æ¢ã€‚</p>
</li>
</ol>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_CurrentClipIndex = <span class="number">-1</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">float</span> m_TimeToNextClip;</div><div class="line"><span class="keyword">private</span> Playable mixer;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">override</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrepareFrame</span>(<span class="params">Playable owner, FrameData info</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (mixer.GetInputCount() == <span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Advance to next clip if necessary</span></div><div class="line">    m_TimeToNextClip -= (<span class="keyword">float</span>)info.deltaTime;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (m_TimeToNextClip &lt;= <span class="number">0.0</span>f)</div><div class="line">    &#123;</div><div class="line">        m_CurrentClipIndex++;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (m_CurrentClipIndex &gt;= mixer.GetInputCount())</div><div class="line">            m_CurrentClipIndex = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> currentClip = (AnimationClipPlayable)mixer.GetInput(m_CurrentClipIndex);</div><div class="line"></div><div class="line">        currentClip.SetTime(<span class="number">0</span>);</div><div class="line">        m_TimeToNextClip = currentClip.GetAnimationClip().length;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> clipIndex = <span class="number">0</span> ; clipIndex &lt; mixer.GetInputCount(); ++clipIndex)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (clipIndex == m_CurrentClipIndex)</div><div class="line">            mixer.SetInputWeight(clipIndex, <span class="number">1.0</span>f);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            mixer.SetInputWeight(clipIndex, <span class="number">0.0</span>f);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æœ¬ç« èŠ‚å¸¦å¤§å®¶è¿‡äº†ä¸€éPlayables APIçš„åŸºæœ¬ä½¿ç”¨ï¼Œå¹¶ä¸”æŠ›ç –å¼•ç‰çš„è¿›è¡Œäº†ä¸€äº›æŠ€å·§è®²è§£ï¼Œç›¸ä¿¡ç»è¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ å¤§å®¶ä¸€å®šå¯¹ Playables API å……æ»¡äº†å…´è¶£ï¼Œåœ¨ä¸‹ä¸€ç« æˆ‘ä»¬è®²è®²æ›´è¯¦ç»†çš„ æ‰‹éƒ¨IK ä¸ åˆ†å±‚åŠ¨ç”» çš„è¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å€Ÿæ­¤å®ç°äººç‰©çš„æ”€çˆ¬/å°„å‡»/å¤æ‚è¿åŠ¨ç­‰ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzU5MjQ1NTEwOA==&amp;mid=2247493316&amp;idx=1&amp;sn=7e4fef834a8066faca3d2f1f1a090bb4&amp;chksm=fe1dd26fc96a5b79856840f556cf65026facb83520ac1891605e42d5e777d30a0d5219060e21&amp;mpshare=1&amp;scene=1&amp;srcid=0606YJLYnfprk9UjpPQCnre1#rd" target="_blank" rel="external">ğŸ”—  UNITYå®˜æ–¹å¾®ä¿¡å·ç›¸å…³</a></p>
<p><a href="https://docs.unity3d.com/2018.1/Documentation/Manual/Playables.html" target="_blank" rel="external">ğŸ”—  UNITYå®˜æ–¹æ–‡æ¡£ç›¸å…³</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h1&gt;&lt;p&gt;Playables API æ¨å‡ºå·²ç»ä¸€å¹´æœ‰ä½™(2017â€“07â€“04 New in Unity 2017.1)ã€‚å³ä½¿ä½ æ²¡æ—¶é—´å…¶ä»–çš„æ–°åŠŸèƒ½ï¼Œ ä¹Ÿåº”è¯¥çœ‹çœ‹è¿™ä¸ª &lt;code&gt;Playable API&lt;/code&gt; .åšè¿‡å¤§å‹æ¸¸æˆçš„åŒå­¦æ— è®ºä½ æ˜¯åšè¿‡ 2Dæˆ–3D åªè¦ä½¿ç”¨è¿‡ Animaiton Controller,æˆ–å¤šæˆ–å°‘ä½“ä¼šè¿‡è¢« èœ˜è››ç½‘(å¤æ‚çŠ¶æ€æœºè¿‡æ¸¡) æ”¯é…çš„ææƒ§ã€‚å½“ä¸‹æœ‰äº† &lt;code&gt;Playable API&lt;/code&gt; å¯ä¾›ä½¿ç”¨ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“çš„å‘ Legacy animation API çš„ä½¿ç”¨ä¹ æƒ¯é æ‹¢ â€” é«˜æ•ˆåŠæ˜“äºå®šåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/WX20180907-152657.png&quot; alt=&quot;ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºï¼Œå½“ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚&quot;&gt;&lt;/p&gt;
&lt;font color=#185FB4  &gt;åœ¨æˆ‘çœ‹æ¥ Playable API çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ›¿æ¢æ‰LegacyåŠ¨ç”»ç³»ç»Ÿï¼Œå¹¶ä¸”å…¼å®¹Timelineï¼ˆæœ¬ç¯‡ä¸ä»‹ç»timeline æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹ï¼‰ã€‚æ€»çš„ä¸€ä¸ªè¯æ¦‚æ‹¬å°±æ˜¯ ã€dynamicallyã€‘ï¼Œå¦‚åŒä½¿ç”¨ç»„ä»¶ä¸€èˆ¬çš„çµæ´»ã€‚&lt;/font&gt;

&lt;blockquote&gt;
&lt;p&gt;ç›®å‰æˆ‘åœ¨æµ‹è¯•ä¸­ä½¿ç”¨äº† UNITY2018.1+ ç¼–è¾‘å™¨ã€‚å¦‚æœä¸ä½¿ç”¨è¯¥å¯è§†åŒ–æ’ä»¶æ‚¨åœ¨ UNITY5.x ç‰ˆæœ¬å°±èƒ½ä½¿ç”¨&lt;code&gt;Playable API&lt;/code&gt;ã€‚ ä½¿ç”¨5.xç‰ˆæœ¬çš„Playable API æ—¶è¯·æ³¨æ„åç»­çš„ä»£ç APIå˜æ›´ï¼ŒæŸäº›å‡½æ•°åæˆ–è°ƒç”¨æ–¹å¼å¯èƒ½å·²ç»æ›´æ”¹ï¼Œå¦‚æœä»æœªä½¿ç”¨è¿‡ å»ºè®®ä» UNITY2017+ å¼€å§‹å…¥æ‰‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="ANIMATION" scheme="http://vrast.cn/tags/ANIMATION/"/>
    
  </entry>
  
  <entry>
    <title>ç»˜åˆ¶èŠå¤©æ°”æ³¡æ€è·¯</title>
    <link href="http://vrast.cn/posts/bd424e64/"/>
    <id>http://vrast.cn/posts/bd424e64/</id>
    <published>2018-08-08T03:24:52.000Z</published>
    <updated>2018-09-07T06:41:49.404Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è®°å½•ä¸€äº›å°æŠ€å·§ ï¼Œå€Ÿæ­¤æœºä¼šé‡æ–°å¼€å§‹å†™ä½œ .è¿™é‡Œæä¾›ä¸¤ç§æ€è·¯ï¼Œæœ€åå»ºè®®å°†è¿™ä¸¤ç§åšæ³•ç»“åˆä¸€ä¸‹ å¯ä»¥åšæˆç±»ä¼¼å¾®ä¿¡èŠå¤©æ°”æ³¡çš„æ•ˆæœã€‚</p>
</blockquote>
<a id="more"></a>
<p>æœ‰ä¸¤ç§æ–¹å¼æ¥å®ç°äº†èŠå¤©æ°”æ³¡ï¼Œç¬¬ä¸€ç§æ˜¯è‡ªå·±å»è®¡ç®—å½“å‰æ–‡å­—çš„å®½åº¦ï¼Œç„¶åæ§åˆ¶èƒŒæ™¯æ°”æ³¡è¿›è¡Œå®½åº¦ä¸é«˜åº¦çš„ç¼©æ”¾ã€‚å‚è€ƒä»£ç å¦‚ä¸‹</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">BubbleFormate</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line"><span class="comment">//            MainContent.GraphicUpdateComplete();</span></div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (MainContent.rectTransform.sizeDelta.x &gt; MainContent.preferredWidth)</div><div class="line">    &#123;</div><div class="line">        MainContentBG.rectTransform.sizeDelta =</div><div class="line">            <span class="keyword">new</span> Vector2(</div><div class="line">                MainContentBG.rectTransform.sizeDelta.x -</div><div class="line">                (MainContent.rectTransform.sizeDelta.x - MainContent.preferredWidth),</div><div class="line">                MainContentBG.rectTransform.sizeDelta.y</div><div class="line">            );</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> temp_width = <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> rawContent = MainContent.text;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MainContent.text.Length; i++)</div><div class="line">        &#123;</div><div class="line">            MainContent.font.GetCharacterInfo(MainContent.text[i], <span class="keyword">out</span> temp_info, MainContent.fontSize);</div><div class="line">            temp_width += temp_info.advance;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (temp_width &gt;= MainContent.rectTransform.sizeDelta.x)</div><div class="line">            &#123;</div><div class="line">                rawContent = rawContent.Insert(i, <span class="string">"\n"</span>);</div><div class="line">                temp_width = temp_info.advance;</div><div class="line">                </div><div class="line">                MainContentBG.rectTransform.sizeDelta = <span class="keyword">new</span> Vector2(</div><div class="line">                    MainContentBG.rectTransform.sizeDelta.x,</div><div class="line">                    MainContentBG.rectTransform.sizeDelta.y + MainContent.preferredHeight</div><div class="line">                );</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        MainContent.text = rawContent;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/canvas-wrap.gif" alt="ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨ Layout å¸ƒå±€è¿›è¡Œè§„èŒƒ"></p>
<p>æœ€åæˆ‘å»ºè®®ä½¿ç”¨è¿™ä¸¤è€…çš„ç»“åˆï¼Œåœ¨æ§åˆ¶å®½åº¦çš„æ—¶å€™ä¸åŠ é™åˆ¶ï¼Œè‡ªå·±åˆ¤æ–­å®½åº¦ç„¶ååŠ¨æ€çš„æ·»åŠ æ¢è¡Œç¬¦ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯èƒ½æ§åˆ¶æ–‡æœ¬æ¡†çš„é•¿çŸ­ï¼Œåšæˆç±»ä¼¼å¾®ä¿¡èŠå¤©è¿™ç§ æ¶ˆæ¯é•¿çš„è¯ æ°”æ³¡å°±ä¼šå˜é•¿ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è®°å½•ä¸€äº›å°æŠ€å·§ ï¼Œå€Ÿæ­¤æœºä¼šé‡æ–°å¼€å§‹å†™ä½œ .è¿™é‡Œæä¾›ä¸¤ç§æ€è·¯ï¼Œæœ€åå»ºè®®å°†è¿™ä¸¤ç§åšæ³•ç»“åˆä¸€ä¸‹ å¯ä»¥åšæˆç±»ä¼¼å¾®ä¿¡èŠå¤©æ°”æ³¡çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="Chat" scheme="http://vrast.cn/tags/Chat/"/>
    
  </entry>
  
  <entry>
    <title>LipSyncæ’ä»¶è°ƒç ”2</title>
    <link href="http://vrast.cn/posts/3bc1c7b4/"/>
    <id>http://vrast.cn/posts/3bc1c7b4/</id>
    <published>2018-04-24T03:41:33.000Z</published>
    <updated>2018-05-11T09:59:47.570Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡è¯„æµ‹çš„å·¥å…·å®ç°æ–¹å¼éƒ½ç›¸è¿‘,æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<p><strong>LipSync Proã€U3Dã€‘</strong><br><strong>EasyTalkã€U3Dã€‘</strong><br><del><strong>Lipsync Toolã€ç¾æœ¯ç”¨ã€‘</strong></del><br><del><strong>Face and lips</strong></del></p>
<p>è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥   2.é¢éƒ¨è¡¨æƒ…<br>è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§<br><a id="more"></a></p>
<h1 id="ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„-LipSync-å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼"><a href="#ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„-LipSync-å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼" class="headerlink" title="ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„ LipSync å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼"></a>ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„ LipSync å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼</h1><p><img src="/uploads/QQ20180424.jpeg" alt="LipSyncå·¥å…·åœ¨æµç¨‹ä¸Šéƒ½ç±»ä¼¼ 1.å¯¼å…¥è½¬ç ï¼Œè½¬æ¢æˆä¾¿äºè¯­éŸ³è¯†åˆ«å±‚ä½¿ç”¨çš„æ ¼å¼ 2.è¯†åˆ«(éœ€è¦è¯­è¨€ä¸å£°å­¦æ¨¡å‹æ”¯æŒ) 3.ç‰¹å®šæ ¼å¼çš„æ•°æ®å¯¼å‡º 4.æ ¹æ®æ•°æ®æºè¿›è¡Œå£å‹èåˆ(å£å‹äº‹å…ˆæ˜ å°„å¥½äº†)"><br><img src="/uploads/QQSample1.png" alt="EasyTalkè¯­éŸ³è¯†åˆ«å·¥å…·"><br><img src="/uploads/QQ20180427-162401@2x.png" alt="åœ¨è¿™ä¸€å±‚ä¸­EasyTalkå¹¶ä¸å‹å¥½ï¼Œä»–åœ¨å¤–éƒ¨å®ç°çš„éŸ³é¢‘è§£æå·¥å…·å¹¶ä¸æä¾›æºç ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•æ ¹æ®é¡¹ç›®å¯¹æ’ä»¶è¿›è¡Œå®šåˆ¶"> </p>
<p><img src="/uploads/QQSample2.png" alt="Face and lipsä¸å‚åŠ æœ¬æ¬¡è¯„æµ‹æ˜¯å…¶éä¸»æµåº”ç”¨æ–¹å¼ï¼Œéœ€è¦ç¾æœ¯é€šè¿‡MikuMikuDanceç¼–è¾‘å™¨åˆ¶ä½œåŠ¨ä½œç­‰ï¼Œåº”ç”¨æ–¹å‘è¯·å‚è€ƒã€æä¹å‡€åœŸã€‘ "><br><img src="/uploads/QQSample3.png" alt="LipSyncProæ’ä»¶ç¨³å®šæ€§æœ‰å¾…æé«˜ï¼šåœ¨è¿›è¡Œæµ‹è¯•çš„æœŸé—´æ­¤æ’ä»¶åœ¨macä¸Šæœ‰ä»£ç çº§åˆ«çš„é—®é¢˜ã€‚1.4.1ç‰ˆæœ¬ä»£ç bug æ‰‹åŠ¨ä¿®å¤åWIN7èƒ½è·‘ï¼Œ1.4.2æœ€æ–°ç‰ˆä¿®å¤äº†å‰ç‰ˆæœ¬çš„bugä½†æ˜¯åœ¨macä¸Šè¿è¡Œä»æ—§æœ‰å…¶ä»–bugå¯¼è‡´ä¸èƒ½è§£æéŸ³é¢‘ã€‚ã€ç›®å‰macç‰ˆæœ¬ä¸èƒ½è§£æéŸ³é¢‘bugæ­£åœ¨æŸ¥ã€‘"><br><img src="/uploads/hs_err_pid2167.png" alt="Lipsync Toolä¸å‚åŠ æœ¬æ¬¡è¯„æµ‹çš„åŸå› æœ‰ä¸‰ 1.Demoä¸‹è½½ååªæœ‰è‹±è¯­è¯­è¨€æ¨¡å‹ï¼Œä¸æä¾›å…¶ä»–è¯­è¨€ä¸‹è½½ 2.ä¸»è¦æ˜¯ç¾æœ¯ç”¨åœ¨mayaæˆ–3dmaxåšæ’ä»¶ 3.ä»·æ ¼é«˜ï¼Œæœ€ä¾¿å®œ5500$."></p>
<h2 id="è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»"><a href="#è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»" class="headerlink" title="è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»"></a>è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»</h2><h3 id="åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚"><a href="#åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚" class="headerlink" title="åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚"></a>åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚</h3><p>åœ¨ä»‹ç»å®ç°æ–¹å¼ä¹‹å‰æˆ‘ä»¬å…ˆæ·±å…¥ä¸€ä¸‹<strong>è¯­éŸ³è¯†åˆ«å±‚</strong>ï¼ŒåŸå› æ˜¯æ­¤ç±»å‹æ’ä»¶éƒ½ä½¿ç”¨äº†è¯­éŸ³è¯†åˆ«å‡ºçš„æ•°æ®ä½œä¸ºé©±åŠ¨å£å‹çš„<strong>æ•°æ®æº</strong>ã€‚</p>
<p><strong>CMUSphinx</strong> æ˜¯ä¸€ä¸ªå¼€æºç»„ä»¶ ä½œä¸º<strong>è¯­éŸ³è¯†åˆ«å±‚</strong>å±‚çš„æ ¸å¿ƒ ,ä¸‹æ–‡æ˜¯ç®€ä»‹</p>
<p>[CMU Sphinx, also called Sphinx in short, is the general term to describe a group of speech recognition systems developed at Carnegie Mellon University. These include a series of speech recognizers (Sphinx 2 - 4) and an acoustic model trainer (SphinxTrain).</p>
<p>In 2000, the Sphinx group at Carnegie Mellon committed to open source several speech recognizer components, including Sphinx 2 and later Sphinx 3 (in 2001). The speech decoders come with acoustic models and sample applications. The available resources include in addition software for acoustic model training, Language model compilation and a public domain pronunciation dictionary, cmudict.</p>
<p>Sphinx encompasses a number of software systems, described below.   â€”æ¥è‡ªç»´åŸºç™¾ç§‘](<a href="https://en.wikipedia.org/wiki/CMU_Sphinx" target="_blank" rel="external">https://en.wikipedia.org/wiki/CMU_Sphinx</a>)</p>
<h3 id="åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹"><a href="#åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹" class="headerlink" title="åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹"></a>åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹</h3><blockquote>
<p><strong>CMUSphinx</strong> ä½¿ç”¨çš„è¯­è¨€åº“æ˜¯å¯ä»¥è‡ªå·±è®­ç»ƒçš„ <a href="https://cmusphinx.github.io/wiki/tutoriallm/" target="_blank" rel="external">Building a language model</a>ã€‚å·¥ç¨‹é‡æ¯”è¾ƒå¤§ï¼Œå¦‚æœæ²¡æœ‰åšå¥½å……è¶³å‡†å¤‡(èµ„æº)ä¸å»ºè®®è‡ªå·±è®­ç»ƒè¯­è¨€åº“ã€‚æˆ‘ä»¬è‡ªå·±è®­ç»ƒçš„åº“æ˜¯éœ€è¦ä¼˜åŒ–çš„ï¼Œä¸æ˜¯åšå®Œå°±èƒ½ç”¨ï¼Œè‰¯å¥½çš„è¯­éŸ³æ¨¡å‹æ‹¥æœ‰æ›´é«˜çš„è¯†åˆ«ç‡ï¼Œåœ¨é«˜è¯†åˆ«ç‡çš„å‰æä¸‹æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„å£å‹ä¼šæ›´åŠ å‡†ç¡®ã€‚ä¸‹é¢ä¾‹ä¸¾äº†ä¸€äº›åšè¯­è¨€è®­ç»ƒéœ€è¦çš„èµ„æº</p>
</blockquote>
<p><strong>1.çœŸäººè¿›è¡Œè®­ç»ƒ</strong><br>è®­ç»ƒä¹‹å‰ï¼Œå‡è®¾ä½ æœ‰å……è¶³çš„æ•°æ®ï¼š</p>
<p>ç”¨äºå•ä¸ªäººçš„æŒ‡ä»¤åº”ç”¨ï¼Œè‡³å°‘éœ€è¦ä¸€å°æ—¶å½•éŸ³ï¼Œ<br>ç”¨äºå¾ˆå¤šäººæŒ‡ä»¤åº”ç”¨ï¼Œéœ€è¦200ä¸ªå½•éŸ³äººï¼Œæ¯äºº5å°æ—¶<br>ç”¨äºå•ä¸ªäººçš„å¬å†™ï¼Œéœ€è¦10å°æ—¶ä»–çš„å½•éŸ³<br>ç”¨äºå¤šä¸ªäººçš„å¬å†™ï¼Œéœ€è¦200ä¸ªè¯´è¯äººï¼Œæ¯äºº50å°æ—¶çš„å½•éŸ³<br>åŒæ—¶ä½ è¦æœ‰è¿™é—¨è¯­è¨€çš„è¯­éŸ³å­¦çŸ¥è¯†ï¼Œä»¥åŠä½ æœ‰è¶³å¤Ÿçš„æ¯”å¦‚ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œæ¥è®­ç»ƒæ¨¡å‹</p>
<p><strong>2.ä½¿ç”¨æœºå™¨å­¦ä¹ </strong><br>1.æ‚¨å¿…é¡»ä¸ºæŒ‡å®šçš„è¯­è¨€æ”¶é›†éŸ³é¢‘ææ–™ã€‚å®é™…ä¸Šè¿™ä¸æ˜¯è¿™ä¹ˆå¤æ‚çš„äº‹æƒ…ã€‚æœ‰å£°ä¹¦æœ¬ã€ç”µå½±å’Œæ’­å®¢æä¾›è¶³å¤Ÿçš„å½•éŸ³æ„å»ºè‰¯å¥½çš„å£°å­¦æ¨¡å‹ã€‚<br>2.è¯­éŸ³å­¦ä¹ éœ€è¦æ‚¨æ„å»ºä¸€ä¸ªæ¡†æ¶,ç”¨äºè·Ÿè¸ªé”™è¯¯çš„å‘éŸ³ã€‚åŒ…æ‹¬ä»£ä¸æ­£ç¡®çš„å‘éŸ³å’Œå¾—åˆ†ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ cmusphinx çš„æœºå™¨å­¦ä¹ ã€‚</p>
<h1 id="å¯ç”¨æ€§"><a href="#å¯ç”¨æ€§" class="headerlink" title="å¯ç”¨æ€§"></a>å¯ç”¨æ€§</h1><h3 id="å¯å€Ÿé‰´ä¼˜ç‚¹"><a href="#å¯å€Ÿé‰´ä¼˜ç‚¹" class="headerlink" title="å¯å€Ÿé‰´ä¼˜ç‚¹"></a>å¯å€Ÿé‰´ä¼˜ç‚¹</h3><ol>
<li>é€Ÿåº¦å¿«ï¼ŒåŸºäºè¯­éŸ³è¯†åˆ«å¯ä»¥å¿«é€ŸåŒ¹é…å‡ºæ‰€æœ‰çš„éŸ³ç´ ï¼Œå¹¶ä¸”æ˜ å°„ç›¸åº”çš„å£å‹</li>
<li>è¡¨æƒ…å¤šï¼Œå¯ä»¥å®šåˆ¶éå¸¸å¤šçš„å£å‹ä¸é¢éƒ¨è¡¨æƒ…</li>
<li>å¯ä¿®æ”¹ï¼Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨ç¼–è¾‘å·²ç»è¯†åˆ«å®Œæ¯•çš„ã€éŸ³é¢‘å¯¹åº”çš„å£å‹é…ç½®æ–‡ä»¶ã€‘</li>
</ol>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol>
<li>æ¯ç§è¯­è¨€éœ€è¦å¯¹åº”çš„å£°å­¦ä¸è¯­è¨€æ¨¡å‹</li>
<li>éš¾æ·±åº¦å®šåˆ¶ï¼Œæˆ‘ä»¬åªèƒ½å®šåˆ¶è¡¨å±‚ä½¿ç”¨ï¼Œæ·±å…¥åˆ°è¯­éŸ³è¯†åˆ«å±‚é¢å¾ˆéš¾ã€‚</li>
</ol>
<h1 id="è¡¥å……èµ„æ–™-Lipsync-Tool"><a href="#è¡¥å……èµ„æ–™-Lipsync-Tool" class="headerlink" title="è¡¥å……èµ„æ–™ Lipsync Tool"></a>è¡¥å……èµ„æ–™ Lipsync Tool</h1><p>å¯¹ Lipsync Tool è¿™æ¬¾å·¥å…·è¿›è¡Œä¸€äº›è¡¥å……è¯´æ˜ã€‚ä¸‹æ–‡æ˜¯ä¸€äº›æŠ€æœ¯æ ‡å‡†</p>
<p>ç›®å‰æ”¯æŒå¯¼å‡ºæ ¼å¼å¦‚ä¸‹ï¼Œä¸»è¦åœ¨å½±è§†æ–¹å‘ï¼Œè¿™é‡Œæåˆ°æœ‰ç®€å•çš„è„šæœ¬å¯¼å‡ºä½†æ˜¯ä¸ç¡®å®šå®ç°ï¼Œä»–å¹¶æœªæ”¯æŒä»»ä½•çš„æ¸¸æˆå¼•æ“ã€‚ç›®å‰åªæ˜¯è¡”æ¥äº†å½±è§†ä¸å»ºæ¨¡è½¯ä»¶ã€‚<br>It exports a simple text format readable from most scripting languages.<br>3ds max script for creating animations in max from lipsync tool files<br>MAYA .mov files, melscript (Lipscript) importer<br>.swf, .as : Macromedia Flash Files</p>
<p><a href="https://en.wikipedia.org/wiki/CMU_Sphinx" target="_blank" rel="external">ğŸ”— CMUSphinxä»‹ç»</a><br><a href="http://sox.sourceforge.net" target="_blank" rel="external">ğŸ”— SOXéŸ³é¢‘å¤„ç†åº“</a><br><a href="https://cmusphinx.github.io/wiki/tutoriallm/" target="_blank" rel="external">ğŸ”— Building a language model</a><br><a href="https://www.cnblogs.com/lijieqiong/p/4817373.html" target="_blank" rel="external">ğŸ”—ã€sphinxã€‘ä¸­æ–‡å£°å­¦æ¨¡å‹è®­ç»ƒ</a><br><a href="https://blog.csdn.net/zouxy09/article/details/7941585" target="_blank" rel="external">ğŸ”— è¯­éŸ³è¯†åˆ«çš„åŸºç¡€çŸ¥è¯†ä¸CMUsphinxä»‹ç»</a><br><a href="http://www.annosoft.com/prices" target="_blank" rel="external">ğŸ”— Lipsync Toolå®˜ç½‘ annosoftä»·æ ¼è¡¨</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬ç¯‡è¯„æµ‹çš„å·¥å…·å®ç°æ–¹å¼éƒ½ç›¸è¿‘,æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LipSync Proã€U3Dã€‘&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;EasyTalkã€U3Dã€‘&lt;/strong&gt;&lt;br&gt;&lt;del&gt;&lt;strong&gt;Lipsync Toolã€ç¾æœ¯ç”¨ã€‘&lt;/strong&gt;&lt;/del&gt;&lt;br&gt;&lt;del&gt;&lt;strong&gt;Face and lips&lt;/strong&gt;&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥   2.é¢éƒ¨è¡¨æƒ…&lt;br&gt;è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LipSyncæ’ä»¶è°ƒç ”1</title>
    <link href="http://vrast.cn/posts/a08d0c34/"/>
    <id>http://vrast.cn/posts/a08d0c34/</id>
    <published>2018-04-23T02:52:44.000Z</published>
    <updated>2018-04-27T07:14:45.824Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡è¯„æµ‹çš„æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š<br><strong> SALSA With RandomEyes </strong><br><strong> UniLip </strong> </p>
<p>è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥<br>è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§</p>
<a id="more"></a>
<h1 id="SALSA-With-RandomEyes"><a href="#SALSA-With-RandomEyes" class="headerlink" title="SALSA With RandomEyes"></a>SALSA With RandomEyes</h1><p>æ’ä»¶åŒ…å« SALSAä¸RandomEyes ä¸¤éƒ¨åˆ†ã€‚è¿™é‡Œä¸åæ–‡å¹¶ä¸å…³æ³¨RandomEyesç›¸å…³è¯é¢˜ã€‚</p>
<h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><h3 id="ç¾æœ¯ï¼šä½¿ç”¨-blend-shape-åˆ¶ä½œ-ä¸‰å£å‹"><a href="#ç¾æœ¯ï¼šä½¿ç”¨-blend-shape-åˆ¶ä½œ-ä¸‰å£å‹" class="headerlink" title="ç¾æœ¯ï¼šä½¿ç”¨ blend shape åˆ¶ä½œ ä¸‰å£å‹"></a>ç¾æœ¯ï¼šä½¿ç”¨ blend shape åˆ¶ä½œ ä¸‰å£å‹</h3><p>åœ¨åˆ†æäº†æ’ä»¶åŒ…å†…çš„ boxHead.fbx æ–‡ä»¶ä¹‹åçœ‹åˆ°äº†å¦‚ä¸‹å±‚çº§ç»“æ„ï¼š</p>
<p><img src="/uploads/WechatIMG273.png" alt="boxHead.fbx"></p>
<p>å…·ä½“åšæ³•åœ¨å±‚çº§é¢æ¿ä¸Šå·²ç»å¯ä»¥åæ¨å‡ºæ¥ç¾æœ¯çš„åˆ¶ä½œæµç¨‹<br><img src="/uploads/WechatIMG281.png" alt="boxHead.fbx"></p>
<ol>
<li>ç¾æœ¯è¿™è¾¹é¦–å…ˆåœ¨ä¸åŒçš„å±‚çº§ä¸Šä½œå‡ºä¸åŒçš„å£å‹è¡¨ç°ï¼Œæœ¬æ’ä»¶è¦æ±‚ç¾æœ¯åœ¨ä¸Šå›¾ä¸­ä¸‰ä¸ªSayå¼€å¤´çš„å±‚çº§ä¸Šå®ç°ä¸‰ä¸ªå£å‹</li>
<li>ä½¿ç”¨ blend shape ç»‘å®šã€‚è¿™æ˜¯ä¸€ç§åšèåˆåŠ¨ç”»(é¢éƒ¨å£å‹)çš„ç‰¹æ®Šåšæ³•ã€‚ä¸ºä»€ä¹ˆä¸ç”¨éª¨éª¼åŠ¨ç”»ï¼Ÿå› ä¸ºç”¨éª¨éª¼åŠ¨ç”»åšèŠ‚ç‚¹å¤ªå¤šäº†ã€‚</li>
</ol>
<h3 id="ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡"><a href="#ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡" class="headerlink" title="ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡"></a>ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡</h3><p><img src="/uploads/QQ20180423-175144.png" alt="ç­–åˆ’åªéœ€è¦é…ç½®ä¸‰ä¸ªé˜€å€¼ç»™ç¨‹åºä½œä¸ºæ§åˆ¶åŠ¨ç”»è¿‡æ¸¡çš„æ¡ä»¶"></p>
<h3 id="ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡"><a href="#ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡" class="headerlink" title="ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡"></a>ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡</h3><p>ä¸ºäº†è¾¾åˆ°æ§åˆ¶å£å‹çš„ç›®çš„ï¼ŒSALSAå¯åŠ¨äº†ä¸€ä¸ªæºç¨‹åœ¨æ¯ä¸ª<code>audioUpdateDelay</code>å‘¨æœŸå†…å¯¹éŸ³é¢‘é‡‡æ ·ã€‚åè·å¾—<code> average </code></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">UpdateSample</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">while</span> (<span class="literal">true</span>)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">float</span> addedVals = <span class="number">0.0</span>f;</div><div class="line">    <span class="keyword">this</span>.sample = <span class="keyword">new</span> <span class="keyword">float</span>[<span class="keyword">this</span>.sampleSize];</div><div class="line">    <span class="keyword">if</span> ((<span class="keyword">bool</span>) ((Object) <span class="keyword">this</span>.audioSrc))</div><div class="line">      <span class="keyword">this</span>.audioSrc.GetSpectrumData(<span class="keyword">this</span>.sample, <span class="number">0</span>, FFTWindow.BlackmanHarris);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="keyword">this</span>.sample.Length; ++index)</div><div class="line">      addedVals += <span class="keyword">this</span>.sample[index];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.audioSrc.isPlaying &amp;&amp; (<span class="keyword">double</span>) <span class="keyword">this</span>.average == <span class="number">0.0</span>)</div><div class="line">      <span class="keyword">this</span>.writeAverage = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.audioSrc.isPlaying)</div><div class="line">      <span class="keyword">this</span>.writeAverage = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.writeAverage)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">this</span>.average = <span class="number">0.0</span>f;</div><div class="line">      <span class="keyword">this</span>.average = addedVals / (<span class="keyword">float</span>) <span class="keyword">this</span>.sampleSize;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">yield</span> <span class="title">return</span> (<span class="params"><span class="keyword">object</span></span>) new <span class="title">WaitForSeconds</span>(<span class="params"><span class="keyword">this</span>.audioUpdateDelay</span>)</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ <code> average </code>é…åˆç­–åˆ’è®¾ç½®çš„ä¸‰ä¸ªæ•°æŒ‡(saySmallTrigger/sayMediumTrigger/sayLargeTrigger) æ¥æ§åˆ¶ä»€ä¹ˆæ—¶é—´ç‚¹èåˆä»€ä¹ˆåŠ¨ç”»ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.prevIsTalking != <span class="keyword">this</span>.isTalking)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.prevIsTalking = <span class="keyword">this</span>.isTalking;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.broadcast)</div><div class="line">      <span class="keyword">this</span>.TalkStatusChanged();</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> ((<span class="keyword">double</span>) <span class="keyword">this</span>.average &lt; (<span class="keyword">double</span>) <span class="keyword">this</span>.saySmallTrigger)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Rest"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">(<span class="keyword">double</span></span>) <span class="keyword">this</span>.average &lt; (<span class="params"><span class="keyword">double</span></span>) <span class="keyword">this</span>.sayMediumTrigger)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Small"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">1</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Increment);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">(<span class="keyword">double</span></span>) <span class="keyword">this</span>.average &lt; (<span class="params"><span class="keyword">double</span></span>) <span class="keyword">this</span>.sayLargeTrigger)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Medium"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">2</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Increment);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Large"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">3</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Increment);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">this</span>.sayAmount.saySmall = <span class="keyword">this</span>.saySmallValue;</div><div class="line">  <span class="keyword">this</span>.sayAmount.sayMedium = <span class="keyword">this</span>.sayMediumValue;</div><div class="line">  <span class="keyword">this</span>.sayAmount.sayLarge = <span class="keyword">this</span>.sayLargeValue;</div><div class="line">  <span class="keyword">if</span> ((<span class="keyword">bool</span>) ((Object) <span class="keyword">this</span>.skinnedMeshRenderer))</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.skinnedMeshRenderer.SetBlendShapeWeight(<span class="keyword">this</span>.saySmallIndex, <span class="keyword">this</span>.sayAmount.saySmall);</div><div class="line">    <span class="keyword">this</span>.skinnedMeshRenderer.SetBlendShapeWeight(<span class="keyword">this</span>.sayMediumIndex, <span class="keyword">this</span>.sayAmount.sayMedium);</div><div class="line">    <span class="keyword">this</span>.skinnedMeshRenderer.SetBlendShapeWeight(<span class="keyword">this</span>.sayLargeIndex, <span class="keyword">this</span>.sayAmount.sayLarge);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (!(<span class="keyword">bool</span>) ((Object) <span class="keyword">this</span>.audioSrc))</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.audioSrc.isPlaying)</div><div class="line">    <span class="keyword">this</span>.isTalking = <span class="literal">true</span>;</div><div class="line">  <span class="keyword">else</span></div><div class="line">    <span class="keyword">this</span>.isTalking = <span class="literal">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="UniLip"><a href="#UniLip" class="headerlink" title="UniLip"></a>UniLip</h1><p>æ­¤æ’ä»¶å¯å®ç°ä¸ SALSA With RandomEyes çš„å®ç°åŸç†ä¸€æ ·ï¼Œä¾§é‡ç‚¹ä¸åŒï¼Œä»–å¼€æ”¾äº†æ›´å¤šçš„å£å‹ç»™ç­–åˆ’é…ç½®ã€‚</p>
<p>æ­¤å‡½æ•°ç­‰äº  SALSA With RandomEyes åœ¨ä¸Šæ–‡ä¾‹ä¸¾çš„ <code>UpdateSample</code> ä»£ç ç‰‡æ®µã€‚<del>ä¸åŒçš„æ˜¯ä½œè€…å°†è¿™æ®µä»£ç æ”¾åœ¨äº†<code>Update</code>å¾ªç¯ä¹‹ä¸­ï¼Œä»çº¯ä»£ç ä¸Šçœ‹æ•ˆç‡æ¯”SALSA With RandomEyesè¿˜è¦å·®ã€‚</del></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AudioProcess</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (audioSource == <span class="literal">null</span>)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    audioSource.GetOutputData(samples, <span class="number">0</span>);</div><div class="line">    <span class="keyword">float</span> sum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        sum += Mathf.Pow(samples[i], <span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    rmsValue = Mathf.Sqrt(sum / SAMPLECOUNT);</div><div class="line">    dbValue = <span class="number">20</span> * Mathf.Log10(rmsValue / REFVALUE);</div><div class="line"></div><div class="line">    audioSource.GetSpectrumData(spectrum, <span class="number">0</span>, FFTWindow.BlackmanHarris);</div><div class="line">    <span class="keyword">float</span> maxV = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> maxN = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (spectrum[i] &gt; maxV &amp;&amp; spectrum[i] &gt; THRESHOLD)</div><div class="line">        &#123;</div><div class="line">            maxV = spectrum[i];</div><div class="line">            maxN = i; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">float</span> sum2 = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        sum += Mathf.Abs(samples[i]);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    volume = (sum / SAMPLECOUNT);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> picthCounter = <span class="number">0</span>;</div><div class="line">    <span class="keyword">float</span> lastDir = <span class="number">0</span>;</div><div class="line">    <span class="keyword">float</span> lastPos = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">float</span> dir = samples[i];</div><div class="line">        <span class="keyword">if</span> (Mathf.Sign(dir) != Mathf.Sign(lastDir))</div><div class="line">            picthCounter++;</div><div class="line"></div><div class="line">        lastDir = dir;</div><div class="line">        lastPos = samples[i];</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    pitchValue2 = (picthCounter * <span class="number">1000.0</span>f / SAMPLECOUNT);</div><div class="line"></div><div class="line">    <span class="keyword">float</span> freqN = maxN;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (maxN &gt; <span class="number">0</span> &amp;&amp; maxN &lt; SAMPLECOUNT - <span class="number">1</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">float</span> dL = spectrum[maxN - <span class="number">1</span>] / spectrum[maxN];</div><div class="line">        <span class="keyword">float</span> dR = spectrum[maxN + <span class="number">1</span>] / spectrum[maxN];</div><div class="line">        freqN += <span class="number">0.5</span>f * (dR * dR - dL * dL);</div><div class="line">    &#125;</div><div class="line">    pitchValue = freqN * <span class="number">24000</span> / SAMPLECOUNT;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="/uploads/QQ20180426-144637.png">ä¸ SALSA With RandomEyes ä¸åŒçš„åœ°æ–¹æ˜¯ä»–æ”¯æŒäº†å¤šä¸ªå£å‹çš„éšæœºã€‚</a></p>
<h1 id="å¯ç”¨æ€§"><a href="#å¯ç”¨æ€§" class="headerlink" title="å¯ç”¨æ€§"></a>å¯ç”¨æ€§</h1><h3 id="å¯å€Ÿé‰´ä¼˜ç‚¹"><a href="#å¯å€Ÿé‰´ä¼˜ç‚¹" class="headerlink" title="å¯å€Ÿé‰´ä¼˜ç‚¹"></a>å¯å€Ÿé‰´ä¼˜ç‚¹</h3><ol>
<li>ç­–åˆ’é—¨æ§›ä½ï¼Œä½¿ç”¨ç¾æœ¯åˆ¶ä½œçš„ blend shape å‡å°å¯¼å‡ºæ¨¡å‹ä½“ç§¯ï¼Œå¹¶ä¸”çµæ´»ç¨‹åºæ§åˆ¶ï¼Œç¨‹åºåªéœ€è¦é€šè¿‡ä¸€äº›ç­–åˆ’é…ç½®å¥½çš„æ¡ä»¶ä¾¿å¯ä»¥å°†ä»»æ„ä¸¤ä¸ªå£å‹è¿›è¡Œè¿‡æ¸¡ã€‚</li>
<li>è¿™ç§åšæ³•ä¸å­˜åœ¨åŠ¨ç”»è¡”æ¥é—®é¢˜ã€‚å› ä¸ºæ‰€æœ‰çš„çŠ¶æ€æˆ‘ä»¬éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªclipä¹‹é—´çš„è¿‡æ¸¡ã€‚</li>
<li>é€šè¿‡é‡‡æ ·ç‡ä¸éŸ³é¢‘çš„é«˜ä½æ¥æ§åˆ¶è„¸å‹ä¸å˜´å½¢çš„åŒæ­¥ï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´æ˜¯ä¸€ç§å‡åŒæ­¥ï¼Œæ­£æ˜¯è¿™ç§â€å‡åŒæ­¥â€æ‰ä¸å­˜åœ¨å¤šè¯­è¨€é—®é¢˜ã€‚</li>
<li>å…é¢„å¤„ç†ï¼Œå¯¼å…¥å³ç”¨</li>
</ol>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol>
<li>è¡¨ç°ä¸Šä¸è¶³ï¼Œå‡åŒæ­¥è§£å†³äº†å¤šè¯­è¨€é—®é¢˜ä½†æ˜¯å¸¦æ¥äº†è¡¨ç°åŠ›ä¸è¶³,ä»”ç»†çœ‹å£å‹ä¸éŸ³é¢‘å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¸ä¼šä»”ç»†çœ‹ã€‚</li>
<li>ç§»åŠ¨ç«¯æ•ˆç‡å ªå¿§ï¼Œåœ¨ç§»åŠ¨ç«¯ä¸Šå¤§è§„æ¨¡ä½¿ç”¨æœ¬åšæ³• <code>å‘¨æœŸé‡‡æ ·éŸ³é¢‘</code> æ˜¯æœ‰æ•ˆç‡é—®é¢˜çš„ã€‚</li>
<li>ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨æ­¤ä¸­åšæ³•å¼€å‘å£å‹ç³»ç»Ÿè¿™ä¸¤ä¸ªæ’ä»¶éƒ½ä¸èƒ½ç›´æ¥ç”¨ï¼Œéœ€è¦åŸºäºé¡¹ç›®å¯¹æ’ä»¶è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚</li>
</ol>
<p><a href="https://www.douban.com/note/566951438/" target="_blank" rel="external">ğŸ”— æ•æ‰éŸ³è°±</a><br><a href="https://blog.csdn.net/liu_if_else/article/details/51233799" target="_blank" rel="external">ğŸ”— ç”¨Unity3Då†…éƒ¨é¢‘è°±åˆ†ææ–¹æ³•åšéŸ³ä¹è§†è§‰ç‰¹æ•ˆçš„åŸç†è¯´æ˜</a><br><a href="https://www.creativebloq.com/maya/how-animate-character-blend-shapes-10134835" target="_blank" rel="external">ğŸ”— How to animate a character with blend shapes</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬ç¯‡è¯„æµ‹çš„æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;br&gt;&lt;strong&gt; SALSA With RandomEyes &lt;/strong&gt;&lt;br&gt;&lt;strong&gt; UniLip &lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥&lt;br&gt;è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§&lt;/p&gt;
    
    </summary>
    
      <category term="Plugin" scheme="http://vrast.cn/categories/Plugin/"/>
    
    
      <category term="LipSync" scheme="http://vrast.cn/tags/LipSync/"/>
    
  </entry>
  
  <entry>
    <title>protobufä¸­ä½¿ç”¨ç»§æ‰¿</title>
    <link href="http://vrast.cn/posts/67edd270/"/>
    <id>http://vrast.cn/posts/67edd270/</id>
    <published>2018-04-08T06:06:57.000Z</published>
    <updated>2018-04-08T06:18:18.273Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ä¸¤å¤©æœ‰ä¸€ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°æˆ‘ã€‚ä½¿ç”¨protobuf .netç‰ˆæœ¬çš„æ—¶å€™åºåˆ—åŒ–ç±»ï¼ŒåŸºç±»çš„å­—æ®µä¼šä¸¢å¤±ã€‚éšåæˆ‘é—®äº†ä¸‹æœ‹å‹æ— ä¸€ä¾‹å¤–ä»–ä»¬éƒ½ä½¿ç”¨çš„æ˜¯ç»„åˆè€Œéç»§æ‰¿ã€‚æˆ‘ä¹Ÿåœ¨åæ€æ˜¯å¦è¿™ä¸ªåšæ³•æœ¬èº«å°±æœ‰é—®é¢˜ã€‚æˆ‘æ˜¨å¤©Googleçš„æ—¶å€™å‘ç°æœ‰äººé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œé‚åœ¨æœ¬ç¯‡ä¸­è®°å½•ã€‚</p>
<a id="more"></a>
<p><a href="https://stackoverflow.com/questions/6109868/protobuf-net-base-class-properties-is-not-included-when-serializing-derived-clas" target="_blank" rel="external">ProtoBuf.net Base class properties is not included when serializing derived class</a> è¿™ä¸ªå°±æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œä¸€æ‘¸ä¸€æ ·ã€‚<br>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼šå¦‚æœæ˜¯å­ç±»æƒ³è¦åœ¨åºåˆ—åŒ–çš„æ—¶å€™å¸¦ä¸ŠåŸºç±»çš„ä¿¡æ¯è¯·ä½¿ç”¨ã€ProtoIncludeã€‘ï¼Œå¡«å†™ä¸Šæƒ³è¦åŒ…å«çš„ç±»å‹å³å¯ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸¤å¤©æœ‰ä¸€ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°æˆ‘ã€‚ä½¿ç”¨protobuf .netç‰ˆæœ¬çš„æ—¶å€™åºåˆ—åŒ–ç±»ï¼ŒåŸºç±»çš„å­—æ®µä¼šä¸¢å¤±ã€‚éšåæˆ‘é—®äº†ä¸‹æœ‹å‹æ— ä¸€ä¾‹å¤–ä»–ä»¬éƒ½ä½¿ç”¨çš„æ˜¯ç»„åˆè€Œéç»§æ‰¿ã€‚æˆ‘ä¹Ÿåœ¨åæ€æ˜¯å¦è¿™ä¸ªåšæ³•æœ¬èº«å°±æœ‰é—®é¢˜ã€‚æˆ‘æ˜¨å¤©Googleçš„æ—¶å€™å‘ç°æœ‰äººé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œé‚åœ¨æœ¬ç¯‡ä¸­è®°å½•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="protobuf" scheme="http://vrast.cn/tags/protobuf/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–è¾‘å™¨æ‰©å±•-åˆ†å‰²æ¡</title>
    <link href="http://vrast.cn/posts/8d62e7c3/"/>
    <id>http://vrast.cn/posts/8d62e7c3/</id>
    <published>2018-03-27T01:40:57.000Z</published>
    <updated>2018-03-27T01:52:39.284Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å¯æ‹–åŠ¨åˆ†å‰²æ¡åœ¨ Unity3D çš„ç¼–è¾‘å™¨ç»“æ„ä¸­ä¸€èˆ¬éƒ½å±äºæœ€å¤–å±‚ç»“æ„ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº GUI ç»„ä»¶ï¼Œè®¡ç®—ä½ç½®çš„æ—¶å€™å¿…é¡»è¦å¾ˆç²¾ç¡®ï¼Œæ‰€ä»¥è·ŸLayout æµå¼å¸ƒå±€æ··ç¼–ä¼šæ¯”è¾ƒä¹±ã€‚è¿™é‡Œä¹Ÿæ¨èä½œä¸ºæœ€å¤–å±‚ç»“æ„ä½¿ç”¨ã€‚</p>
</blockquote>
<p><img src="/uploads/2018427047.png" alt="å¯æ‹–åŠ¨çš„åˆ†å‰²æ¡"><br><a id="more"></a></p>
<h1 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h1><p>ä¸‹é¢æ˜¯æˆ‘å†™çš„ä¸€ä¸ªæ¼”ç¤ºä¾‹å­ ä½ å¯ä»¥åœ¨Unityä¸­ç›´æ¥è¿è¡Œã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//   		Copyright 2017 KeyleXiao.</span></div><div class="line"><span class="comment">//     		Contact : Keyle_xiao@hotmail.com </span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     		Licensed under the Apache License, Version 2.0 (the "License");</span></div><div class="line"><span class="comment">//     		you may not use this file except in compliance with the License.</span></div><div class="line"><span class="comment">//     		You may obtain a copy of the License at</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     		http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     		Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><span class="comment">//     		distributed under the License is distributed on an "AS IS" BASIS,</span></div><div class="line"><span class="comment">//     		WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><span class="comment">//     		See the License for the specific language governing permissions and</span></div><div class="line"><span class="comment">//     		limitations under the License.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="keyword">using</span>  UnityEditor;</div><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">SmartDataViewer.Editor</span></div><div class="line">&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExportWizard</span>:<span class="title">EditorWindow</span></div><div class="line">    &#123;</div><div class="line">        [MenuItem(<span class="string">"SmartDataViewer/ExportWizard"</span>)]</div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OpenView</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">var</span> w = CreateInstance&lt;ExportWizard &gt;();</div><div class="line">            </div><div class="line">            w.minSize = <span class="keyword">new</span> Vector2(<span class="number">350</span>,<span class="number">250</span>);</div><div class="line">            w.maxSize = w.minSize;</div><div class="line">            Vector2 pos =<span class="keyword">new</span> Vector2( Screen.width/<span class="number">2</span>-w.minSize.x,Screen.height/<span class="number">2</span>-w.minSize.y);</div><div class="line">            w.position = <span class="keyword">new</span> Rect(pos,w.minSize);</div><div class="line">            </div><div class="line">            w.ShowUtility();</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keyword">object</span> rawData &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InitRawData</span>(<span class="params"><span class="keyword">object</span> data</span>)</span></div><div class="line">        &#123;</div><div class="line">            rawData = data;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        <span class="keyword">private</span> Vector2 scrollPos = Vector2.zero;</div><div class="line">        <span class="keyword">float</span> currentScrollViewWidth;</div><div class="line">        <span class="keyword">bool</span> resize = <span class="literal">false</span>;</div><div class="line">        Rect cursorChangeRect;</div><div class="line">        </div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">this</span>.position = <span class="keyword">new</span> Rect(<span class="number">200</span>,<span class="number">200</span>,<span class="number">400</span>,<span class="number">300</span>);</div><div class="line">            currentScrollViewWidth = <span class="keyword">this</span>.position.width/<span class="number">2</span>;</div><div class="line">            cursorChangeRect = <span class="keyword">new</span> Rect(currentScrollViewWidth,<span class="number">0</span>,<span class="number">4</span>f,<span class="keyword">this</span>.position.height);</div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            GUILayout.BeginHorizontal();</div><div class="line">            </div><div class="line">            scrollPos = GUILayout.BeginScrollView(scrollPos,GUILayout.Width(currentScrollViewWidth));</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</div><div class="line">                GUILayout.Label(<span class="string">"test content"</span>);</div><div class="line">            GUILayout.EndScrollView();</div><div class="line">                 </div><div class="line">            ResizeScrollView();</div><div class="line">            </div><div class="line">            GUILayout.Label(<span class="string">"right part"</span>);</div><div class="line">            GUILayout.EndHorizontal();</div><div class="line">            Repaint();</div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ResizeScrollView</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            GUI.DrawTexture(cursorChangeRect,EditorGUIUtility.whiteTexture);</div><div class="line">            EditorGUIUtility.AddCursorRect(cursorChangeRect,MouseCursor.ResizeHorizontal);</div><div class="line">         </div><div class="line">            <span class="keyword">if</span>( Event.current.type == EventType.MouseDown &amp;&amp; cursorChangeRect.Contains(Event.current.mousePosition))&#123;</div><div class="line">                resize = <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(resize)&#123;</div><div class="line">                currentScrollViewWidth = Event.current.mousePosition.x;</div><div class="line">                cursorChangeRect.Set(currentScrollViewWidth,cursorChangeRect.y,cursorChangeRect.width,cursorChangeRect.height);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(Event.current.type == EventType.MouseUp)</div><div class="line">                resize = <span class="literal">false</span>;        </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>è¿™é‡Œçš„GUIä»…ä»…æ˜¯åšäº†ä¸€ä¸ªè¡¨ç°ï¼Œæœ€æ ¸å¿ƒçš„å…¶å®æ˜¯ <code>cursorChangeRect</code> å› ä¸ºä½ å³ä½¿ä¸è¦è¿™ä¸ª GUI ä¹Ÿèƒ½åœ¨è¿™ä¸ª Rect çš„ä½ç½®è¿›è¡Œæ‹–åŠ¨ã€‚<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GUI.DrawTexture(cursorChangeRect,EditorGUIUtility.whiteTexture);</div></pre></td></tr></table></figure></p>
<p>åœ¨é¼ æ ‡ç§»åŠ¨çš„åŒæ—¶å°†é¼ æ ‡å½“å‰ x è½´çš„ä½ç½®èµ‹å‰é¢çš„ä¸€ä¸ªlayoutï¼Œå°±ä¼šæ¨åŠ¨åé¢ä¸€ä¸ªlayout. (æµå¼å¸ƒå±€)</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¯æ‹–åŠ¨åˆ†å‰²æ¡åœ¨ Unity3D çš„ç¼–è¾‘å™¨ç»“æ„ä¸­ä¸€èˆ¬éƒ½å±äºæœ€å¤–å±‚ç»“æ„ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº GUI ç»„ä»¶ï¼Œè®¡ç®—ä½ç½®çš„æ—¶å€™å¿…é¡»è¦å¾ˆç²¾ç¡®ï¼Œæ‰€ä»¥è·ŸLayout æµå¼å¸ƒå±€æ··ç¼–ä¼šæ¯”è¾ƒä¹±ã€‚è¿™é‡Œä¹Ÿæ¨èä½œä¸ºæœ€å¤–å±‚ç»“æ„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/2018427047.png&quot; alt=&quot;å¯æ‹–åŠ¨çš„åˆ†å‰²æ¡&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="UNITY3Dç¼–è¾‘å™¨" scheme="http://vrast.cn/tags/UNITY3D%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>UNITYæ€§èƒ½ä¼˜åŒ–å‚è€ƒç¯‡</title>
    <link href="http://vrast.cn/posts/69247612/"/>
    <id>http://vrast.cn/posts/69247612/</id>
    <published>2018-03-09T08:12:00.000Z</published>
    <updated>2018-03-09T11:07:23.840Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä¸‹é¢æ˜¯æˆ‘ç»™é¡¹ç›®ç»„çš„ä¸€äº›å‚è€ƒã€‚å…¶ä¸­ä¹ŸåŒ…å«å„ç§å„æ ·çš„æ ‡å‡†ï¼Œä¸ä¼˜åŒ–å»ºè®®ã€‚é¡¹ç›®ä¼˜åŒ–å¹¶ä¸æ˜¯ä¸€ä»¶äº‹ï¼Œå®ƒæ˜¯ç‚¹ç‚¹æ»´æ»´ä¸²è”èµ·æ¥çš„(å‹¿ä»¥æ¶å°è€Œä¸ºä¹‹)ï¼Œæˆ‘è§è¿‡å¾ˆå¤šé¡¹ç›®åªæ˜¯å›¾ä¸€æ—¶ä¹‹æ–¹ä¾¿å°±å¯¼è‡´åæœŸå¾ˆéš¾åš æ¯”å¦‚ å‰æœŸæœªè§„åˆ’å¥½å›¾é›†ï¼Œæ¨¡å‹è´´å›¾æè´¨ç›®å½•æ··ç”¨ï¼ŒUIåˆ¶ä½œæœªæŒ‰ç…§ å¤ç”¨/ç‰¹æ®Š çš„æ ‡å‡†åˆ¶ä½œï¼ŒåŠ¨ç”»å¯¼å‡ºå¸§ç‡ä¸ç»Ÿä¸€é«˜é«˜ä½ä½ ç­‰ç­‰ã€‚å¦‚æœä¸€å¼€å§‹æ²¡æœ‰å®šåˆ¶è‰¯å¥½çš„è§„èŒƒï¼Œåé¢æƒ³è¦è¡¥æ•‘åªèƒ½é ç¨‹åºå†™ä¸€äº›å·¥å…·æ‰¹é‡å¤„ç†ï¼Œå½“ç„¶è¿™å·¥å…·ä¹Ÿä¸ä¸€å®šå¥½å†™ã€‚</p>
</blockquote>
<a id="more"></a>
<p>å› ä¸ºæ•ˆç‡ä¼˜åŒ–æ˜¯ä¸€ä¸ªå¾ˆæ³›åŒ–çš„è¯ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘åªè®¨è®ºå¤§ç±»è¿›è€Œè¡ç”Ÿå‡º â€œæ ‡å‡†åšæ³•â€ã€‚æ ‡å‡†åªè¯´é€šç”¨çš„ï¼Œåšäº†ä¸ä¼šé”™çš„é‚£ç§ã€‚å¦‚æœä½ æ²¡æœ‰åš æ¨èä½ è¯•ä¸€è¯•ã€‚åƒå¦‚åŒé¡¹ç›®è´´å›¾è®¾ç½®ï¼Œç¯å…‰è®¾ç½®ï¼Œçƒ˜ç„™ï¼Œfogï¼Œç­‰ è®¾ç½®é—®é¢˜è¿™é‡Œä¸è°ˆã€‚å› ä¸ºè®¾ç½®çš„é€‰é¡¹æ˜¯æœ€å®¹æ˜“åšä¼˜åŒ–çš„å³ä½¿åˆ°äº†åæœŸä¹Ÿæ˜¯å¯ä»¥å¿«é€Ÿåšçš„ã€‚</p>
<h2 id="ç¾æœ¯èµ„æº"><a href="#ç¾æœ¯èµ„æº" class="headerlink" title="ç¾æœ¯èµ„æº"></a>ç¾æœ¯èµ„æº</h2><h3 id="èµ„æºåˆ†çº§"><a href="#èµ„æºåˆ†çº§" class="headerlink" title="èµ„æºåˆ†çº§"></a>èµ„æºåˆ†çº§</h3><p>å¦‚ è´´å›¾png/jpgçš„é€‰æ‹© åŠ¨ç”»30å¸§è¿˜æ˜¯60å¸§çš„é€‰æ‹© ç²’å­è´¨é‡é«˜æˆ–ä½è¿˜æ˜¯æ ‡å‡† ç­‰ã€‚æ ¹æ®ä¸åŒåœºåˆä½¿ç”¨ä¸åŒçº§åˆ«èµ„æºã€‚ä¸€èˆ¬æ¥è¯´é«˜è´¨é‡èµ„æºåªä¼šå‡ºç°åœ¨æœ€æ˜¾çœ¼çš„åœ°æ–¹ å¦‚ ç™»é™†ï¼Œäººç‰©é€‰æ‹©ï¼Œå…¥åœºã€‚çœŸæ­£æˆ˜æ–—è°ƒç”¨çš„ç¾æœ¯èµ„æºå¾€å¾€åªéœ€è¦æ™®é€šå“è´¨å³å¯ã€‚å…·ä½“é¡¹ç›®å¯ä»¥è·Ÿç€éœ€æ±‚æ¥æ§åˆ¶ï¼Œåˆ’é‡ç‚¹ è¿™é‡Œè¦åšå·®å¼‚åŒ– æ‰èƒ½çœå‡ºèµ„æº(å†…å­˜)ã€‚</p>
<h4 id="è´´å›¾çš„è´¨é‡é€‰æ‹©"><a href="#è´´å›¾çš„è´¨é‡é€‰æ‹©" class="headerlink" title="è´´å›¾çš„è´¨é‡é€‰æ‹©"></a>è´´å›¾çš„è´¨é‡é€‰æ‹©</h4><p><img src="/uploads/texturequality.png" alt="å¯å‚è€ƒ https://www.jianshu.com/p/f7c3741f22af"><br>è´´å›¾çš„è´¨é‡é€‰æ‹©ä¸»è¦å½±å“è¿è¡Œæ—¶æ•ˆç‡ï¼Œå¹¶ä¸å½±å“å‡ºåŒ…çš„å¤§å°ã€‚UNITY3Dæ‰“åŒ…ä¼šè‡ªå·±ä¼˜åŒ–å›¾ç‰‡å¤§å°ï¼Œå¦‚æœä½ ä½¿ç”¨äº†android studio release æ‰“åŒ…ï¼Œå¤§å°ä¼šè¿›ä¸€æ­¥å‹ç¼©ã€‚<br>è¿™é‡Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹å†…å­˜ä¸æ•ˆç‡çš„è½¬åŒ–ã€‚å†…å­˜å æ¯”è¶Šé«˜è¶Šæ¸…æ™°ã€‚è¿™ä¸ªå¯ä»¥ç›´æ¥é€šè¿‡è´´å›¾çš„å‰ç¼€æˆ–è€…åç¼€ç»Ÿä¸€è®¾ç½®ã€‚æˆ–è€…å†™ä¸€ä¸ªèµ„æºç®¡ç†å·¥å…· ç»Ÿä¸€è®¾ç½®ã€‚</p>
<h2 id="å†·çƒ­åˆ†ç¦»-å»¶è¿ŸåŠ è½½"><a href="#å†·çƒ­åˆ†ç¦»-å»¶è¿ŸåŠ è½½" class="headerlink" title="å†·çƒ­åˆ†ç¦» å»¶è¿ŸåŠ è½½"></a>å†·çƒ­åˆ†ç¦» å»¶è¿ŸåŠ è½½</h2><ol>
<li>ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œå¦‚æœéœ€è¦é›†ä¸­åŠ è½½æŸäº›èµ„æºå¯ä»¥è€ƒè™‘å†·çƒ­åˆ†ç¦»ã€‚å¸¸é©»å†…å­˜ä¸­çš„èµ„æº ä¸ éå¸¸é©»å†…å­˜ä¸­çš„èµ„æºé‡‡å–ä¸åŒç­–ç•¥ï¼š<br>æˆ˜æ–—é…ç½® ç­‰åˆ°æˆ˜æ–—åœºæ™¯å†åŠ è½½ï¼Œå…³å¡/ä»»åŠ¡/æˆå°±/ ç­‰ç­‰å…¶ä»– å¯ä»¥ç­‰åˆ°æ‰“å¼€å…·ä½“é¢æ¿æˆ–è¿›å…¥åœºæ™¯çš„æ—¶å€™åšä¸€æ¬¡ç¼“å­˜ã€‚</li>
<li>ç§»é™¤ç©ºå‡½æ•° å¦‚ ç»§æ‰¿è‡ªMBçš„ Update ä¹‹ç±»çš„å‡½æ•°ã€‚</li>
<li>åˆ†å¸§åšiO æˆ– ç½‘ç»œè¯·æ±‚çš„æ“ä½œã€‚å†å…·ä½“ä¸€ç‚¹å°±æ˜¯ç”¨æºç¨‹ è¯¥returnçš„åœ°æ–¹å°±return ç­‰å€™ä¸‹ä¸€å¸§å¤„ç†ã€‚</li>
<li>é«˜æ¶ˆè€—çš„å‡½æ•°é¿å…ç”šè‡³ä¸ç”¨ åŸºæœ¬ä¸ŠUNITY APIä¸­ä»¥Findxxxå¼€å¤´ è¿”å›ä¸€ä¸ª List çš„å‡½æ•°éƒ½æ˜¯é«˜æ¶ˆè€—å‡½æ•°ã€‚</li>
</ol>
<h2 id="å†…å­˜æ§åˆ¶"><a href="#å†…å­˜æ§åˆ¶" class="headerlink" title="å†…å­˜æ§åˆ¶"></a>å†…å­˜æ§åˆ¶</h2><ol>
<li>ä½¿ç”¨ç¼“å­˜æ±  å¦‚ é€šç”¨é¢æ¿/é€šç”¨å¼¹å‡ºç¾æœ¯å­—(æˆ˜æ–—ä¸­ä¼¤å®³æ•°å­—)/ ç­‰è€ƒè™‘ç¼“å­˜ã€‚</li>
<li>ç›‘æµ‹å½“å‰å·¥ç¨‹åœ¨ç§»åŠ¨ç«¯çš„å†…å­˜å ç”¨ï¼Œç»™æ‰€æœ‰çš„ç¼“å­˜æ± å¢åŠ é‡Šæ”¾æ¥å£ åšä¸€äº›æ’åºé‡Šæ”¾æ“ä½œ(ä¼˜å…ˆçº§é‡Šæ”¾)ã€‚<br>å¯ä»¥å‚è€ƒ UNITY5.6 çš„æ–°API <a href="https://docs.unity3d.com/ScriptReference/Application-lowMemory.html" target="_blank" rel="external">Application.lowMemory</a></li>
<li>ä½¿ç”¨å‹ç¼©è¿‡çš„éŸ³é¢‘ æˆ–è€… ä½¿ç”¨ Fmod ä¹‹ç±»çš„æ’ä»¶è¿›è¡Œæ‰˜ç®¡ã€‚ç¼ºæ°§ä½¿ç”¨çš„å°±æ˜¯ fmod .</li>
<li>æ–‡æœ¬é…ç½®è½¬2è¿›åˆ¶å­˜å‚¨ å‡å°‘è¿è¡Œæ—¶å†…å­˜å ç”¨ã€‚</li>
</ol>
<h2 id="æ•ˆç‡é‡ç‚¹"><a href="#æ•ˆç‡é‡ç‚¹" class="headerlink" title="æ•ˆç‡é‡ç‚¹"></a>æ•ˆç‡é‡ç‚¹</h2><ol>
<li>ä½¿ç”¨ line fog è°ƒæ•´ç›¸æœºè§†é‡</li>
<li>å…³é—­åœºæ™¯é˜´å½± èƒ½ç”¨çƒ˜ç„™ç”¨çƒ˜ç„™ã€‚ </li>
<li>ä½¿ç”¨ Fast Shadow Projector åšé˜´å½±ã€‚</li>
<li>ä¸è¦ä½¿ç”¨standard shaderã€‚å› ä¸ºå¤§é‡çš„å®æ—¶GIè¿ç®—ã€‚</li>
</ol>
<h2 id="æ‰“åŒ…äº‹é¡¹"><a href="#æ‰“åŒ…äº‹é¡¹" class="headerlink" title="æ‰“åŒ…äº‹é¡¹"></a>æ‰“åŒ…äº‹é¡¹</h2><ol>
<li>iOS å¦‚æœå¯ä»¥å°±ä½¿ç”¨ bit code</li>
<li>APK ä½¿ç”¨ Android Studio release æ‰“åŒ…</li>
<li>ä½¿ç”¨  <code>.NET 2.0 Subset </code> ä½¿ç”¨è„šæœ¬ä»£æ›¿å¦‚ xml ä¹‹ç±»çš„systemåº“çš„ä½¿ç”¨ã€‚</li>
<li>æ‰“åŒ…å®Œä¹‹åæŸ¥çœ‹ log ç¡®å®šèµ„æºç“¶é¢ˆã€‚æ¨èä½¿ç”¨ <code>Build Report Tool</code><br>æŸå®äº”æ¯›é’±èƒ½ä¹°åˆ°æœ€æ–°ç‰ˆã€‚æ¯æ¬¡æ‰“åŒ…éƒ½éœ€è¦çœ‹ä¸€çœ¼ï¼ŒçœŸç­‰åˆ°éœ€è¦åšä¼˜åŒ–çš„æ—¶å€™å·²ç»æ™šäº†ï¼Œä¼˜åŒ–çš„éœ€æ±‚å¾€å¾€æ˜¯ç§¯ç´¯åˆ°ä¸€å®šç¨‹åº¦æ‰çˆ†å‘éœ€è¦ä¼˜åŒ–ã€‚</li>
<li>æ‰“åŒ…è¿‡atlasçš„å›¾å°±ä¸è¦å†æ”¾åˆ°Resourcesä¸‹ï¼Œæ–¹ä¾¿çš„è¯å°±æ‰“åŒ…æˆAB</li>
</ol>
<h2 id="ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™"><a href="#ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™" class="headerlink" title="ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™"></a>ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™</h2><p><a href="https://docs.unity3d.com/Manual/OptimizingGraphicsPerformance.html" target="_blank" rel="external">å®˜ç½‘ å›¾å½¢æ€§èƒ½ä¼˜åŒ–</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æˆ‘ç»™é¡¹ç›®ç»„çš„ä¸€äº›å‚è€ƒã€‚å…¶ä¸­ä¹ŸåŒ…å«å„ç§å„æ ·çš„æ ‡å‡†ï¼Œä¸ä¼˜åŒ–å»ºè®®ã€‚é¡¹ç›®ä¼˜åŒ–å¹¶ä¸æ˜¯ä¸€ä»¶äº‹ï¼Œå®ƒæ˜¯ç‚¹ç‚¹æ»´æ»´ä¸²è”èµ·æ¥çš„(å‹¿ä»¥æ¶å°è€Œä¸ºä¹‹)ï¼Œæˆ‘è§è¿‡å¾ˆå¤šé¡¹ç›®åªæ˜¯å›¾ä¸€æ—¶ä¹‹æ–¹ä¾¿å°±å¯¼è‡´åæœŸå¾ˆéš¾åš æ¯”å¦‚ å‰æœŸæœªè§„åˆ’å¥½å›¾é›†ï¼Œæ¨¡å‹è´´å›¾æè´¨ç›®å½•æ··ç”¨ï¼ŒUIåˆ¶ä½œæœªæŒ‰ç…§ å¤ç”¨/ç‰¹æ®Š çš„æ ‡å‡†åˆ¶ä½œï¼ŒåŠ¨ç”»å¯¼å‡ºå¸§ç‡ä¸ç»Ÿä¸€é«˜é«˜ä½ä½ ç­‰ç­‰ã€‚å¦‚æœä¸€å¼€å§‹æ²¡æœ‰å®šåˆ¶è‰¯å¥½çš„è§„èŒƒï¼Œåé¢æƒ³è¦è¡¥æ•‘åªèƒ½é ç¨‹åºå†™ä¸€äº›å·¥å…·æ‰¹é‡å¤„ç†ï¼Œå½“ç„¶è¿™å·¥å…·ä¹Ÿä¸ä¸€å®šå¥½å†™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://vrast.cn/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Unity new API</title>
    <link href="http://vrast.cn/posts/76c9e56/"/>
    <id>http://vrast.cn/posts/76c9e56/</id>
    <published>2018-02-26T11:17:08.000Z</published>
    <updated>2018-02-27T07:19:38.124Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™é‡Œè®°å½•ä¸€äº›Unity3Dçš„API ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="Application-lowMemory-ä½å†…å­˜æ£€æµ‹-5-6"><a href="#Application-lowMemory-ä½å†…å­˜æ£€æµ‹-5-6" class="headerlink" title="Application.lowMemory ä½å†…å­˜æ£€æµ‹ 5.6+"></a>Application.lowMemory ä½å†…å­˜æ£€æµ‹ 5.6+</h1><p>å½“Andoridæˆ–è€…iOSå†…å­˜è¿‡ä½ä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚ç”¨æ¥å¤„ç†å†…å­˜é‡Šæ”¾ <a href="https://docs.unity3d.com/ScriptReference/Application-lowMemory.html" target="_blank" rel="external">å®˜ç½‘æ–‡æ¡£</a><br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"></div><div class="line"><span class="keyword">class</span> <span class="title">LowMemoryTrigger</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line">    List&lt;Texture2D&gt; _textures;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        _textures = <span class="keyword">new</span> List&lt;Texture2D&gt;();</div><div class="line">        Application.lowMemory += OnLowMemory;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// allocate textures until we run out of memory</span></div><div class="line">        _textures.Add(<span class="keyword">new</span> Texture2D(<span class="number">256</span>, <span class="number">256</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnLowMemory</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// release all cached textures</span></div><div class="line">        _textures = <span class="keyword">new</span> List&lt;Texture2D&gt;();</div><div class="line">        Resources.UnloadUnusedAssets();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œè®°å½•ä¸€äº›Unity3Dçš„API ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITYAPI" scheme="http://vrast.cn/categories/UNITYAPI/"/>
    
    
      <category term="UNITY3D" scheme="http://vrast.cn/tags/UNITY3D/"/>
    
  </entry>
  
  <entry>
    <title>SNFramework</title>
    <link href="http://vrast.cn/posts/f326c5ce/"/>
    <id>http://vrast.cn/posts/f326c5ce/</id>
    <published>2018-01-16T01:31:33.000Z</published>
    <updated>2018-01-16T05:57:48.212Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h1><p>2015å¹´ æˆ‘åœ¨æ·˜ç±³å†™äº†ä¸€å¥— <a href="http://www.cnblogs.com/Keyle/p/4843934.html" target="_blank" rel="external">æ¶ˆæ¯ä¼ é€’æœºåˆ¶</a> å½“ç„¶è¿™ä¸€å¥—åœ¨æˆ‘çš„ä¸Šå®¶å…¬å¸ä¹Ÿå¾—åˆ°éªŒè¯ã€‚<br>2016å¹´ æˆ‘åœ¨ä¸–çºªåˆ›æ„åŸºäº2015å¹´ä¸€ç‰ˆçš„æ¶ˆæ¯ä¼ é€’è¿›è¡Œäº†å°è£…ä½†æ˜¯å½“æ—¶èµ¶é¡¹ç›®ä¹Ÿæ²¡æœ‰å¼•å…¥ã€‚æˆ‘ç§°ä¹‹ä¸º <a href="https://gitee.com/keyle/SmartNotificationFramework" target="_blank" rel="external">SmartNotificationFramework</a> æˆ‘å¸Œæœ›å®ƒèƒ½è¾¾åˆ°è¶³å¤Ÿçš„çµæ´»ï¼Œåœ¨æˆ‘çœ‹æ¥å®ƒå·¥ä½œçš„è¿˜ä¸é”™ï¼Œä½†æ˜¯å¤ªç®€é™‹ã€‚<br>2018å¹´ ä¹Ÿå°±æ˜¯ä»Šå¹´æˆ‘ç»ˆäºå¾—ç©ºå¹¶ä¸”é›†ä¸­æ—¶é—´å¤§é‡é‡æ„ä¸å®Œæˆäº†å¤§éƒ¨åˆ†çš„å•å…ƒæµ‹è¯•ã€‚SNFramework æ˜¯æˆ‘æ­£åœ¨ä½¿ç”¨çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚å®ƒå·²ç»æœ‰äº†åˆæ­¥çš„ç†æƒ³åŠŸèƒ½ï¼Œå¦‚æ¶ˆæ¯ä¸Šä¸‹åˆ†éš”ç¦»ï¼Œæ¶ˆæ¯è¢«é˜…è¯»æˆåŠŸè‡ªåŠ¨é‡Šæ”¾(å³æŒ‡æ‰§è¡Œä¸€æ¬¡)ï¼Œå¹¿æ’­æ¶ˆæ¯ç­‰ã€‚</p>
<h1 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h1><p><a href="https://github.com/KeyleXiao/SNFramework" target="_blank" rel="external">https://github.com/KeyleXiao/SNFramework</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;èµ·æº&quot;&gt;&lt;a href=&quot;#èµ·æº&quot; class=&quot;headerlink&quot; title=&quot;èµ·æº&quot;&gt;&lt;/a&gt;èµ·æº&lt;/h1&gt;&lt;p&gt;2015å¹´ æˆ‘åœ¨æ·˜ç±³å†™äº†ä¸€å¥— &lt;a href=&quot;http://www.cnblogs.com/Keyle/p/4843934.html&quot; t
    
    </summary>
    
      <category term="OpenSource" scheme="http://vrast.cn/categories/OpenSource/"/>
    
    
      <category term="SNFramework" scheme="http://vrast.cn/tags/SNFramework/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†æç¼ºæ°§(Oxygen not included)ä¸­æ‰€ç”¨åˆ°çš„æŠ€æœ¯</title>
    <link href="http://vrast.cn/posts/6f00466c/"/>
    <id>http://vrast.cn/posts/6f00466c/</id>
    <published>2018-01-03T09:03:16.000Z</published>
    <updated>2018-01-03T10:53:07.537Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å…ƒæ—¦æœŸé—´ç©äº†ç¼ºæ°§ï¼Œæ„Ÿè§‰ååˆ†çš„å¥½ç©ã€‚å±äºæ·±åº¦æ²™ç›’ç»è¥ç±»æ¸¸æˆã€‚æ—¢ç„¶å¥½ç©é‚£å°±è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»Šå¤©æŠ½ç©ºçœ‹äº†çœ‹æºç ï¼ŒåŸºæœ¬ä¸Šåˆ—å‡ºæ‰€æœ‰èƒ½æ‰¾åˆ°çš„å·¥å…·æˆ–æŠ€æœ¯ã€‚ç®—æ˜¯ä¸€ä¸ªè®°å½•ï¼Œä¹Ÿå¼€é˜”ä¸€ä¸‹è§†é‡ã€‚å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆè¡¥å……æ¬¢è¿ç»™æˆ‘ç•™è¨€ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="å¤–éƒ¨æ’ä»¶åˆ—è¡¨"><a href="#å¤–éƒ¨æ’ä»¶åˆ—è¡¨" class="headerlink" title="å¤–éƒ¨æ’ä»¶åˆ—è¡¨"></a>å¤–éƒ¨æ’ä»¶åˆ—è¡¨</h1><h2 id="YamlDotNet-amp-Newtonsoft-Json"><a href="#YamlDotNet-amp-Newtonsoft-Json" class="headerlink" title="YamlDotNet &amp; Newtonsoft.Json"></a>YamlDotNet &amp; Newtonsoft.Json</h2><p>åºåˆ—åŒ–å·¥å…·<br><a href="https://github.com/aaubry/YamlDotNet" target="_blank" rel="external">Githubåœ°å€</a><br><a href="https://dotnetfiddle.net/QlqGDV" target="_blank" rel="external">ä»£ç æ¼”ç¤ºåœ°å€1</a><br><a href="https://dotnetfiddle.net/HD2JXM" target="_blank" rel="external">ä»£ç æ¼”ç¤ºåœ°å€2</a></p>
<p>Newtonsoft.Json å°±ä¸è¯´äº† è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“ï¼Œæ¯•ç«Ÿä¸æ˜¯å°ä¼—</p>
<h2 id="FileHelpers-Library"><a href="#FileHelpers-Library" class="headerlink" title="FileHelpers Library"></a>FileHelpers Library</h2><p>FileHelpers Libraryæ˜¯ä¸€æ¬¾C#ç¼–å†™çš„å¼€æº .NET ç±»åº“ã€‚å®ƒä½¿ç”¨ç®€å•ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥ä»å›ºå®šé•¿åº¦æ–‡ä»¶æˆ–ç•Œå®šè®°å½•(CSV)è¯»/å†™æ•°æ®ã€‚å®ƒä¹Ÿæ”¯æŒä»ä¸åŒçš„æ•°æ®å­˜å‚¨æ ¼å¼(Excel, Access, SqlServer)å¯¼å…¥/å¯¼å‡ºæ•°æ®ã€‚ <a href="http://www.filehelpers.net" target="_blank" rel="external">FileHelperså®˜ç½‘</a></p>
<h2 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h2><p>ArabicSuppor.dll  é˜¿æ‹‰ä¼¯è¯­æ”¯æŒ<br>I18N.dll / I18N.West.dll Unityè‡ªå¸¦çš„å›½é™…åŒ–å·¥å…·</p>
<h2 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h2><p>Ionic.Zip è€ç‰Œçš„è§£å‹ä¸å‹ç¼©ç±»åº“ <a href="https://dotnetzip.codeplex.com" target="_blank" rel="external">é¡¹ç›®åœ°å€ Codeplex</a><br>SharpZipLib C#è§£å‹å‹ç¼©ç±»åº“ <a href="https://github.com/icsharpcode/SharpZipLib" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="å™ªå£°"><a href="#å™ªå£°" class="headerlink" title="å™ªå£°"></a>å™ªå£°</h2><p>libnoise.dll ç”¨äºéšæœºç®—æ³•(å™ªå£°)  <a href="http://libnoise.sourceforge.net" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="Pngè¯»å†™"><a href="#Pngè¯»å†™" class="headerlink" title="Pngè¯»å†™"></a>Pngè¯»å†™</h2><p>Pngcs ç”¨æ¥å¯¹pngå›¾è¯»å†™çš„å·¥å…· <a href="https://github.com/leonbloy/pngcs" target="_blank" rel="external">Pngcsé¡¹ç›®åœ°å€</a><br>æˆ‘çŒœä¸»åœºæ™¯çš„å›¾ç‰‡åº”è¯¥åœ¨ä¸åœçš„è¯»å†™ï¼Œè¿™æ ·æ¯”ç”Ÿæˆ10000*10000çš„è´´å›¾æ•ˆç‡é«˜çš„å¤šã€‚</p>
<h1 id="å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨"><a href="#å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨" class="headerlink" title="å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨"></a>å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨</h1><h2 id="Node-Editor-Framework"><a href="#Node-Editor-Framework" class="headerlink" title="Node_Editor_Framework"></a>Node_Editor_Framework</h2><p>èŠ‚ç‚¹ç¼–è¾‘å™¨ ç»è¿‡æºç æ¯”å¯¹ klei æ‹¿è¿™ä¸ªæºç è‡ªå·±æ”¹äº†ä¸€ç‰ˆï¼Œä¸è¿‡ç¡®å®ä½¿ç”¨äº†è¿™ä¸ªé¡¹ç›® <a href="https://github.com/Seneral/Node_Editor_Framework" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="fmod-studio"><a href="#fmod-studio" class="headerlink" title="fmod.studio"></a>fmod.studio</h2><p>Unityå†…ç½®äº†AudioåŠŸèƒ½ï¼Œå¹¶ä¸”åº•å±‚ä¹Ÿæ˜¯ç”¨FMODæ¥å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä¸è¾åŠ³è‹¦å­¦ä¹ ä½¿ç”¨FMODæ’ä»¶æ¥è¿›è¡ŒéŸ³æ•ˆçš„ç®¡ç†ï¼Ÿ<br>-<a href="https://www.jianshu.com/p/586a5d465827" target="_blank" rel="external">FMODå­¦ä¹  - ç®€ä¹¦</a></p>
<h2 id="TMPro"><a href="#TMPro" class="headerlink" title="TMPro"></a>TMPro</h2><p>Meshå­—ä½“æ’ä»¶ <a href="https://www.assetstore.unity3d.com/en/#!/content/84126" target="_blank" rel="external">AssetStoreåœ°å€</a></p>
<h2 id="procgen"><a href="#procgen" class="headerlink" title="procgen"></a>procgen</h2><p>ç¨‹åºä¸Šå®ç°å™ªå£°ç®—æ³• <a href="https://github.com/trentpolack/procgen" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="å›¾å½¢å­¦æ’ä»¶"><a href="#å›¾å½¢å­¦æ’ä»¶" class="headerlink" title="å›¾å½¢å­¦æ’ä»¶"></a>å›¾å½¢å­¦æ’ä»¶</h2><h3 id="Delaunay"><a href="#Delaunay" class="headerlink" title="Delaunay"></a>Delaunay</h3><p>ä¸‰è§’å½¢ç ´è£‚ç®—æ³• åœ¨githubä¸Šæœè¿™ä¸ªå…³é”®å­—å°±å¥½äº†</p>
<h3 id="ClipperLib"><a href="#ClipperLib" class="headerlink" title="ClipperLib"></a>ClipperLib</h3><p>å¤šè¾¹å½¢åç§»è£åˆ‡ç®—æ³• <a href="http://www.angusj.com/delphi/clipper.php" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h3 id="MIConvexHull"><a href="#MIConvexHull" class="headerlink" title="MIConvexHull"></a>MIConvexHull</h3><p>å¯ä»¥ç”Ÿæˆ2ã€3ç»´çš„æœ€å°å‡¸åŒ…ã€‚å¯ä»¥è¿›è¡Œç‹„æ´›å°¼ä¸‰è§’å‰–åˆ†ï¼Œç”ŸæˆVoronoiå¤šè¾¹å½¢ã€‚<br><a href="https://github.com/DesignEngrLab/MIConvexHull" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h3 id="Voronoi-Tree"><a href="#Voronoi-Tree" class="headerlink" title="Voronoi Tree"></a>Voronoi Tree</h3><p>æ³°æ£®å¤šè¾¹å½¢<br><a href="https://en.m.wikipedia.org/wiki/Voronoi_diagram" target="_blank" rel="external">ç®—æ³•ç®€ä»‹</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å…ƒæ—¦æœŸé—´ç©äº†ç¼ºæ°§ï¼Œæ„Ÿè§‰ååˆ†çš„å¥½ç©ã€‚å±äºæ·±åº¦æ²™ç›’ç»è¥ç±»æ¸¸æˆã€‚æ—¢ç„¶å¥½ç©é‚£å°±è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»Šå¤©æŠ½ç©ºçœ‹äº†çœ‹æºç ï¼ŒåŸºæœ¬ä¸Šåˆ—å‡ºæ‰€æœ‰èƒ½æ‰¾åˆ°çš„å·¥å…·æˆ–æŠ€æœ¯ã€‚ç®—æ˜¯ä¸€ä¸ªè®°å½•ï¼Œä¹Ÿå¼€é˜”ä¸€ä¸‹è§†é‡ã€‚å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆè¡¥å……æ¬¢è¿ç»™æˆ‘ç•™è¨€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="æºç åˆ†æ" scheme="http://vrast.cn/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="ç¼ºæ°§æºç åˆ†æ" scheme="http://vrast.cn/tags/%E7%BC%BA%E6%B0%A7%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è·å–AgentTypeID</title>
    <link href="http://vrast.cn/posts/9ad4f6c3/"/>
    <id>http://vrast.cn/posts/9ad4f6c3/</id>
    <published>2017-12-22T14:25:55.000Z</published>
    <updated>2017-12-22T14:35:38.761Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å‰é˜µå­æˆ‘åœ¨Githubä¸Šç»™Unityå›¢é˜Ÿæäº†ä¸€ä¸ªissueå…³äºä½¿ç”¨ä»£ç è·å–<code>agentTypeID</code>ï¼Œè¯´æ¥æƒ­æ„§æ˜¯æˆ‘è‡ªå·±çš„æ²¡æ‰¾åˆ°å¯¹åº”çš„ä»£ç ã€‚åœ¨æˆ‘ä½¿ç”¨å¦å¤–æ¸ é“è·å–æ­¤IDçš„æ—¶å€™ Unityå›¢é˜Ÿå·²ç»é»˜é»˜ç»™æˆ‘å›å¤äº†è¿™ä¸ªissues.å…ˆè¯´è¯´æˆ‘çš„è§£å†³æ–¹å¼ï¼Œç”±äºä»£ç è®¾ç½® agentTypeID çš„æ—¶å€™éœ€è¦ç»™ä¸€ä¸ªIntç±»å‹å˜é‡ï¼Œè¿™ä¸ªå˜é‡å…¶å®æ˜¯å¯¹åº”äº†ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘åœ¨UnityEditor Inspectorçš„Debugçª—å£ä¸­ç›´æ¥è·å–äº†å¯¹åº”AgentTypeID. ç¬‘. æœ¬æ–‡è®°å½•æˆ‘è·å¾—ç­”å¤çš„è¿‡ç¨‹ï¼Œæ¢ä¸ªè§’åº¦æƒ³æƒ³å…¶å®ä¹Ÿèƒ½å‘ç°å¦å¤–çš„è§£å†³æ–¹æ¡ˆå³ä½¿ä¸çŸ¥é“ä¹Ÿæ²¡å…³ç³»<br>ã€‚</p>
</blockquote>
<p><img src="/uploads/navmeshagentid.png" alt="è§£å†³æ–¹æ¡ˆ"></p>
<a id="more"></a>
<h1 id="å›¾ä¸­çš„ä»£ç å¦‚ä¸‹"><a href="#å›¾ä¸­çš„ä»£ç å¦‚ä¸‹" class="headerlink" title="å›¾ä¸­çš„ä»£ç å¦‚ä¸‹"></a>å›¾ä¸­çš„ä»£ç å¦‚ä¸‹</h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> count = NavMesh.GetSettingsCount();</div><div class="line"><span class="keyword">var</span> agentTypeNames = <span class="keyword">new</span> <span class="keyword">string</span>[count + <span class="number">2</span>];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> id = NavMesh.GetSettingsByIndex(i).agentTypeID;</div><div class="line">    <span class="keyword">var</span> name = NavMesh.GetSettingsNameFromID(id);</div><div class="line">    agentTypeNames[i] = name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å‰é˜µå­æˆ‘åœ¨Githubä¸Šç»™Unityå›¢é˜Ÿæäº†ä¸€ä¸ªissueå…³äºä½¿ç”¨ä»£ç è·å–&lt;code&gt;agentTypeID&lt;/code&gt;ï¼Œè¯´æ¥æƒ­æ„§æ˜¯æˆ‘è‡ªå·±çš„æ²¡æ‰¾åˆ°å¯¹åº”çš„ä»£ç ã€‚åœ¨æˆ‘ä½¿ç”¨å¦å¤–æ¸ é“è·å–æ­¤IDçš„æ—¶å€™ Unityå›¢é˜Ÿå·²ç»é»˜é»˜ç»™æˆ‘å›å¤äº†è¿™ä¸ªissues.å…ˆè¯´è¯´æˆ‘çš„è§£å†³æ–¹å¼ï¼Œç”±äºä»£ç è®¾ç½® agentTypeID çš„æ—¶å€™éœ€è¦ç»™ä¸€ä¸ªIntç±»å‹å˜é‡ï¼Œè¿™ä¸ªå˜é‡å…¶å®æ˜¯å¯¹åº”äº†ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘åœ¨UnityEditor Inspectorçš„Debugçª—å£ä¸­ç›´æ¥è·å–äº†å¯¹åº”AgentTypeID. ç¬‘. æœ¬æ–‡è®°å½•æˆ‘è·å¾—ç­”å¤çš„è¿‡ç¨‹ï¼Œæ¢ä¸ªè§’åº¦æƒ³æƒ³å…¶å®ä¹Ÿèƒ½å‘ç°å¦å¤–çš„è§£å†³æ–¹æ¡ˆå³ä½¿ä¸çŸ¥é“ä¹Ÿæ²¡å…³ç³»&lt;br&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/navmeshagentid.png&quot; alt=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="NavmeshAgent" scheme="http://vrast.cn/tags/NavmeshAgent/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰ç»´å‘é‡æ›²çº¿å¹³æ»‘ç®—æ³•</title>
    <link href="http://vrast.cn/posts/7a035f20/"/>
    <id>http://vrast.cn/posts/7a035f20/</id>
    <published>2017-12-22T02:37:36.000Z</published>
    <updated>2017-12-22T14:37:40.822Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªå¹³æ»‘ç®—æ³•ï¼Œå¾ˆå¥½ç”¨ï¼Œç»è¿‡æˆ‘æµ‹è¯• æ•ˆç‡å¾ˆé«˜ï¼ŒChaikin å‡½æ•°è°ƒç”¨2-3æ¬¡ä¼šè·å¾—ä¸€ä¸ªç›¸å¯¹è¾ƒå¥½çš„æ›²çº¿ã€‚<a href="http://graphics.cs.ucdavis.edu/education/CAGDNotes/Chaikins-Algorithm/Chaikins-Algorithm.html" target="_blank" rel="external">ç®—æ³•é“¾æ¥</a><br>åŸç†æ˜¯ä¸æ–­çš„è£åˆ‡ä¸‰è§’å½¢è®©å…¶åˆ†è£‚æˆ2ä¸ªä¸‰è§’ï¼Œ2ä¸ªä¸‰è§’å˜æˆ4ä¸ªï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆä¼šè¶Šæ¥è¶Šå¹³æ»‘ä»è€Œæ¥è¿‘ä¸€ä¸ªåœ†ã€‚</p>
</blockquote>
<p><img src="/uploads/chaikin_algorithm.png" alt="è£åˆ‡èŒƒä¾‹"></p>
<a id="more"></a>
<p>å¹³æ»‘ç®—æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"></div><div class="line">[RequireComponent(<span class="keyword">typeof</span>(LineRenderer))]</div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SmoothAlgorithm</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> minRadius = <span class="number">1.5</span>f;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> maxRadius = <span class="number">3.5</span>f;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">25</span>;</div><div class="line">    <span class="keyword">private</span> LineRenderer lr;</div><div class="line">    <span class="keyword">private</span> Vector3[] points;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        lr = GetComponent&lt;LineRenderer&gt;();</div><div class="line">        GenerateRandomPath();</div><div class="line">        SetLR(points);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">GenerateRandomPath</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        points = <span class="keyword">new</span> Vector3[num];</div><div class="line"></div><div class="line">        <span class="keyword">float</span> angle = <span class="number">360.0</span>f / num;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)</div><div class="line">        &#123;</div><div class="line">            points[i] = Quaternion.AngleAxis((angle * i), Vector3.forward) * Vector3.up * Random.Range(minRadius, maxRadius);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SetLR</span>(<span class="params">Vector3[] pts</span>)</span></div><div class="line">    &#123;</div><div class="line">        lr.SetVertexCount(pts.Length);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pts.Length; i++)</div><div class="line">        &#123;</div><div class="line">            lr.SetPosition(i, pts[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Space))</div><div class="line">        &#123;</div><div class="line">            points = Chaikin(points);</div><div class="line">            SetLR(points);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.G))</div><div class="line">        &#123;</div><div class="line">            GenerateRandomPath();</div><div class="line">            SetLR(points);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function">Vector3[] <span class="title">Chaikin</span>(<span class="params">Vector3[] pts</span>)</span></div><div class="line">    &#123;</div><div class="line">        Vector3[] newPts = <span class="keyword">new</span> Vector3[(pts.Length - <span class="number">2</span>) * <span class="number">2</span> + <span class="number">2</span>];</div><div class="line">        newPts[<span class="number">0</span>] = pts[<span class="number">0</span>];</div><div class="line">        newPts[newPts.Length - <span class="number">1</span>] = pts[pts.Length - <span class="number">1</span>];</div><div class="line"></div><div class="line">        <span class="keyword">int</span> j = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pts.Length - <span class="number">2</span>; i++)</div><div class="line">        &#123;</div><div class="line">            newPts[j] = pts[i] + (pts[i + <span class="number">1</span>] - pts[i]) * <span class="number">0.75</span>f;</div><div class="line">            newPts[j + <span class="number">1</span>] = pts[i + <span class="number">1</span>] + (pts[i + <span class="number">2</span>] - pts[i + <span class="number">1</span>]) * <span class="number">0.25</span>f;</div><div class="line">            j += <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> newPts;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªå¹³æ»‘ç®—æ³•ï¼Œå¾ˆå¥½ç”¨ï¼Œç»è¿‡æˆ‘æµ‹è¯• æ•ˆç‡å¾ˆé«˜ï¼ŒChaikin å‡½æ•°è°ƒç”¨2-3æ¬¡ä¼šè·å¾—ä¸€ä¸ªç›¸å¯¹è¾ƒå¥½çš„æ›²çº¿ã€‚&lt;a href=&quot;http://graphics.cs.ucdavis.edu/education/CAGDNotes/Chaikins-Algorithm/Chaikins-Algorithm.html&quot;&gt;ç®—æ³•é“¾æ¥&lt;/a&gt;&lt;br&gt;åŸç†æ˜¯ä¸æ–­çš„è£åˆ‡ä¸‰è§’å½¢è®©å…¶åˆ†è£‚æˆ2ä¸ªä¸‰è§’ï¼Œ2ä¸ªä¸‰è§’å˜æˆ4ä¸ªï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆä¼šè¶Šæ¥è¶Šå¹³æ»‘ä»è€Œæ¥è¿‘ä¸€ä¸ªåœ†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/chaikin_algorithm.png&quot; alt=&quot;è£åˆ‡èŒƒä¾‹&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Math" scheme="http://vrast.cn/categories/Math/"/>
    
    
      <category term="ç®—æ³•" scheme="http://vrast.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ç‰©ç†æ£€æµ‹èŒƒå›´ä¸è·ç¦»å†…çš„ç›®æ ‡</title>
    <link href="http://vrast.cn/posts/e0406d64/"/>
    <id>http://vrast.cn/posts/e0406d64/</id>
    <published>2017-12-16T16:30:27.000Z</published>
    <updated>2017-12-17T11:43:39.078Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>åˆ†äº«ä¸€ä¸ªæŠ€å›´æ£€æµ‹è„šæœ¬ï¼Œç”¨æ¥åˆ¤å®šèŒƒå›´å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œæˆ–è€…æ˜¯çº¿æ€§èŒƒå›´å†…æ˜¯å¦å¯è§ç›®æ ‡ã€‚</p>
</blockquote>
<p><img src="/uploads/ScreenShot2017-12-17.png" alt="ç®€æ´èŒƒå›´æ£€æµ‹"><br><a id="more"></a></p>
<h1 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CheckSkillRange</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">public</span> Vector3 offset = Vector3.one;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">float</span> fieldOfViewAngle = <span class="number">20</span>;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">float</span> viewDistance = <span class="number">4</span>;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">bool</span> usePhysics2D = <span class="literal">false</span>;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> LayerMask ObjLayer = LayerMask.GetMask(<span class="string">"Default"</span>);</div><div class="line">  <span class="keyword">public</span> LayerMask IgnoreLayer = <span class="number">1</span>;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">if</span> (Input.GetMouseButtonUp(<span class="number">1</span>))</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">var</span> o = MovementUtility.WithinSight(transform, offset, fieldOfViewAngle, viewDistance, ObjLayer, Vector3.zero, IgnoreLayer);</div><div class="line">      <span class="keyword">if</span> (o)</div><div class="line">      &#123;</div><div class="line">        Debug.Log(<span class="keyword">string</span>.Format(<span class="string">"Attack obj &#123;0&#125;"</span>, o.name));</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">// Draw the line of sight representation within the scene window</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">    DrawLineOfSight(<span class="keyword">this</span>.transform, offset, fieldOfViewAngle, viewDistance, usePhysics2D);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawLineOfSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, <span class="keyword">bool</span> usePhysics2D</span>)</span></div><div class="line">  &#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> UNITY_EDITOR</span></div><div class="line">    <span class="keyword">var</span> oldColor = UnityEditor.Handles.color;</div><div class="line">    <span class="keyword">var</span> color = Color.yellow;</div><div class="line">    color.a = <span class="number">0.1</span>f;</div><div class="line">    UnityEditor.Handles.color = color;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> halfFOV = fieldOfViewAngle * <span class="number">0.5</span>f;</div><div class="line">    <span class="keyword">var</span> beginDirection = Quaternion.AngleAxis(-halfFOV, (usePhysics2D ? Vector3.forward : Vector3.up)) * (usePhysics2D ? transform.up : transform.forward);</div><div class="line">    UnityEditor.Handles.DrawSolidArc(transform.TransformPoint(positionOffset), (usePhysics2D ? transform.forward : transform.up), beginDirection, fieldOfViewAngle, viewDistance);</div><div class="line"></div><div class="line">    UnityEditor.Handles.color = oldColor;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰-æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹"><a href="#æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰-æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹" class="headerlink" title="æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰,æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹"></a>æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰,æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹</h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MovementUtility</span></div><div class="line">&#123;</div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// Static Fields</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Dictionary&lt;GameObject, AudioSource[]&gt; transformAudioSourceMap;</div><div class="line"></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// Static Methods</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawLineOfSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> angleOffset, <span class="keyword">float</span> viewDistance, <span class="keyword">bool</span> usePhysics2D</span>)</span></div><div class="line">  &#123;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> AudioSource[] <span class="title">GetAudioSources</span>(<span class="params">GameObject target</span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">bool</span> flag = MovementUtility.transformAudioSourceMap == <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      MovementUtility.transformAudioSourceMap = <span class="keyword">new</span> Dictionary&lt;GameObject, AudioSource[]&gt;();</div><div class="line">    &#125;</div><div class="line">    AudioSource[] componentsInChildren;</div><div class="line">    <span class="keyword">bool</span> flag2 = MovementUtility.transformAudioSourceMap.TryGetValue(target, <span class="keyword">out</span> componentsInChildren);</div><div class="line">    AudioSource[] result;</div><div class="line">    <span class="keyword">if</span> (flag2)</div><div class="line">    &#123;</div><div class="line">      result = componentsInChildren;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">      componentsInChildren = target.GetComponentsInChildren&lt;AudioSource&gt;();</div><div class="line">      MovementUtility.transformAudioSourceMap.Add(target, componentsInChildren);</div><div class="line">      result = componentsInChildren;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">LineOfSight</span>(<span class="params">Transform transform, Vector3 positionOffset, GameObject targetObject, Vector3 targetOffset, <span class="keyword">bool</span> usePhysics2D, <span class="keyword">int</span> ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result;</div><div class="line">    <span class="keyword">if</span> (usePhysics2D)</div><div class="line">    &#123;</div><div class="line">      RaycastHit2D raycastHit2D;</div><div class="line">      <span class="keyword">bool</span> flag = raycastHit2D = Physics2D.Linecast(transform.TransformPoint(positionOffset), targetObject.transform.TransformPoint(targetOffset), ~ignoreLayerMask);</div><div class="line">      <span class="keyword">if</span> (flag)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">bool</span> flag2 = raycastHit2D.transform.IsChildOf(targetObject.transform) || targetObject.transform.IsChildOf(raycastHit2D.transform);</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          result = targetObject;</div><div class="line">          <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">      RaycastHit raycastHit;</div><div class="line"></div><div class="line">      <span class="keyword">bool</span> flag3 = Physics.Linecast(transform.TransformPoint(positionOffset), targetObject.transform.TransformPoint(targetOffset), <span class="keyword">out</span> raycastHit, ~ignoreLayerMask);</div><div class="line">      <span class="keyword">if</span> (flag3)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">bool</span> flag4 = raycastHit.transform.IsChildOf(targetObject.transform) || targetObject.transform.IsChildOf(raycastHit.transform);</div><div class="line">        <span class="keyword">if</span> (flag4)</div><div class="line">        &#123;</div><div class="line">          result = targetObject;</div><div class="line">          <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    result = <span class="literal">null</span>;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinHearingRange2D</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> audibilityThreshold, <span class="keyword">float</span> hearingRadius, LayerMask objectLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result = <span class="literal">null</span>;</div><div class="line">    Collider2D[] array = Physics2D.OverlapCircleAll(transform.TransformPoint(positionOffset), hearingRadius, objectLayerMask);</div><div class="line">    <span class="keyword">bool</span> flag = array != <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">float</span> num = <span class="number">0</span>f;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">float</span> num2 = <span class="number">0</span>f;</div><div class="line">        GameObject gameObject;</div><div class="line">        <span class="keyword">bool</span> flag2 = (gameObject = MovementUtility.WithinHearingRange(transform, positionOffset, audibilityThreshold, array[i].gameObject, <span class="keyword">ref</span> num2)) != <span class="literal">null</span>;</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          <span class="keyword">bool</span> flag3 = num2 &gt; num;</div><div class="line">          <span class="keyword">if</span> (flag3)</div><div class="line">          &#123;</div><div class="line">            num = num2;</div><div class="line">            result = gameObject;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, LayerMask objectLayerMask, Vector3 targetOffset, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result = <span class="literal">null</span>;</div><div class="line">    Collider[] array = Physics.OverlapSphere(transform.position, viewDistance, objectLayerMask);</div><div class="line">    <span class="keyword">bool</span> flag = array != <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">float</span> num = <span class="keyword">float</span>.PositiveInfinity;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">float</span> num2;</div><div class="line">        GameObject gameObject;</div><div class="line">        <span class="keyword">bool</span> flag2 = (gameObject = MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, array[i].gameObject, targetOffset, <span class="literal">false</span>, <span class="number">0</span>f, <span class="keyword">out</span> num2, ignoreLayerMask)) != <span class="literal">null</span>;</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          <span class="keyword">bool</span> flag3 = num2 &lt; num;</div><div class="line">          <span class="keyword">if</span> (flag3)</div><div class="line">          &#123;</div><div class="line">            num = num2;</div><div class="line">            result = gameObject;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, GameObject targetObject, Vector3 targetOffset, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">float</span> num;</div><div class="line">    <span class="keyword">return</span> MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, targetObject, targetOffset, <span class="literal">false</span>, <span class="number">0</span>f, <span class="keyword">out</span> num, ignoreLayerMask);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, GameObject targetObject, Vector3 targetOffset, <span class="keyword">bool</span> usePhysics2D, <span class="keyword">float</span> angleOffset2D, <span class="keyword">out</span> <span class="keyword">float</span> angle, <span class="keyword">int</span> ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    Vector3 vector = targetObject.transform.position - transform.TransformPoint(positionOffset);</div><div class="line">    <span class="keyword">if</span> (usePhysics2D)</div><div class="line">    &#123;</div><div class="line">      angle = Vector3.Angle(vector, transform.up) + angleOffset2D;</div><div class="line">      vector.z = <span class="number">0</span>f;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">      angle = Vector3.Angle(vector, transform.forward);</div><div class="line">      vector.y = <span class="number">0</span>f;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> flag = vector.magnitude &lt; viewDistance &amp;&amp; angle &lt; fieldOfViewAngle * <span class="number">0.5</span>f;</div><div class="line">    GameObject result;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">bool</span> flag2 = MovementUtility.LineOfSight(transform, positionOffset, targetObject, targetOffset, usePhysics2D, ignoreLayerMask) != <span class="literal">null</span>;</div><div class="line">      <span class="keyword">if</span> (flag2)</div><div class="line">      &#123;</div><div class="line">        result = targetObject;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">bool</span> flag3 = targetObject.GetComponent&lt;Collider&gt;() == <span class="literal">null</span> &amp;&amp; targetObject.GetComponent&lt;Collider2D&gt;() == <span class="literal">null</span>;</div><div class="line">      <span class="keyword">if</span> (flag3)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">bool</span> activeSelf = targetObject.gameObject.activeSelf;</div><div class="line">        <span class="keyword">if</span> (activeSelf)</div><div class="line">        &#123;</div><div class="line">          result = targetObject;</div><div class="line">          <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    result = <span class="literal">null</span>;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight2D</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, LayerMask objectLayerMask, Vector3 targetOffset, <span class="keyword">float</span> angleOffset2D, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result = <span class="literal">null</span>;</div><div class="line">    Collider2D[] array = Physics2D.OverlapCircleAll(transform.position, viewDistance, objectLayerMask);</div><div class="line">    <span class="keyword">bool</span> flag = array != <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">float</span> num = <span class="keyword">float</span>.PositiveInfinity;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">float</span> num2;</div><div class="line">        GameObject gameObject;</div><div class="line">        <span class="keyword">bool</span> flag2 = (gameObject = MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, array[i].gameObject, targetOffset, <span class="literal">true</span>, angleOffset2D, <span class="keyword">out</span> num2, ignoreLayerMask)) != <span class="literal">null</span>;</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          <span class="keyword">bool</span> flag3 = num2 &lt; num;</div><div class="line">          <span class="keyword">if</span> (flag3)</div><div class="line">          &#123;</div><div class="line">            num = num2;</div><div class="line">            result = gameObject;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight2D</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, GameObject targetObject, Vector3 targetOffset, <span class="keyword">float</span> angleOffset2D, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">float</span> num;</div><div class="line">    <span class="keyword">return</span> MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, targetObject, targetOffset, <span class="literal">true</span>, angleOffset2D, <span class="keyword">out</span> num, ignoreLayerMask);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ†äº«ä¸€ä¸ªæŠ€å›´æ£€æµ‹è„šæœ¬ï¼Œç”¨æ¥åˆ¤å®šèŒƒå›´å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œæˆ–è€…æ˜¯çº¿æ€§èŒƒå›´å†…æ˜¯å¦å¯è§ç›®æ ‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/ScreenShot2017-12-17.png&quot; alt=&quot;ç®€æ´èŒƒå›´æ£€æµ‹&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="Physics" scheme="http://vrast.cn/tags/Physics/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³NavmeshAgentå¯»è·¯è¾¹ç•Œçš„åˆ¤å®š</title>
    <link href="http://vrast.cn/posts/e53ade9f/"/>
    <id>http://vrast.cn/posts/e53ade9f/</id>
    <published>2017-12-15T14:36:00.000Z</published>
    <updated>2017-12-22T14:26:08.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä»Šå¤©ç¾¤é‡Œæœ‰å…„å¼Ÿé—®: â€œæˆ‘çœ‹åˆ°navmeshagenté‡Œé¢æœ‰ä¸ªæ–¹æ³•å«ä»€ä¹ˆè·å–ç½‘æ ¼è¾¹ç¼˜ç‚¹çš„ï¼Œæˆ‘æ‰“ç®—é¦–å…ˆåˆ¤æ–­ç›®æ ‡ç‚¹åœ¨ä¸åœ¨ç½‘æ ¼ä¸Šã€‚åœ¨çš„è¯æ­£å¸¸é€»è¾‘ï¼Œä¸åœ¨çš„è¯åˆ¤æ–­å½“å‰agentçš„ä½ç½®æœ‰æ²¡æœ‰åˆ°é‚£ä¸ªè¾¹ç¼˜ç‚¹ â€œ ã€‚æˆ‘æƒ³è¿™æ ·åº”è¯¥èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<p><img src="/uploads/FC9B64C1057D31F1B4692EF0EC22A08B.jpg" alt="è§£å†³è¾¹ç•Œç‚¹çš„åˆ¤å®š"></p>
<a id="more"></a>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">1</span>))</div><div class="line">&#123;</div><div class="line">    NavMeshHit hit;</div><div class="line">    NavMesh.Raycast(transform.position, target.position, <span class="keyword">out</span> hit, <span class="number">1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (hit.hit)</div><div class="line">    &#123;</div><div class="line">        NavMeshPath path = <span class="keyword">new</span> NavMeshPath();</div><div class="line">        <span class="keyword">if</span> (agent.CalculatePath(hit.position, path))</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">var</span> pos = path.corners[path.corners.Length - <span class="number">1</span>];</div><div class="line">            <span class="keyword">var</span> o = GameObject.CreatePrimitive(PrimitiveType.Sphere);</div><div class="line">            o.transform.localScale = Vector3.one * <span class="number">0.1</span>f;</div><div class="line">            o.transform.position = pos;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©ç¾¤é‡Œæœ‰å…„å¼Ÿé—®: â€œæˆ‘çœ‹åˆ°navmeshagenté‡Œé¢æœ‰ä¸ªæ–¹æ³•å«ä»€ä¹ˆè·å–ç½‘æ ¼è¾¹ç¼˜ç‚¹çš„ï¼Œæˆ‘æ‰“ç®—é¦–å…ˆåˆ¤æ–­ç›®æ ‡ç‚¹åœ¨ä¸åœ¨ç½‘æ ¼ä¸Šã€‚åœ¨çš„è¯æ­£å¸¸é€»è¾‘ï¼Œä¸åœ¨çš„è¯åˆ¤æ–­å½“å‰agentçš„ä½ç½®æœ‰æ²¡æœ‰åˆ°é‚£ä¸ªè¾¹ç¼˜ç‚¹ â€œ ã€‚æˆ‘æƒ³è¿™æ ·åº”è¯¥èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/FC9B64C1057D31F1B4692EF0EC22A08B.jpg&quot; alt=&quot;è§£å†³è¾¹ç•Œç‚¹çš„åˆ¤å®š&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="NavmeshAgent" scheme="http://vrast.cn/tags/NavmeshAgent/"/>
    
  </entry>
  
  <entry>
    <title>High-level NavMesh Building Components</title>
    <link href="http://vrast.cn/posts/98dfcd51/"/>
    <id>http://vrast.cn/posts/98dfcd51/</id>
    <published>2017-12-07T12:49:15.000Z</published>
    <updated>2017-12-08T03:10:38.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>é«˜çº§ NavMesh ç»„ä»¶è¯´æ˜æ–‡æ¡£</p>
</blockquote>
<p>NavMesh Surface è„šæœ¬ ï¼Œåœ¨æ­¤ä¹‹å‰ æˆ‘çœ‹äº†ç½‘ç»œä¸Šçš„ä¸€ç¯‡ä»‹ç» <a href="http://forum.china.unity3d.com/thread-25421-1-1.html" target="_blank" rel="external">è¿›å‡»çš„æ–°ç‰ˆNavMeshç³»ç»Ÿï¼šçœ‹æˆ‘é£æªèµ°å£</a> æ•ˆæœéå¸¸å¥½ã€‚æˆ‘ä¸€è¾¹æµ‹è¯•ä¸€è¾¹è®°å½•å…³äºSurfaceçš„ç”¨æ³•ã€‚</p>
<p>NavMesh Surcefaç»„ä»¶è¡¨ç¤ºç‰¹å®šNavMeshAgentç±»å‹çš„å¯è¡Œèµ°åŒºåŸŸï¼Œå¹¶å®šä¹‰åº”è¯¥æ„å»ºNavMeshçš„åœºæ™¯çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>NavMesh Surfaceç»„ä»¶ä¸åœ¨æ ‡å‡†Unityå®‰è£…ä¸­; æœ‰å…³å¦‚ä½•è®¿é—®å®ƒçš„ä¿¡æ¯ï¼Œ<a href="https://docs.unity3d.com/Manual/class-NavMeshSurface.html" target="_blank" rel="external">è¯·å‚é˜…é«˜çº§NavMeshæ„å»ºç»„ä»¶çš„æ–‡æ¡£</a>ã€‚</p>
<p>è¦ä½¿ç”¨NavMesh Surfaceç»„ä»¶ï¼Œå¯¼èˆªåˆ°GameObject&gt; AI&gt; NavMesh Surfaceã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªç©ºçš„GameObjectï¼Œå¹¶é™„å¸¦ä¸€ä¸ªNavMesh Surfaceç»„ä»¶ã€‚ ä¸€ä¸ªåœºæ™¯å¯ä»¥åŒ…å«å¤šä¸ªNavMeshè¡¨é¢ã€‚</p>
<a id="more"></a>
<p><img src="/uploads/class-NavMeshSurface-0.png" alt="å—¯ å°±æ˜¯è¿™è´§äº†"></p>
<p><img src="/uploads/QQ20171207-161002@2x.png" alt="é’ˆå¯¹ä¸è¿™ä¸ªç»„ä»¶çš„ä½¿ç”¨è¯´æ˜"></p>
<p><img src="/uploads/QQ20171207-162319.png" alt="NavMesh Surfaceå‚æ•°è¯´æ˜"></p>
<blockquote>
<p>NavMesh Off-Link &amp;  Off-mesh-Link æˆ‘ä»¬é€šå¸¸ç”¨ç¬¬ä¸€ç§ã€‚åœ¨ä¸¤ä¸ªä¸å¯è¡Œèµ°åŒºåŸŸä¹‹é—´ ä½¿ç”¨è·¨è¶Šç‚¹+åŠ¨ç”» å®ç°å®šç‚¹è·³è·ƒã€‚</p>
</blockquote>
<p><img src="/uploads/QQ20171207-194954.png" alt="Off Link"><br><img src="/uploads/QQ20171207-195557.png" alt="Off Link"></p>
<blockquote>
<p>NavMesh Modifier &amp; NavMesh Modifier Volume åœ¨çƒ˜åŸ¹ä¹‹å‰ä¿®æ”¹åŒºåŸŸæ˜¯å¦è¡Œèµ°</p>
</blockquote>
<p>å…ˆè¯´ NavMesh Modifier volume,ä½ å¯ä»¥åœ¨çƒ˜åŸ¹ä¹‹å‰é€‰å®šåŒºåŸŸè®¾ç½®åŒºåŸŸç±»å‹ï¼Œä¾‹å­å°†æŸä¸ªAgentè®¾ç½®æˆè¯¥åŒºåŸŸä¸èƒ½è¡Œèµ°ã€‚</p>
<p><img src="/uploads/class-NavMesh-ModifierVolume-4.png" alt="NavMesh Modifier Volumeæ•ˆæœå›¾"></p>
<!-- more -->
<p><img src="/uploads/QQ20171207-193142@2x.png" alt="NavMesh Modifier Volumeä½¿ç”¨æ–¹æ³•"></p>
<p>å¦‚æœçŸ¥é“äº† NavMesh Modifier Volume é‚£ä¹ˆå¯ä»¥çŒœå¾—åˆ°  NavMesh Modifier å°±æ˜¯ç»™é™„ç€è¿™ä¸ªè„šæœ¬çš„meshä¸Šçš„åŒºåŸŸè®¾ç½®åŒºåŸŸç±»å‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;é«˜çº§ NavMesh ç»„ä»¶è¯´æ˜æ–‡æ¡£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;NavMesh Surface è„šæœ¬ ï¼Œåœ¨æ­¤ä¹‹å‰ æˆ‘çœ‹äº†ç½‘ç»œä¸Šçš„ä¸€ç¯‡ä»‹ç» &lt;a href=&quot;http://forum.china.unity3d.com/thread-25421-1-1.html&quot;&gt;è¿›å‡»çš„æ–°ç‰ˆNavMeshç³»ç»Ÿï¼šçœ‹æˆ‘é£æªèµ°å£&lt;/a&gt; æ•ˆæœéå¸¸å¥½ã€‚æˆ‘ä¸€è¾¹æµ‹è¯•ä¸€è¾¹è®°å½•å…³äºSurfaceçš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh Surcefaç»„ä»¶è¡¨ç¤ºç‰¹å®šNavMeshAgentç±»å‹çš„å¯è¡Œèµ°åŒºåŸŸï¼Œå¹¶å®šä¹‰åº”è¯¥æ„å»ºNavMeshçš„åœºæ™¯çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh Surfaceç»„ä»¶ä¸åœ¨æ ‡å‡†Unityå®‰è£…ä¸­; æœ‰å…³å¦‚ä½•è®¿é—®å®ƒçš„ä¿¡æ¯ï¼Œ&lt;a href=&quot;https://docs.unity3d.com/Manual/class-NavMeshSurface.html&quot;&gt;è¯·å‚é˜…é«˜çº§NavMeshæ„å»ºç»„ä»¶çš„æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¦ä½¿ç”¨NavMesh Surfaceç»„ä»¶ï¼Œå¯¼èˆªåˆ°GameObject&amp;gt; AI&amp;gt; NavMesh Surfaceã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªç©ºçš„GameObjectï¼Œå¹¶é™„å¸¦ä¸€ä¸ªNavMesh Surfaceç»„ä»¶ã€‚ ä¸€ä¸ªåœºæ™¯å¯ä»¥åŒ…å«å¤šä¸ªNavMeshè¡¨é¢ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="Navigation" scheme="http://vrast.cn/tags/Navigation/"/>
    
  </entry>
  
</feed>
