<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lazybones Kill PLAN</title>
  <subtitle>In me the tiger sniffs the rose</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://vrast.cn/"/>
  <updated>2018-09-13T07:22:49.238Z</updated>
  <id>http://vrast.cn/</id>
  
  <author>
    <name>keyle xiao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>UNITY3D Playables API å®è·µ(ä¸Š)</title>
    <link href="http://vrast.cn/posts/5df16bd2/"/>
    <id>http://vrast.cn/posts/5df16bd2/</id>
    <published>2018-09-07T07:01:13.000Z</published>
    <updated>2018-09-13T07:22:49.238Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>Playables API æ¨å‡ºå·²ç»ä¸€å¹´æœ‰ä½™(2017â€“07â€“04 New in Unity 2017.1)ã€‚å³ä½¿ä½ æ²¡æ—¶é—´å…¶ä»–çš„æ–°åŠŸèƒ½ï¼Œ ä¹Ÿåº”è¯¥çœ‹çœ‹è¿™ä¸ª <code>Playable API</code> .åšè¿‡å¤§å‹æ¸¸æˆçš„åŒå­¦æ— è®ºä½ æ˜¯åšè¿‡ 2Dæˆ–3D åªè¦ä½¿ç”¨è¿‡ Animaiton Controller,æˆ–å¤šæˆ–å°‘ä½“ä¼šè¿‡è¢« èœ˜è››ç½‘(å¤æ‚çŠ¶æ€æœºè¿‡æ¸¡) æ”¯é…çš„ææƒ§ã€‚å½“ä¸‹æœ‰äº† <code>Playable API</code> å¯ä¾›ä½¿ç”¨ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“çš„å‘ Legacy animation API çš„ä½¿ç”¨ä¹ æƒ¯é æ‹¢ â€” é«˜æ•ˆåŠæ˜“äºå®šåˆ¶ã€‚</p>
<p><img src="/uploads/WX20180907-152657.png" alt="ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºï¼Œå½“ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚"></p>
<font color="#185FB4">åœ¨æˆ‘çœ‹æ¥ Playable API çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ›¿æ¢æ‰LegacyåŠ¨ç”»ç³»ç»Ÿï¼Œå¹¶ä¸”å…¼å®¹Timelineï¼ˆæœ¬ç¯‡ä¸ä»‹ç»timeline æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹ï¼‰ã€‚æ€»çš„ä¸€ä¸ªè¯æ¦‚æ‹¬å°±æ˜¯ ã€dynamicallyã€‘ï¼Œå¦‚åŒä½¿ç”¨ç»„ä»¶ä¸€èˆ¬çš„çµæ´»ã€‚</font>

<blockquote>
<p>ç›®å‰æˆ‘åœ¨æµ‹è¯•ä¸­ä½¿ç”¨äº† UNITY2018.1+ ç¼–è¾‘å™¨ã€‚å¦‚æœä¸ä½¿ç”¨è¯¥å¯è§†åŒ–æ’ä»¶æ‚¨åœ¨ UNITY5.x ç‰ˆæœ¬å°±èƒ½ä½¿ç”¨<code>Playable API</code>ã€‚ ä½¿ç”¨5.xç‰ˆæœ¬çš„Playable API æ—¶è¯·æ³¨æ„åç»­çš„ä»£ç APIå˜æ›´ï¼ŒæŸäº›å‡½æ•°åæˆ–è°ƒç”¨æ–¹å¼å¯èƒ½å·²ç»æ›´æ”¹ï¼Œå¦‚æœä»æœªä½¿ç”¨è¿‡ å»ºè®®ä» UNITY2017+ å¼€å§‹å…¥æ‰‹ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="å‡†å¤‡å·¥ä½œ-å¯è·³è¿‡"><a href="#å‡†å¤‡å·¥ä½œ-å¯è·³è¿‡" class="headerlink" title="å‡†å¤‡å·¥ä½œ(å¯è·³è¿‡)"></a>å‡†å¤‡å·¥ä½œ(å¯è·³è¿‡)</h1><h2 id="è°ƒè¯•å·¥å…·-graph-visualizer"><a href="#è°ƒè¯•å·¥å…·-graph-visualizer" class="headerlink" title="è°ƒè¯•å·¥å…· graph-visualizer"></a>è°ƒè¯•å·¥å…· graph-visualizer</h2><p>æˆ‘ä»¬å…ˆClone UNITY TECHNOLOGIES æä¾›çš„ <code>Playable</code> å¯è§†åŒ–å·¥å…·ï¼Œä¾¿äºåç»­çš„ç†è§£ä¸è°ƒè¯•ã€‚<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/Unity-Technologies/graph-visualizer</div></pre></td></tr></table></figure></p>
<p>æˆ‘åœ¨è¿™é‡Œç›´æ¥å…‹éš†åˆ°æµ‹è¯•å·¥ç¨‹ä¸­ï¼Œç›®å‰æ­¤å·¥å…·æ”¯æŒçš„UNITYç‰ˆæœ¬å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Unity version</th>
<th>Release</th>
</tr>
</thead>
<tbody>
<tr>
<td> 2018.1+</td>
<td>v2.2 (master)</td>
</tr>
<tr>
<td> 2017.1+</td>
<td>v1.1</td>
</tr>
</tbody>
</table>
<h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p><img src="/uploads/WX20180911-144337@2x.png" alt="CloneæˆåŠŸå æ‰“å¼€ Window/graph-visualizer ,åœ¨åˆ›å»ºPlayGraphçš„åœ°æ–¹è°ƒç”¨ GraphVisualizerClient.Show(graph) å³å¯ï¼Œåœ¨è¿è¡Œæ—¶å¯çœ‹åˆ°åŠ¨æ€åˆ›å»ºçš„æ ‘å½¢ç»“æ„"></p>
<p><img src="/uploads/WX20180911-144513@2x.png" alt="æ‚¨å°†ä¼šå¾—åˆ°è¿™æ ·çš„ç”»é¢ å³ä¾§ä¸ºç¤ºèŒƒå›¾ä¾‹ï¼Œå¯æ‰‹åŠ¨å…³é—­ã€‚"></p>
<h1 id="PlayableåŸºç¡€ç»“æ„"><a href="#PlayableåŸºç¡€ç»“æ„" class="headerlink" title="PlayableåŸºç¡€ç»“æ„"></a>PlayableåŸºç¡€ç»“æ„</h1><p><img src="/uploads/QQ20180910-164716@2x.png" alt=""><br>è¿™ä¸¤ä¸ªç»“æ„ä½“æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆä¸Šæ–‡çš„ PlayableGraph ä¾‹å›¾æ¥æ€»ç»“ä¸€ä¸‹è§„å¾‹ã€‚ AnimationOutput æ˜¯æ ¹èŠ‚ç‚¹ï¼ŒPlayable æ˜¯å¯ä»¥é€šè¿‡ åä¸ºXXXXXMixerPlayable æ¥è¿›è¡Œç»„åˆ æˆ– å•ç‹¬ä½¿ç”¨ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªæ‰èƒ½æ„æˆæœ€ç®€å•çš„ PlayableGraphã€‚</p>
<p><img src="/uploads/WX20180911-150945@2x.png" alt="&lt;font color=#3976C3&gt;å°æŠ€å·§ï¼šç¼–è¾‘å™¨ä¸­è¾“å…¥MixerPlayable å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„Mixer(ç»“æ„ä½“)ï¼Œé€šè¿‡è¿™äº›ç±» æˆ‘ä»¬å¯ä»¥è½»æ˜“çš„å°†ä¸€ä¸ªä¸ªä¸åŒç§ç±»çš„èŠ‚ç‚¹è¿æ¥åœ¨ä¸€èµ·ä»è€Œå½¢æˆæ–°çš„æ ‘å½¢ç»“æ„ã€‚&lt;/font&gt;"></p>
<h1 id="å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹-åŠ¨ç”»çš„æ’­æ”¾"><a href="#å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹-åŠ¨ç”»çš„æ’­æ”¾" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹ åŠ¨ç”»çš„æ’­æ”¾"></a>å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹ åŠ¨ç”»çš„æ’­æ”¾</h1><h2 id="åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„-PlayableGraph"><a href="#åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„-PlayableGraph" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„ PlayableGraph"></a>åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„ PlayableGraph</h2><p><img src="/uploads/WX20180911-163559@2x.png" alt="æˆ‘ä»¬ä½¿ç”¨äº”è¡Œä»£ç å°±åˆ›å»ºäº†ä¸€ä¸ªæœ€åŸºç¡€çš„ PlayableGraphã€‚"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable = AnimationClipPlayable.Create(playableGraph, clip);</div><div class="line">playableOutput.SetSourcePlayable(clipPlayable);</div><div class="line"></div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
<p>âš ï¸ æ‚¨åŒæ ·å¯ä»¥ä½¿ç”¨ä¸€è¡Œä»£ç å°±èƒ½è°ƒç”¨æ­¤åŠ¨ç”»ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>Animator</strong>ä¸èƒ½ä¸ºç©ºï¼Œå¦åˆ™ç¼–è¾‘å™¨ä¼šç›´æ¥crashè€Œä¸æŠ¥å¼‚å¸¸ã€‚<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">AnimationPlayableUtilities.PlayClip(GetComponent&lt;Animator&gt;(), clip, <span class="keyword">out</span> playableGraph);</div></pre></td></tr></table></figure></p>
<h2 id="åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ"><a href="#åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ" class="headerlink" title="åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ"></a>åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆ</h2><p><img src="/uploads/WX20180911-171707@2x.png" alt="è¿™é‡Œæˆ‘ä»¬æ–°å¢äº†å‡ è¡Œä»£ç ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æˆªå›¾æ‰€ç¤ºmixerèŠ‚ç‚¹ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ inputcount ä¸ outputcount ï¼Œé¡¾åæ€ä¹‰ã€‚æˆ‘ä»¬æ—¢å¯ä»¥ä» PlayableGraph çš„çº§åˆ«æŒ‡å®šä¸¤ä¸ªAnimationClipè¿æ¥åˆ°mixerä¸Šï¼Œå¯ä»¥ä½¿ç”¨mixer ç›´æ¥å»è¿›è¡Œé“¾æ¥ç‚¹è®¾ç½®ã€‚"><br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create(<span class="string">"test graph"</span>);</div><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"test Animation"</span>,_animator = GetComponent&lt;Animator&gt;());</div><div class="line"></div><div class="line">mixerPlayable = AnimationMixerPlayable.Create(playableGraph, <span class="number">2</span>);</div><div class="line">playableOutput.SetSourcePlayable(mixerPlayable);</div><div class="line"></div><div class="line"><span class="keyword">var</span> clipPlayable1 = AnimationClipPlayable.Create(playableGraph, clip1);</div><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimationClipPlayable.Create(playableGraph, clip2);</div><div class="line"></div><div class="line"><span class="comment">//playableGraph.Connect(clipPlayable1,0,mixerPlayable,0);</span></div><div class="line"><span class="comment">//playableGraph.Connect(clipPlayable2, 0, mixerPlayable, 1);</span></div><div class="line"><span class="comment">//ä¸Šé¢çš„ä¸¤è¡Œä¸ä¸‹é¢çš„ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„</span></div><div class="line">mixerPlayable.ConnectInput(<span class="number">0</span>,clipPlayable1,<span class="number">0</span>);</div><div class="line">mixerPlayable.ConnectInput(<span class="number">1</span>,clipPlayable2,<span class="number">0</span>);</div><div class="line"></div><div class="line">weight = Mathf.Clamp01(weight);</div><div class="line">mixerPlayable.SetInputWeight(<span class="number">0</span>, <span class="number">1.0</span>f-weight);<span class="comment">//åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªæ•°æ®ç«¯å£çš„æƒé‡</span></div><div class="line">mixerPlayable.SetInputWeight(<span class="number">1</span>, weight);</div><div class="line"></div><div class="line">playableGraph.Play();</div><div class="line">GraphVisualizerClient.Show(playableGraph);</div></pre></td></tr></table></figure></p>
<h2 id="æ··åˆä½¿ç”¨-AnimationClip-ä¸-AnimatorController"><a href="#æ··åˆä½¿ç”¨-AnimationClip-ä¸-AnimatorController" class="headerlink" title="æ··åˆä½¿ç”¨ AnimationClip ä¸ AnimatorController"></a>æ··åˆä½¿ç”¨ AnimationClip ä¸ AnimatorController</h2><p>ä¿®æ”¹ä¸Šæ–‡ã€åˆ›å»ºæœ€åŸºç¡€çš„ä¸¤åŠ¨ç”»èåˆã€‘æ‰€æä¾›çš„ä»£ç å— å³å¯ã€‚AnimatorController å¯ä»¥çœ‹ä½œæ˜¯ä¸€é¢—å­æ ‘ï¼Œå®ƒå¯ä»¥è½»æ˜“çš„ä½¿ç”¨<strong>mixerPlayable</strong>ä¸å…¶ä»–çš„clipè¿›è¡Œèåˆï¼Œè¿™ä¸€åˆ‡çš„ä¾¿åˆ©å½’åŠŸäºUNITYé‡å†™çš„é€šç”¨åŠ¨ç”»è°ƒç”¨å±‚ã€‚</p>
<p>åœ¨è§†é¢‘ä¸­æ‚¨å¯ä»¥è§‚å¯Ÿæœ€å·¦ä¾§åœ¨èåˆæƒé‡çš„å˜åŒ–ä¸‹ä¸¤é¢—æ ‘çš„èåˆæƒ…å†µï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> clipPlayable2 = AnimatorControllerPlayable.Create(playableGraph, controller);</div></pre></td></tr></table></figure></p>
<video controls="controls" width="680"><br>  <source src="http://oxjpewuqo.bkt.clouddn.com/horseRun.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video>



<h2 id="å¢åŠ -PlayableGraph-çš„è¾“å‡ºå£-ç±»å‹"><a href="#å¢åŠ -PlayableGraph-çš„è¾“å‡ºå£-ç±»å‹" class="headerlink" title="å¢åŠ  PlayableGraph çš„è¾“å‡ºå£(ç±»å‹)"></a>å¢åŠ  PlayableGraph çš„è¾“å‡ºå£(ç±»å‹)</h2><p>çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬åº”è¯¥æ…¢æ…¢çš„æœ‰ä¸€äº›æ¦‚å¿µäº†</p>
<blockquote>
<p>è®°å¿†æŠ€å·§ï¼šå³è¾“å…¥å£(æ•°é‡) å·¦è¾“å‡ºå£(æ•°é‡)ã€‚ è¿™ä¸¤ä¸ªä¸œè¥¿è´¯ç©¿æ•´ä½“çš„è®¾è®¡ä¸­ã€‚å³ä½¿æœ€åŸºç¡€çš„ playable ç»„ä»¶éƒ½æœ‰è¿™ä¸¤ä¸ªå±æ€§ã€‚è¿™ä¸¤ä¸ªå±æ€§ä¹Ÿæ˜¯æˆ‘ä»¬è®¾è®¡ä¸€æ£µæ ‘çš„å¸¸è§„æ“ä½œã€‚PlayableGraph å°±æ˜¯è¿™é¢—æ ‘ï¼Œé¢å¤–éœ€è¦ç†è§£çš„æ˜¯ï¼š å®ƒå…è®¸(é™åˆ¶äº†) æˆ‘ä»¬éœ€è¦ç”¨ä¸åŒ ç±»å‹çš„ä¸»åˆ†æ”¯ ç„¶åæ‰æ‰©å±•å‡ºå…¶ä»–åˆ†æ”¯ã€‚</p>
</blockquote>
<p>âš ï¸ æ‰€æœ‰å­èŠ‚ç‚¹åˆå§‹åŒ–çš„æ—¶å€™éƒ½æ²¡æœ‰è®¾ç½®è¾“å‡ºè¾“å…¥ç«¯å£æ•°é‡ æ‚¨éœ€è¦æ‰‹åŠ¨æŒ‡æ´¾ã€‚å¦åˆ™ä¼šæŠ¥é”™:<font color="e70000">Connecting invalid input</font></p>
<p><img src="/uploads/ScreenShot2018-09-12at4.19.37PM.png" alt="&lt;font color=#3976C3&gt;å°æŠ€å·§ï¼šç¼–è¾‘å™¨ä¸­è¾“å…¥playableoutput å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„ç±»å‹(ç»“æ„ä½“)ï¼Œé€šè¿‡è¿™äº›ç±» æˆ‘ä»¬å¯ä»¥è½»æ˜“çš„ç»™PlayableGraphæ·»åŠ ä¸åŒç±»å‹çš„å­åˆ†æ”¯ã€‚&lt;/font&gt;"></p>
<p>ç›®å‰æˆ‘ä»¬å·²ç»ç”¨è¿‡äº†<code>AnimationPlayableOutput</code> ä¸‹é¢æ¼”ç¤ºä¸€äº› <code>AudioPlayableOutput</code> çš„æ¡ˆä¾‹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">playableGraph = PlayableGraph.Create();</div><div class="line"><span class="keyword">var</span> audioOutput = AudioPlayableOutput.Create(playableGraph, <span class="string">"Audio"</span>, GetComponent&lt;AudioSource&gt;());</div><div class="line"><span class="keyword">var</span> audioClipPlayable = AudioClipPlayable.Create(playableGraph, audioClip, <span class="literal">true</span>);</div><div class="line">audioOutput.SetSourcePlayable(audioClipPlayable);</div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
<p><img src="/uploads/QQ20180912-163420.png" alt="å€Ÿæ­¤ä»£ç æŠ›ç –å¼•ç‰ï¼Œå¦å¤–å‡ ç§ç±»å‹(ä¸»åˆ†æ”¯)ä¹Ÿæ˜¯åŒæ ·çš„ä½¿ç”¨æ–¹æ³•"></p>
<h2 id="æ§åˆ¶PlayableGraph-æ ‘-ä¸­çš„çŠ¶æ€åˆ‡æ¢"><a href="#æ§åˆ¶PlayableGraph-æ ‘-ä¸­çš„çŠ¶æ€åˆ‡æ¢" class="headerlink" title="æ§åˆ¶PlayableGraph(æ ‘)ä¸­çš„çŠ¶æ€åˆ‡æ¢"></a>æ§åˆ¶PlayableGraph(æ ‘)ä¸­çš„çŠ¶æ€åˆ‡æ¢</h2><p>å› ä¸º XXXPlayable éƒ½æ˜¯ç»§æ‰¿è‡ªåŒæ¥å£ï¼Œä»¥ä¸‹å‡½æ•°åŒæ ·é€‚ç”¨äºå…¶ä»–ç±»å‹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">audioClipPlayable.Pause();     <span class="comment">//æš‚åœ</span></div><div class="line">audioClipPlayable.Play();      <span class="comment">//æ’­æ”¾</span></div><div class="line">audioClipPlayable.SetDelay(<span class="number">1</span>); <span class="comment">//è®¾ç½®å»¶è¿Ÿ</span></div></pre></td></tr></table></figure>
<p>å‚è€ƒä»£ç ç‰‡æ®µ </p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">float</span> i = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    i += Time.deltaTime;</div><div class="line">    <span class="keyword">if</span> (i &gt; <span class="number">3</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (audioClipPlayable.GetPlayState() == PlayState.Paused)</div><div class="line">            audioClipPlayable.Play();</div><div class="line">        <span class="keyword">else</span></div><div class="line">            audioClipPlayable.Pause();</div><div class="line">        i = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ§åˆ¶æ ‘çš„æ—¶é—´"><a href="#æ§åˆ¶æ ‘çš„æ—¶é—´" class="headerlink" title="æ§åˆ¶æ ‘çš„æ—¶é—´"></a>æ§åˆ¶æ ‘çš„æ—¶é—´</h2><p>å› ä¸º XXXPlayable éƒ½æ˜¯ç»§æ‰¿è‡ªåŒæ¥å£ï¼Œä»¥ä¸‹å‡½æ•°åŒæ ·é€‚ç”¨äºå…¶ä»–ç±»å‹ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">float</span> time;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    playableGraph = PlayableGraph.Create();</div><div class="line"></div><div class="line">    clipPlayable = AnimationPlayableUtilities.PlayClip(GetComponent&lt;Animator&gt;(), clip, <span class="keyword">out</span> playableGraph);</div><div class="line">    clipPlayable.Pause();</div><div class="line"></div><div class="line">    playableGraph.Play();</div><div class="line">    GraphVisualizerClient.Show(playableGraph);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    weight = Mathf.Clamp01(weight);</div><div class="line">    clipPlayable.SetTime(time);    <span class="comment">//æ§åˆ¶æ’­æ”¾è¿›åº¦,æ— ä¸Šé™è¶…å‡ºéƒ¨åˆ†è‡ªåŠ¨å¾ªç¯åŠ¨ç”»</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è§†é¢‘ä¸­æ‚¨å¯ä»¥è§‚å¯Ÿæ—¶é—´çš„å‰è¿›ä¸åé€€ç›´æ¥ä½œç”¨äºå½“å‰åŠ¨ç”»èŠ‚ç‚¹ï¼š</p>
<video controls="controls" width="680"><br>  <source src="http://oxjpewuqo.bkt.clouddn.com/QQ20180912-171656-HD.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video>



<h2 id="ä½¿ç”¨-PlayableBehaviour"><a href="#ä½¿ç”¨-PlayableBehaviour" class="headerlink" title="ä½¿ç”¨ PlayableBehaviour"></a>ä½¿ç”¨ PlayableBehaviour</h2><p>é¡¾åæ€ä¹‰ <strong>PlayableBehaviour</strong> å°±æ˜¯è‡ªå·±å®šä¹‰çš„Playableè¡Œä¸ºï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª <strong>PlayQueuePlayable</strong> å¹¶ä¸”åˆ¶å®šä¸€äº›ç‰¹æ®Šçš„é€»è¾‘åœ¨å…¶ä¸­ï¼ˆå¾ªç¯æ’­æ”¾clipï¼‰ã€‚</p>
<ol>
<li>æˆ‘ä»¬å…ˆçœ‹ä¸‹å®ƒæ˜¯å¦‚ä½•åˆå§‹åŒ–çš„ï¼š<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> playQueuePlayable = ScriptPlayable&lt;PlayQueuePlayable&gt;.Create(playableGraph);<span class="comment">//æ³›å‹å·¥å‚</span></div><div class="line"><span class="keyword">var</span> playQueue = playQueuePlayable.GetBehaviour();<span class="comment">//å®¹å™¨å‡½æ•° è·å–é¥®ç”¨</span></div><div class="line">playQueue.Initialize(clipsToPlay, playQueuePlayable, playableGraph);<span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰åˆå§‹åŒ–å‡½æ•°</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>ä»ç¬¬äºŒè¡Œä»£ç ä¸­ä½¿ç”¨äº†æ³›å‹å·¥å‚æ¥åˆ›å»º <strong>playablebehavior</strong> æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„å®¹å™¨ï¼Œè€Œå¹¶æ˜¯å¼€ç®±å³ç”¨çš„æ ‘èŠ‚ç‚¹ã€‚</p>
<ol>
<li>å®¹å™¨åˆå§‹åŒ–å®Œæ¯•ï¼Œå°†å®ƒè®¾ç½®ä¸ºä¸»åŠ¨ç”»åˆ†æ”¯çš„ä¸‹ä¸€çº§èŠ‚ç‚¹ï¼Œæ“ä½œå®Œæ¯•ã€‚<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> playableOutput = AnimationPlayableOutput.Create(playableGraph, <span class="string">"Animation"</span>, GetComponent&lt;Animator&gt;());</div><div class="line">playableOutput.SetSourcePlayable(playQueuePlayable,<span class="number">0</span>);</div><div class="line">playableGraph.Play();</div></pre></td></tr></table></figure>
</li>
</ol>
<p>é‚£ä¹ˆç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå®¹å™¨ã€‚ç°åœ¨å¼€å§‹æ¢ç©¶å®¹å™¨çš„å†…éƒ¨å®ç°ï¼š</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnGraphStart</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnGraphStop</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPlayableCreate</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPlayableDestroy</span>(<span class="params">Playable playable</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBehaviourDelay</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBehaviourPlay</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBehaviourPause</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrepareData</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrepareFrame</span>(<span class="params">Playable playable, FrameData info</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ProcessFrame</span>(<span class="params">Playable playable, FrameData info, <span class="keyword">object</span> playerData</span>)</span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨ç”»å‘¨æœŸå†…çš„å¤§éƒ¨åˆ†æ£€æµ‹ä¸åˆ¤æ–­æˆ‘ä»¬éƒ½èƒ½åœ¨è¿™é‡Œè¿›è¡Œ.</p>
<p>æœ€åæˆ‘ä»¬å†çœ‹ä¸€ä¸‹è‡ªå®šä¹‰ç±» <strong>PlayQueuePlayable</strong> çš„è¡Œä¸ºé€»è¾‘ã€‚</p>
<ol>
<li><p>ä¸Šæ–‡æåˆ°çš„ <strong>Initialize</strong> å‡½æ•°ï¼Œè¿™é‡ŒåŠ¨æ€åˆ›å»ºäº† <em>AnimationClipPlayable</em> å¹¶ä¸”æŒ‡æ´¾ç«¯å£é“¾æ¥åˆ°äº† <em>PlayQueuePlayable</em> </p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Initialize</span>(<span class="params">AnimationClip[] clipsToPlay, Playable owner, PlayableGraph graph</span>)</span></div><div class="line">&#123;</div><div class="line">    owner.SetInputCount(<span class="number">1</span>);</div><div class="line">    mixer = AnimationMixerPlayable.Create(graph, clipsToPlay.Length);</div><div class="line">    graph.Connect(mixer, <span class="number">0</span>, owner, <span class="number">0</span>);</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> clipIndex = <span class="number">0</span> ; clipIndex &lt; mixer.GetInputCount() ; ++clipIndex)</div><div class="line">    &#123;</div><div class="line">        graph.Connect(AnimationClipPlayable.Create(graph, clipsToPlay[clipIndex]), <span class="number">0</span>, mixer, clipIndex);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>é‡å†™ <strong>PrepareFrame</strong> å‡½æ•°ï¼Œç”¨æ¥æ£€æµ‹åŠ¨ç”»å¸§åœ¨æ’­æ”¾å‰çš„é€»è¾‘(ä¸€å¸§è°ƒä¸€æ¬¡) è¿™é‡Œéœ€è¦é¿å…å¤æ‚çš„æ£€æµ‹é€»è¾‘ï¼Œæˆ‘ä»¬å®ç°äº†ç®€å•çš„è½®æ’­é€»è¾‘ï¼šè®©åŠ¨ç”»ä¸€ä¸ªæ¥ä¸€ä¸ªçš„åˆ‡æ¢ã€‚</p>
</li>
</ol>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_CurrentClipIndex = <span class="number">-1</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">float</span> m_TimeToNextClip;</div><div class="line"><span class="keyword">private</span> Playable mixer;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">override</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrepareFrame</span>(<span class="params">Playable owner, FrameData info</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (mixer.GetInputCount() == <span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Advance to next clip if necessary</span></div><div class="line">    m_TimeToNextClip -= (<span class="keyword">float</span>)info.deltaTime;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (m_TimeToNextClip &lt;= <span class="number">0.0</span>f)</div><div class="line">    &#123;</div><div class="line">        m_CurrentClipIndex++;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (m_CurrentClipIndex &gt;= mixer.GetInputCount())</div><div class="line">            m_CurrentClipIndex = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> currentClip = (AnimationClipPlayable)mixer.GetInput(m_CurrentClipIndex);</div><div class="line"></div><div class="line">        currentClip.SetTime(<span class="number">0</span>);</div><div class="line">        m_TimeToNextClip = currentClip.GetAnimationClip().length;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> clipIndex = <span class="number">0</span> ; clipIndex &lt; mixer.GetInputCount(); ++clipIndex)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (clipIndex == m_CurrentClipIndex)</div><div class="line">            mixer.SetInputWeight(clipIndex, <span class="number">1.0</span>f);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            mixer.SetInputWeight(clipIndex, <span class="number">0.0</span>f);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æœ¬ç« èŠ‚å¸¦å¤§å®¶è¿‡äº†ä¸€éPlayables APIçš„åŸºæœ¬ä½¿ç”¨ï¼Œå¹¶ä¸”æŠ›ç –å¼•ç‰çš„è¿›è¡Œäº†ä¸€äº›æŠ€å·§è®²è§£ï¼Œç›¸ä¿¡ç»è¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ å¤§å®¶ä¸€å®šå¯¹ Playables API å……æ»¡äº†å…´è¶£ï¼Œåœ¨ä¸‹ä¸€ç« æˆ‘ä»¬è®²è®²æ›´è¯¦ç»†çš„ æ‰‹éƒ¨IK ä¸ åˆ†å±‚åŠ¨ç”» çš„è¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å€Ÿæ­¤å®ç°äººç‰©çš„æ”€çˆ¬/å°„å‡»/å¤æ‚è¿åŠ¨ç­‰ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzU5MjQ1NTEwOA==&amp;mid=2247493316&amp;idx=1&amp;sn=7e4fef834a8066faca3d2f1f1a090bb4&amp;chksm=fe1dd26fc96a5b79856840f556cf65026facb83520ac1891605e42d5e777d30a0d5219060e21&amp;mpshare=1&amp;scene=1&amp;srcid=0606YJLYnfprk9UjpPQCnre1#rd" target="_blank" rel="external">ğŸ”—  UNITYå®˜æ–¹å¾®ä¿¡å·ç›¸å…³</a></p>
<p><a href="https://docs.unity3d.com/2018.1/Documentation/Manual/Playables.html" target="_blank" rel="external">ğŸ”—  UNITYå®˜æ–¹æ–‡æ¡£ç›¸å…³</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h1&gt;&lt;p&gt;Playables API æ¨å‡ºå·²ç»ä¸€å¹´æœ‰ä½™(2017â€“07â€“04 New in Unity 2017.1)ã€‚å³ä½¿ä½ æ²¡æ—¶é—´å…¶ä»–çš„æ–°åŠŸèƒ½ï¼Œ ä¹Ÿåº”è¯¥çœ‹çœ‹è¿™ä¸ª &lt;code&gt;Playable API&lt;/code&gt; .åšè¿‡å¤§å‹æ¸¸æˆçš„åŒå­¦æ— è®ºä½ æ˜¯åšè¿‡ 2Dæˆ–3D åªè¦ä½¿ç”¨è¿‡ Animaiton Controller,æˆ–å¤šæˆ–å°‘ä½“ä¼šè¿‡è¢« èœ˜è››ç½‘(å¤æ‚çŠ¶æ€æœºè¿‡æ¸¡) æ”¯é…çš„ææƒ§ã€‚å½“ä¸‹æœ‰äº† &lt;code&gt;Playable API&lt;/code&gt; å¯ä¾›ä½¿ç”¨ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“çš„å‘ Legacy animation API çš„ä½¿ç”¨ä¹ æƒ¯é æ‹¢ â€” é«˜æ•ˆåŠæ˜“äºå®šåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/WX20180907-152657.png&quot; alt=&quot;ä¸€ä¸ªç®€å•çš„çŠ¶æ€æœºï¼Œå½“ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚&quot;&gt;&lt;/p&gt;
&lt;font color=#185FB4  &gt;åœ¨æˆ‘çœ‹æ¥ Playable API çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ›¿æ¢æ‰LegacyåŠ¨ç”»ç³»ç»Ÿï¼Œå¹¶ä¸”å…¼å®¹Timelineï¼ˆæœ¬ç¯‡ä¸ä»‹ç»timeline æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹ï¼‰ã€‚æ€»çš„ä¸€ä¸ªè¯æ¦‚æ‹¬å°±æ˜¯ ã€dynamicallyã€‘ï¼Œå¦‚åŒä½¿ç”¨ç»„ä»¶ä¸€èˆ¬çš„çµæ´»ã€‚&lt;/font&gt;

&lt;blockquote&gt;
&lt;p&gt;ç›®å‰æˆ‘åœ¨æµ‹è¯•ä¸­ä½¿ç”¨äº† UNITY2018.1+ ç¼–è¾‘å™¨ã€‚å¦‚æœä¸ä½¿ç”¨è¯¥å¯è§†åŒ–æ’ä»¶æ‚¨åœ¨ UNITY5.x ç‰ˆæœ¬å°±èƒ½ä½¿ç”¨&lt;code&gt;Playable API&lt;/code&gt;ã€‚ ä½¿ç”¨5.xç‰ˆæœ¬çš„Playable API æ—¶è¯·æ³¨æ„åç»­çš„ä»£ç APIå˜æ›´ï¼ŒæŸäº›å‡½æ•°åæˆ–è°ƒç”¨æ–¹å¼å¯èƒ½å·²ç»æ›´æ”¹ï¼Œå¦‚æœä»æœªä½¿ç”¨è¿‡ å»ºè®®ä» UNITY2017+ å¼€å§‹å…¥æ‰‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="ANIMATION" scheme="http://vrast.cn/tags/ANIMATION/"/>
    
  </entry>
  
  <entry>
    <title>ç»˜åˆ¶èŠå¤©æ°”æ³¡æ€è·¯</title>
    <link href="http://vrast.cn/posts/bd424e64/"/>
    <id>http://vrast.cn/posts/bd424e64/</id>
    <published>2018-08-08T03:24:52.000Z</published>
    <updated>2018-09-07T06:41:49.404Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è®°å½•ä¸€äº›å°æŠ€å·§ ï¼Œå€Ÿæ­¤æœºä¼šé‡æ–°å¼€å§‹å†™ä½œ .è¿™é‡Œæä¾›ä¸¤ç§æ€è·¯ï¼Œæœ€åå»ºè®®å°†è¿™ä¸¤ç§åšæ³•ç»“åˆä¸€ä¸‹ å¯ä»¥åšæˆç±»ä¼¼å¾®ä¿¡èŠå¤©æ°”æ³¡çš„æ•ˆæœã€‚</p>
</blockquote>
<a id="more"></a>
<p>æœ‰ä¸¤ç§æ–¹å¼æ¥å®ç°äº†èŠå¤©æ°”æ³¡ï¼Œç¬¬ä¸€ç§æ˜¯è‡ªå·±å»è®¡ç®—å½“å‰æ–‡å­—çš„å®½åº¦ï¼Œç„¶åæ§åˆ¶èƒŒæ™¯æ°”æ³¡è¿›è¡Œå®½åº¦ä¸é«˜åº¦çš„ç¼©æ”¾ã€‚å‚è€ƒä»£ç å¦‚ä¸‹</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">BubbleFormate</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line"><span class="comment">//            MainContent.GraphicUpdateComplete();</span></div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (MainContent.rectTransform.sizeDelta.x &gt; MainContent.preferredWidth)</div><div class="line">    &#123;</div><div class="line">        MainContentBG.rectTransform.sizeDelta =</div><div class="line">            <span class="keyword">new</span> Vector2(</div><div class="line">                MainContentBG.rectTransform.sizeDelta.x -</div><div class="line">                (MainContent.rectTransform.sizeDelta.x - MainContent.preferredWidth),</div><div class="line">                MainContentBG.rectTransform.sizeDelta.y</div><div class="line">            );</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> temp_width = <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> rawContent = MainContent.text;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MainContent.text.Length; i++)</div><div class="line">        &#123;</div><div class="line">            MainContent.font.GetCharacterInfo(MainContent.text[i], <span class="keyword">out</span> temp_info, MainContent.fontSize);</div><div class="line">            temp_width += temp_info.advance;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (temp_width &gt;= MainContent.rectTransform.sizeDelta.x)</div><div class="line">            &#123;</div><div class="line">                rawContent = rawContent.Insert(i, <span class="string">"\n"</span>);</div><div class="line">                temp_width = temp_info.advance;</div><div class="line">                </div><div class="line">                MainContentBG.rectTransform.sizeDelta = <span class="keyword">new</span> Vector2(</div><div class="line">                    MainContentBG.rectTransform.sizeDelta.x,</div><div class="line">                    MainContentBG.rectTransform.sizeDelta.y + MainContent.preferredHeight</div><div class="line">                );</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        MainContent.text = rawContent;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/canvas-wrap.gif" alt="ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨ Layout å¸ƒå±€è¿›è¡Œè§„èŒƒ"></p>
<p>æœ€åæˆ‘å»ºè®®ä½¿ç”¨è¿™ä¸¤è€…çš„ç»“åˆï¼Œåœ¨æ§åˆ¶å®½åº¦çš„æ—¶å€™ä¸åŠ é™åˆ¶ï¼Œè‡ªå·±åˆ¤æ–­å®½åº¦ç„¶ååŠ¨æ€çš„æ·»åŠ æ¢è¡Œç¬¦ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯èƒ½æ§åˆ¶æ–‡æœ¬æ¡†çš„é•¿çŸ­ï¼Œåšæˆç±»ä¼¼å¾®ä¿¡èŠå¤©è¿™ç§ æ¶ˆæ¯é•¿çš„è¯ æ°”æ³¡å°±ä¼šå˜é•¿ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è®°å½•ä¸€äº›å°æŠ€å·§ ï¼Œå€Ÿæ­¤æœºä¼šé‡æ–°å¼€å§‹å†™ä½œ .è¿™é‡Œæä¾›ä¸¤ç§æ€è·¯ï¼Œæœ€åå»ºè®®å°†è¿™ä¸¤ç§åšæ³•ç»“åˆä¸€ä¸‹ å¯ä»¥åšæˆç±»ä¼¼å¾®ä¿¡èŠå¤©æ°”æ³¡çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="Chat" scheme="http://vrast.cn/tags/Chat/"/>
    
  </entry>
  
  <entry>
    <title>LipSyncæ’ä»¶è°ƒç ”2</title>
    <link href="http://vrast.cn/posts/3bc1c7b4/"/>
    <id>http://vrast.cn/posts/3bc1c7b4/</id>
    <published>2018-04-24T03:41:33.000Z</published>
    <updated>2018-05-11T09:59:47.570Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡è¯„æµ‹çš„å·¥å…·å®ç°æ–¹å¼éƒ½ç›¸è¿‘,æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<p><strong>LipSync Proã€U3Dã€‘</strong><br><strong>EasyTalkã€U3Dã€‘</strong><br><del><strong>Lipsync Toolã€ç¾æœ¯ç”¨ã€‘</strong></del><br><del><strong>Face and lips</strong></del></p>
<p>è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥   2.é¢éƒ¨è¡¨æƒ…<br>è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§<br><a id="more"></a></p>
<h1 id="ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„-LipSync-å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼"><a href="#ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„-LipSync-å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼" class="headerlink" title="ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„ LipSync å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼"></a>ä¸€èˆ¬æœ‰è¯­éŸ³å±‚çš„ LipSync å·¥å…·ç»“æ„éƒ½ç›¸ä¼¼</h1><p><img src="/uploads/QQ20180424.jpeg" alt="LipSyncå·¥å…·åœ¨æµç¨‹ä¸Šéƒ½ç±»ä¼¼ 1.å¯¼å…¥è½¬ç ï¼Œè½¬æ¢æˆä¾¿äºè¯­éŸ³è¯†åˆ«å±‚ä½¿ç”¨çš„æ ¼å¼ 2.è¯†åˆ«(éœ€è¦è¯­è¨€ä¸å£°å­¦æ¨¡å‹æ”¯æŒ) 3.ç‰¹å®šæ ¼å¼çš„æ•°æ®å¯¼å‡º 4.æ ¹æ®æ•°æ®æºè¿›è¡Œå£å‹èåˆ(å£å‹äº‹å…ˆæ˜ å°„å¥½äº†)"><br><img src="/uploads/QQSample1.png" alt="EasyTalkè¯­éŸ³è¯†åˆ«å·¥å…·"><br><img src="/uploads/QQ20180427-162401@2x.png" alt="åœ¨è¿™ä¸€å±‚ä¸­EasyTalkå¹¶ä¸å‹å¥½ï¼Œä»–åœ¨å¤–éƒ¨å®ç°çš„éŸ³é¢‘è§£æå·¥å…·å¹¶ä¸æä¾›æºç ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•æ ¹æ®é¡¹ç›®å¯¹æ’ä»¶è¿›è¡Œå®šåˆ¶"> </p>
<p><img src="/uploads/QQSample2.png" alt="Face and lipsä¸å‚åŠ æœ¬æ¬¡è¯„æµ‹æ˜¯å…¶éä¸»æµåº”ç”¨æ–¹å¼ï¼Œéœ€è¦ç¾æœ¯é€šè¿‡MikuMikuDanceç¼–è¾‘å™¨åˆ¶ä½œåŠ¨ä½œç­‰ï¼Œåº”ç”¨æ–¹å‘è¯·å‚è€ƒã€æä¹å‡€åœŸã€‘ "><br><img src="/uploads/QQSample3.png" alt="LipSyncProæ’ä»¶ç¨³å®šæ€§æœ‰å¾…æé«˜ï¼šåœ¨è¿›è¡Œæµ‹è¯•çš„æœŸé—´æ­¤æ’ä»¶åœ¨macä¸Šæœ‰ä»£ç çº§åˆ«çš„é—®é¢˜ã€‚1.4.1ç‰ˆæœ¬ä»£ç bug æ‰‹åŠ¨ä¿®å¤åWIN7èƒ½è·‘ï¼Œ1.4.2æœ€æ–°ç‰ˆä¿®å¤äº†å‰ç‰ˆæœ¬çš„bugä½†æ˜¯åœ¨macä¸Šè¿è¡Œä»æ—§æœ‰å…¶ä»–bugå¯¼è‡´ä¸èƒ½è§£æéŸ³é¢‘ã€‚ã€ç›®å‰macç‰ˆæœ¬ä¸èƒ½è§£æéŸ³é¢‘bugæ­£åœ¨æŸ¥ã€‘"><br><img src="/uploads/hs_err_pid2167.png" alt="Lipsync Toolä¸å‚åŠ æœ¬æ¬¡è¯„æµ‹çš„åŸå› æœ‰ä¸‰ 1.Demoä¸‹è½½ååªæœ‰è‹±è¯­è¯­è¨€æ¨¡å‹ï¼Œä¸æä¾›å…¶ä»–è¯­è¨€ä¸‹è½½ 2.ä¸»è¦æ˜¯ç¾æœ¯ç”¨åœ¨mayaæˆ–3dmaxåšæ’ä»¶ 3.ä»·æ ¼é«˜ï¼Œæœ€ä¾¿å®œ5500$."></p>
<h2 id="è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»"><a href="#è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»" class="headerlink" title="è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»"></a>è¯­éŸ³è¯†åˆ«å±‚ä»‹ç»</h2><h3 id="åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚"><a href="#åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚" class="headerlink" title="åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚"></a>åœ¨LipSyncProä¸­çš„CMUSphinxè¯­éŸ³è¯†åˆ«å±‚</h3><p>åœ¨ä»‹ç»å®ç°æ–¹å¼ä¹‹å‰æˆ‘ä»¬å…ˆæ·±å…¥ä¸€ä¸‹<strong>è¯­éŸ³è¯†åˆ«å±‚</strong>ï¼ŒåŸå› æ˜¯æ­¤ç±»å‹æ’ä»¶éƒ½ä½¿ç”¨äº†è¯­éŸ³è¯†åˆ«å‡ºçš„æ•°æ®ä½œä¸ºé©±åŠ¨å£å‹çš„<strong>æ•°æ®æº</strong>ã€‚</p>
<p><strong>CMUSphinx</strong> æ˜¯ä¸€ä¸ªå¼€æºç»„ä»¶ ä½œä¸º<strong>è¯­éŸ³è¯†åˆ«å±‚</strong>å±‚çš„æ ¸å¿ƒ ,ä¸‹æ–‡æ˜¯ç®€ä»‹</p>
<p>[CMU Sphinx, also called Sphinx in short, is the general term to describe a group of speech recognition systems developed at Carnegie Mellon University. These include a series of speech recognizers (Sphinx 2 - 4) and an acoustic model trainer (SphinxTrain).</p>
<p>In 2000, the Sphinx group at Carnegie Mellon committed to open source several speech recognizer components, including Sphinx 2 and later Sphinx 3 (in 2001). The speech decoders come with acoustic models and sample applications. The available resources include in addition software for acoustic model training, Language model compilation and a public domain pronunciation dictionary, cmudict.</p>
<p>Sphinx encompasses a number of software systems, described below.   â€”æ¥è‡ªç»´åŸºç™¾ç§‘](<a href="https://en.wikipedia.org/wiki/CMU_Sphinx" target="_blank" rel="external">https://en.wikipedia.org/wiki/CMU_Sphinx</a>)</p>
<h3 id="åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹"><a href="#åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹" class="headerlink" title="åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹"></a>åœ¨CMUSphinxä¹‹ä¸Šä½¿ç”¨è¯­éŸ³è®­ç»ƒåˆ›å»ºè¯­è¨€æ¨¡å‹</h3><blockquote>
<p><strong>CMUSphinx</strong> ä½¿ç”¨çš„è¯­è¨€åº“æ˜¯å¯ä»¥è‡ªå·±è®­ç»ƒçš„ <a href="https://cmusphinx.github.io/wiki/tutoriallm/" target="_blank" rel="external">Building a language model</a>ã€‚å·¥ç¨‹é‡æ¯”è¾ƒå¤§ï¼Œå¦‚æœæ²¡æœ‰åšå¥½å……è¶³å‡†å¤‡(èµ„æº)ä¸å»ºè®®è‡ªå·±è®­ç»ƒè¯­è¨€åº“ã€‚æˆ‘ä»¬è‡ªå·±è®­ç»ƒçš„åº“æ˜¯éœ€è¦ä¼˜åŒ–çš„ï¼Œä¸æ˜¯åšå®Œå°±èƒ½ç”¨ï¼Œè‰¯å¥½çš„è¯­éŸ³æ¨¡å‹æ‹¥æœ‰æ›´é«˜çš„è¯†åˆ«ç‡ï¼Œåœ¨é«˜è¯†åˆ«ç‡çš„å‰æä¸‹æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„å£å‹ä¼šæ›´åŠ å‡†ç¡®ã€‚ä¸‹é¢ä¾‹ä¸¾äº†ä¸€äº›åšè¯­è¨€è®­ç»ƒéœ€è¦çš„èµ„æº</p>
</blockquote>
<p><strong>1.çœŸäººè¿›è¡Œè®­ç»ƒ</strong><br>è®­ç»ƒä¹‹å‰ï¼Œå‡è®¾ä½ æœ‰å……è¶³çš„æ•°æ®ï¼š</p>
<p>ç”¨äºå•ä¸ªäººçš„æŒ‡ä»¤åº”ç”¨ï¼Œè‡³å°‘éœ€è¦ä¸€å°æ—¶å½•éŸ³ï¼Œ<br>ç”¨äºå¾ˆå¤šäººæŒ‡ä»¤åº”ç”¨ï¼Œéœ€è¦200ä¸ªå½•éŸ³äººï¼Œæ¯äºº5å°æ—¶<br>ç”¨äºå•ä¸ªäººçš„å¬å†™ï¼Œéœ€è¦10å°æ—¶ä»–çš„å½•éŸ³<br>ç”¨äºå¤šä¸ªäººçš„å¬å†™ï¼Œéœ€è¦200ä¸ªè¯´è¯äººï¼Œæ¯äºº50å°æ—¶çš„å½•éŸ³<br>åŒæ—¶ä½ è¦æœ‰è¿™é—¨è¯­è¨€çš„è¯­éŸ³å­¦çŸ¥è¯†ï¼Œä»¥åŠä½ æœ‰è¶³å¤Ÿçš„æ¯”å¦‚ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œæ¥è®­ç»ƒæ¨¡å‹</p>
<p><strong>2.ä½¿ç”¨æœºå™¨å­¦ä¹ </strong><br>1.æ‚¨å¿…é¡»ä¸ºæŒ‡å®šçš„è¯­è¨€æ”¶é›†éŸ³é¢‘ææ–™ã€‚å®é™…ä¸Šè¿™ä¸æ˜¯è¿™ä¹ˆå¤æ‚çš„äº‹æƒ…ã€‚æœ‰å£°ä¹¦æœ¬ã€ç”µå½±å’Œæ’­å®¢æä¾›è¶³å¤Ÿçš„å½•éŸ³æ„å»ºè‰¯å¥½çš„å£°å­¦æ¨¡å‹ã€‚<br>2.è¯­éŸ³å­¦ä¹ éœ€è¦æ‚¨æ„å»ºä¸€ä¸ªæ¡†æ¶,ç”¨äºè·Ÿè¸ªé”™è¯¯çš„å‘éŸ³ã€‚åŒ…æ‹¬ä»£ä¸æ­£ç¡®çš„å‘éŸ³å’Œå¾—åˆ†ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ cmusphinx çš„æœºå™¨å­¦ä¹ ã€‚</p>
<h1 id="å¯ç”¨æ€§"><a href="#å¯ç”¨æ€§" class="headerlink" title="å¯ç”¨æ€§"></a>å¯ç”¨æ€§</h1><h3 id="å¯å€Ÿé‰´ä¼˜ç‚¹"><a href="#å¯å€Ÿé‰´ä¼˜ç‚¹" class="headerlink" title="å¯å€Ÿé‰´ä¼˜ç‚¹"></a>å¯å€Ÿé‰´ä¼˜ç‚¹</h3><ol>
<li>é€Ÿåº¦å¿«ï¼ŒåŸºäºè¯­éŸ³è¯†åˆ«å¯ä»¥å¿«é€ŸåŒ¹é…å‡ºæ‰€æœ‰çš„éŸ³ç´ ï¼Œå¹¶ä¸”æ˜ å°„ç›¸åº”çš„å£å‹</li>
<li>è¡¨æƒ…å¤šï¼Œå¯ä»¥å®šåˆ¶éå¸¸å¤šçš„å£å‹ä¸é¢éƒ¨è¡¨æƒ…</li>
<li>å¯ä¿®æ”¹ï¼Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨ç¼–è¾‘å·²ç»è¯†åˆ«å®Œæ¯•çš„ã€éŸ³é¢‘å¯¹åº”çš„å£å‹é…ç½®æ–‡ä»¶ã€‘</li>
</ol>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol>
<li>æ¯ç§è¯­è¨€éœ€è¦å¯¹åº”çš„å£°å­¦ä¸è¯­è¨€æ¨¡å‹</li>
<li>éš¾æ·±åº¦å®šåˆ¶ï¼Œæˆ‘ä»¬åªèƒ½å®šåˆ¶è¡¨å±‚ä½¿ç”¨ï¼Œæ·±å…¥åˆ°è¯­éŸ³è¯†åˆ«å±‚é¢å¾ˆéš¾ã€‚</li>
</ol>
<h1 id="è¡¥å……èµ„æ–™-Lipsync-Tool"><a href="#è¡¥å……èµ„æ–™-Lipsync-Tool" class="headerlink" title="è¡¥å……èµ„æ–™ Lipsync Tool"></a>è¡¥å……èµ„æ–™ Lipsync Tool</h1><p>å¯¹ Lipsync Tool è¿™æ¬¾å·¥å…·è¿›è¡Œä¸€äº›è¡¥å……è¯´æ˜ã€‚ä¸‹æ–‡æ˜¯ä¸€äº›æŠ€æœ¯æ ‡å‡†</p>
<p>ç›®å‰æ”¯æŒå¯¼å‡ºæ ¼å¼å¦‚ä¸‹ï¼Œä¸»è¦åœ¨å½±è§†æ–¹å‘ï¼Œè¿™é‡Œæåˆ°æœ‰ç®€å•çš„è„šæœ¬å¯¼å‡ºä½†æ˜¯ä¸ç¡®å®šå®ç°ï¼Œä»–å¹¶æœªæ”¯æŒä»»ä½•çš„æ¸¸æˆå¼•æ“ã€‚ç›®å‰åªæ˜¯è¡”æ¥äº†å½±è§†ä¸å»ºæ¨¡è½¯ä»¶ã€‚<br>It exports a simple text format readable from most scripting languages.<br>3ds max script for creating animations in max from lipsync tool files<br>MAYA .mov files, melscript (Lipscript) importer<br>.swf, .as : Macromedia Flash Files</p>
<p><a href="https://en.wikipedia.org/wiki/CMU_Sphinx" target="_blank" rel="external">ğŸ”— CMUSphinxä»‹ç»</a><br><a href="http://sox.sourceforge.net" target="_blank" rel="external">ğŸ”— SOXéŸ³é¢‘å¤„ç†åº“</a><br><a href="https://cmusphinx.github.io/wiki/tutoriallm/" target="_blank" rel="external">ğŸ”— Building a language model</a><br><a href="https://www.cnblogs.com/lijieqiong/p/4817373.html" target="_blank" rel="external">ğŸ”—ã€sphinxã€‘ä¸­æ–‡å£°å­¦æ¨¡å‹è®­ç»ƒ</a><br><a href="https://blog.csdn.net/zouxy09/article/details/7941585" target="_blank" rel="external">ğŸ”— è¯­éŸ³è¯†åˆ«çš„åŸºç¡€çŸ¥è¯†ä¸CMUsphinxä»‹ç»</a><br><a href="http://www.annosoft.com/prices" target="_blank" rel="external">ğŸ”— Lipsync Toolå®˜ç½‘ annosoftä»·æ ¼è¡¨</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬ç¯‡è¯„æµ‹çš„å·¥å…·å®ç°æ–¹å¼éƒ½ç›¸è¿‘,æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LipSync Proã€U3Dã€‘&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;EasyTalkã€U3Dã€‘&lt;/strong&gt;&lt;br&gt;&lt;del&gt;&lt;strong&gt;Lipsync Toolã€ç¾æœ¯ç”¨ã€‘&lt;/strong&gt;&lt;/del&gt;&lt;br&gt;&lt;del&gt;&lt;strong&gt;Face and lips&lt;/strong&gt;&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥   2.é¢éƒ¨è¡¨æƒ…&lt;br&gt;è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LipSyncæ’ä»¶è°ƒç ”1</title>
    <link href="http://vrast.cn/posts/a08d0c34/"/>
    <id>http://vrast.cn/posts/a08d0c34/</id>
    <published>2018-04-23T02:52:44.000Z</published>
    <updated>2018-04-27T07:14:45.824Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡è¯„æµ‹çš„æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š<br><strong> SALSA With RandomEyes </strong><br><strong> UniLip </strong> </p>
<p>è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥<br>è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§</p>
<a id="more"></a>
<h1 id="SALSA-With-RandomEyes"><a href="#SALSA-With-RandomEyes" class="headerlink" title="SALSA With RandomEyes"></a>SALSA With RandomEyes</h1><p>æ’ä»¶åŒ…å« SALSAä¸RandomEyes ä¸¤éƒ¨åˆ†ã€‚è¿™é‡Œä¸åæ–‡å¹¶ä¸å…³æ³¨RandomEyesç›¸å…³è¯é¢˜ã€‚</p>
<h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><h3 id="ç¾æœ¯ï¼šä½¿ç”¨-blend-shape-åˆ¶ä½œ-ä¸‰å£å‹"><a href="#ç¾æœ¯ï¼šä½¿ç”¨-blend-shape-åˆ¶ä½œ-ä¸‰å£å‹" class="headerlink" title="ç¾æœ¯ï¼šä½¿ç”¨ blend shape åˆ¶ä½œ ä¸‰å£å‹"></a>ç¾æœ¯ï¼šä½¿ç”¨ blend shape åˆ¶ä½œ ä¸‰å£å‹</h3><p>åœ¨åˆ†æäº†æ’ä»¶åŒ…å†…çš„ boxHead.fbx æ–‡ä»¶ä¹‹åçœ‹åˆ°äº†å¦‚ä¸‹å±‚çº§ç»“æ„ï¼š</p>
<p><img src="/uploads/WechatIMG273.png" alt="boxHead.fbx"></p>
<p>å…·ä½“åšæ³•åœ¨å±‚çº§é¢æ¿ä¸Šå·²ç»å¯ä»¥åæ¨å‡ºæ¥ç¾æœ¯çš„åˆ¶ä½œæµç¨‹<br><img src="/uploads/WechatIMG281.png" alt="boxHead.fbx"></p>
<ol>
<li>ç¾æœ¯è¿™è¾¹é¦–å…ˆåœ¨ä¸åŒçš„å±‚çº§ä¸Šä½œå‡ºä¸åŒçš„å£å‹è¡¨ç°ï¼Œæœ¬æ’ä»¶è¦æ±‚ç¾æœ¯åœ¨ä¸Šå›¾ä¸­ä¸‰ä¸ªSayå¼€å¤´çš„å±‚çº§ä¸Šå®ç°ä¸‰ä¸ªå£å‹</li>
<li>ä½¿ç”¨ blend shape ç»‘å®šã€‚è¿™æ˜¯ä¸€ç§åšèåˆåŠ¨ç”»(é¢éƒ¨å£å‹)çš„ç‰¹æ®Šåšæ³•ã€‚ä¸ºä»€ä¹ˆä¸ç”¨éª¨éª¼åŠ¨ç”»ï¼Ÿå› ä¸ºç”¨éª¨éª¼åŠ¨ç”»åšèŠ‚ç‚¹å¤ªå¤šäº†ã€‚</li>
</ol>
<h3 id="ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡"><a href="#ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡" class="headerlink" title="ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡"></a>ç­–åˆ’é…ç½®ï¼šä¸‰å˜é‡</h3><p><img src="/uploads/QQ20180423-175144.png" alt="ç­–åˆ’åªéœ€è¦é…ç½®ä¸‰ä¸ªé˜€å€¼ç»™ç¨‹åºä½œä¸ºæ§åˆ¶åŠ¨ç”»è¿‡æ¸¡çš„æ¡ä»¶"></p>
<h3 id="ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡"><a href="#ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡" class="headerlink" title="ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡"></a>ç¨‹åºå®ç°ï¼šæ§åˆ¶é¢éƒ¨å£å‹è¿‡æ¸¡</h3><p>ä¸ºäº†è¾¾åˆ°æ§åˆ¶å£å‹çš„ç›®çš„ï¼ŒSALSAå¯åŠ¨äº†ä¸€ä¸ªæºç¨‹åœ¨æ¯ä¸ª<code>audioUpdateDelay</code>å‘¨æœŸå†…å¯¹éŸ³é¢‘é‡‡æ ·ã€‚åè·å¾—<code> average </code></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">UpdateSample</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">while</span> (<span class="literal">true</span>)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">float</span> addedVals = <span class="number">0.0</span>f;</div><div class="line">    <span class="keyword">this</span>.sample = <span class="keyword">new</span> <span class="keyword">float</span>[<span class="keyword">this</span>.sampleSize];</div><div class="line">    <span class="keyword">if</span> ((<span class="keyword">bool</span>) ((Object) <span class="keyword">this</span>.audioSrc))</div><div class="line">      <span class="keyword">this</span>.audioSrc.GetSpectrumData(<span class="keyword">this</span>.sample, <span class="number">0</span>, FFTWindow.BlackmanHarris);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; <span class="keyword">this</span>.sample.Length; ++index)</div><div class="line">      addedVals += <span class="keyword">this</span>.sample[index];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.audioSrc.isPlaying &amp;&amp; (<span class="keyword">double</span>) <span class="keyword">this</span>.average == <span class="number">0.0</span>)</div><div class="line">      <span class="keyword">this</span>.writeAverage = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.audioSrc.isPlaying)</div><div class="line">      <span class="keyword">this</span>.writeAverage = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.writeAverage)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">this</span>.average = <span class="number">0.0</span>f;</div><div class="line">      <span class="keyword">this</span>.average = addedVals / (<span class="keyword">float</span>) <span class="keyword">this</span>.sampleSize;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">yield</span> <span class="title">return</span> (<span class="params"><span class="keyword">object</span></span>) new <span class="title">WaitForSeconds</span>(<span class="params"><span class="keyword">this</span>.audioUpdateDelay</span>)</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ <code> average </code>é…åˆç­–åˆ’è®¾ç½®çš„ä¸‰ä¸ªæ•°æŒ‡(saySmallTrigger/sayMediumTrigger/sayLargeTrigger) æ¥æ§åˆ¶ä»€ä¹ˆæ—¶é—´ç‚¹èåˆä»€ä¹ˆåŠ¨ç”»ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.prevIsTalking != <span class="keyword">this</span>.isTalking)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.prevIsTalking = <span class="keyword">this</span>.isTalking;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.broadcast)</div><div class="line">      <span class="keyword">this</span>.TalkStatusChanged();</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> ((<span class="keyword">double</span>) <span class="keyword">this</span>.average &lt; (<span class="keyword">double</span>) <span class="keyword">this</span>.saySmallTrigger)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Rest"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">(<span class="keyword">double</span></span>) <span class="keyword">this</span>.average &lt; (<span class="params"><span class="keyword">double</span></span>) <span class="keyword">this</span>.sayMediumTrigger)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Small"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">1</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Increment);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">(<span class="keyword">double</span></span>) <span class="keyword">this</span>.average &lt; (<span class="params"><span class="keyword">double</span></span>) <span class="keyword">this</span>.sayLargeTrigger)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Medium"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">2</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Increment);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.say = <span class="string">"Large"</span>;</div><div class="line">    <span class="keyword">this</span>.sayIndex = <span class="number">3</span>;</div><div class="line">    <span class="keyword">this</span>.saySmallValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.saySmallValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayMediumValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayMediumValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Decrement);</div><div class="line">    <span class="keyword">this</span>.sayLargeValue = SalsaUtility.LerpRangeOfMotion(<span class="keyword">this</span>.sayLargeValue, <span class="keyword">this</span>.blendSpeed, <span class="keyword">this</span>.rangeOfMotion, SalsaUtility.BlendDirection.Increment);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">this</span>.sayAmount.saySmall = <span class="keyword">this</span>.saySmallValue;</div><div class="line">  <span class="keyword">this</span>.sayAmount.sayMedium = <span class="keyword">this</span>.sayMediumValue;</div><div class="line">  <span class="keyword">this</span>.sayAmount.sayLarge = <span class="keyword">this</span>.sayLargeValue;</div><div class="line">  <span class="keyword">if</span> ((<span class="keyword">bool</span>) ((Object) <span class="keyword">this</span>.skinnedMeshRenderer))</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">this</span>.skinnedMeshRenderer.SetBlendShapeWeight(<span class="keyword">this</span>.saySmallIndex, <span class="keyword">this</span>.sayAmount.saySmall);</div><div class="line">    <span class="keyword">this</span>.skinnedMeshRenderer.SetBlendShapeWeight(<span class="keyword">this</span>.sayMediumIndex, <span class="keyword">this</span>.sayAmount.sayMedium);</div><div class="line">    <span class="keyword">this</span>.skinnedMeshRenderer.SetBlendShapeWeight(<span class="keyword">this</span>.sayLargeIndex, <span class="keyword">this</span>.sayAmount.sayLarge);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (!(<span class="keyword">bool</span>) ((Object) <span class="keyword">this</span>.audioSrc))</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.audioSrc.isPlaying)</div><div class="line">    <span class="keyword">this</span>.isTalking = <span class="literal">true</span>;</div><div class="line">  <span class="keyword">else</span></div><div class="line">    <span class="keyword">this</span>.isTalking = <span class="literal">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="UniLip"><a href="#UniLip" class="headerlink" title="UniLip"></a>UniLip</h1><p>æ­¤æ’ä»¶å¯å®ç°ä¸ SALSA With RandomEyes çš„å®ç°åŸç†ä¸€æ ·ï¼Œä¾§é‡ç‚¹ä¸åŒï¼Œä»–å¼€æ”¾äº†æ›´å¤šçš„å£å‹ç»™ç­–åˆ’é…ç½®ã€‚</p>
<p>æ­¤å‡½æ•°ç­‰äº  SALSA With RandomEyes åœ¨ä¸Šæ–‡ä¾‹ä¸¾çš„ <code>UpdateSample</code> ä»£ç ç‰‡æ®µã€‚<del>ä¸åŒçš„æ˜¯ä½œè€…å°†è¿™æ®µä»£ç æ”¾åœ¨äº†<code>Update</code>å¾ªç¯ä¹‹ä¸­ï¼Œä»çº¯ä»£ç ä¸Šçœ‹æ•ˆç‡æ¯”SALSA With RandomEyesè¿˜è¦å·®ã€‚</del></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AudioProcess</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (audioSource == <span class="literal">null</span>)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    audioSource.GetOutputData(samples, <span class="number">0</span>);</div><div class="line">    <span class="keyword">float</span> sum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        sum += Mathf.Pow(samples[i], <span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    rmsValue = Mathf.Sqrt(sum / SAMPLECOUNT);</div><div class="line">    dbValue = <span class="number">20</span> * Mathf.Log10(rmsValue / REFVALUE);</div><div class="line"></div><div class="line">    audioSource.GetSpectrumData(spectrum, <span class="number">0</span>, FFTWindow.BlackmanHarris);</div><div class="line">    <span class="keyword">float</span> maxV = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> maxN = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (spectrum[i] &gt; maxV &amp;&amp; spectrum[i] &gt; THRESHOLD)</div><div class="line">        &#123;</div><div class="line">            maxV = spectrum[i];</div><div class="line">            maxN = i; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">float</span> sum2 = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        sum += Mathf.Abs(samples[i]);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    volume = (sum / SAMPLECOUNT);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> picthCounter = <span class="number">0</span>;</div><div class="line">    <span class="keyword">float</span> lastDir = <span class="number">0</span>;</div><div class="line">    <span class="keyword">float</span> lastPos = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SAMPLECOUNT; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">float</span> dir = samples[i];</div><div class="line">        <span class="keyword">if</span> (Mathf.Sign(dir) != Mathf.Sign(lastDir))</div><div class="line">            picthCounter++;</div><div class="line"></div><div class="line">        lastDir = dir;</div><div class="line">        lastPos = samples[i];</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    pitchValue2 = (picthCounter * <span class="number">1000.0</span>f / SAMPLECOUNT);</div><div class="line"></div><div class="line">    <span class="keyword">float</span> freqN = maxN;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (maxN &gt; <span class="number">0</span> &amp;&amp; maxN &lt; SAMPLECOUNT - <span class="number">1</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">float</span> dL = spectrum[maxN - <span class="number">1</span>] / spectrum[maxN];</div><div class="line">        <span class="keyword">float</span> dR = spectrum[maxN + <span class="number">1</span>] / spectrum[maxN];</div><div class="line">        freqN += <span class="number">0.5</span>f * (dR * dR - dL * dL);</div><div class="line">    &#125;</div><div class="line">    pitchValue = freqN * <span class="number">24000</span> / SAMPLECOUNT;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="/uploads/QQ20180426-144637.png">ä¸ SALSA With RandomEyes ä¸åŒçš„åœ°æ–¹æ˜¯ä»–æ”¯æŒäº†å¤šä¸ªå£å‹çš„éšæœºã€‚</a></p>
<h1 id="å¯ç”¨æ€§"><a href="#å¯ç”¨æ€§" class="headerlink" title="å¯ç”¨æ€§"></a>å¯ç”¨æ€§</h1><h3 id="å¯å€Ÿé‰´ä¼˜ç‚¹"><a href="#å¯å€Ÿé‰´ä¼˜ç‚¹" class="headerlink" title="å¯å€Ÿé‰´ä¼˜ç‚¹"></a>å¯å€Ÿé‰´ä¼˜ç‚¹</h3><ol>
<li>ç­–åˆ’é—¨æ§›ä½ï¼Œä½¿ç”¨ç¾æœ¯åˆ¶ä½œçš„ blend shape å‡å°å¯¼å‡ºæ¨¡å‹ä½“ç§¯ï¼Œå¹¶ä¸”çµæ´»ç¨‹åºæ§åˆ¶ï¼Œç¨‹åºåªéœ€è¦é€šè¿‡ä¸€äº›ç­–åˆ’é…ç½®å¥½çš„æ¡ä»¶ä¾¿å¯ä»¥å°†ä»»æ„ä¸¤ä¸ªå£å‹è¿›è¡Œè¿‡æ¸¡ã€‚</li>
<li>è¿™ç§åšæ³•ä¸å­˜åœ¨åŠ¨ç”»è¡”æ¥é—®é¢˜ã€‚å› ä¸ºæ‰€æœ‰çš„çŠ¶æ€æˆ‘ä»¬éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªclipä¹‹é—´çš„è¿‡æ¸¡ã€‚</li>
<li>é€šè¿‡é‡‡æ ·ç‡ä¸éŸ³é¢‘çš„é«˜ä½æ¥æ§åˆ¶è„¸å‹ä¸å˜´å½¢çš„åŒæ­¥ï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´æ˜¯ä¸€ç§å‡åŒæ­¥ï¼Œæ­£æ˜¯è¿™ç§â€å‡åŒæ­¥â€æ‰ä¸å­˜åœ¨å¤šè¯­è¨€é—®é¢˜ã€‚</li>
<li>å…é¢„å¤„ç†ï¼Œå¯¼å…¥å³ç”¨</li>
</ol>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol>
<li>è¡¨ç°ä¸Šä¸è¶³ï¼Œå‡åŒæ­¥è§£å†³äº†å¤šè¯­è¨€é—®é¢˜ä½†æ˜¯å¸¦æ¥äº†è¡¨ç°åŠ›ä¸è¶³,ä»”ç»†çœ‹å£å‹ä¸éŸ³é¢‘å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¸ä¼šä»”ç»†çœ‹ã€‚</li>
<li>ç§»åŠ¨ç«¯æ•ˆç‡å ªå¿§ï¼Œåœ¨ç§»åŠ¨ç«¯ä¸Šå¤§è§„æ¨¡ä½¿ç”¨æœ¬åšæ³• <code>å‘¨æœŸé‡‡æ ·éŸ³é¢‘</code> æ˜¯æœ‰æ•ˆç‡é—®é¢˜çš„ã€‚</li>
<li>ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨æ­¤ä¸­åšæ³•å¼€å‘å£å‹ç³»ç»Ÿè¿™ä¸¤ä¸ªæ’ä»¶éƒ½ä¸èƒ½ç›´æ¥ç”¨ï¼Œéœ€è¦åŸºäºé¡¹ç›®å¯¹æ’ä»¶è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚</li>
</ol>
<p><a href="https://www.douban.com/note/566951438/" target="_blank" rel="external">ğŸ”— æ•æ‰éŸ³è°±</a><br><a href="https://blog.csdn.net/liu_if_else/article/details/51233799" target="_blank" rel="external">ğŸ”— ç”¨Unity3Då†…éƒ¨é¢‘è°±åˆ†ææ–¹æ³•åšéŸ³ä¹è§†è§‰ç‰¹æ•ˆçš„åŸç†è¯´æ˜</a><br><a href="https://www.creativebloq.com/maya/how-animate-character-blend-shapes-10134835" target="_blank" rel="external">ğŸ”— How to animate a character with blend shapes</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™å‘¨ä¼šè®¡åˆ’ç ”ç©¶LipSyncæ–¹å‘ï¼Œä¼šå†™ä¸€äº›èµ„æ–™è®°å½•è¿‡ç¨‹ã€‚æœ¬ç¯‡å¹¶ä¸è®²è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼Œåªè®¨è®ºå…¶åŠŸèƒ½å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬ç¯‡è¯„æµ‹çš„æ’ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;br&gt;&lt;strong&gt; SALSA With RandomEyes &lt;/strong&gt;&lt;br&gt;&lt;strong&gt; UniLip &lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;è¯„æµ‹çš„æ–¹å‘ï¼š 1. å˜´å‹åŒæ­¥&lt;br&gt;è¯„æµ‹è§’åº¦ï¼š   1. å®ç°æ–¹å¼   2. å¯ç”¨æ€§&lt;/p&gt;
    
    </summary>
    
      <category term="Plugin" scheme="http://vrast.cn/categories/Plugin/"/>
    
    
      <category term="LipSync" scheme="http://vrast.cn/tags/LipSync/"/>
    
  </entry>
  
  <entry>
    <title>protobufä¸­ä½¿ç”¨ç»§æ‰¿</title>
    <link href="http://vrast.cn/posts/67edd270/"/>
    <id>http://vrast.cn/posts/67edd270/</id>
    <published>2018-04-08T06:06:57.000Z</published>
    <updated>2018-04-08T06:18:18.273Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ä¸¤å¤©æœ‰ä¸€ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°æˆ‘ã€‚ä½¿ç”¨protobuf .netç‰ˆæœ¬çš„æ—¶å€™åºåˆ—åŒ–ç±»ï¼ŒåŸºç±»çš„å­—æ®µä¼šä¸¢å¤±ã€‚éšåæˆ‘é—®äº†ä¸‹æœ‹å‹æ— ä¸€ä¾‹å¤–ä»–ä»¬éƒ½ä½¿ç”¨çš„æ˜¯ç»„åˆè€Œéç»§æ‰¿ã€‚æˆ‘ä¹Ÿåœ¨åæ€æ˜¯å¦è¿™ä¸ªåšæ³•æœ¬èº«å°±æœ‰é—®é¢˜ã€‚æˆ‘æ˜¨å¤©Googleçš„æ—¶å€™å‘ç°æœ‰äººé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œé‚åœ¨æœ¬ç¯‡ä¸­è®°å½•ã€‚</p>
<a id="more"></a>
<p><a href="https://stackoverflow.com/questions/6109868/protobuf-net-base-class-properties-is-not-included-when-serializing-derived-clas" target="_blank" rel="external">ProtoBuf.net Base class properties is not included when serializing derived class</a> è¿™ä¸ªå°±æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œä¸€æ‘¸ä¸€æ ·ã€‚<br>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼šå¦‚æœæ˜¯å­ç±»æƒ³è¦åœ¨åºåˆ—åŒ–çš„æ—¶å€™å¸¦ä¸ŠåŸºç±»çš„ä¿¡æ¯è¯·ä½¿ç”¨ã€ProtoIncludeã€‘ï¼Œå¡«å†™ä¸Šæƒ³è¦åŒ…å«çš„ç±»å‹å³å¯ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸¤å¤©æœ‰ä¸€ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°æˆ‘ã€‚ä½¿ç”¨protobuf .netç‰ˆæœ¬çš„æ—¶å€™åºåˆ—åŒ–ç±»ï¼ŒåŸºç±»çš„å­—æ®µä¼šä¸¢å¤±ã€‚éšåæˆ‘é—®äº†ä¸‹æœ‹å‹æ— ä¸€ä¾‹å¤–ä»–ä»¬éƒ½ä½¿ç”¨çš„æ˜¯ç»„åˆè€Œéç»§æ‰¿ã€‚æˆ‘ä¹Ÿåœ¨åæ€æ˜¯å¦è¿™ä¸ªåšæ³•æœ¬èº«å°±æœ‰é—®é¢˜ã€‚æˆ‘æ˜¨å¤©Googleçš„æ—¶å€™å‘ç°æœ‰äººé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œé‚åœ¨æœ¬ç¯‡ä¸­è®°å½•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="protobuf" scheme="http://vrast.cn/tags/protobuf/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–è¾‘å™¨æ‰©å±•-åˆ†å‰²æ¡</title>
    <link href="http://vrast.cn/posts/8d62e7c3/"/>
    <id>http://vrast.cn/posts/8d62e7c3/</id>
    <published>2018-03-27T01:40:57.000Z</published>
    <updated>2018-03-27T01:52:39.284Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å¯æ‹–åŠ¨åˆ†å‰²æ¡åœ¨ Unity3D çš„ç¼–è¾‘å™¨ç»“æ„ä¸­ä¸€èˆ¬éƒ½å±äºæœ€å¤–å±‚ç»“æ„ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº GUI ç»„ä»¶ï¼Œè®¡ç®—ä½ç½®çš„æ—¶å€™å¿…é¡»è¦å¾ˆç²¾ç¡®ï¼Œæ‰€ä»¥è·ŸLayout æµå¼å¸ƒå±€æ··ç¼–ä¼šæ¯”è¾ƒä¹±ã€‚è¿™é‡Œä¹Ÿæ¨èä½œä¸ºæœ€å¤–å±‚ç»“æ„ä½¿ç”¨ã€‚</p>
</blockquote>
<p><img src="/uploads/2018427047.png" alt="å¯æ‹–åŠ¨çš„åˆ†å‰²æ¡"><br><a id="more"></a></p>
<h1 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h1><p>ä¸‹é¢æ˜¯æˆ‘å†™çš„ä¸€ä¸ªæ¼”ç¤ºä¾‹å­ ä½ å¯ä»¥åœ¨Unityä¸­ç›´æ¥è¿è¡Œã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//   		Copyright 2017 KeyleXiao.</span></div><div class="line"><span class="comment">//     		Contact : Keyle_xiao@hotmail.com </span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     		Licensed under the Apache License, Version 2.0 (the "License");</span></div><div class="line"><span class="comment">//     		you may not use this file except in compliance with the License.</span></div><div class="line"><span class="comment">//     		You may obtain a copy of the License at</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     		http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//     		Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><span class="comment">//     		distributed under the License is distributed on an "AS IS" BASIS,</span></div><div class="line"><span class="comment">//     		WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><span class="comment">//     		See the License for the specific language governing permissions and</span></div><div class="line"><span class="comment">//     		limitations under the License.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="keyword">using</span>  UnityEditor;</div><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">SmartDataViewer.Editor</span></div><div class="line">&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExportWizard</span>:<span class="title">EditorWindow</span></div><div class="line">    &#123;</div><div class="line">        [MenuItem(<span class="string">"SmartDataViewer/ExportWizard"</span>)]</div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OpenView</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">var</span> w = CreateInstance&lt;ExportWizard &gt;();</div><div class="line">            </div><div class="line">            w.minSize = <span class="keyword">new</span> Vector2(<span class="number">350</span>,<span class="number">250</span>);</div><div class="line">            w.maxSize = w.minSize;</div><div class="line">            Vector2 pos =<span class="keyword">new</span> Vector2( Screen.width/<span class="number">2</span>-w.minSize.x,Screen.height/<span class="number">2</span>-w.minSize.y);</div><div class="line">            w.position = <span class="keyword">new</span> Rect(pos,w.minSize);</div><div class="line">            </div><div class="line">            w.ShowUtility();</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keyword">object</span> rawData &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InitRawData</span>(<span class="params"><span class="keyword">object</span> data</span>)</span></div><div class="line">        &#123;</div><div class="line">            rawData = data;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        <span class="keyword">private</span> Vector2 scrollPos = Vector2.zero;</div><div class="line">        <span class="keyword">float</span> currentScrollViewWidth;</div><div class="line">        <span class="keyword">bool</span> resize = <span class="literal">false</span>;</div><div class="line">        Rect cursorChangeRect;</div><div class="line">        </div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">this</span>.position = <span class="keyword">new</span> Rect(<span class="number">200</span>,<span class="number">200</span>,<span class="number">400</span>,<span class="number">300</span>);</div><div class="line">            currentScrollViewWidth = <span class="keyword">this</span>.position.width/<span class="number">2</span>;</div><div class="line">            cursorChangeRect = <span class="keyword">new</span> Rect(currentScrollViewWidth,<span class="number">0</span>,<span class="number">4</span>f,<span class="keyword">this</span>.position.height);</div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            GUILayout.BeginHorizontal();</div><div class="line">            </div><div class="line">            scrollPos = GUILayout.BeginScrollView(scrollPos,GUILayout.Width(currentScrollViewWidth));</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</div><div class="line">                GUILayout.Label(<span class="string">"test content"</span>);</div><div class="line">            GUILayout.EndScrollView();</div><div class="line">                 </div><div class="line">            ResizeScrollView();</div><div class="line">            </div><div class="line">            GUILayout.Label(<span class="string">"right part"</span>);</div><div class="line">            GUILayout.EndHorizontal();</div><div class="line">            Repaint();</div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ResizeScrollView</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            GUI.DrawTexture(cursorChangeRect,EditorGUIUtility.whiteTexture);</div><div class="line">            EditorGUIUtility.AddCursorRect(cursorChangeRect,MouseCursor.ResizeHorizontal);</div><div class="line">         </div><div class="line">            <span class="keyword">if</span>( Event.current.type == EventType.MouseDown &amp;&amp; cursorChangeRect.Contains(Event.current.mousePosition))&#123;</div><div class="line">                resize = <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(resize)&#123;</div><div class="line">                currentScrollViewWidth = Event.current.mousePosition.x;</div><div class="line">                cursorChangeRect.Set(currentScrollViewWidth,cursorChangeRect.y,cursorChangeRect.width,cursorChangeRect.height);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(Event.current.type == EventType.MouseUp)</div><div class="line">                resize = <span class="literal">false</span>;        </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>è¿™é‡Œçš„GUIä»…ä»…æ˜¯åšäº†ä¸€ä¸ªè¡¨ç°ï¼Œæœ€æ ¸å¿ƒçš„å…¶å®æ˜¯ <code>cursorChangeRect</code> å› ä¸ºä½ å³ä½¿ä¸è¦è¿™ä¸ª GUI ä¹Ÿèƒ½åœ¨è¿™ä¸ª Rect çš„ä½ç½®è¿›è¡Œæ‹–åŠ¨ã€‚<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GUI.DrawTexture(cursorChangeRect,EditorGUIUtility.whiteTexture);</div></pre></td></tr></table></figure></p>
<p>åœ¨é¼ æ ‡ç§»åŠ¨çš„åŒæ—¶å°†é¼ æ ‡å½“å‰ x è½´çš„ä½ç½®èµ‹å‰é¢çš„ä¸€ä¸ªlayoutï¼Œå°±ä¼šæ¨åŠ¨åé¢ä¸€ä¸ªlayout. (æµå¼å¸ƒå±€)</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¯æ‹–åŠ¨åˆ†å‰²æ¡åœ¨ Unity3D çš„ç¼–è¾‘å™¨ç»“æ„ä¸­ä¸€èˆ¬éƒ½å±äºæœ€å¤–å±‚ç»“æ„ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº GUI ç»„ä»¶ï¼Œè®¡ç®—ä½ç½®çš„æ—¶å€™å¿…é¡»è¦å¾ˆç²¾ç¡®ï¼Œæ‰€ä»¥è·ŸLayout æµå¼å¸ƒå±€æ··ç¼–ä¼šæ¯”è¾ƒä¹±ã€‚è¿™é‡Œä¹Ÿæ¨èä½œä¸ºæœ€å¤–å±‚ç»“æ„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/2018427047.png&quot; alt=&quot;å¯æ‹–åŠ¨çš„åˆ†å‰²æ¡&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="UNITY3Dç¼–è¾‘å™¨" scheme="http://vrast.cn/tags/UNITY3D%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>UNITYæ€§èƒ½ä¼˜åŒ–å‚è€ƒç¯‡</title>
    <link href="http://vrast.cn/posts/69247612/"/>
    <id>http://vrast.cn/posts/69247612/</id>
    <published>2018-03-09T08:12:00.000Z</published>
    <updated>2018-03-09T11:07:23.840Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä¸‹é¢æ˜¯æˆ‘ç»™é¡¹ç›®ç»„çš„ä¸€äº›å‚è€ƒã€‚å…¶ä¸­ä¹ŸåŒ…å«å„ç§å„æ ·çš„æ ‡å‡†ï¼Œä¸ä¼˜åŒ–å»ºè®®ã€‚é¡¹ç›®ä¼˜åŒ–å¹¶ä¸æ˜¯ä¸€ä»¶äº‹ï¼Œå®ƒæ˜¯ç‚¹ç‚¹æ»´æ»´ä¸²è”èµ·æ¥çš„(å‹¿ä»¥æ¶å°è€Œä¸ºä¹‹)ï¼Œæˆ‘è§è¿‡å¾ˆå¤šé¡¹ç›®åªæ˜¯å›¾ä¸€æ—¶ä¹‹æ–¹ä¾¿å°±å¯¼è‡´åæœŸå¾ˆéš¾åš æ¯”å¦‚ å‰æœŸæœªè§„åˆ’å¥½å›¾é›†ï¼Œæ¨¡å‹è´´å›¾æè´¨ç›®å½•æ··ç”¨ï¼ŒUIåˆ¶ä½œæœªæŒ‰ç…§ å¤ç”¨/ç‰¹æ®Š çš„æ ‡å‡†åˆ¶ä½œï¼ŒåŠ¨ç”»å¯¼å‡ºå¸§ç‡ä¸ç»Ÿä¸€é«˜é«˜ä½ä½ ç­‰ç­‰ã€‚å¦‚æœä¸€å¼€å§‹æ²¡æœ‰å®šåˆ¶è‰¯å¥½çš„è§„èŒƒï¼Œåé¢æƒ³è¦è¡¥æ•‘åªèƒ½é ç¨‹åºå†™ä¸€äº›å·¥å…·æ‰¹é‡å¤„ç†ï¼Œå½“ç„¶è¿™å·¥å…·ä¹Ÿä¸ä¸€å®šå¥½å†™ã€‚</p>
</blockquote>
<a id="more"></a>
<p>å› ä¸ºæ•ˆç‡ä¼˜åŒ–æ˜¯ä¸€ä¸ªå¾ˆæ³›åŒ–çš„è¯ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘åªè®¨è®ºå¤§ç±»è¿›è€Œè¡ç”Ÿå‡º â€œæ ‡å‡†åšæ³•â€ã€‚æ ‡å‡†åªè¯´é€šç”¨çš„ï¼Œåšäº†ä¸ä¼šé”™çš„é‚£ç§ã€‚å¦‚æœä½ æ²¡æœ‰åš æ¨èä½ è¯•ä¸€è¯•ã€‚åƒå¦‚åŒé¡¹ç›®è´´å›¾è®¾ç½®ï¼Œç¯å…‰è®¾ç½®ï¼Œçƒ˜ç„™ï¼Œfogï¼Œç­‰ è®¾ç½®é—®é¢˜è¿™é‡Œä¸è°ˆã€‚å› ä¸ºè®¾ç½®çš„é€‰é¡¹æ˜¯æœ€å®¹æ˜“åšä¼˜åŒ–çš„å³ä½¿åˆ°äº†åæœŸä¹Ÿæ˜¯å¯ä»¥å¿«é€Ÿåšçš„ã€‚</p>
<h2 id="ç¾æœ¯èµ„æº"><a href="#ç¾æœ¯èµ„æº" class="headerlink" title="ç¾æœ¯èµ„æº"></a>ç¾æœ¯èµ„æº</h2><h3 id="èµ„æºåˆ†çº§"><a href="#èµ„æºåˆ†çº§" class="headerlink" title="èµ„æºåˆ†çº§"></a>èµ„æºåˆ†çº§</h3><p>å¦‚ è´´å›¾png/jpgçš„é€‰æ‹© åŠ¨ç”»30å¸§è¿˜æ˜¯60å¸§çš„é€‰æ‹© ç²’å­è´¨é‡é«˜æˆ–ä½è¿˜æ˜¯æ ‡å‡† ç­‰ã€‚æ ¹æ®ä¸åŒåœºåˆä½¿ç”¨ä¸åŒçº§åˆ«èµ„æºã€‚ä¸€èˆ¬æ¥è¯´é«˜è´¨é‡èµ„æºåªä¼šå‡ºç°åœ¨æœ€æ˜¾çœ¼çš„åœ°æ–¹ å¦‚ ç™»é™†ï¼Œäººç‰©é€‰æ‹©ï¼Œå…¥åœºã€‚çœŸæ­£æˆ˜æ–—è°ƒç”¨çš„ç¾æœ¯èµ„æºå¾€å¾€åªéœ€è¦æ™®é€šå“è´¨å³å¯ã€‚å…·ä½“é¡¹ç›®å¯ä»¥è·Ÿç€éœ€æ±‚æ¥æ§åˆ¶ï¼Œåˆ’é‡ç‚¹ è¿™é‡Œè¦åšå·®å¼‚åŒ– æ‰èƒ½çœå‡ºèµ„æº(å†…å­˜)ã€‚</p>
<h4 id="è´´å›¾çš„è´¨é‡é€‰æ‹©"><a href="#è´´å›¾çš„è´¨é‡é€‰æ‹©" class="headerlink" title="è´´å›¾çš„è´¨é‡é€‰æ‹©"></a>è´´å›¾çš„è´¨é‡é€‰æ‹©</h4><p><img src="/uploads/texturequality.png" alt="å¯å‚è€ƒ https://www.jianshu.com/p/f7c3741f22af"><br>è´´å›¾çš„è´¨é‡é€‰æ‹©ä¸»è¦å½±å“è¿è¡Œæ—¶æ•ˆç‡ï¼Œå¹¶ä¸å½±å“å‡ºåŒ…çš„å¤§å°ã€‚UNITY3Dæ‰“åŒ…ä¼šè‡ªå·±ä¼˜åŒ–å›¾ç‰‡å¤§å°ï¼Œå¦‚æœä½ ä½¿ç”¨äº†android studio release æ‰“åŒ…ï¼Œå¤§å°ä¼šè¿›ä¸€æ­¥å‹ç¼©ã€‚<br>è¿™é‡Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹å†…å­˜ä¸æ•ˆç‡çš„è½¬åŒ–ã€‚å†…å­˜å æ¯”è¶Šé«˜è¶Šæ¸…æ™°ã€‚è¿™ä¸ªå¯ä»¥ç›´æ¥é€šè¿‡è´´å›¾çš„å‰ç¼€æˆ–è€…åç¼€ç»Ÿä¸€è®¾ç½®ã€‚æˆ–è€…å†™ä¸€ä¸ªèµ„æºç®¡ç†å·¥å…· ç»Ÿä¸€è®¾ç½®ã€‚</p>
<h2 id="å†·çƒ­åˆ†ç¦»-å»¶è¿ŸåŠ è½½"><a href="#å†·çƒ­åˆ†ç¦»-å»¶è¿ŸåŠ è½½" class="headerlink" title="å†·çƒ­åˆ†ç¦» å»¶è¿ŸåŠ è½½"></a>å†·çƒ­åˆ†ç¦» å»¶è¿ŸåŠ è½½</h2><ol>
<li>ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œå¦‚æœéœ€è¦é›†ä¸­åŠ è½½æŸäº›èµ„æºå¯ä»¥è€ƒè™‘å†·çƒ­åˆ†ç¦»ã€‚å¸¸é©»å†…å­˜ä¸­çš„èµ„æº ä¸ éå¸¸é©»å†…å­˜ä¸­çš„èµ„æºé‡‡å–ä¸åŒç­–ç•¥ï¼š<br>æˆ˜æ–—é…ç½® ç­‰åˆ°æˆ˜æ–—åœºæ™¯å†åŠ è½½ï¼Œå…³å¡/ä»»åŠ¡/æˆå°±/ ç­‰ç­‰å…¶ä»– å¯ä»¥ç­‰åˆ°æ‰“å¼€å…·ä½“é¢æ¿æˆ–è¿›å…¥åœºæ™¯çš„æ—¶å€™åšä¸€æ¬¡ç¼“å­˜ã€‚</li>
<li>ç§»é™¤ç©ºå‡½æ•° å¦‚ ç»§æ‰¿è‡ªMBçš„ Update ä¹‹ç±»çš„å‡½æ•°ã€‚</li>
<li>åˆ†å¸§åšiO æˆ– ç½‘ç»œè¯·æ±‚çš„æ“ä½œã€‚å†å…·ä½“ä¸€ç‚¹å°±æ˜¯ç”¨æºç¨‹ è¯¥returnçš„åœ°æ–¹å°±return ç­‰å€™ä¸‹ä¸€å¸§å¤„ç†ã€‚</li>
<li>é«˜æ¶ˆè€—çš„å‡½æ•°é¿å…ç”šè‡³ä¸ç”¨ åŸºæœ¬ä¸ŠUNITY APIä¸­ä»¥Findxxxå¼€å¤´ è¿”å›ä¸€ä¸ª List çš„å‡½æ•°éƒ½æ˜¯é«˜æ¶ˆè€—å‡½æ•°ã€‚</li>
</ol>
<h2 id="å†…å­˜æ§åˆ¶"><a href="#å†…å­˜æ§åˆ¶" class="headerlink" title="å†…å­˜æ§åˆ¶"></a>å†…å­˜æ§åˆ¶</h2><ol>
<li>ä½¿ç”¨ç¼“å­˜æ±  å¦‚ é€šç”¨é¢æ¿/é€šç”¨å¼¹å‡ºç¾æœ¯å­—(æˆ˜æ–—ä¸­ä¼¤å®³æ•°å­—)/ ç­‰è€ƒè™‘ç¼“å­˜ã€‚</li>
<li>ç›‘æµ‹å½“å‰å·¥ç¨‹åœ¨ç§»åŠ¨ç«¯çš„å†…å­˜å ç”¨ï¼Œç»™æ‰€æœ‰çš„ç¼“å­˜æ± å¢åŠ é‡Šæ”¾æ¥å£ åšä¸€äº›æ’åºé‡Šæ”¾æ“ä½œ(ä¼˜å…ˆçº§é‡Šæ”¾)ã€‚<br>å¯ä»¥å‚è€ƒ UNITY5.6 çš„æ–°API <a href="https://docs.unity3d.com/ScriptReference/Application-lowMemory.html" target="_blank" rel="external">Application.lowMemory</a></li>
<li>ä½¿ç”¨å‹ç¼©è¿‡çš„éŸ³é¢‘ æˆ–è€… ä½¿ç”¨ Fmod ä¹‹ç±»çš„æ’ä»¶è¿›è¡Œæ‰˜ç®¡ã€‚ç¼ºæ°§ä½¿ç”¨çš„å°±æ˜¯ fmod .</li>
<li>æ–‡æœ¬é…ç½®è½¬2è¿›åˆ¶å­˜å‚¨ å‡å°‘è¿è¡Œæ—¶å†…å­˜å ç”¨ã€‚</li>
</ol>
<h2 id="æ•ˆç‡é‡ç‚¹"><a href="#æ•ˆç‡é‡ç‚¹" class="headerlink" title="æ•ˆç‡é‡ç‚¹"></a>æ•ˆç‡é‡ç‚¹</h2><ol>
<li>ä½¿ç”¨ line fog è°ƒæ•´ç›¸æœºè§†é‡</li>
<li>å…³é—­åœºæ™¯é˜´å½± èƒ½ç”¨çƒ˜ç„™ç”¨çƒ˜ç„™ã€‚ </li>
<li>ä½¿ç”¨ Fast Shadow Projector åšé˜´å½±ã€‚</li>
<li>ä¸è¦ä½¿ç”¨standard shaderã€‚å› ä¸ºå¤§é‡çš„å®æ—¶GIè¿ç®—ã€‚</li>
</ol>
<h2 id="æ‰“åŒ…äº‹é¡¹"><a href="#æ‰“åŒ…äº‹é¡¹" class="headerlink" title="æ‰“åŒ…äº‹é¡¹"></a>æ‰“åŒ…äº‹é¡¹</h2><ol>
<li>iOS å¦‚æœå¯ä»¥å°±ä½¿ç”¨ bit code</li>
<li>APK ä½¿ç”¨ Android Studio release æ‰“åŒ…</li>
<li>ä½¿ç”¨  <code>.NET 2.0 Subset </code> ä½¿ç”¨è„šæœ¬ä»£æ›¿å¦‚ xml ä¹‹ç±»çš„systemåº“çš„ä½¿ç”¨ã€‚</li>
<li>æ‰“åŒ…å®Œä¹‹åæŸ¥çœ‹ log ç¡®å®šèµ„æºç“¶é¢ˆã€‚æ¨èä½¿ç”¨ <code>Build Report Tool</code><br>æŸå®äº”æ¯›é’±èƒ½ä¹°åˆ°æœ€æ–°ç‰ˆã€‚æ¯æ¬¡æ‰“åŒ…éƒ½éœ€è¦çœ‹ä¸€çœ¼ï¼ŒçœŸç­‰åˆ°éœ€è¦åšä¼˜åŒ–çš„æ—¶å€™å·²ç»æ™šäº†ï¼Œä¼˜åŒ–çš„éœ€æ±‚å¾€å¾€æ˜¯ç§¯ç´¯åˆ°ä¸€å®šç¨‹åº¦æ‰çˆ†å‘éœ€è¦ä¼˜åŒ–ã€‚</li>
<li>æ‰“åŒ…è¿‡atlasçš„å›¾å°±ä¸è¦å†æ”¾åˆ°Resourcesä¸‹ï¼Œæ–¹ä¾¿çš„è¯å°±æ‰“åŒ…æˆAB</li>
</ol>
<h2 id="ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™"><a href="#ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™" class="headerlink" title="ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™"></a>ä¸€äº›å…·ä½“çš„ä¼˜åŒ–èµ„æ–™</h2><p><a href="https://docs.unity3d.com/Manual/OptimizingGraphicsPerformance.html" target="_blank" rel="external">å®˜ç½‘ å›¾å½¢æ€§èƒ½ä¼˜åŒ–</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æˆ‘ç»™é¡¹ç›®ç»„çš„ä¸€äº›å‚è€ƒã€‚å…¶ä¸­ä¹ŸåŒ…å«å„ç§å„æ ·çš„æ ‡å‡†ï¼Œä¸ä¼˜åŒ–å»ºè®®ã€‚é¡¹ç›®ä¼˜åŒ–å¹¶ä¸æ˜¯ä¸€ä»¶äº‹ï¼Œå®ƒæ˜¯ç‚¹ç‚¹æ»´æ»´ä¸²è”èµ·æ¥çš„(å‹¿ä»¥æ¶å°è€Œä¸ºä¹‹)ï¼Œæˆ‘è§è¿‡å¾ˆå¤šé¡¹ç›®åªæ˜¯å›¾ä¸€æ—¶ä¹‹æ–¹ä¾¿å°±å¯¼è‡´åæœŸå¾ˆéš¾åš æ¯”å¦‚ å‰æœŸæœªè§„åˆ’å¥½å›¾é›†ï¼Œæ¨¡å‹è´´å›¾æè´¨ç›®å½•æ··ç”¨ï¼ŒUIåˆ¶ä½œæœªæŒ‰ç…§ å¤ç”¨/ç‰¹æ®Š çš„æ ‡å‡†åˆ¶ä½œï¼ŒåŠ¨ç”»å¯¼å‡ºå¸§ç‡ä¸ç»Ÿä¸€é«˜é«˜ä½ä½ ç­‰ç­‰ã€‚å¦‚æœä¸€å¼€å§‹æ²¡æœ‰å®šåˆ¶è‰¯å¥½çš„è§„èŒƒï¼Œåé¢æƒ³è¦è¡¥æ•‘åªèƒ½é ç¨‹åºå†™ä¸€äº›å·¥å…·æ‰¹é‡å¤„ç†ï¼Œå½“ç„¶è¿™å·¥å…·ä¹Ÿä¸ä¸€å®šå¥½å†™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY" scheme="http://vrast.cn/categories/UNITY/"/>
    
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://vrast.cn/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Unity new API</title>
    <link href="http://vrast.cn/posts/76c9e56/"/>
    <id>http://vrast.cn/posts/76c9e56/</id>
    <published>2018-02-26T11:17:08.000Z</published>
    <updated>2018-02-27T07:19:38.124Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™é‡Œè®°å½•ä¸€äº›Unity3Dçš„API ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="Application-lowMemory-ä½å†…å­˜æ£€æµ‹-5-6"><a href="#Application-lowMemory-ä½å†…å­˜æ£€æµ‹-5-6" class="headerlink" title="Application.lowMemory ä½å†…å­˜æ£€æµ‹ 5.6+"></a>Application.lowMemory ä½å†…å­˜æ£€æµ‹ 5.6+</h1><p>å½“Andoridæˆ–è€…iOSå†…å­˜è¿‡ä½ä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚ç”¨æ¥å¤„ç†å†…å­˜é‡Šæ”¾ <a href="https://docs.unity3d.com/ScriptReference/Application-lowMemory.html" target="_blank" rel="external">å®˜ç½‘æ–‡æ¡£</a><br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"></div><div class="line"><span class="keyword">class</span> <span class="title">LowMemoryTrigger</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line">    List&lt;Texture2D&gt; _textures;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        _textures = <span class="keyword">new</span> List&lt;Texture2D&gt;();</div><div class="line">        Application.lowMemory += OnLowMemory;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// allocate textures until we run out of memory</span></div><div class="line">        _textures.Add(<span class="keyword">new</span> Texture2D(<span class="number">256</span>, <span class="number">256</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnLowMemory</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// release all cached textures</span></div><div class="line">        _textures = <span class="keyword">new</span> List&lt;Texture2D&gt;();</div><div class="line">        Resources.UnloadUnusedAssets();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œè®°å½•ä¸€äº›Unity3Dçš„API ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITYAPI" scheme="http://vrast.cn/categories/UNITYAPI/"/>
    
    
      <category term="UNITY3D" scheme="http://vrast.cn/tags/UNITY3D/"/>
    
  </entry>
  
  <entry>
    <title>SNFramework</title>
    <link href="http://vrast.cn/posts/f326c5ce/"/>
    <id>http://vrast.cn/posts/f326c5ce/</id>
    <published>2018-01-16T01:31:33.000Z</published>
    <updated>2018-01-16T05:57:48.212Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h1><p>2015å¹´ æˆ‘åœ¨æ·˜ç±³å†™äº†ä¸€å¥— <a href="http://www.cnblogs.com/Keyle/p/4843934.html" target="_blank" rel="external">æ¶ˆæ¯ä¼ é€’æœºåˆ¶</a> å½“ç„¶è¿™ä¸€å¥—åœ¨æˆ‘çš„ä¸Šå®¶å…¬å¸ä¹Ÿå¾—åˆ°éªŒè¯ã€‚<br>2016å¹´ æˆ‘åœ¨ä¸–çºªåˆ›æ„åŸºäº2015å¹´ä¸€ç‰ˆçš„æ¶ˆæ¯ä¼ é€’è¿›è¡Œäº†å°è£…ä½†æ˜¯å½“æ—¶èµ¶é¡¹ç›®ä¹Ÿæ²¡æœ‰å¼•å…¥ã€‚æˆ‘ç§°ä¹‹ä¸º <a href="https://gitee.com/keyle/SmartNotificationFramework" target="_blank" rel="external">SmartNotificationFramework</a> æˆ‘å¸Œæœ›å®ƒèƒ½è¾¾åˆ°è¶³å¤Ÿçš„çµæ´»ï¼Œåœ¨æˆ‘çœ‹æ¥å®ƒå·¥ä½œçš„è¿˜ä¸é”™ï¼Œä½†æ˜¯å¤ªç®€é™‹ã€‚<br>2018å¹´ ä¹Ÿå°±æ˜¯ä»Šå¹´æˆ‘ç»ˆäºå¾—ç©ºå¹¶ä¸”é›†ä¸­æ—¶é—´å¤§é‡é‡æ„ä¸å®Œæˆäº†å¤§éƒ¨åˆ†çš„å•å…ƒæµ‹è¯•ã€‚SNFramework æ˜¯æˆ‘æ­£åœ¨ä½¿ç”¨çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚å®ƒå·²ç»æœ‰äº†åˆæ­¥çš„ç†æƒ³åŠŸèƒ½ï¼Œå¦‚æ¶ˆæ¯ä¸Šä¸‹åˆ†éš”ç¦»ï¼Œæ¶ˆæ¯è¢«é˜…è¯»æˆåŠŸè‡ªåŠ¨é‡Šæ”¾(å³æŒ‡æ‰§è¡Œä¸€æ¬¡)ï¼Œå¹¿æ’­æ¶ˆæ¯ç­‰ã€‚</p>
<h1 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h1><p><a href="https://github.com/KeyleXiao/SNFramework" target="_blank" rel="external">https://github.com/KeyleXiao/SNFramework</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;èµ·æº&quot;&gt;&lt;a href=&quot;#èµ·æº&quot; class=&quot;headerlink&quot; title=&quot;èµ·æº&quot;&gt;&lt;/a&gt;èµ·æº&lt;/h1&gt;&lt;p&gt;2015å¹´ æˆ‘åœ¨æ·˜ç±³å†™äº†ä¸€å¥— &lt;a href=&quot;http://www.cnblogs.com/Keyle/p/4843934.html&quot; t
    
    </summary>
    
      <category term="OpenSource" scheme="http://vrast.cn/categories/OpenSource/"/>
    
    
      <category term="SNFramework" scheme="http://vrast.cn/tags/SNFramework/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†æç¼ºæ°§(Oxygen not included)ä¸­æ‰€ç”¨åˆ°çš„æŠ€æœ¯</title>
    <link href="http://vrast.cn/posts/6f00466c/"/>
    <id>http://vrast.cn/posts/6f00466c/</id>
    <published>2018-01-03T09:03:16.000Z</published>
    <updated>2018-01-03T10:53:07.537Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å…ƒæ—¦æœŸé—´ç©äº†ç¼ºæ°§ï¼Œæ„Ÿè§‰ååˆ†çš„å¥½ç©ã€‚å±äºæ·±åº¦æ²™ç›’ç»è¥ç±»æ¸¸æˆã€‚æ—¢ç„¶å¥½ç©é‚£å°±è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»Šå¤©æŠ½ç©ºçœ‹äº†çœ‹æºç ï¼ŒåŸºæœ¬ä¸Šåˆ—å‡ºæ‰€æœ‰èƒ½æ‰¾åˆ°çš„å·¥å…·æˆ–æŠ€æœ¯ã€‚ç®—æ˜¯ä¸€ä¸ªè®°å½•ï¼Œä¹Ÿå¼€é˜”ä¸€ä¸‹è§†é‡ã€‚å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆè¡¥å……æ¬¢è¿ç»™æˆ‘ç•™è¨€ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="å¤–éƒ¨æ’ä»¶åˆ—è¡¨"><a href="#å¤–éƒ¨æ’ä»¶åˆ—è¡¨" class="headerlink" title="å¤–éƒ¨æ’ä»¶åˆ—è¡¨"></a>å¤–éƒ¨æ’ä»¶åˆ—è¡¨</h1><h2 id="YamlDotNet-amp-Newtonsoft-Json"><a href="#YamlDotNet-amp-Newtonsoft-Json" class="headerlink" title="YamlDotNet &amp; Newtonsoft.Json"></a>YamlDotNet &amp; Newtonsoft.Json</h2><p>åºåˆ—åŒ–å·¥å…·<br><a href="https://github.com/aaubry/YamlDotNet" target="_blank" rel="external">Githubåœ°å€</a><br><a href="https://dotnetfiddle.net/QlqGDV" target="_blank" rel="external">ä»£ç æ¼”ç¤ºåœ°å€1</a><br><a href="https://dotnetfiddle.net/HD2JXM" target="_blank" rel="external">ä»£ç æ¼”ç¤ºåœ°å€2</a></p>
<p>Newtonsoft.Json å°±ä¸è¯´äº† è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“ï¼Œæ¯•ç«Ÿä¸æ˜¯å°ä¼—</p>
<h2 id="FileHelpers-Library"><a href="#FileHelpers-Library" class="headerlink" title="FileHelpers Library"></a>FileHelpers Library</h2><p>FileHelpers Libraryæ˜¯ä¸€æ¬¾C#ç¼–å†™çš„å¼€æº .NET ç±»åº“ã€‚å®ƒä½¿ç”¨ç®€å•ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥ä»å›ºå®šé•¿åº¦æ–‡ä»¶æˆ–ç•Œå®šè®°å½•(CSV)è¯»/å†™æ•°æ®ã€‚å®ƒä¹Ÿæ”¯æŒä»ä¸åŒçš„æ•°æ®å­˜å‚¨æ ¼å¼(Excel, Access, SqlServer)å¯¼å…¥/å¯¼å‡ºæ•°æ®ã€‚ <a href="http://www.filehelpers.net" target="_blank" rel="external">FileHelperså®˜ç½‘</a></p>
<h2 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h2><p>ArabicSuppor.dll  é˜¿æ‹‰ä¼¯è¯­æ”¯æŒ<br>I18N.dll / I18N.West.dll Unityè‡ªå¸¦çš„å›½é™…åŒ–å·¥å…·</p>
<h2 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h2><p>Ionic.Zip è€ç‰Œçš„è§£å‹ä¸å‹ç¼©ç±»åº“ <a href="https://dotnetzip.codeplex.com" target="_blank" rel="external">é¡¹ç›®åœ°å€ Codeplex</a><br>SharpZipLib C#è§£å‹å‹ç¼©ç±»åº“ <a href="https://github.com/icsharpcode/SharpZipLib" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="å™ªå£°"><a href="#å™ªå£°" class="headerlink" title="å™ªå£°"></a>å™ªå£°</h2><p>libnoise.dll ç”¨äºéšæœºç®—æ³•(å™ªå£°)  <a href="http://libnoise.sourceforge.net" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="Pngè¯»å†™"><a href="#Pngè¯»å†™" class="headerlink" title="Pngè¯»å†™"></a>Pngè¯»å†™</h2><p>Pngcs ç”¨æ¥å¯¹pngå›¾è¯»å†™çš„å·¥å…· <a href="https://github.com/leonbloy/pngcs" target="_blank" rel="external">Pngcsé¡¹ç›®åœ°å€</a><br>æˆ‘çŒœä¸»åœºæ™¯çš„å›¾ç‰‡åº”è¯¥åœ¨ä¸åœçš„è¯»å†™ï¼Œè¿™æ ·æ¯”ç”Ÿæˆ10000*10000çš„è´´å›¾æ•ˆç‡é«˜çš„å¤šã€‚</p>
<h1 id="å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨"><a href="#å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨" class="headerlink" title="å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨"></a>å†…éƒ¨å¼•ç”¨æ’ä»¶åˆ—è¡¨</h1><h2 id="Node-Editor-Framework"><a href="#Node-Editor-Framework" class="headerlink" title="Node_Editor_Framework"></a>Node_Editor_Framework</h2><p>èŠ‚ç‚¹ç¼–è¾‘å™¨ ç»è¿‡æºç æ¯”å¯¹ klei æ‹¿è¿™ä¸ªæºç è‡ªå·±æ”¹äº†ä¸€ç‰ˆï¼Œä¸è¿‡ç¡®å®ä½¿ç”¨äº†è¿™ä¸ªé¡¹ç›® <a href="https://github.com/Seneral/Node_Editor_Framework" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="fmod-studio"><a href="#fmod-studio" class="headerlink" title="fmod.studio"></a>fmod.studio</h2><p>Unityå†…ç½®äº†AudioåŠŸèƒ½ï¼Œå¹¶ä¸”åº•å±‚ä¹Ÿæ˜¯ç”¨FMODæ¥å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä¸è¾åŠ³è‹¦å­¦ä¹ ä½¿ç”¨FMODæ’ä»¶æ¥è¿›è¡ŒéŸ³æ•ˆçš„ç®¡ç†ï¼Ÿ<br>-<a href="https://www.jianshu.com/p/586a5d465827" target="_blank" rel="external">FMODå­¦ä¹  - ç®€ä¹¦</a></p>
<h2 id="TMPro"><a href="#TMPro" class="headerlink" title="TMPro"></a>TMPro</h2><p>Meshå­—ä½“æ’ä»¶ <a href="https://www.assetstore.unity3d.com/en/#!/content/84126" target="_blank" rel="external">AssetStoreåœ°å€</a></p>
<h2 id="procgen"><a href="#procgen" class="headerlink" title="procgen"></a>procgen</h2><p>ç¨‹åºä¸Šå®ç°å™ªå£°ç®—æ³• <a href="https://github.com/trentpolack/procgen" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="å›¾å½¢å­¦æ’ä»¶"><a href="#å›¾å½¢å­¦æ’ä»¶" class="headerlink" title="å›¾å½¢å­¦æ’ä»¶"></a>å›¾å½¢å­¦æ’ä»¶</h2><h3 id="Delaunay"><a href="#Delaunay" class="headerlink" title="Delaunay"></a>Delaunay</h3><p>ä¸‰è§’å½¢ç ´è£‚ç®—æ³• åœ¨githubä¸Šæœè¿™ä¸ªå…³é”®å­—å°±å¥½äº†</p>
<h3 id="ClipperLib"><a href="#ClipperLib" class="headerlink" title="ClipperLib"></a>ClipperLib</h3><p>å¤šè¾¹å½¢åç§»è£åˆ‡ç®—æ³• <a href="http://www.angusj.com/delphi/clipper.php" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h3 id="MIConvexHull"><a href="#MIConvexHull" class="headerlink" title="MIConvexHull"></a>MIConvexHull</h3><p>å¯ä»¥ç”Ÿæˆ2ã€3ç»´çš„æœ€å°å‡¸åŒ…ã€‚å¯ä»¥è¿›è¡Œç‹„æ´›å°¼ä¸‰è§’å‰–åˆ†ï¼Œç”ŸæˆVoronoiå¤šè¾¹å½¢ã€‚<br><a href="https://github.com/DesignEngrLab/MIConvexHull" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h3 id="Voronoi-Tree"><a href="#Voronoi-Tree" class="headerlink" title="Voronoi Tree"></a>Voronoi Tree</h3><p>æ³°æ£®å¤šè¾¹å½¢<br><a href="https://en.m.wikipedia.org/wiki/Voronoi_diagram" target="_blank" rel="external">ç®—æ³•ç®€ä»‹</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å…ƒæ—¦æœŸé—´ç©äº†ç¼ºæ°§ï¼Œæ„Ÿè§‰ååˆ†çš„å¥½ç©ã€‚å±äºæ·±åº¦æ²™ç›’ç»è¥ç±»æ¸¸æˆã€‚æ—¢ç„¶å¥½ç©é‚£å°±è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»Šå¤©æŠ½ç©ºçœ‹äº†çœ‹æºç ï¼ŒåŸºæœ¬ä¸Šåˆ—å‡ºæ‰€æœ‰èƒ½æ‰¾åˆ°çš„å·¥å…·æˆ–æŠ€æœ¯ã€‚ç®—æ˜¯ä¸€ä¸ªè®°å½•ï¼Œä¹Ÿå¼€é˜”ä¸€ä¸‹è§†é‡ã€‚å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆè¡¥å……æ¬¢è¿ç»™æˆ‘ç•™è¨€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="æºç åˆ†æ" scheme="http://vrast.cn/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="ç¼ºæ°§æºç åˆ†æ" scheme="http://vrast.cn/tags/%E7%BC%BA%E6%B0%A7%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è·å–AgentTypeID</title>
    <link href="http://vrast.cn/posts/9ad4f6c3/"/>
    <id>http://vrast.cn/posts/9ad4f6c3/</id>
    <published>2017-12-22T14:25:55.000Z</published>
    <updated>2017-12-22T14:35:38.761Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å‰é˜µå­æˆ‘åœ¨Githubä¸Šç»™Unityå›¢é˜Ÿæäº†ä¸€ä¸ªissueå…³äºä½¿ç”¨ä»£ç è·å–<code>agentTypeID</code>ï¼Œè¯´æ¥æƒ­æ„§æ˜¯æˆ‘è‡ªå·±çš„æ²¡æ‰¾åˆ°å¯¹åº”çš„ä»£ç ã€‚åœ¨æˆ‘ä½¿ç”¨å¦å¤–æ¸ é“è·å–æ­¤IDçš„æ—¶å€™ Unityå›¢é˜Ÿå·²ç»é»˜é»˜ç»™æˆ‘å›å¤äº†è¿™ä¸ªissues.å…ˆè¯´è¯´æˆ‘çš„è§£å†³æ–¹å¼ï¼Œç”±äºä»£ç è®¾ç½® agentTypeID çš„æ—¶å€™éœ€è¦ç»™ä¸€ä¸ªIntç±»å‹å˜é‡ï¼Œè¿™ä¸ªå˜é‡å…¶å®æ˜¯å¯¹åº”äº†ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘åœ¨UnityEditor Inspectorçš„Debugçª—å£ä¸­ç›´æ¥è·å–äº†å¯¹åº”AgentTypeID. ç¬‘. æœ¬æ–‡è®°å½•æˆ‘è·å¾—ç­”å¤çš„è¿‡ç¨‹ï¼Œæ¢ä¸ªè§’åº¦æƒ³æƒ³å…¶å®ä¹Ÿèƒ½å‘ç°å¦å¤–çš„è§£å†³æ–¹æ¡ˆå³ä½¿ä¸çŸ¥é“ä¹Ÿæ²¡å…³ç³»<br>ã€‚</p>
</blockquote>
<p><img src="/uploads/navmeshagentid.png" alt="è§£å†³æ–¹æ¡ˆ"></p>
<a id="more"></a>
<h1 id="å›¾ä¸­çš„ä»£ç å¦‚ä¸‹"><a href="#å›¾ä¸­çš„ä»£ç å¦‚ä¸‹" class="headerlink" title="å›¾ä¸­çš„ä»£ç å¦‚ä¸‹"></a>å›¾ä¸­çš„ä»£ç å¦‚ä¸‹</h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> count = NavMesh.GetSettingsCount();</div><div class="line"><span class="keyword">var</span> agentTypeNames = <span class="keyword">new</span> <span class="keyword">string</span>[count + <span class="number">2</span>];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> id = NavMesh.GetSettingsByIndex(i).agentTypeID;</div><div class="line">    <span class="keyword">var</span> name = NavMesh.GetSettingsNameFromID(id);</div><div class="line">    agentTypeNames[i] = name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å‰é˜µå­æˆ‘åœ¨Githubä¸Šç»™Unityå›¢é˜Ÿæäº†ä¸€ä¸ªissueå…³äºä½¿ç”¨ä»£ç è·å–&lt;code&gt;agentTypeID&lt;/code&gt;ï¼Œè¯´æ¥æƒ­æ„§æ˜¯æˆ‘è‡ªå·±çš„æ²¡æ‰¾åˆ°å¯¹åº”çš„ä»£ç ã€‚åœ¨æˆ‘ä½¿ç”¨å¦å¤–æ¸ é“è·å–æ­¤IDçš„æ—¶å€™ Unityå›¢é˜Ÿå·²ç»é»˜é»˜ç»™æˆ‘å›å¤äº†è¿™ä¸ªissues.å…ˆè¯´è¯´æˆ‘çš„è§£å†³æ–¹å¼ï¼Œç”±äºä»£ç è®¾ç½® agentTypeID çš„æ—¶å€™éœ€è¦ç»™ä¸€ä¸ªIntç±»å‹å˜é‡ï¼Œè¿™ä¸ªå˜é‡å…¶å®æ˜¯å¯¹åº”äº†ä¸€ä¸ªæšä¸¾ï¼Œæˆ‘åœ¨UnityEditor Inspectorçš„Debugçª—å£ä¸­ç›´æ¥è·å–äº†å¯¹åº”AgentTypeID. ç¬‘. æœ¬æ–‡è®°å½•æˆ‘è·å¾—ç­”å¤çš„è¿‡ç¨‹ï¼Œæ¢ä¸ªè§’åº¦æƒ³æƒ³å…¶å®ä¹Ÿèƒ½å‘ç°å¦å¤–çš„è§£å†³æ–¹æ¡ˆå³ä½¿ä¸çŸ¥é“ä¹Ÿæ²¡å…³ç³»&lt;br&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/navmeshagentid.png&quot; alt=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="NavmeshAgent" scheme="http://vrast.cn/tags/NavmeshAgent/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰ç»´å‘é‡æ›²çº¿å¹³æ»‘ç®—æ³•</title>
    <link href="http://vrast.cn/posts/7a035f20/"/>
    <id>http://vrast.cn/posts/7a035f20/</id>
    <published>2017-12-22T02:37:36.000Z</published>
    <updated>2017-12-22T14:37:40.822Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªå¹³æ»‘ç®—æ³•ï¼Œå¾ˆå¥½ç”¨ï¼Œç»è¿‡æˆ‘æµ‹è¯• æ•ˆç‡å¾ˆé«˜ï¼ŒChaikin å‡½æ•°è°ƒç”¨2-3æ¬¡ä¼šè·å¾—ä¸€ä¸ªç›¸å¯¹è¾ƒå¥½çš„æ›²çº¿ã€‚<a href="http://graphics.cs.ucdavis.edu/education/CAGDNotes/Chaikins-Algorithm/Chaikins-Algorithm.html" target="_blank" rel="external">ç®—æ³•é“¾æ¥</a><br>åŸç†æ˜¯ä¸æ–­çš„è£åˆ‡ä¸‰è§’å½¢è®©å…¶åˆ†è£‚æˆ2ä¸ªä¸‰è§’ï¼Œ2ä¸ªä¸‰è§’å˜æˆ4ä¸ªï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆä¼šè¶Šæ¥è¶Šå¹³æ»‘ä»è€Œæ¥è¿‘ä¸€ä¸ªåœ†ã€‚</p>
</blockquote>
<p><img src="/uploads/chaikin_algorithm.png" alt="è£åˆ‡èŒƒä¾‹"></p>
<a id="more"></a>
<p>å¹³æ»‘ç®—æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"></div><div class="line">[RequireComponent(<span class="keyword">typeof</span>(LineRenderer))]</div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SmoothAlgorithm</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> minRadius = <span class="number">1.5</span>f;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> maxRadius = <span class="number">3.5</span>f;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">25</span>;</div><div class="line">    <span class="keyword">private</span> LineRenderer lr;</div><div class="line">    <span class="keyword">private</span> Vector3[] points;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        lr = GetComponent&lt;LineRenderer&gt;();</div><div class="line">        GenerateRandomPath();</div><div class="line">        SetLR(points);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">GenerateRandomPath</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        points = <span class="keyword">new</span> Vector3[num];</div><div class="line"></div><div class="line">        <span class="keyword">float</span> angle = <span class="number">360.0</span>f / num;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)</div><div class="line">        &#123;</div><div class="line">            points[i] = Quaternion.AngleAxis((angle * i), Vector3.forward) * Vector3.up * Random.Range(minRadius, maxRadius);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SetLR</span>(<span class="params">Vector3[] pts</span>)</span></div><div class="line">    &#123;</div><div class="line">        lr.SetVertexCount(pts.Length);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pts.Length; i++)</div><div class="line">        &#123;</div><div class="line">            lr.SetPosition(i, pts[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Space))</div><div class="line">        &#123;</div><div class="line">            points = Chaikin(points);</div><div class="line">            SetLR(points);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.G))</div><div class="line">        &#123;</div><div class="line">            GenerateRandomPath();</div><div class="line">            SetLR(points);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function">Vector3[] <span class="title">Chaikin</span>(<span class="params">Vector3[] pts</span>)</span></div><div class="line">    &#123;</div><div class="line">        Vector3[] newPts = <span class="keyword">new</span> Vector3[(pts.Length - <span class="number">2</span>) * <span class="number">2</span> + <span class="number">2</span>];</div><div class="line">        newPts[<span class="number">0</span>] = pts[<span class="number">0</span>];</div><div class="line">        newPts[newPts.Length - <span class="number">1</span>] = pts[pts.Length - <span class="number">1</span>];</div><div class="line"></div><div class="line">        <span class="keyword">int</span> j = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pts.Length - <span class="number">2</span>; i++)</div><div class="line">        &#123;</div><div class="line">            newPts[j] = pts[i] + (pts[i + <span class="number">1</span>] - pts[i]) * <span class="number">0.75</span>f;</div><div class="line">            newPts[j + <span class="number">1</span>] = pts[i + <span class="number">1</span>] + (pts[i + <span class="number">2</span>] - pts[i + <span class="number">1</span>]) * <span class="number">0.25</span>f;</div><div class="line">            j += <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> newPts;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªå¹³æ»‘ç®—æ³•ï¼Œå¾ˆå¥½ç”¨ï¼Œç»è¿‡æˆ‘æµ‹è¯• æ•ˆç‡å¾ˆé«˜ï¼ŒChaikin å‡½æ•°è°ƒç”¨2-3æ¬¡ä¼šè·å¾—ä¸€ä¸ªç›¸å¯¹è¾ƒå¥½çš„æ›²çº¿ã€‚&lt;a href=&quot;http://graphics.cs.ucdavis.edu/education/CAGDNotes/Chaikins-Algorithm/Chaikins-Algorithm.html&quot;&gt;ç®—æ³•é“¾æ¥&lt;/a&gt;&lt;br&gt;åŸç†æ˜¯ä¸æ–­çš„è£åˆ‡ä¸‰è§’å½¢è®©å…¶åˆ†è£‚æˆ2ä¸ªä¸‰è§’ï¼Œ2ä¸ªä¸‰è§’å˜æˆ4ä¸ªï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆä¼šè¶Šæ¥è¶Šå¹³æ»‘ä»è€Œæ¥è¿‘ä¸€ä¸ªåœ†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/chaikin_algorithm.png&quot; alt=&quot;è£åˆ‡èŒƒä¾‹&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Math" scheme="http://vrast.cn/categories/Math/"/>
    
    
      <category term="ç®—æ³•" scheme="http://vrast.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ç‰©ç†æ£€æµ‹èŒƒå›´ä¸è·ç¦»å†…çš„ç›®æ ‡</title>
    <link href="http://vrast.cn/posts/e0406d64/"/>
    <id>http://vrast.cn/posts/e0406d64/</id>
    <published>2017-12-16T16:30:27.000Z</published>
    <updated>2017-12-17T11:43:39.078Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>åˆ†äº«ä¸€ä¸ªæŠ€å›´æ£€æµ‹è„šæœ¬ï¼Œç”¨æ¥åˆ¤å®šèŒƒå›´å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œæˆ–è€…æ˜¯çº¿æ€§èŒƒå›´å†…æ˜¯å¦å¯è§ç›®æ ‡ã€‚</p>
</blockquote>
<p><img src="/uploads/ScreenShot2017-12-17.png" alt="ç®€æ´èŒƒå›´æ£€æµ‹"><br><a id="more"></a></p>
<h1 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CheckSkillRange</span> : <span class="title">MonoBehaviour</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">public</span> Vector3 offset = Vector3.one;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">float</span> fieldOfViewAngle = <span class="number">20</span>;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">float</span> viewDistance = <span class="number">4</span>;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">bool</span> usePhysics2D = <span class="literal">false</span>;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> LayerMask ObjLayer = LayerMask.GetMask(<span class="string">"Default"</span>);</div><div class="line">  <span class="keyword">public</span> LayerMask IgnoreLayer = <span class="number">1</span>;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">if</span> (Input.GetMouseButtonUp(<span class="number">1</span>))</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">var</span> o = MovementUtility.WithinSight(transform, offset, fieldOfViewAngle, viewDistance, ObjLayer, Vector3.zero, IgnoreLayer);</div><div class="line">      <span class="keyword">if</span> (o)</div><div class="line">      &#123;</div><div class="line">        Debug.Log(<span class="keyword">string</span>.Format(<span class="string">"Attack obj &#123;0&#125;"</span>, o.name));</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">// Draw the line of sight representation within the scene window</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">    DrawLineOfSight(<span class="keyword">this</span>.transform, offset, fieldOfViewAngle, viewDistance, usePhysics2D);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawLineOfSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, <span class="keyword">bool</span> usePhysics2D</span>)</span></div><div class="line">  &#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> UNITY_EDITOR</span></div><div class="line">    <span class="keyword">var</span> oldColor = UnityEditor.Handles.color;</div><div class="line">    <span class="keyword">var</span> color = Color.yellow;</div><div class="line">    color.a = <span class="number">0.1</span>f;</div><div class="line">    UnityEditor.Handles.color = color;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> halfFOV = fieldOfViewAngle * <span class="number">0.5</span>f;</div><div class="line">    <span class="keyword">var</span> beginDirection = Quaternion.AngleAxis(-halfFOV, (usePhysics2D ? Vector3.forward : Vector3.up)) * (usePhysics2D ? transform.up : transform.forward);</div><div class="line">    UnityEditor.Handles.DrawSolidArc(transform.TransformPoint(positionOffset), (usePhysics2D ? transform.forward : transform.up), beginDirection, fieldOfViewAngle, viewDistance);</div><div class="line"></div><div class="line">    UnityEditor.Handles.color = oldColor;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰-æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹"><a href="#æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰-æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹" class="headerlink" title="æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰,æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹"></a>æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ç‰©ç†æ£€æµ‹è·ç¦»ç›®æ ‡ç­‰,æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†ç¢°æ’æ£€æµ‹</h1><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MovementUtility</span></div><div class="line">&#123;</div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// Static Fields</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Dictionary&lt;GameObject, AudioSource[]&gt; transformAudioSourceMap;</div><div class="line"></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// Static Methods</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawLineOfSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> angleOffset, <span class="keyword">float</span> viewDistance, <span class="keyword">bool</span> usePhysics2D</span>)</span></div><div class="line">  &#123;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> AudioSource[] <span class="title">GetAudioSources</span>(<span class="params">GameObject target</span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">bool</span> flag = MovementUtility.transformAudioSourceMap == <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      MovementUtility.transformAudioSourceMap = <span class="keyword">new</span> Dictionary&lt;GameObject, AudioSource[]&gt;();</div><div class="line">    &#125;</div><div class="line">    AudioSource[] componentsInChildren;</div><div class="line">    <span class="keyword">bool</span> flag2 = MovementUtility.transformAudioSourceMap.TryGetValue(target, <span class="keyword">out</span> componentsInChildren);</div><div class="line">    AudioSource[] result;</div><div class="line">    <span class="keyword">if</span> (flag2)</div><div class="line">    &#123;</div><div class="line">      result = componentsInChildren;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">      componentsInChildren = target.GetComponentsInChildren&lt;AudioSource&gt;();</div><div class="line">      MovementUtility.transformAudioSourceMap.Add(target, componentsInChildren);</div><div class="line">      result = componentsInChildren;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">LineOfSight</span>(<span class="params">Transform transform, Vector3 positionOffset, GameObject targetObject, Vector3 targetOffset, <span class="keyword">bool</span> usePhysics2D, <span class="keyword">int</span> ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result;</div><div class="line">    <span class="keyword">if</span> (usePhysics2D)</div><div class="line">    &#123;</div><div class="line">      RaycastHit2D raycastHit2D;</div><div class="line">      <span class="keyword">bool</span> flag = raycastHit2D = Physics2D.Linecast(transform.TransformPoint(positionOffset), targetObject.transform.TransformPoint(targetOffset), ~ignoreLayerMask);</div><div class="line">      <span class="keyword">if</span> (flag)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">bool</span> flag2 = raycastHit2D.transform.IsChildOf(targetObject.transform) || targetObject.transform.IsChildOf(raycastHit2D.transform);</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          result = targetObject;</div><div class="line">          <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">      RaycastHit raycastHit;</div><div class="line"></div><div class="line">      <span class="keyword">bool</span> flag3 = Physics.Linecast(transform.TransformPoint(positionOffset), targetObject.transform.TransformPoint(targetOffset), <span class="keyword">out</span> raycastHit, ~ignoreLayerMask);</div><div class="line">      <span class="keyword">if</span> (flag3)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">bool</span> flag4 = raycastHit.transform.IsChildOf(targetObject.transform) || targetObject.transform.IsChildOf(raycastHit.transform);</div><div class="line">        <span class="keyword">if</span> (flag4)</div><div class="line">        &#123;</div><div class="line">          result = targetObject;</div><div class="line">          <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    result = <span class="literal">null</span>;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinHearingRange2D</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> audibilityThreshold, <span class="keyword">float</span> hearingRadius, LayerMask objectLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result = <span class="literal">null</span>;</div><div class="line">    Collider2D[] array = Physics2D.OverlapCircleAll(transform.TransformPoint(positionOffset), hearingRadius, objectLayerMask);</div><div class="line">    <span class="keyword">bool</span> flag = array != <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">float</span> num = <span class="number">0</span>f;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">float</span> num2 = <span class="number">0</span>f;</div><div class="line">        GameObject gameObject;</div><div class="line">        <span class="keyword">bool</span> flag2 = (gameObject = MovementUtility.WithinHearingRange(transform, positionOffset, audibilityThreshold, array[i].gameObject, <span class="keyword">ref</span> num2)) != <span class="literal">null</span>;</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          <span class="keyword">bool</span> flag3 = num2 &gt; num;</div><div class="line">          <span class="keyword">if</span> (flag3)</div><div class="line">          &#123;</div><div class="line">            num = num2;</div><div class="line">            result = gameObject;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, LayerMask objectLayerMask, Vector3 targetOffset, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result = <span class="literal">null</span>;</div><div class="line">    Collider[] array = Physics.OverlapSphere(transform.position, viewDistance, objectLayerMask);</div><div class="line">    <span class="keyword">bool</span> flag = array != <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">float</span> num = <span class="keyword">float</span>.PositiveInfinity;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">float</span> num2;</div><div class="line">        GameObject gameObject;</div><div class="line">        <span class="keyword">bool</span> flag2 = (gameObject = MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, array[i].gameObject, targetOffset, <span class="literal">false</span>, <span class="number">0</span>f, <span class="keyword">out</span> num2, ignoreLayerMask)) != <span class="literal">null</span>;</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          <span class="keyword">bool</span> flag3 = num2 &lt; num;</div><div class="line">          <span class="keyword">if</span> (flag3)</div><div class="line">          &#123;</div><div class="line">            num = num2;</div><div class="line">            result = gameObject;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, GameObject targetObject, Vector3 targetOffset, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">float</span> num;</div><div class="line">    <span class="keyword">return</span> MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, targetObject, targetOffset, <span class="literal">false</span>, <span class="number">0</span>f, <span class="keyword">out</span> num, ignoreLayerMask);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, GameObject targetObject, Vector3 targetOffset, <span class="keyword">bool</span> usePhysics2D, <span class="keyword">float</span> angleOffset2D, <span class="keyword">out</span> <span class="keyword">float</span> angle, <span class="keyword">int</span> ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    Vector3 vector = targetObject.transform.position - transform.TransformPoint(positionOffset);</div><div class="line">    <span class="keyword">if</span> (usePhysics2D)</div><div class="line">    &#123;</div><div class="line">      angle = Vector3.Angle(vector, transform.up) + angleOffset2D;</div><div class="line">      vector.z = <span class="number">0</span>f;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">      angle = Vector3.Angle(vector, transform.forward);</div><div class="line">      vector.y = <span class="number">0</span>f;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> flag = vector.magnitude &lt; viewDistance &amp;&amp; angle &lt; fieldOfViewAngle * <span class="number">0.5</span>f;</div><div class="line">    GameObject result;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">bool</span> flag2 = MovementUtility.LineOfSight(transform, positionOffset, targetObject, targetOffset, usePhysics2D, ignoreLayerMask) != <span class="literal">null</span>;</div><div class="line">      <span class="keyword">if</span> (flag2)</div><div class="line">      &#123;</div><div class="line">        result = targetObject;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">bool</span> flag3 = targetObject.GetComponent&lt;Collider&gt;() == <span class="literal">null</span> &amp;&amp; targetObject.GetComponent&lt;Collider2D&gt;() == <span class="literal">null</span>;</div><div class="line">      <span class="keyword">if</span> (flag3)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">bool</span> activeSelf = targetObject.gameObject.activeSelf;</div><div class="line">        <span class="keyword">if</span> (activeSelf)</div><div class="line">        &#123;</div><div class="line">          result = targetObject;</div><div class="line">          <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    result = <span class="literal">null</span>;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight2D</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, LayerMask objectLayerMask, Vector3 targetOffset, <span class="keyword">float</span> angleOffset2D, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    GameObject result = <span class="literal">null</span>;</div><div class="line">    Collider2D[] array = Physics2D.OverlapCircleAll(transform.position, viewDistance, objectLayerMask);</div><div class="line">    <span class="keyword">bool</span> flag = array != <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (flag)</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">float</span> num = <span class="keyword">float</span>.PositiveInfinity;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</div><div class="line">      &#123;</div><div class="line">        <span class="keyword">float</span> num2;</div><div class="line">        GameObject gameObject;</div><div class="line">        <span class="keyword">bool</span> flag2 = (gameObject = MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, array[i].gameObject, targetOffset, <span class="literal">true</span>, angleOffset2D, <span class="keyword">out</span> num2, ignoreLayerMask)) != <span class="literal">null</span>;</div><div class="line">        <span class="keyword">if</span> (flag2)</div><div class="line">        &#123;</div><div class="line">          <span class="keyword">bool</span> flag3 = num2 &lt; num;</div><div class="line">          <span class="keyword">if</span> (flag3)</div><div class="line">          &#123;</div><div class="line">            num = num2;</div><div class="line">            result = gameObject;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GameObject <span class="title">WithinSight2D</span>(<span class="params">Transform transform, Vector3 positionOffset, <span class="keyword">float</span> fieldOfViewAngle, <span class="keyword">float</span> viewDistance, GameObject targetObject, Vector3 targetOffset, <span class="keyword">float</span> angleOffset2D, LayerMask ignoreLayerMask</span>)</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">float</span> num;</div><div class="line">    <span class="keyword">return</span> MovementUtility.WithinSight(transform, positionOffset, fieldOfViewAngle, viewDistance, targetObject, targetOffset, <span class="literal">true</span>, angleOffset2D, <span class="keyword">out</span> num, ignoreLayerMask);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ†äº«ä¸€ä¸ªæŠ€å›´æ£€æµ‹è„šæœ¬ï¼Œç”¨æ¥åˆ¤å®šèŒƒå›´å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œæˆ–è€…æ˜¯çº¿æ€§èŒƒå›´å†…æ˜¯å¦å¯è§ç›®æ ‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/ScreenShot2017-12-17.png&quot; alt=&quot;ç®€æ´èŒƒå›´æ£€æµ‹&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="Physics" scheme="http://vrast.cn/tags/Physics/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³NavmeshAgentå¯»è·¯è¾¹ç•Œçš„åˆ¤å®š</title>
    <link href="http://vrast.cn/posts/e53ade9f/"/>
    <id>http://vrast.cn/posts/e53ade9f/</id>
    <published>2017-12-15T14:36:00.000Z</published>
    <updated>2017-12-22T14:26:08.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä»Šå¤©ç¾¤é‡Œæœ‰å…„å¼Ÿé—®: â€œæˆ‘çœ‹åˆ°navmeshagenté‡Œé¢æœ‰ä¸ªæ–¹æ³•å«ä»€ä¹ˆè·å–ç½‘æ ¼è¾¹ç¼˜ç‚¹çš„ï¼Œæˆ‘æ‰“ç®—é¦–å…ˆåˆ¤æ–­ç›®æ ‡ç‚¹åœ¨ä¸åœ¨ç½‘æ ¼ä¸Šã€‚åœ¨çš„è¯æ­£å¸¸é€»è¾‘ï¼Œä¸åœ¨çš„è¯åˆ¤æ–­å½“å‰agentçš„ä½ç½®æœ‰æ²¡æœ‰åˆ°é‚£ä¸ªè¾¹ç¼˜ç‚¹ â€œ ã€‚æˆ‘æƒ³è¿™æ ·åº”è¯¥èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<p><img src="/uploads/FC9B64C1057D31F1B4692EF0EC22A08B.jpg" alt="è§£å†³è¾¹ç•Œç‚¹çš„åˆ¤å®š"></p>
<a id="more"></a>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">1</span>))</div><div class="line">&#123;</div><div class="line">    NavMeshHit hit;</div><div class="line">    NavMesh.Raycast(transform.position, target.position, <span class="keyword">out</span> hit, <span class="number">1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (hit.hit)</div><div class="line">    &#123;</div><div class="line">        NavMeshPath path = <span class="keyword">new</span> NavMeshPath();</div><div class="line">        <span class="keyword">if</span> (agent.CalculatePath(hit.position, path))</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">var</span> pos = path.corners[path.corners.Length - <span class="number">1</span>];</div><div class="line">            <span class="keyword">var</span> o = GameObject.CreatePrimitive(PrimitiveType.Sphere);</div><div class="line">            o.transform.localScale = Vector3.one * <span class="number">0.1</span>f;</div><div class="line">            o.transform.position = pos;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©ç¾¤é‡Œæœ‰å…„å¼Ÿé—®: â€œæˆ‘çœ‹åˆ°navmeshagenté‡Œé¢æœ‰ä¸ªæ–¹æ³•å«ä»€ä¹ˆè·å–ç½‘æ ¼è¾¹ç¼˜ç‚¹çš„ï¼Œæˆ‘æ‰“ç®—é¦–å…ˆåˆ¤æ–­ç›®æ ‡ç‚¹åœ¨ä¸åœ¨ç½‘æ ¼ä¸Šã€‚åœ¨çš„è¯æ­£å¸¸é€»è¾‘ï¼Œä¸åœ¨çš„è¯åˆ¤æ–­å½“å‰agentçš„ä½ç½®æœ‰æ²¡æœ‰åˆ°é‚£ä¸ªè¾¹ç¼˜ç‚¹ â€œ ã€‚æˆ‘æƒ³è¿™æ ·åº”è¯¥èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/FC9B64C1057D31F1B4692EF0EC22A08B.jpg&quot; alt=&quot;è§£å†³è¾¹ç•Œç‚¹çš„åˆ¤å®š&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="NavmeshAgent" scheme="http://vrast.cn/tags/NavmeshAgent/"/>
    
  </entry>
  
  <entry>
    <title>High-level NavMesh Building Components</title>
    <link href="http://vrast.cn/posts/98dfcd51/"/>
    <id>http://vrast.cn/posts/98dfcd51/</id>
    <published>2017-12-07T12:49:15.000Z</published>
    <updated>2017-12-08T03:10:38.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>é«˜çº§ NavMesh ç»„ä»¶è¯´æ˜æ–‡æ¡£</p>
</blockquote>
<p>NavMesh Surface è„šæœ¬ ï¼Œåœ¨æ­¤ä¹‹å‰ æˆ‘çœ‹äº†ç½‘ç»œä¸Šçš„ä¸€ç¯‡ä»‹ç» <a href="http://forum.china.unity3d.com/thread-25421-1-1.html" target="_blank" rel="external">è¿›å‡»çš„æ–°ç‰ˆNavMeshç³»ç»Ÿï¼šçœ‹æˆ‘é£æªèµ°å£</a> æ•ˆæœéå¸¸å¥½ã€‚æˆ‘ä¸€è¾¹æµ‹è¯•ä¸€è¾¹è®°å½•å…³äºSurfaceçš„ç”¨æ³•ã€‚</p>
<p>NavMesh Surcefaç»„ä»¶è¡¨ç¤ºç‰¹å®šNavMeshAgentç±»å‹çš„å¯è¡Œèµ°åŒºåŸŸï¼Œå¹¶å®šä¹‰åº”è¯¥æ„å»ºNavMeshçš„åœºæ™¯çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>NavMesh Surfaceç»„ä»¶ä¸åœ¨æ ‡å‡†Unityå®‰è£…ä¸­; æœ‰å…³å¦‚ä½•è®¿é—®å®ƒçš„ä¿¡æ¯ï¼Œ<a href="https://docs.unity3d.com/Manual/class-NavMeshSurface.html" target="_blank" rel="external">è¯·å‚é˜…é«˜çº§NavMeshæ„å»ºç»„ä»¶çš„æ–‡æ¡£</a>ã€‚</p>
<p>è¦ä½¿ç”¨NavMesh Surfaceç»„ä»¶ï¼Œå¯¼èˆªåˆ°GameObject&gt; AI&gt; NavMesh Surfaceã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªç©ºçš„GameObjectï¼Œå¹¶é™„å¸¦ä¸€ä¸ªNavMesh Surfaceç»„ä»¶ã€‚ ä¸€ä¸ªåœºæ™¯å¯ä»¥åŒ…å«å¤šä¸ªNavMeshè¡¨é¢ã€‚</p>
<a id="more"></a>
<p><img src="/uploads/class-NavMeshSurface-0.png" alt="å—¯ å°±æ˜¯è¿™è´§äº†"></p>
<p><img src="/uploads/QQ20171207-161002@2x.png" alt="é’ˆå¯¹ä¸è¿™ä¸ªç»„ä»¶çš„ä½¿ç”¨è¯´æ˜"></p>
<p><img src="/uploads/QQ20171207-162319.png" alt="NavMesh Surfaceå‚æ•°è¯´æ˜"></p>
<blockquote>
<p>NavMesh Off-Link &amp;  Off-mesh-Link æˆ‘ä»¬é€šå¸¸ç”¨ç¬¬ä¸€ç§ã€‚åœ¨ä¸¤ä¸ªä¸å¯è¡Œèµ°åŒºåŸŸä¹‹é—´ ä½¿ç”¨è·¨è¶Šç‚¹+åŠ¨ç”» å®ç°å®šç‚¹è·³è·ƒã€‚</p>
</blockquote>
<p><img src="/uploads/QQ20171207-194954.png" alt="Off Link"><br><img src="/uploads/QQ20171207-195557.png" alt="Off Link"></p>
<blockquote>
<p>NavMesh Modifier &amp; NavMesh Modifier Volume åœ¨çƒ˜åŸ¹ä¹‹å‰ä¿®æ”¹åŒºåŸŸæ˜¯å¦è¡Œèµ°</p>
</blockquote>
<p>å…ˆè¯´ NavMesh Modifier volume,ä½ å¯ä»¥åœ¨çƒ˜åŸ¹ä¹‹å‰é€‰å®šåŒºåŸŸè®¾ç½®åŒºåŸŸç±»å‹ï¼Œä¾‹å­å°†æŸä¸ªAgentè®¾ç½®æˆè¯¥åŒºåŸŸä¸èƒ½è¡Œèµ°ã€‚</p>
<p><img src="/uploads/class-NavMesh-ModifierVolume-4.png" alt="NavMesh Modifier Volumeæ•ˆæœå›¾"></p>
<!-- more -->
<p><img src="/uploads/QQ20171207-193142@2x.png" alt="NavMesh Modifier Volumeä½¿ç”¨æ–¹æ³•"></p>
<p>å¦‚æœçŸ¥é“äº† NavMesh Modifier Volume é‚£ä¹ˆå¯ä»¥çŒœå¾—åˆ°  NavMesh Modifier å°±æ˜¯ç»™é™„ç€è¿™ä¸ªè„šæœ¬çš„meshä¸Šçš„åŒºåŸŸè®¾ç½®åŒºåŸŸç±»å‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;é«˜çº§ NavMesh ç»„ä»¶è¯´æ˜æ–‡æ¡£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;NavMesh Surface è„šæœ¬ ï¼Œåœ¨æ­¤ä¹‹å‰ æˆ‘çœ‹äº†ç½‘ç»œä¸Šçš„ä¸€ç¯‡ä»‹ç» &lt;a href=&quot;http://forum.china.unity3d.com/thread-25421-1-1.html&quot;&gt;è¿›å‡»çš„æ–°ç‰ˆNavMeshç³»ç»Ÿï¼šçœ‹æˆ‘é£æªèµ°å£&lt;/a&gt; æ•ˆæœéå¸¸å¥½ã€‚æˆ‘ä¸€è¾¹æµ‹è¯•ä¸€è¾¹è®°å½•å…³äºSurfaceçš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh Surcefaç»„ä»¶è¡¨ç¤ºç‰¹å®šNavMeshAgentç±»å‹çš„å¯è¡Œèµ°åŒºåŸŸï¼Œå¹¶å®šä¹‰åº”è¯¥æ„å»ºNavMeshçš„åœºæ™¯çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh Surfaceç»„ä»¶ä¸åœ¨æ ‡å‡†Unityå®‰è£…ä¸­; æœ‰å…³å¦‚ä½•è®¿é—®å®ƒçš„ä¿¡æ¯ï¼Œ&lt;a href=&quot;https://docs.unity3d.com/Manual/class-NavMeshSurface.html&quot;&gt;è¯·å‚é˜…é«˜çº§NavMeshæ„å»ºç»„ä»¶çš„æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¦ä½¿ç”¨NavMesh Surfaceç»„ä»¶ï¼Œå¯¼èˆªåˆ°GameObject&amp;gt; AI&amp;gt; NavMesh Surfaceã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªç©ºçš„GameObjectï¼Œå¹¶é™„å¸¦ä¸€ä¸ªNavMesh Surfaceç»„ä»¶ã€‚ ä¸€ä¸ªåœºæ™¯å¯ä»¥åŒ…å«å¤šä¸ªNavMeshè¡¨é¢ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="Navigation" scheme="http://vrast.cn/tags/Navigation/"/>
    
  </entry>
  
  <entry>
    <title>Building a NavMesh</title>
    <link href="http://vrast.cn/posts/33160c87/"/>
    <id>http://vrast.cn/posts/33160c87/</id>
    <published>2017-12-07T05:50:59.000Z</published>
    <updated>2017-12-07T08:58:46.123Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>åˆ›å»ºå¯¼èˆªç½‘æ ¼ä¸Unity2017é¢æ¿è¯¦ç»†å‚æ•°è¯´æ˜ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="åˆ›å»ºNavmesh-ä¸-Agent-è®¾ç½®"><a href="#åˆ›å»ºNavmesh-ä¸-Agent-è®¾ç½®" class="headerlink" title="åˆ›å»ºNavmesh ä¸ Agent è®¾ç½®"></a>åˆ›å»ºNavmesh ä¸ Agent è®¾ç½®</h1><p><img src="/uploads/NavMeshSetupObject.svg" alt="è®¾ç½®ç½‘æ ¼"></p>
<p><img src="/uploads/NavMeshSetupBake.svg" alt="è®¾ç½®ç½‘æ ¼çƒ˜ç„™"></p>
<blockquote>
<p>ä¸€äº›ä½ éœ€è¦çŸ¥é“çš„å‚æ•°</p>
</blockquote>
<ul>
<li>AgentåŠå¾„å®šä¹‰äº†Agentdçš„ä¸­å¿ƒå¯ä»¥é è¿‘å¢™å£æˆ–çª—å°çš„è·ç¦»ã€‚</li>
<li><p>Agent Radius defines how close the agent center can get to a wall or a ledge.</p>
</li>
<li><p>Agenté«˜åº¦å®šä¹‰Agentå¯ä»¥åˆ°è¾¾çš„ç©ºé—´æœ‰å¤šä½ã€‚</p>
</li>
<li><p>Agent Height defines how low the spaces are that the agent can reach.</p>
</li>
<li><p>æœ€å¤§å¡åº¦å®šä¹‰äº†Agentäººèµ°ä¸Šå¡é“çš„å¡åº¦ã€‚</p>
</li>
<li><p>Max Slope defines how steep the ramps are that the agent walk up.</p>
</li>
<li><p>å°é˜¶é«˜åº¦å®šä¹‰äº†Agentå¯ä»¥è¸©è¸çš„éšœç¢ç‰©çš„é«˜åº¦ã€‚</p>
</li>
<li>Step Height defines how high obstructions are that the agent can step on.</li>
</ul>
<p><img src="/uploads/NavMeshAsset.svg" alt="çƒ˜åŸ¹å¥½çš„ç½‘æ ¼ä¼šåœ¨Sceneçš„åŒåç›®å½•å†…"></p>
<blockquote>
<p>Navmesh bake é«˜çº§çƒ˜ç„™è®¾ç½®</p>
</blockquote>
<h1 id="Min-Region-Area"><a href="#Min-Region-Area" class="headerlink" title="Min Region Area"></a>Min Region Area</h1><p><img src="/uploads/NavMeshMinRegion.svg" alt="æœ€å°çƒ˜ç„™åŒºåŸŸï¼Œæœ€å°åŒºåŸŸé«˜çº§æ„å»ºè®¾ç½®å…è®¸æ‚¨æ¸…é™¤å°çš„æœªè¿æ¥çš„NavMeshåŒºåŸŸã€‚ æ¯”è¡¨é¢ç§¯å°äºæŒ‡å®šå€¼çš„NavMeshåŒºåŸŸå°†è¢«ç§»é™¤ã€‚"></p>
<h1 id="æ›´å°çš„ä»£ç†åŠå¾„"><a href="#æ›´å°çš„ä»£ç†åŠå¾„" class="headerlink" title="æ›´å°çš„ä»£ç†åŠå¾„"></a>æ›´å°çš„ä»£ç†åŠå¾„</h1><p>Voxel Size<br><img src="/uploads/QQ20171207-143312@2x.png" alt="ä½“ç´ å°ºå¯¸"></p>
<p>æ‰‹åŠ¨æ›´æ”¹ä½“ç´ å…è®¸æ‚¨æ›´æ”¹çƒ˜çƒ¤è¿‡ç¨‹çš„å‡†ç¡®æ€§ã€‚</p>
<p>NavMeshçƒ˜ç„™è¿‡ç¨‹ä½¿ç”¨ä½“ç´ åŒ–ä»ä»»æ„çº§åˆ«çš„å‡ ä½•æ„å»ºNavMeshã€‚ åœ¨ç®—æ³•çš„ç¬¬ä¸€éä¸­ï¼Œåœºæ™¯è¢«å…‰æ …åŒ–æˆä½“ç´ ï¼Œç„¶åæå–æ­¥è¡Œè¡¨é¢ï¼Œæœ€åå°†æ­¥è¿›è¡¨é¢å˜æˆå¯¼èˆªç½‘æ ¼ã€‚ ä½“ç´ å¤§å°æè¿°äº†ç”±æ­¤äº§ç”Ÿçš„NavMeshå¦‚ä½•å‡†ç¡®åœ°è¡¨ç¤ºåœºæ™¯å‡ ä½•ã€‚</p>
<p>é»˜è®¤ç²¾åº¦è®¾ç½®ä¸ºæ¯ä¸ªAgentåŠå¾„æœ‰3ä¸ªä½“ç´ ï¼Œå³æ•´ä¸ªAgentå®½åº¦ä¸º6ä¸ªä½“ç´ ã€‚ è¿™æ˜¯ç²¾åº¦å’Œçƒ˜çƒ¤é€Ÿåº¦ä¹‹é—´çš„è‰¯å¥½æŠ˜è¡·ã€‚ å°†ä½“ç´ å¤§å°å‡åŠä¼šä½¿å†…å­˜ä½¿ç”¨é‡å¢åŠ 4å€ï¼Œè€Œæ„å»ºåœºæ™¯éœ€è¦èŠ±è´¹4å€çš„æ—¶é—´ã€‚</p>
<p>NavMeshçƒ˜çƒ¤ç³»ç»Ÿä¹Ÿå°†å‡å°ä½“ç´ çš„å¤§å°ã€‚ å¦‚æœæ‚¨çš„å…¶ä»–Agentç»´åº¦ä¿æŒä¸å˜ï¼Œåˆ™å¯èƒ½ä¸éœ€è¦å¢åŠ NavMeshæ„å»ºåˆ†è¾¨ç‡ã€‚</p>
<p>æœ€ç®€å•çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>å°†AgentåŠå¾„è®¾ç½®ä¸ºå®é™…AgentåŠå¾„ã€‚<br>æ‰“å¼€æ‰‹åŠ¨ä½“ç´ å¤§å°ï¼Œè¿™å°†é‡‡å–å½“å‰ä½“ç´ å¤§å°å’Œâ€œå†»ç»“â€ã€‚<br>æ‰‹åŠ¨è®¾ç½®æ›´å°çš„AgentåŠå¾„ï¼Œå› ä¸ºæ‚¨å·²ç»é€‰ä¸­äº†æ‰‹åŠ¨ä½“ç´ å¤§å°ï¼Œä½“ç´ å¤§å°ä¸ä¼šæ”¹å˜ã€‚</p>
<h1 id="æ›´ç²¾ç¡®çš„NavMesh"><a href="#æ›´ç²¾ç¡®çš„NavMesh" class="headerlink" title="æ›´ç²¾ç¡®çš„NavMesh"></a>æ›´ç²¾ç¡®çš„NavMesh</h1><p>å¦‚æœä½ çš„å…³å¡æœ‰å¾ˆå¤šç´§å‡‘çš„ç‚¹ï¼Œä½ å¯èƒ½å¸Œæœ›é€šè¿‡ç¼©å°ä½“ç´ æ¥æé«˜å‡†ç¡®æ€§ã€‚ ä½“ç´ å¤§å°ä¸‹çš„æ ‡ç­¾æ˜¾ç¤ºä½“ç´ å¤§å°å’Œä»£ç†åŠå¾„ä¹‹é—´çš„å…³ç³»ã€‚ ä¸€ä¸ªåˆç†çš„èŒƒå›´æ˜¯2-8ä¹‹é—´ï¼Œè¿›ä¸€æ­¥ç¼©å°ä½“ç´ æ¯”é€šå¸¸ä¼šå¯¼è‡´éå¸¸é•¿çš„æ„å»ºæ—¶é—´ã€‚</p>
<p>å½“æ‚¨åœ¨æ¸¸æˆä¸­æœ‰æ„å»ºé€ èµ°å»Šæ—¶ï¼Œè¯·æ³¨æ„ï¼Œé™¤äº†ä»£ç†äººåŠå¾„ä¹‹å¤–ï¼Œæ‚¨è¿˜åº”è¯¥è‡³å°‘ä¿ç•™4 * åƒç´ å¤§å°çš„ç©ºé—´ï¼Œå°¤å…¶æ˜¯åœ¨èµ°å»Šå¤„äºè§’åº¦çš„æƒ…å†µä¸‹ã€‚<br>å¦‚æœæ‚¨éœ€è¦å°äºNavMeshçƒ˜çƒ¤æ”¯æŒçš„èµ°å»Šï¼Œè¯·è€ƒè™‘ä½¿ç”¨â€œOff-Linkâ€è·¨è¶Šç‚¹ã€‚ è¿™äº›è¿˜æœ‰é¢å¤–çš„å¥½å¤„ï¼Œå¯ä»¥åœ¨ä½¿ç”¨æ—¶æ£€æµ‹åˆ°ï¼Œä¾‹å¦‚å¯ä»¥æ’­æ”¾ç‰¹å®šçš„åŠ¨ç”»ã€‚</p>
<p>More Accurate NavMesh</p>
<p>If your level has a lot of tight spots, you may want to increase the accuracy by making the voxel smaller. The label under the Voxel Size shows the relation between the voxel size and Agent Radius. A good range is something between 2â€“8, going further than that generally results really long build times.</p>
<p>When you intentionally build tight corridors in your game, please note that you should leave at least 4 * voxelSize clearance in addition to the agent radius, especially if the corridors are at angles.</p>
<p>If you need smaller corridors than the NavMesh baking can support, please consider using Off-Mesh Links. These have the additional benefit that you can detect when they are being used and can, for example, play a specific animation.</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ›å»ºå¯¼èˆªç½‘æ ¼ä¸Unity2017é¢æ¿è¯¦ç»†å‚æ•°è¯´æ˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="Navigation" scheme="http://vrast.cn/tags/Navigation/"/>
    
  </entry>
  
  <entry>
    <title>Navigation System In Unity</title>
    <link href="http://vrast.cn/posts/671463f1/"/>
    <id>http://vrast.cn/posts/671463f1/</id>
    <published>2017-12-07T02:50:56.000Z</published>
    <updated>2017-12-07T08:08:03.795Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æ—¶é—´ä»“ä¿ƒï¼Œå¤§éƒ¨åˆ†é‡‡ç”¨googleæœºå™¨ç¿»è¯‘æ¥ä¸åŠå…¨éƒ¨æ ¡å¯¹ç¿»è¯‘æˆä¸­æ–‡èµ„æ–™ æœ¬ç¯‡ä½œä¸ºç¬”è®°ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸‹ã€‚è¿™ç¯‡æ˜¯è®°å½•Unity3Då¯»è·¯çš„å®˜æ–¹æ–‡æ¡£é˜…è¯»ä½“éªŒã€‚</p>
</blockquote>
<p>The Navigation System allows you to create characters which can navigate the game world. It gives your characters the ability to understand that they need to take stairs to reach second floor, or to jump to get over a ditch. The Unity NavMesh system consists of the following pieces:</p>
<p>Unity3dçš„å¯»è·¯ç³»ç»Ÿå¤§æ¦‚æœ‰ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<p>NavMeshï¼ˆå¯¼èˆªç½‘æ ¼çš„ç¼©å†™ï¼‰æ˜¯æè¿°æ¸¸æˆä¸–ç•Œçš„æ­¥è¡Œè¡¨é¢çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å…è®¸ä»æ¸¸æˆä¸–ç•Œä¸­çš„ä¸€ä¸ªæ­¥è¡Œä½ç½®åˆ°å¦ä¸€ä¸ªæ­¥è¡Œè·¯å¾„æ‰¾åˆ°è·¯å¾„ã€‚ æ•°æ®ç»“æ„æ˜¯çƒ˜ç„™çš„ç½‘æ ¼é‡Œè·å–çš„ã€‚</p>
<p>NavMesh (short for Navigation Mesh) is a data structure which describes the walkable surfaces of the game world and allows to find path from one walkable location to another in the game world. The data structure is built, or baked, automatically from your level geometry.</p>
<p>NavMesh Agentç»„ä»¶å¸®åŠ©æ‚¨åˆ›å»ºè§’è‰²ï¼Œåœ¨å‘ç›®æ ‡ç§»åŠ¨æ—¶é¿å¼€å½¼æ­¤ã€‚Agentä½¿ç”¨NavMeshç†è§£æ¸¸æˆä¸–ç•Œï¼Œä»–ä»¬çŸ¥é“å¦‚ä½•é¿å…å½¼æ­¤ä»¥åŠç§»åŠ¨éšœç¢ç‰©ã€‚<br>ç¦»ç½‘é“¾æ¥ç»„ä»¶å…è®¸æ‚¨åˆå¹¶æ— æ³•ä½¿ç”¨å¯èµ°è¡Œçš„æ›²é¢è¡¨ç¤ºçš„å¯¼èˆªå¿«æ·æ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œè·³è¿‡æ²Ÿæ¸ æˆ–æ …æ ï¼Œæˆ–è€…åœ¨èµ°è¿‡å®ƒä¹‹å‰æ‰“å¼€é—¨ï¼Œéƒ½å¯ä»¥è¢«æè¿°ä¸ºâ€œOff-meshâ€é“¾æ¥ã€‚</p>
<p>NavMesh Agent component help you to create characters which avoid each other while moving towards their goal. Agents reason about the game world using the NavMesh and they know how to avoid each other as well as moving obstacles.<br>Off-Mesh Link component allows you to incorporate navigation shortcuts which cannot be represented using a walkable surface. For example, jumping over a ditch or a fence, or opening a door before walking through it, can be all described as Off-mesh links.</p>
<p>NavMeshéšœç¢ç»„ä»¶å…è®¸æ‚¨æè¿°Agentåœ¨èˆªè¡Œä¸–ç•Œæ—¶åº”é¿å…çš„ç§»åŠ¨éšœç¢ã€‚ ç‰©ç†ç³»ç»Ÿæ§åˆ¶çš„ä¸€ä¸ªæ¡¶æˆ–ä¸€ä¸ªç®±å­æ˜¯ä¸€ä¸ªéšœç¢çš„å¥½ä¾‹å­ã€‚ å½“éšœç¢ç‰©ç§»åŠ¨æ—¶ï¼Œéšœç¢ç‰©å°½åŠ›é¿å¼€å®ƒï¼Œä½†æ˜¯ä¸€æ—¦éšœç¢ç‰©å˜å¾—é™æ­¢ï¼Œå®ƒå°†åœ¨å¯¼èˆªç½‘ä¸ŠæŒ–ä¸€ä¸ªæ´ï¼Œä½¿å¾—éšœç¢ç‰©å¯ä»¥æ”¹å˜å®ƒä»¬çš„è·¯å¾„æ¥ç»•è¿‡éšœç¢ç‰©ï¼Œæˆ–è€…å¦‚æœéšœç¢ç‰©å¦¨ç¢è·¯å¾„ æ–¹å¼ï¼ŒAgentå¯ä»¥æ‰¾åˆ°ä¸åŒçš„è·¯çº¿ã€‚</p>
<p>NavMesh Obstacle component allows you to describe moving obstacles the agents should avoid while navigating the world. A barrel or a crate controlled by the physics system is a good example of an obstacle. While the obstacle is moving the agents do their best to avoid it, but once the obstacle becomes stationary it will carve a hole in the navmesh so that the agents can change their paths to steer around it, or if the stationary obstacle is blocking the path way, the agents can find a different route.</p>
<a id="more"></a>
<h1 id="Inner-Workings-of-the-Navigation-System-Navigationçš„å·¥ä½œåŸç†"><a href="#Inner-Workings-of-the-Navigation-System-Navigationçš„å·¥ä½œåŸç†" class="headerlink" title="Inner Workings of the Navigation System / Navigationçš„å·¥ä½œåŸç†"></a>Inner Workings of the Navigation System / Navigationçš„å·¥ä½œåŸç†</h1><p>å½“ä½ æƒ³æ™ºèƒ½åœ°ç§»åŠ¨ä½ çš„æ¸¸æˆä¸­çš„è§’è‰²ï¼ˆæˆ–è€…åœ¨AIåœˆå­ä¸­è¢«ç§°ä¸ºAgentï¼‰æ—¶ï¼Œä½ å¿…é¡»è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼šå¦‚ä½•æ¨ç†å…³å¡ä»¥æ‰¾åˆ°ç›®çš„åœ°ï¼Œç„¶åå¦‚ä½•ç§»åŠ¨åˆ°é‚£é‡Œã€‚ è¿™ä¸¤ä¸ªé—®é¢˜ç´§å¯†ç»“åˆåœ¨ä¸€èµ·ï¼Œä½†æ€§è´¨å´æˆªç„¶ä¸åŒã€‚ å…³äºå±‚æ¬¡çš„æ¨ç†é—®é¢˜æ›´åŠ å…¨å±€åŒ–å’Œé™æ€åŒ–ï¼Œå› ä¸ºå®ƒè€ƒè™‘äº†æ•´ä¸ªåœºæ™¯ã€‚ ç§»åŠ¨åˆ°ç›®çš„åœ°æ›´å…·å±€éƒ¨æ€§å’ŒåŠ¨æ€æ€§ï¼Œåªè€ƒè™‘ç§»åŠ¨çš„æ–¹å‘ï¼Œä»¥åŠå¦‚ä½•é˜²æ­¢ä¸å…¶ä»–ç§»åŠ¨Agentå‘ç”Ÿå†²çªã€‚</p>
<p>When you want to intelligently move characters in your game (or agents as they are called in AI circles), you have to solve two problems: how to reason about the level to find the destination, then how to move there. These two problems are tightly coupled, but quite different in nature. The problem of reasoning about the level is more global and static, in that it takes into account the whole scene. Moving to the destination is more local and dynamic, it only considers the direction to move and how to prevent collisions with other moving agents.</p>
<p><img src="/uploads/NavMeshUnderstandingAreas.png" alt="å¯è¡Œèµ°åŒºåŸŸ"></p>
<p>å¯¼èˆªç³»ç»Ÿéœ€è¦è‡ªå·±çš„æ•°æ®æ¥è¡¨ç¤ºæ¸¸æˆåœºæ™¯ä¸­çš„å¯è¡Œèµ°åŒºåŸŸã€‚ æ­¥è¡ŒåŒºåŸŸå®šä¹‰äº†Agentå¯ä»¥ç«™ç«‹å’Œç§»åŠ¨çš„åœºæ™¯ä¸­çš„åœ°ç‚¹ã€‚ åœ¨Unityä¸­ï¼ŒAgentè¢«æè¿°ä¸ºåœ†æŸ±ä½“ã€‚ é€šè¿‡æµ‹è¯•Agentç«™ç‚¹çš„ä½ç½®ï¼Œå¯ä»¥ä»åœºæ™¯ä¸­çš„å‡ ä½•ç»“æ„è‡ªåŠ¨å»ºç«‹å¯è¡Œèµ°åŒºåŸŸã€‚ ç„¶åï¼Œä½ç½®è¿æ¥åˆ°åœºæ™¯å‡ ä½•å›¾å½¢ä¸Šçš„è¡¨é¢ã€‚ è¿™ä¸ªè¡¨é¢è¢«ç§°ä¸ºå¯¼èˆªç½‘æ ¼ï¼ˆç®€ç§°NavMeshï¼‰ã€‚</p>
<p>The navigation system needs its own data to represent the walkable areas in a game scene. The walkable areas define the places in the scene where the agent can stand and move. In Unity the agents are described as cylinders. The walkable area is built automatically from the geometry in the scene by testing the locations where the agent can stand. Then the locations are connected to a surface laying on top of the scene geometry. This surface is called the navigation mesh (NavMesh for short).</p>
<p>NavMeshå°†è¿™ä¸ªæ›²é¢å­˜å‚¨ä¸ºå‡¸å¤šè¾¹å½¢ã€‚ å‡¸å¤šè¾¹å½¢æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è¡¨ç¤ºï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å¤šè¾¹å½¢å†…çš„ä»»æ„ä¸¤ç‚¹ä¹‹é—´æ²¡æœ‰éšœç¢ç‰©ã€‚ é™¤äº†å¤šè¾¹å½¢è¾¹ç•Œä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å­˜å‚¨æœ‰å…³å“ªäº›å¤šè¾¹å½¢æ˜¯å½¼æ­¤ç›¸é‚»çš„ä¿¡æ¯ã€‚ è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ¨æ–­æ•´ä¸ªæ­¥è¡ŒåŒºåŸŸã€‚</p>
<p>The NavMesh stores this surface as convex polygons. Convex polygons are a useful representation, since we know that there are no obstructions between any two points inside a polygon. In addition to the polygon boundaries, we store information about which polygons are neighbours to each other. This allows us to reason about the whole walkable area.</p>
<p><img src="/uploads/NavMeshUnderstandingPath.png" alt="å¯»è·¯"></p>
<p>è¦æŸ¥æ‰¾åœºæ™¯ä¸­ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„è·¯å¾„ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†èµ·å§‹ä½ç½®å’Œç›®æ ‡ä½ç½®æ˜ å°„åˆ°æœ€è¿‘çš„å¤šè¾¹å½¢ã€‚ ç„¶åæˆ‘ä»¬ä»å¼€å§‹ä½ç½®å¼€å§‹æœç´¢ï¼Œè®¿é—®æ‰€æœ‰é‚»å±…ï¼Œç›´åˆ°åˆ°è¾¾ç›®çš„åœ°å¤šè¾¹å½¢ã€‚ è·Ÿè¸ªè®¿é—®çš„å¤šè¾¹å½¢å…è®¸æˆ‘ä»¬æ‰¾åˆ°ä»å¼€å§‹åˆ°ç›®çš„åœ°çš„å¤šè¾¹å½¢åºåˆ—ã€‚ å¯»æ‰¾è·¯å¾„çš„å¸¸è§ç®—æ³•æ˜¯Unity <em>ä½¿ç”¨çš„A </em>ï¼ˆå‘éŸ³ä¸ºâ€œA starâ€ï¼‰ã€‚</p>
<p>To find path between two locations in the scene, we first need to map the start and destination locations to their nearest polygons. Then we start searching from the start location, visiting all the neighbours until we reach the destination polygon. Tracing the visited polygons allows us to find the sequence of polygons which will lead from the start to the destination. A common algorithm to find the path is A* (pronounced â€œA starâ€), which is what Unity uses.</p>
<p><img src="/uploads/NavMeshUnderstandingCorridor.png" alt="è·Ÿéšè·¯å¾„"></p>
<p>æè¿°ä»å¼€å§‹åˆ°ç›®çš„åœ°å¤šè¾¹å½¢è·¯å¾„çš„å¤šè¾¹å½¢åºåˆ—ç§°ä¸ºèµ°å»Šã€‚ Agentå°†é€šè¿‡æ€»æ˜¯è½¬å‘èµ°å»Šçš„ä¸‹ä¸€ä¸ªå¯è§è§’è½è€Œåˆ°è¾¾ç›®çš„åœ°ã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªç®€å•çš„æ¸¸æˆï¼Œåªæœ‰ä¸€ä¸ªAgentåœ¨åœºæ™¯ä¸­ç§»åŠ¨ï¼Œé‚£ä¹ˆä¸€æ¬¡æ€§æ‰¾åˆ°èµ°å»Šçš„æ‰€æœ‰è§’è½å¹¶ä½¿è§’è‰²æ²¿è¿æ¥è§’çš„çº¿æ®µç§»åŠ¨æ˜¯å¾ˆå¥½çš„ã€‚</p>
<p>The sequence of polygons which describe the path from the start to the destination polygon is called a corridor. The agent will reach the destination by always steering towards the next visible corner of the corridor. If you have a simple game where only one agent moves in the scene, it is fine to find all the corners of the corridor in one swoop and animate the character to move along the line segments connecting the corners.</p>
<p>åœ¨å¤„ç†åŒæ—¶ç§»åŠ¨çš„å¤šä¸ªAgentæ—¶ï¼Œä»–ä»¬éœ€è¦åœ¨é¿å¼€å¯¹æ–¹æ—¶åç¦»åŸæ¥çš„è·¯å¾„ã€‚ å°è¯•ä½¿ç”¨ç”±çº¿æ®µç»„æˆçš„è·¯å¾„æ¥çº æ­£è¿™ç§åå·®å˜å¾—éå¸¸å›°éš¾ä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<p>When dealing with multiple agents moving at the same time, they will need to deviate from the original path when avoiding each other. Trying to correct such deviations using a path consisting of line segments soon becomes very difficult and error prone.</p>
<p><img src="/uploads/NavMeshUnderstandingMove.png" alt="Navmeshç†è§£ç§»åŠ¨æ–¹å¼"></p>
<p>ç”±äºæ¯ä¸ªæ¡†æ¶å†…çš„Agentç§»åŠ¨éƒ½å¾ˆå°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¤šè¾¹å½¢çš„è¿é€šæ€§æ¥å›ºå®šèµ°å»Šï¼Œæˆ‘ä»¬éœ€è¦ç»•è¡Œã€‚ ç„¶åæˆ‘ä»¬å¾ˆå¿«æ‰¾åˆ°ä¸‹ä¸€ä¸ªå¯è§çš„è§’è½è½¬å‘ã€‚<br>Since the agent movement in each frame is quite small, we can use the connectivity of the polygons to fix up the corridor in case we need to take a little detour. Then we quickly find the next visible corner to steer towards.</p>
<h1 id="Avoiding-Obstacles-è§„é¿éšœç¢"><a href="#Avoiding-Obstacles-è§„é¿éšœç¢" class="headerlink" title="Avoiding Obstacles / è§„é¿éšœç¢"></a>Avoiding Obstacles / è§„é¿éšœç¢</h1><p><img src="/uploads/NavMeshUnderstandingAvoid.png" alt="NavMeshç†è§£è§„é¿"></p>
<p>è½¬å‘é€»è¾‘å–ä¸‹ä¸€ä¸ªè§’çš„ä½ç½®ï¼Œå¹¶æ ¹æ®è¿™ä¸ªæ•°å­—æ‰¾å‡ºåˆ°è¾¾ç›®çš„åœ°æ‰€éœ€çš„æ–¹å‘å’Œé€Ÿåº¦ï¼ˆæˆ–é€Ÿåº¦ï¼‰ã€‚ ä½¿ç”¨æ‰€éœ€çš„é€Ÿåº¦ç§»åŠ¨Agentå¯èƒ½ä¼šå¯¼è‡´ä¸å…¶ä»–Agentå‘ç”Ÿå†²çªã€‚</p>
<p>The steering logic takes the position of the next corner and based on that figures out a desired direction and speed (or velocity) needed to reach the destination. Using the desired velocity to move the agent can lead to collision with other agents.</p>
<p>éšœç¢è§„é¿é€‰æ‹©æ–°çš„é€Ÿåº¦ï¼Œè¯¥é€Ÿåº¦åœ¨å‘æœŸæœ›çš„æ–¹å‘ç§»åŠ¨å’Œé˜²æ­¢å°†æ¥ä¸å…¶ä»–Agentå’Œå¯¼èˆªç½‘æ ¼çš„è¾¹ç¼˜çš„ç¢°æ’ä¹‹é—´å¹³è¡¡ã€‚ Unityä½¿ç”¨äº¤äº’çš„åº¦éšœç¢ï¼ˆRVOï¼‰æ¥é¢„æµ‹å’Œé˜²æ­¢ç¢°æ’ã€‚<br>Obstacle avoidance chooses a new velocity which balances between moving in the desired direction and preventing future collisions with other agents and edges of the navigation mesh. Unity is using reciprocal velocity obstacles (RVO) to predict and prevent collisions.</p>
<h1 id="Moving-the-Agent-ç§»åŠ¨Agent"><a href="#Moving-the-Agent-ç§»åŠ¨Agent" class="headerlink" title="Moving the Agent / ç§»åŠ¨Agent"></a>Moving the Agent / ç§»åŠ¨Agent</h1><p>æœ€ååœ¨è½¬å‘å’Œé¿éšœåè®¡ç®—æœ€ç»ˆé€Ÿåº¦ã€‚ åœ¨Unityä¸­ï¼ŒAgentä½¿ç”¨ç®€å•çš„åŠ¨æ€æ¨¡å‹è¿›è¡Œæ¨¡æ‹Ÿï¼Œè¯¥æ¨¡å‹è¿˜è€ƒè™‘äº†åŠ é€Ÿåº¦ï¼Œä»¥ä¾¿æ›´è‡ªç„¶ï¼Œæ›´æµç•…åœ°ç§»åŠ¨ã€‚<br>Finally after steering and obstacle avoidance the final velocity is calculated. In Unity the agents are simulated using a simple dynamic model, which also takes into account acceleration to allow more natural and smooth movement.</p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå¯ä»¥å°†æ¨¡æ‹ŸAgentçš„é€Ÿåº¦æä¾›ç»™MecanimåŠ¨ç”»ç³»ç»Ÿï¼Œä»¥ç§»åŠ¨è§’è‰²ï¼Œæˆ–è€…è®©å¯¼èˆªç³»ç»Ÿå¤„ç†ã€‚<br>At this stage it is possible to feed the velocity from the simulated agent to the Mecanim animation system to move the character, or let the navigation system take care of that.</p>
<p>ä¸€æ—¦ä½¿ç”¨ä»»ä¸€æ–¹æ³•ç§»åŠ¨Agentï¼Œæ¨¡æ‹Ÿçš„Agentä½ç½®å°†è¢«ç§»åŠ¨ï¼Œå¹¶è¢«é™åˆ¶åœ¨NavMeshå†…ã€‚ è¿™æœ€åä¸€å°æ­¥å¯¹äºå¼ºå¤§çš„å¯¼èˆªéå¸¸é‡è¦ã€‚<br>Once the agent has been moved using either method, the simulated agent location is moved and constrained to NavMesh. This last small step is important for robust navigation.</p>
<h1 id="Global-and-Local"><a href="#Global-and-Local" class="headerlink" title="Global and Local"></a>Global and Local</h1><p><img src="/uploads/NavMeshUnderstandingLoop.png" alt="ç†è§£Navmeshçš„å¾ªç¯"></p>
<p>å…³äºå¯¼èˆªæœ€é‡è¦çš„äº‹æƒ…ä¹‹ä¸€æ˜¯å…¨å±€å¯¼èˆªå’Œæœ¬åœ°å¯¼èˆªä¹‹é—´çš„åŒºåˆ«ã€‚</p>
<p>One of the most important things to understand about navigation is the difference between global and local navigation.</p>
<p>å…¨å±€å¯¼èˆªæ˜¯ç”¨æ¥æŸ¥æ‰¾å…¨å±€å„åœ°çš„èµ°å»Šã€‚ åœ¨å…¨å±€èŒƒå›´å†…å¯»æ‰¾è·¯å¾„æ˜¯ä¸€é¡¹ä»£ä»·é«˜æ˜‚çš„æ“ä½œï¼Œéœ€è¦ç›¸å½“å¤šçš„å¤„ç†èƒ½åŠ›å’Œå†…å­˜ã€‚</p>
<p>Global navigation is used to find the corridor across the world. Finding a path across the world is a costly operation requiring quite a lot of processing power and memory.</p>
<p>æè¿°è·¯å¾„çš„å¤šè¾¹å½¢çš„çº¿æ€§åˆ—è¡¨æ˜¯ç”¨äºè½¬å‘çš„çµæ´»çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥éšç€Agentçš„ä½ç½®ç§»åŠ¨è€Œåœ¨æœ¬åœ°è°ƒæ•´ã€‚ æœ¬åœ°(Local)å¯¼èˆªè¯•å›¾æ‰¾å‡ºå¦‚ä½•æœ‰æ•ˆåœ°ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè§’è½ï¼Œè€Œä¸ä¼šä¸å…¶ä»–Agentæˆ–ç§»åŠ¨å¯¹è±¡å‘ç”Ÿå†²çªã€‚</p>
<p>The linear list of polygons describing the path is a flexible data structure for steering, and it can be locally adjusted as the agentâ€™s position moves. Local navigation tries to figure out how to efficiently move towards the next corner without colliding with other agents or moving objects.</p>
<h1 id="Two-Cases-for-Obstacles-ä¸¤ä¸ªéšœç¢æ¡ˆä¾‹"><a href="#Two-Cases-for-Obstacles-ä¸¤ä¸ªéšœç¢æ¡ˆä¾‹" class="headerlink" title="Two Cases for Obstacles / ä¸¤ä¸ªéšœç¢æ¡ˆä¾‹"></a>Two Cases for Obstacles / ä¸¤ä¸ªéšœç¢æ¡ˆä¾‹</h1><p>å¯¼èˆªçš„è®¸å¤šåº”ç”¨éœ€è¦å…¶ä»–ç±»å‹çš„éšœç¢ï¼Œè€Œä¸ä»…ä»…æ˜¯å…¶ä»–Agentã€‚ è¿™äº›å¯èƒ½æ˜¯å°„å‡»æ¸¸æˆæˆ–è½¦è¾†ä¸­å¸¸è§çš„ç®±å­å’Œæ¡¶ã€‚ éšœç¢ç‰©å¯ä»¥é€šè¿‡å±€éƒ¨é¿éšœæˆ–å…¨å±€å¯»è·¯æ¥å¤„ç†ã€‚</p>
<p>Many applications of navigation require other types of obstacles rather than just other agents. These could be the usual crates and barrels in a shooter game, or vehicles. The obstacles can be handled using local obstacle avoidance or global pathfinding.</p>
<p>å½“éšœç¢ç‰©ç§»åŠ¨æ—¶ï¼Œæœ€å¥½ä½¿ç”¨é¿å…å±€éƒ¨éšœç¢ç‰©æ¥å¤„ç†ã€‚ è¿™æ ·Agentå¯ä»¥é¢„æµ‹æ€§åœ°é¿å…éšœç¢ã€‚ å½“éšœç¢ç‰©é™æ­¢æ—¶ï¼Œå¯ä»¥è€ƒè™‘é˜»æŒ¡æ‰€æœ‰Agentäººçš„è·¯å¾„ï¼Œéšœç¢ç‰©åº”è¯¥å½±å“å…¨å±€å¯¼èˆªï¼Œå³å¯¼èˆªç½‘æ ¼ã€‚</p>
<p>When an obstacle is moving, it is best handled using local obstacles avoidance. This way the agent can predictively avoid the obstacle. When the obstacle becomes stationary, and can be considered to block the path of all agents, the obstacles should affect the global navigation, that is, the navigation mesh.</p>
<p>æ”¹å˜NavMeshè¢«ç§°ä¸ºé›•åˆ»(carving)ã€‚ è¯¥è¿‡ç¨‹æ£€æµ‹éšœç¢ç‰©çš„å“ªäº›éƒ¨åˆ†æ¥è§¦NavMeshå¹¶å°†å­”é›•åˆ»åˆ°NavMeshä¸­ã€‚ è¿™åœ¨è®¡ç®—ä¸Šæ˜¯æ˜‚è´µçš„æ“ä½œï¼Œè¿™åˆæ˜¯å¦ä¸€ä¸ªä»¤äººä¿¡æœçš„åŸå› ï¼Œä¸ºä»€ä¹ˆç§»åŠ¨éšœç¢ç‰©åº”è¯¥ä½¿ç”¨é¿å…ç¢°æ’æ¥å¤„ç†ã€‚</p>
<p>Changing the NavMesh is called carving. The process detects which parts of the obstacle touches the NavMesh and carves holes into the NavMesh. This is computationally expensive operation, which is yet another compelling reason, why moving obstacles should be handled using collision avoidance.</p>
<h1 id="Describing-Off-mesh-Links-å…³äºOff-meshï¼ˆè·¨ç½‘æ ¼é“¾æ¥ï¼‰"><a href="#Describing-Off-mesh-Links-å…³äºOff-meshï¼ˆè·¨ç½‘æ ¼é“¾æ¥ï¼‰" class="headerlink" title="Describing Off-mesh Links / å…³äºOff-meshï¼ˆè·¨ç½‘æ ¼é“¾æ¥ï¼‰"></a>Describing Off-mesh Links / å…³äºOff-meshï¼ˆè·¨ç½‘æ ¼é“¾æ¥ï¼‰</h1><p><img src="/uploadsNavMeshUnderstandingOffmesh.png" alt="ç†è§£offmesh"></p>
<p>NavMeshå¤šè¾¹å½¢ä¹‹é—´çš„è¿æ¥ä½¿ç”¨è·¯å¾„æŸ¥æ‰¾ç³»ç»Ÿå†…çš„é“¾æ¥è¿›è¡Œæè¿°ã€‚ æœ‰æ—¶éœ€è¦è®©Agentäººè·¨è¶Šä¸å¯è¡Œèµ°çš„åœ°æ–¹ï¼Œä¾‹å¦‚è·³è¿‡å›´æ æˆ–ç©¿è¿‡å…³é—­çš„é—¨ã€‚ è¿™äº›æ¡ˆä»¶éœ€è¦çŸ¥é“è¡ŒåŠ¨çš„åœ°ç‚¹ã€‚</p>
<p>The connections between the NavMesh polygons are described using links inside the pathfinding system. Sometimes it is necessary to let the agent to navigate across places which are not walkable, for example, jumping over a fence, or traversing through a closed door. These cases need to know the location of the action.</p>
<p>è¿™äº›åŠ¨ä½œå¯ä»¥ä½¿ç”¨Off-Meshé“¾æ¥è¿›è¡Œæ³¨é‡Šï¼Œé€šè¿‡æŒ‡å®šçš„é“¾æ¥å‘Šè¯‰æ¢è·¯è€…è·¯çº¿å­˜åœ¨ã€‚ è¿™ä¸ªé“¾æ¥å¯ä»¥åœ¨è·¯å¾„åé¢è®¿é—®ï¼Œå¹¶ä¸”å¯ä»¥æ‰§è¡Œç‰¹æ®Šçš„åŠ¨ä½œã€‚</p>
<p>These actions can be annotated using Off-Mesh Links which tell the pathfinder that a route exists through the specified link. This link can be later accessed when following the path, and the special action can be executed.</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ä»“ä¿ƒï¼Œå¤§éƒ¨åˆ†é‡‡ç”¨googleæœºå™¨ç¿»è¯‘æ¥ä¸åŠå…¨éƒ¨æ ¡å¯¹ç¿»è¯‘æˆä¸­æ–‡èµ„æ–™ æœ¬ç¯‡ä½œä¸ºç¬”è®°ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸‹ã€‚è¿™ç¯‡æ˜¯è®°å½•Unity3Då¯»è·¯çš„å®˜æ–¹æ–‡æ¡£é˜…è¯»ä½“éªŒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The Navigation System allows you to create characters which can navigate the game world. It gives your characters the ability to understand that they need to take stairs to reach second floor, or to jump to get over a ditch. The Unity NavMesh system consists of the following pieces:&lt;/p&gt;
&lt;p&gt;Unity3dçš„å¯»è·¯ç³»ç»Ÿå¤§æ¦‚æœ‰ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;NavMeshï¼ˆå¯¼èˆªç½‘æ ¼çš„ç¼©å†™ï¼‰æ˜¯æè¿°æ¸¸æˆä¸–ç•Œçš„æ­¥è¡Œè¡¨é¢çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å…è®¸ä»æ¸¸æˆä¸–ç•Œä¸­çš„ä¸€ä¸ªæ­¥è¡Œä½ç½®åˆ°å¦ä¸€ä¸ªæ­¥è¡Œè·¯å¾„æ‰¾åˆ°è·¯å¾„ã€‚ æ•°æ®ç»“æ„æ˜¯çƒ˜ç„™çš„ç½‘æ ¼é‡Œè·å–çš„ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh (short for Navigation Mesh) is a data structure which describes the walkable surfaces of the game world and allows to find path from one walkable location to another in the game world. The data structure is built, or baked, automatically from your level geometry.&lt;/p&gt;
&lt;p&gt;NavMesh Agentç»„ä»¶å¸®åŠ©æ‚¨åˆ›å»ºè§’è‰²ï¼Œåœ¨å‘ç›®æ ‡ç§»åŠ¨æ—¶é¿å¼€å½¼æ­¤ã€‚Agentä½¿ç”¨NavMeshç†è§£æ¸¸æˆä¸–ç•Œï¼Œä»–ä»¬çŸ¥é“å¦‚ä½•é¿å…å½¼æ­¤ä»¥åŠç§»åŠ¨éšœç¢ç‰©ã€‚&lt;br&gt;ç¦»ç½‘é“¾æ¥ç»„ä»¶å…è®¸æ‚¨åˆå¹¶æ— æ³•ä½¿ç”¨å¯èµ°è¡Œçš„æ›²é¢è¡¨ç¤ºçš„å¯¼èˆªå¿«æ·æ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œè·³è¿‡æ²Ÿæ¸ æˆ–æ …æ ï¼Œæˆ–è€…åœ¨èµ°è¿‡å®ƒä¹‹å‰æ‰“å¼€é—¨ï¼Œéƒ½å¯ä»¥è¢«æè¿°ä¸ºâ€œOff-meshâ€é“¾æ¥ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh Agent component help you to create characters which avoid each other while moving towards their goal. Agents reason about the game world using the NavMesh and they know how to avoid each other as well as moving obstacles.&lt;br&gt;Off-Mesh Link component allows you to incorporate navigation shortcuts which cannot be represented using a walkable surface. For example, jumping over a ditch or a fence, or opening a door before walking through it, can be all described as Off-mesh links.&lt;/p&gt;
&lt;p&gt;NavMeshéšœç¢ç»„ä»¶å…è®¸æ‚¨æè¿°Agentåœ¨èˆªè¡Œä¸–ç•Œæ—¶åº”é¿å…çš„ç§»åŠ¨éšœç¢ã€‚ ç‰©ç†ç³»ç»Ÿæ§åˆ¶çš„ä¸€ä¸ªæ¡¶æˆ–ä¸€ä¸ªç®±å­æ˜¯ä¸€ä¸ªéšœç¢çš„å¥½ä¾‹å­ã€‚ å½“éšœç¢ç‰©ç§»åŠ¨æ—¶ï¼Œéšœç¢ç‰©å°½åŠ›é¿å¼€å®ƒï¼Œä½†æ˜¯ä¸€æ—¦éšœç¢ç‰©å˜å¾—é™æ­¢ï¼Œå®ƒå°†åœ¨å¯¼èˆªç½‘ä¸ŠæŒ–ä¸€ä¸ªæ´ï¼Œä½¿å¾—éšœç¢ç‰©å¯ä»¥æ”¹å˜å®ƒä»¬çš„è·¯å¾„æ¥ç»•è¿‡éšœç¢ç‰©ï¼Œæˆ–è€…å¦‚æœéšœç¢ç‰©å¦¨ç¢è·¯å¾„ æ–¹å¼ï¼ŒAgentå¯ä»¥æ‰¾åˆ°ä¸åŒçš„è·¯çº¿ã€‚&lt;/p&gt;
&lt;p&gt;NavMesh Obstacle component allows you to describe moving obstacles the agents should avoid while navigating the world. A barrel or a crate controlled by the physics system is a good example of an obstacle. While the obstacle is moving the agents do their best to avoid it, but once the obstacle becomes stationary it will carve a hole in the navmesh so that the agents can change their paths to steer around it, or if the stationary obstacle is blocking the path way, the agents can find a different route.&lt;/p&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="Navigation" scheme="http://vrast.cn/tags/Navigation/"/>
    
  </entry>
  
  <entry>
    <title>Unity3D è‡ªåŠ¨åŒ–æµ‹è¯•</title>
    <link href="http://vrast.cn/posts/1d932b40/"/>
    <id>http://vrast.cn/posts/1d932b40/</id>
    <published>2017-12-05T16:33:39.000Z</published>
    <updated>2018-01-03T08:33:32.286Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä»Šå¤©å‡Œæ™¨å¼€å§‹å†™è¿™ç¯‡æ–‡ç« ï¼Œæƒ³å†™è¿™ä¸ªä¸»é¢˜å¾ˆä¹…äº†ã€‚ç›¸ä¿¡æ¯ä¸ªèµ„æ·±å¼€å‘éƒ½ç»å†è¿‡æ¯æ¬¡å…¬å¸è¦å‘ç‰ˆæœ¬ä¹‹å‰éƒ½ä¼šæœ‰ä¸€å †bugé—ªç°ã€‚çœŸè®©äººè‹¦æ¼ã€‚å¾ˆé«˜å…´ Unity technology äº ä»Šå¹´çš„å…­ä¸€å„¿ç«¥èŠ‚æ›´æ–°äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç‰¹æ€§ã€‚è¿™ä¸‹ç»ˆäºä¸ç”¨å†å¯¼å…¥ç¬¬ä¸‰æ–¹è‡ªåŠ¨åŒ–æµ‹è¯•æ’ä»¶äº†ã€‚å½“ç„¶æœ¬ç« èŠ‚ä¼šç›¸å¯¹å®Œæ•´çš„å¿«é€Ÿæ¦‚è¿°å…¶é‡è¦éƒ¨åˆ†ã€‚å¦‚æœä½ è¿˜æƒ³çŸ¥é“æ›´å¤š, Unity3D å·²ç»æä¾›äº†æ¯”è¾ƒå®Œå–„çš„<a href="https://docs.unity3d.com/Manual/testing-editortestsrunner.html" target="_blank" rel="external">æ–‡æ¡£</a>ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="é€‚ç”¨äºå¤šç§å¹³å°çš„è‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#é€‚ç”¨äºå¤šç§å¹³å°çš„è‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="é€‚ç”¨äºå¤šç§å¹³å°çš„è‡ªåŠ¨åŒ–æµ‹è¯•"></a>é€‚ç”¨äºå¤šç§å¹³å°çš„è‡ªåŠ¨åŒ–æµ‹è¯•</h1><p>TestRunner é€‚ç”¨äº Standalone, Android, or iOS ç­‰å¹³å°ã€‚ä½ å¯ä»¥åœ¨ Window &gt; Test Runner æ‰¾åˆ°æ­¤é¡¹åŠŸèƒ½ã€‚</p>
<p>TestRunner ä½¿ç”¨äº†Unityä¸€ä½“åŒ–çš„å•å…ƒæµ‹è¯•åº“ã€‚å¼€æºçš„.netè¯­è¨€åº“ã€‚æ›´å¤šçš„ä¿¡æ¯åœ¨ <a href="http://nunit.org" target="_blank" rel="external">nunit å®˜ç½‘</a> å’Œ <a href="https://github.com/nunit/docs/wiki/NUnit-Documentation" target="_blank" rel="external">NUnit GitHubæ–‡æ¡£</a>.</p>
<p>UnityTestAttributeæ˜¯Unity Test Runnerçš„æ ‡å‡†NUnitåº“çš„ä¸»è¦è¡¥å……ã€‚ è¿™æ˜¯ä¸€ç§å•å…ƒæµ‹è¯•ï¼Œå…è®¸æ‚¨ä»æµ‹è¯•ä¸­è·³è¿‡æ¡†æ¶ï¼ˆå…è®¸åå°ä»»åŠ¡å®Œæˆï¼‰ã€‚ å½“ä»¥ç¼–è¾‘æ¨¡å¼è¿è¡Œæ—¶ï¼Œä»¥Playæ¨¡å¼è¿è¡Œå¹¶åœ¨EditorApplication.updateå›è°ƒå¾ªç¯ä¸­æ‰§è¡ŒUnityTestAttributeä½œä¸ºååŒç¨‹åºã€‚</p>
<h1 id="å·²çŸ¥é—®é¢˜å’Œé™åˆ¶"><a href="#å·²çŸ¥é—®é¢˜å’Œé™åˆ¶" class="headerlink" title="å·²çŸ¥é—®é¢˜å’Œé™åˆ¶"></a>å·²çŸ¥é—®é¢˜å’Œé™åˆ¶</h1><p>ä»¥ä¸‹æ˜¯Unity Test Runnerçš„å·²çŸ¥é—®é¢˜å’Œå±€é™æ€§ï¼š</p>
<p>WebGLå’ŒWSAå¹³å°ä¸æ”¯æŒUnityTestAttributeã€‚<br>æµ‹è¯•è¿è¡Œè€…ç›®å‰ä¸æ”¯æŒAOTå¹³å°ã€‚<br>UnityTestä¸æ”¯æŒå‚æ•°åŒ–æµ‹è¯•ï¼ˆValueSourceé™¤å¤–ï¼‰ã€‚<br>åœ¨å‘½ä»¤è¡Œè¿è¡Œçš„å¹³å°æ’­æ”¾å™¨ï¼ˆä¾‹å¦‚Standaloneï¼ŒAndroidæˆ–iOSï¼‰ä¸­çš„è‡ªåŠ¨æµ‹è¯•ç›®å‰ä¸å—æ”¯æŒã€‚<br>åœ¨è¿›è¡ŒEditModeæµ‹è¯•æ—¶ï¼Œæ‚¨å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åç§°ç¼–è¾‘å™¨æ¥å­˜å‚¨å®ƒä»¬ã€‚</p>
<p><img src="/uploads/TestRunner3.png" alt="é¢æ¿å‚æ•°"></p>
<p><img src="/uploads/TestRunner5.png" alt="å¼€å¯ä¸å…³é—­æµ‹è¯•"></p>
<h1 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h1><h2 id="Test-ä¸-UnityTest-ç‰¹æ€§"><a href="#Test-ä¸-UnityTest-ç‰¹æ€§" class="headerlink" title="Test ä¸ UnityTest ç‰¹æ€§"></a>Test ä¸ UnityTest ç‰¹æ€§</h2><p>åœ¨ç¼–è¾‘å™¨æˆ–è€…è¿è¡ŒçŠ¶æ€ä¸‹éƒ½å¯ä»¥ä½¿ç”¨Test<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[Test]</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GameObject_CreatedWithGiven_WillHaveTheName</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> go = <span class="keyword">new</span> GameObject(<span class="string">"MyGameObject"</span>);</div><div class="line">    Assert.AreEqual(â€œMyGameObjectâ€, go.name);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨è¿è¡ŒçŠ¶æ€ä¸‹ä½¿ç”¨UnityTest<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[UnityTest]</div><div class="line"><span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GameObject_WithRigidBody_WillBeAffectedByPhysics</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> go = <span class="keyword">new</span> GameObject();</div><div class="line">    go.AddComponent&lt;Rigidbody&gt;();</div><div class="line">    <span class="keyword">var</span> originalPosition = go.transform.position.y;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">yield</span> return new <span class="title">WaitForFixedUpdate</span>(<span class="params"></span>)</span>;</div><div class="line"></div><div class="line">    Assert.AreNotEqual(originalPosition, go.transform.position.y);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨ç¼–è¾‘å™¨ä¸‹ä½¿ç”¨<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[UnityTest]</div><div class="line"><span class="function"><span class="keyword">public</span> IEnumerator <span class="title">EditorUtility_WhenExecuted_ReturnsSuccess</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> utility = RunEditorUtilityInTheBackgroud();</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (utility.isRunning)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Assert.IsTrue(utility.isSuccess);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="UnityPlatform-ç‰¹æ€§"><a href="#UnityPlatform-ç‰¹æ€§" class="headerlink" title="UnityPlatform ç‰¹æ€§"></a>UnityPlatform ç‰¹æ€§</h2><p>è¯¥ç‰¹æ€§å¯ä»¥å¸®åŠ©ä½ åŒºåˆ†æµ‹è¯•çš„å¹³å°<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[Test]</div><div class="line">[UnityPlatform (RuntimePlatform.WindowsPlayer)]</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestMethod1</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">   Assert.AreEqual(Application.platform, RuntimePlatform.WindowsPlayer);</div><div class="line">&#125;</div><div class="line"></div><div class="line">[Test]</div><div class="line">[UnityPlatform(exclude = <span class="keyword">new</span>[] &#123;RuntimePlatform.WindowsEditor &#125;)]</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestMethod2</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">   Assert.AreNotEqual(Application.platform, RuntimePlatform.WindowsEditor);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="PrebuildSetup"><a href="#PrebuildSetup" class="headerlink" title="PrebuildSetup"></a>PrebuildSetup</h2><p>å¦‚æœæ‚¨éœ€è¦åœ¨æµ‹è¯•å¼€å§‹ä¹‹å‰æ‰§è¡Œä»»ä½•é¢å¤–çš„è®¾ç½®ï¼Œè¯·ä½¿ç”¨PrebuildSetupAttributeã€‚ ä¸ºæ­¤ï¼Œè¯·æŒ‡å®šå®ç°IPrebuildSetupæ¥å£çš„ç±»ç±»å‹ã€‚ å¦‚æœæ‚¨éœ€è¦è¿è¡Œæ•´ä¸ªç±»çš„è®¾ç½®ä»£ç ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³åœ¨æµ‹è¯•å¼€å§‹ä¹‹å‰æ‰§è¡Œä¸€äº›ä»£ç ï¼Œä¾‹å¦‚ç‰¹å®šæµ‹è¯•æ‰€éœ€çš„èµ„æºå‡†å¤‡æˆ–è®¾ç½®ï¼‰ï¼Œè¯·åœ¨ç±»ä¸­å®ç°IPrebuildSetupæ¥å£ä»¥è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>åªéœ€è¦ç»§æ‰¿ IPrebuildSetup æ¥å£ å¹¶ä¸” æ ‡è®° PrebuildSetup ç‰¹æ€§å°±èƒ½æå‰é…ç½®å•å…ƒæµ‹è¯•æ‰€éœ€æ•°æ®æˆ–è€…èµ„æºã€‚<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestsWithPrebuildStep</span> : <span class="title">IPrebuildSetup</span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Setup</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// Run this code before the tests are executed</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    [Test]</div><div class="line">    <span class="comment">//PrebuildSetupAttribute can be skipped because it's implemented in the same class</span></div><div class="line">    [PrebuildSetup(<span class="keyword">typeof</span>(TestsWithPrebuildStep))]</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        (...)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨è¿›å…¥æ’­æ”¾æ¨¡å¼æˆ–å»ºç«‹æ’­æ”¾å™¨ä¹‹å‰ï¼Œæ‰§è¡ŒPrebuildSetupä»£ç ã€‚ å®‰è£…ç¨‹åºå¯ä»¥ä½¿ç”¨UnityEditorå‘½åç©ºé—´åŠå…¶åŠŸèƒ½ï¼Œä½†ä¸ºäº†é¿å…ç¼–è¯‘é”™è¯¯ï¼Œæ‚¨å¿…é¡»å°†å…¶æ”¾ç½®åœ¨â€œeditorâ€æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ–è€…å¿…é¡»ä½¿ç”¨#if UNITY_EDITORæŒ‡ä»¤è¿›è¡Œä¿æŠ¤ã€‚</p>
<h2 id="LogAssert-Logæ–­è¨€"><a href="#LogAssert-Logæ–­è¨€" class="headerlink" title="LogAssert Logæ–­è¨€"></a>LogAssert Logæ–­è¨€</h2><p>å¦‚æœè®°å½•é™¤å¸¸è§„æ—¥å¿—æˆ–è­¦å‘Šæ¶ˆæ¯ä¹‹å¤–çš„å…¶ä»–æ¶ˆæ¯ï¼Œåˆ™æµ‹è¯•å°†å¤±è´¥ã€‚ ä½¿ç”¨LogAssertç±»åœ¨æ—¥å¿—ä¸­é¢„æœŸæ¶ˆæ¯ï¼Œå¹¶é˜²æ­¢æµ‹è¯•å¤±è´¥ã€‚<br>å¦‚æœé¢„æœŸçš„æ¶ˆæ¯æ²¡æœ‰å‡ºç°ï¼Œæµ‹è¯•ä¹ŸæŠ¥å‘Šå¤±è´¥ã€‚ å¦‚æœä»»ä½•å¸¸è§„çš„æ—¥å¿—æˆ–è­¦å‘Šæ¶ˆæ¯ä¸å‡ºç°ï¼Œæµ‹è¯•ä¹Ÿå¤±è´¥ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[Test]</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LogAssertExample</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">//Expect a regular log message</span></div><div class="line">    LogAssert.Expect(LogType.Log, <span class="string">"Log message"</span>);</div><div class="line">    <span class="comment">//A log message is expected so without the following line</span></div><div class="line">    <span class="comment">//the test would fail</span></div><div class="line">    Debug.Log(<span class="string">"Log message"</span>);</div><div class="line">    <span class="comment">//An error log is printed</span></div><div class="line">    Debug.LogError(<span class="string">"Error message"</span>);</div><div class="line">    <span class="comment">//Without expecting an error log, the test would fail</span></div><div class="line">    LogAssert.Expect(LogType.Error, <span class="string">"Error message"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="MonoBehaviourTest-Monoè„šæœ¬æµ‹è¯•"><a href="#MonoBehaviourTest-Monoè„šæœ¬æµ‹è¯•" class="headerlink" title="MonoBehaviourTest Monoè„šæœ¬æµ‹è¯•"></a>MonoBehaviourTest Monoè„šæœ¬æµ‹è¯•</h2><p>MonoBehaviourTestæ˜¯ç¼–å†™MonoBehaviouræµ‹è¯•çš„åŒ…è£…ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåç¨‹ã€‚ ä»UnityTestä¸­äº§ç”ŸMonoBehaviourTestæ¥å®ä¾‹åŒ–æŒ‡å®šçš„MonoBehaviourå¹¶ç­‰å¾…å®ƒå®Œæˆæ‰§è¡Œã€‚ å®ç°IMonoBehaviourTestæ¥å£æ¥æŒ‡ç¤ºæµ‹è¯•å®Œæˆçš„æ—¶é—´ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">[UnityTest]</div><div class="line">public IEnumerator MonoBehaviourTest_Works()</div><div class="line">&#123;</div><div class="line">    yield return new MonoBehaviourTest&lt;MyMonoBehaviourTest&gt;();</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class MyMonoBehaviourTest : MonoBehaviour, IMonoBehaviourTest</div><div class="line">&#123;</div><div class="line">    private int frameCount;</div><div class="line">    public bool IsTestFinished</div><div class="line">    &#123;</div><div class="line">        get &#123; return frameCount &gt; 10; &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">     void Update()</div><div class="line">     &#123;</div><div class="line">        frameCount++;</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ol>
<li>æ‰€æœ‰æ ‡è®°  UnityTestAttribute  ç‰¹æ€§çš„æ–¹æ³• æµ‹è¯•çš„æ—¶å€™å°±åƒæ˜¯ååŒç¨‹åºä¸€æ ·è¢«æ‰§è¡Œã€‚</li>
<li>å¾…ç»­ ã€‚</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©å‡Œæ™¨å¼€å§‹å†™è¿™ç¯‡æ–‡ç« ï¼Œæƒ³å†™è¿™ä¸ªä¸»é¢˜å¾ˆä¹…äº†ã€‚ç›¸ä¿¡æ¯ä¸ªèµ„æ·±å¼€å‘éƒ½ç»å†è¿‡æ¯æ¬¡å…¬å¸è¦å‘ç‰ˆæœ¬ä¹‹å‰éƒ½ä¼šæœ‰ä¸€å †bugé—ªç°ã€‚çœŸè®©äººè‹¦æ¼ã€‚å¾ˆé«˜å…´ Unity technology äº ä»Šå¹´çš„å…­ä¸€å„¿ç«¥èŠ‚æ›´æ–°äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç‰¹æ€§ã€‚è¿™ä¸‹ç»ˆäºä¸ç”¨å†å¯¼å…¥ç¬¬ä¸‰æ–¹è‡ªåŠ¨åŒ–æµ‹è¯•æ’ä»¶äº†ã€‚å½“ç„¶æœ¬ç« èŠ‚ä¼šç›¸å¯¹å®Œæ•´çš„å¿«é€Ÿæ¦‚è¿°å…¶é‡è¦éƒ¨åˆ†ã€‚å¦‚æœä½ è¿˜æƒ³çŸ¥é“æ›´å¤š, Unity3D å·²ç»æä¾›äº†æ¯”è¾ƒå®Œå–„çš„&lt;a href=&quot;https://docs.unity3d.com/Manual/testing-editortestsrunner.html&quot;&gt;æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="UNITY3D" scheme="http://vrast.cn/categories/UNITY3D/"/>
    
    
      <category term="æµ‹è¯•è‡ªåŠ¨åŒ–" scheme="http://vrast.cn/tags/%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Git FAQ</title>
    <link href="http://vrast.cn/posts/1e42cd7e/"/>
    <id>http://vrast.cn/posts/1e42cd7e/</id>
    <published>2017-12-02T12:37:23.000Z</published>
    <updated>2017-12-03T02:19:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æœ‰æœ‹å‹é—®äº†æˆ‘ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ç­–åˆ’æˆ–è€…ç¾æœ¯å¯èƒ½æ²¡æœ‰commitå‰å…ˆpullçš„ä¹ æƒ¯ï¼Œå…ˆcommitä¸Šå»ï¼Œç„¶åpushä¸ä¸Šã€‚Gitæé†’pullï¼Œç„¶åæŠ¥é”™ï¼Œä¸€èˆ¬é™¤äº†ç¨‹åºï¼Œç”šè‡³æ²¡ä½¿ç”¨è¿‡Gitçš„ç¨‹åºå°±æœ‰ç‚¹ä¸çŸ¥æ‰€æªäº†ã€‚åº”è¯¥è¦è®²ä¸‹å‡ºé”™æ—¶å€™è¦stashçš„é—®é¢˜ã€‚</li>
<li>ç­–åˆ’pullå‡ºé”™æ—¶å€™ï¼Œ ä¸‡ä¸€revertï¼Œç„¶åpushå¼ºæ¨,æŠŠä¹‹å‰åˆ«äººæäº¤çš„ä¸œè¥¿å†²æ‰äº†ã€‚æˆ‘ä»¬æœ‰ç”¨è¿‡å›æ»šï¼Œç„¶åå¼ºæ¨ä¸Šå»ã€‚å¯ä»¥å†è®²ä¸‹æ€ä¹ˆå¼ºæ¨</li>
<li>æ€ä¹ˆstashï¼Œæ€ä¹ˆstash applyï¼Œapplyå¤±è´¥åæ€ä¹ˆå¼„ã€‚commitçš„é¡ºåºæœ€å¥½ä¹Ÿè¦é‡ç‚¹å¼ºè°ƒä¸‹</li>
</ul>
<p>åœ¨ç¯‡ä¸­æˆ‘ä¼šè§£ç­”ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ è¯·ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šè¿½åŠ å™è¿°ã€‚æ±‚å…³æ³¨ æ±‚è½¬å‘ã€‚æŠŠçˆ±ä¼ å‡ºå» ç¬‘ï½</p>
<a id="more"></a>
<h1 id="åœ¨è§£ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯-stash-å­˜å‚¨-éç¨‹åºäººå‘˜è·³è¿‡æ­¤æ¡è¯´æ˜"><a href="#åœ¨è§£ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯-stash-å­˜å‚¨-éç¨‹åºäººå‘˜è·³è¿‡æ­¤æ¡è¯´æ˜" class="headerlink" title="åœ¨è§£ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ stash (å­˜å‚¨) (éç¨‹åºäººå‘˜è·³è¿‡æ­¤æ¡è¯´æ˜)"></a>åœ¨è§£ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ stash (å­˜å‚¨) (éç¨‹åºäººå‘˜è·³è¿‡æ­¤æ¡è¯´æ˜)</h1><p><a href="https://stackoverflow.com/questions/10959928/what-does-commit-your-changes-or-stash-them-mean#10959956" target="_blank" rel="external">What does â€œcommit your changes or stash themâ€ mean?</a></p>
<p>stashæ„å‘³ç€ä½ æœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œå°†ä¼šåœ¨æ‹‰å–ä»£ç çš„æ—¶å€™é˜²æ­¢æœ¬åœ°çš„ä¿®æ”¹è¢«è¦†ç›–ã€‚é¡ºä¾¿è¯´ä¸€å¥å¦‚æœä½ æƒ³çŸ¥é“æ›´å¤šå…³äºGit stash çš„é—®é¢˜åªéœ€è¦æé—®ï¼šhow do I solve the problem where Git tells me to commit or stash (å¦‚ä½•è§£å†³Gitå‘Šè¯‰æˆ‘commitæˆ–stashçš„é—®é¢˜)</p>
<p>é€šè¿‡git stashå°†å·¥ä½œåŒºæ¢å¤åˆ°ä¸Šæ¬¡æäº¤çš„å†…å®¹ï¼ŒåŒæ—¶å¤‡ä»½æœ¬åœ°æ‰€åšçš„ä¿®æ”¹ï¼Œä¹‹åå°±å¯ä»¥æ­£å¸¸git pulläº†ï¼Œgit pullå®Œæˆåï¼Œæ‰§è¡Œgit stash popå°†ä¹‹å‰æœ¬åœ°åšçš„ä¿®æ”¹åº”ç”¨åˆ°å½“å‰å·¥ä½œåŒºã€‚</p>
<p>git stash: å¤‡ä»½å½“å‰çš„å·¥ä½œåŒºçš„å†…å®¹ï¼Œä»æœ€è¿‘çš„ä¸€æ¬¡æäº¤ä¸­è¯»å–ç›¸å…³å†…å®¹ï¼Œè®©å·¥ä½œåŒºä¿è¯å’Œä¸Šæ¬¡æäº¤çš„å†…å®¹ä¸€è‡´ã€‚åŒæ—¶ï¼Œå°†å½“å‰çš„å·¥ä½œåŒºå†…å®¹ä¿å­˜åˆ°Gitæ ˆä¸­ã€‚<br>git stash pop: ä»Gitæ ˆä¸­è¯»å–æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„å†…å®¹ï¼Œæ¢å¤å·¥ä½œåŒºçš„ç›¸å…³å†…å®¹ã€‚ç”±äºå¯èƒ½å­˜åœ¨å¤šä¸ªStashçš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨æ ˆæ¥ç®¡ç†ï¼Œpopä¼šä»æœ€è¿‘çš„ä¸€ä¸ªstashä¸­è¯»å–å†…å®¹å¹¶æ¢å¤ã€‚<br>git stash list: æ˜¾ç¤ºGitæ ˆå†…çš„æ‰€æœ‰å¤‡ä»½ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªåˆ—è¡¨æ¥å†³å®šä»é‚£ä¸ªåœ°æ–¹æ¢å¤ã€‚<br>git stash clear: æ¸…ç©ºGitæ ˆã€‚æ­¤æ—¶ä½¿ç”¨gitgç­‰å›¾å½¢åŒ–å·¥å…·ä¼šå‘ç°ï¼ŒåŸæ¥stashçš„å“ªäº›èŠ‚ç‚¹éƒ½æ¶ˆå¤±äº†ã€‚</p>
<h1 id="Pull-ä¸-Fetch-åŒºåˆ«-åŸºæœ¬æ¦‚å¿µ"><a href="#Pull-ä¸-Fetch-åŒºåˆ«-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="Pull ä¸ Fetch åŒºåˆ« (åŸºæœ¬æ¦‚å¿µ)"></a>Pull ä¸ Fetch åŒºåˆ« (åŸºæœ¬æ¦‚å¿µ)</h1><ol>
<li>æ¯æ¬¡commitéƒ½ä¼šæœ‰ä¸€ä¸ªè®°å½•ã€‚</li>
<li>æœ¬åœ°çš„æ‰€æœ‰commitåœ¨æ²¡æœ‰pushä¹‹å‰ï¼Œéƒ½æ˜¯å­˜åœ¨æœ¬åœ°ã€‚åˆ«äººæ˜¯æ›´æ–°ä¸åˆ°ä½ çš„commitè®°å½•çš„ã€‚</li>
<li>æ‰€è°“æ›´æ–°å°±æ˜¯æ‹¿åˆ°åˆ«äººçš„Commitæ•°æ®ã€‚</li>
<li>å¦‚æœä½ æ›´æ–°åˆ°åˆ«äººçš„commité‡Œä¹Ÿæœ‰ä½ æœ¬æ¬¡commitä¿®æ”¹çš„æ•°æ® å°±ä¼šäº§ç”Ÿå†²çªï¼Œå°±éœ€è¦åˆå¹¶ã€‚</li>
<li>Pull çš„æ„æ€æ˜¯ ä¸‹è½½æ¯”è‡ªå·±æ›´æ–°çš„commitæ•°æ®ï¼Œå¹¶ä¸”å¼€å§‹åˆå¹¶ï¼Œå¯èƒ½é©¬ä¸Šå°±æœ‰ä»å†²çªæ–‡ä»¶ã€‚</li>
<li>Fetch çš„æ„æ€æ˜¯ ä¸‹è½½æ¯”è‡ªå·±æ›´æ–°çš„commitæ•°æ®ï¼Œæ”¾åœ¨é‚£é‡Œ(ä¸åˆå¹¶åˆ°å½“å‰commit)ï¼Œå¯ä»¥çœ‹çœ‹æ˜¯å¦æœ‰å¿…è¦æ›´æ–°åˆ°æœ€è¿‘commitã€‚</li>
</ol>
<h1 id="å…ˆè§£é‡Šä¸‹æŠ¥é”™ä¿¡æ¯"><a href="#å…ˆè§£é‡Šä¸‹æŠ¥é”™ä¿¡æ¯" class="headerlink" title="å…ˆè§£é‡Šä¸‹æŠ¥é”™ä¿¡æ¯"></a>å…ˆè§£é‡Šä¸‹æŠ¥é”™ä¿¡æ¯</h1><p>ä½ æœ¬åœ°çš„ä¿®æ”¹å’ŒGitå­˜å‚¨ä¸Šçš„å†²çªäº†ï¼Œç°åœ¨æœ‰ä¸¤ç§æ–¹å¼æ¥è§£å†³ï¼š</p>
<ol>
<li>commit å…ˆæäº¤æœ¬åœ°çš„ä¿®æ”¹ï¼Œcommitçš„åŸå› æ˜¯ä¸ºäº†å¯è¿½æº¯ï¼Œé€šè¿‡æœ¬åœ°brancheså°±èƒ½æ‹¿åˆ°N+1ä¸ªç‰ˆæœ¬çš„ä¿®æ”¹ã€‚é˜²æ­¢ä¸¢å¤±</li>
<li>stash å¤‡ä»½æœ¬åœ°çš„ä¿®æ”¹ ï¼Œä»æ—§æ˜¯é˜²æ­¢ä¸¢å¤±ï¼Œä¸”å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬ å¾ˆçµæ´»</li>
</ol>
<h2 id="æ¼”ç¤º-Stashå¦‚ä½•ä½¿ç”¨-è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰"><a href="#æ¼”ç¤º-Stashå¦‚ä½•ä½¿ç”¨-è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰" class="headerlink" title="æ¼”ç¤º-Stashå¦‚ä½•ä½¿ç”¨ è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰"></a>æ¼”ç¤º-Stashå¦‚ä½•ä½¿ç”¨ è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰</h2><p>æˆ‘ä»¬å‡è®¾æœ‰ä¸¤ä¸ªäººæ­£åœ¨æ“ä½œåŒä¸€ä»½æ–‡ä»¶ <code>README.md</code> ã€‚<br>Aå› : æˆ‘å·²ç»æäº¤æ­¤æ–‡ä»¶çš„ä¿®æ”¹äº†ï¼Œä½ æ›´æ–°ä¸‹ã€‚<br>Bå› : æˆ‘å…ˆFetchçœ‹çœ‹æœ‰ï¼Œç„¶åæˆ‘ä¸Šä¼ ã€‚å—¯ï¼Ÿå†²çªäº†ã€‚æˆ‘å¹¶ä¸çŸ¥é“ä½ ä¿®æ”¹äº†ä»€ä¹ˆä¸ªæ–‡ä»¶,æˆ‘ä¹Ÿä¸æƒ³åœ¨åŒæ­¥çš„æ—¶å€™æŠŠæœ¬åœ°çš„ä¿®æ”¹å†²æ‰ã€‚ é‚£æˆ‘æå‰ <code>Stash</code> è¿™äº›ä¸ªæ–‡ä»¶å§ã€‚</p>
<p><img src="/uploads/gulpfile.png" alt="æœºåˆ¶çš„Bå›åšäº†å¦‚ä¸‹æ“ä½œ"><br><img src="/uploads/QQ20171202-213806@2x.png" alt="Stashäº†å‹¾é€‰åçš„å°†æœ¬åœ°ä¿®æ”¹åœ¨è¿™é‡Œ"></p>
<p>Bå› : ç‚¹å‡»<apply stash=""> å¯å°†æŒ‡å®šçš„Stashæ–‡ä»¶ä¸æ›´æ–°åçš„æ–‡ä»¶åˆå¹¶ã€‚</apply></p>
<blockquote>
<h2>Stash ç®€å•ç†è§£å°±æ˜¯å¤‡ä»½æœ¬åœ°ä¿®æ”¹,ä¸”å¯ä»¥å¤‡ä»½å¤šæ¬¡ã€‚ä»€ä¹ˆ?åˆå†²çªäº†ï¼Ÿç”¨Stashå•Šï¼</h2>


</blockquote>
<h2 id="æ¼”ç¤º-ä½¿ç”¨commitæ¥è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰"><a href="#æ¼”ç¤º-ä½¿ç”¨commitæ¥è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰" class="headerlink" title="æ¼”ç¤º-ä½¿ç”¨commitæ¥è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰"></a>æ¼”ç¤º-ä½¿ç”¨commitæ¥è§„é¿æ–‡ä»¶ä¿®æ”¹è¢«å†²æ‰</h2><p>æˆ‘ä»¬å‡è®¾æœ‰ä¸¤ä¸ªäººæ­£åœ¨æ“ä½œåŒä¸€ä»½æ–‡ä»¶ <code>README.md</code> ã€‚<br>Aå› : æˆ‘å·²ç»æäº¤æ­¤æ–‡ä»¶çš„ä¿®æ”¹äº†ï¼Œä½ æ›´æ–°ä¸‹ã€‚<br>Bå› : æˆ‘å…ˆFetchçœ‹çœ‹æœ‰ï¼Œç„¶åæˆ‘ä¸Šä¼ ã€‚å—¯ï¼Ÿå†²çªäº†ã€‚æˆ‘å¹¶ä¸çŸ¥é“ä½ ä¿®æ”¹äº†ä»€ä¹ˆä¸ªæ–‡ä»¶,æˆ‘ä¹Ÿä¸æƒ³åœ¨åŒæ­¥çš„æ—¶å€™æŠŠæœ¬åœ°çš„ä¿®æ”¹å†²æ‰ã€‚ é‚£æˆ‘æå‰ <code>commit</code> è¿™äº›ä¸ªæ–‡ä»¶å§ã€‚</p>
<p><img src="/uploads/1040FC64-815A-4DD3-B703-52AD31B022D0.png" alt="è¿™ä¸ªPush Changeä¸ç”¨å‹¾é€‰ï¼Œåæ­£å‹¾é€‰ä¹Ÿä¸Šä¼ ä¸äº†ä½†æ˜¯ä¸å½±å“commitã€‚"><br><img src="/uploads/A2A598E1-86FF-4380-A3CE-FFE532E83E0D.png" alt="ç°åœ¨pullä¹Ÿå¯ä»¥åˆå¹¶æœ¬åœ°æ–‡ä»¶"></p>
<blockquote>
<h2>commit ç®€å•ç†è§£å°±æ˜¯ä¿å­˜æœ¬æ¬¡ä¿®æ”¹,ä¸”å¯ä»¥è¢«è¿½æº¯ã€‚ä»€ä¹ˆä½ åªä¼šStashï¼Ÿç›´æ¥commitä¹Ÿè¡Œå•Šï¼</h2>




</blockquote>
<h1 id="å¦‚ä½•å¼ºæ¨ï¼Ÿ"><a href="#å¦‚ä½•å¼ºæ¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¼ºæ¨ï¼Ÿ"></a>å¦‚ä½•å¼ºæ¨ï¼Ÿ</h1><p>ç†è§£äº†ä¸Šé¢çš„ä¹‹åã€‚å‘ç° ç”¨Stash æˆ–è€…Commitéƒ½å¯ä»¥å®ç°å¼ºæ¨ã€‚</p>
<p><img src="/uploads/BDCE2D9F-7600-48C7-9528-1FFCC155445C.png" alt="ç°åœ¨commitè‚¯å®šä¸è¡Œ å› ä¸ºè¢«ä¿®æ”¹è¿‡äº†ï¼Œsourcetreeçš„æœºåˆ¶æ˜¯ ç‚¹å‡»æŒ‰é’® é»˜è®¤commitï¼Œç„¶åpush"></p>
<p><img src="/uploads/QQ20171202-223641.png" alt="å¿…ç„¶æ˜¯å¤±è´¥çš„ï¼Œç‚¹å‡»OK,ç°åœ¨æœ¬åœ°branchå·²ç»æœ‰äº†æ­¤æ¬¡commitç—•è¿¹äº†(å¯è¿½æº¯)"></p>
<p>ç°åœ¨ç‚¹å‡»pull/æˆ–è€…Apply Stash å¤„ç†å¥½ï¼Œä¸Šä¼ å§ã€‚</p>
<h1 id="å‡ºäº†è«åå…¶å¦™çš„é—®é¢˜å¦‚ä½•è¡¥æ•‘ï¼Ÿ"><a href="#å‡ºäº†è«åå…¶å¦™çš„é—®é¢˜å¦‚ä½•è¡¥æ•‘ï¼Ÿ" class="headerlink" title="å‡ºäº†è«åå…¶å¦™çš„é—®é¢˜å¦‚ä½•è¡¥æ•‘ï¼Ÿ"></a>å‡ºäº†è«åå…¶å¦™çš„é—®é¢˜å¦‚ä½•è¡¥æ•‘ï¼Ÿ</h1><p>æœ‰äº›æœ‹å‹ä¸€çœ‹åˆ°ä¸€å †æŠ¥é”™å’Œæœ¬åœ°ç´Šä¹±çš„ä¿®æ”¹å°±æ…Œäº†ã€‚åˆ«æ€• å¯ä»¥ç›´æ¥å›åˆ°å­˜æ¡£(commit)ç‚¹å»å¤æ´»ã€‚</p>
<p><img src="/uploads/A56FB26C-1A89-4106-BC16-9D41A9114255.png" alt="ç›´æ¥å›åˆ°æŸä¸ªcommitçš„çŠ¶æ€"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æœ‰æœ‹å‹é—®äº†æˆ‘ä¸‰ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç­–åˆ’æˆ–è€…ç¾æœ¯å¯èƒ½æ²¡æœ‰commitå‰å…ˆpullçš„ä¹ æƒ¯ï¼Œå…ˆcommitä¸Šå»ï¼Œç„¶åpushä¸ä¸Šã€‚Gitæé†’pullï¼Œç„¶åæŠ¥é”™ï¼Œä¸€èˆ¬é™¤äº†ç¨‹åºï¼Œç”šè‡³æ²¡ä½¿ç”¨è¿‡Gitçš„ç¨‹åºå°±æœ‰ç‚¹ä¸çŸ¥æ‰€æªäº†ã€‚åº”è¯¥è¦è®²ä¸‹å‡ºé”™æ—¶å€™è¦stashçš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;ç­–åˆ’pullå‡ºé”™æ—¶å€™ï¼Œ ä¸‡ä¸€revertï¼Œç„¶åpushå¼ºæ¨,æŠŠä¹‹å‰åˆ«äººæäº¤çš„ä¸œè¥¿å†²æ‰äº†ã€‚æˆ‘ä»¬æœ‰ç”¨è¿‡å›æ»šï¼Œç„¶åå¼ºæ¨ä¸Šå»ã€‚å¯ä»¥å†è®²ä¸‹æ€ä¹ˆå¼ºæ¨&lt;/li&gt;
&lt;li&gt;æ€ä¹ˆstashï¼Œæ€ä¹ˆstash applyï¼Œapplyå¤±è´¥åæ€ä¹ˆå¼„ã€‚commitçš„é¡ºåºæœ€å¥½ä¹Ÿè¦é‡ç‚¹å¼ºè°ƒä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ç¯‡ä¸­æˆ‘ä¼šè§£ç­”ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ è¯·ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šè¿½åŠ å™è¿°ã€‚æ±‚å…³æ³¨ æ±‚è½¬å‘ã€‚æŠŠçˆ±ä¼ å‡ºå» ç¬‘ï½&lt;/p&gt;
    
    </summary>
    
      <category term="FAQ" scheme="http://vrast.cn/categories/FAQ/"/>
    
    
      <category term="Git" scheme="http://vrast.cn/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Rounded Cube 5</title>
    <link href="http://vrast.cn/posts/710804c5/"/>
    <id>http://vrast.cn/posts/710804c5/</id>
    <published>2017-11-25T15:59:47.000Z</published>
    <updated>2017-11-25T16:08:32.204Z</updated>
    
    <content type="html"><![CDATA[<p>æ¥ä¸Šå› Rounded Cube 4.æœ¬ç« ä¸»é¢˜å¦‚ä¸‹:</p>
<ul>
<li>Combine primitive colliders. åˆå¹¶åŸå§‹ç½‘æ ¼</li>
</ul>
<p>æ­¤ä¸ºæœ¬äººé˜…è¯»ç¬”è®°ä¸ä½œä¸ºè½¬è½½å¤„ç†,è¯¦ç»†è¿˜è¯·å‚çœ‹åŸæ–‡. <a href="http://catlikecoding.com/unity/tutorials/" target="_blank" rel="external">åŸæ–‡åœ°å€</a><br><a id="more"></a></p>
<p>åœ†æ»‘çš„ç«‹æ–¹ä½“ç¢°æ’å¹¶ä¸æ˜¯åœ†æ»‘çš„ï¼Œæ‰€ä»¥å°±æœ‰äº†æœ¬ç« èŠ‚æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Generate</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    GetComponent&lt;MeshFilter&gt;().mesh = mesh = <span class="keyword">new</span> Mesh();</div><div class="line">    mesh.name = <span class="string">"Procedural Cube"</span>;</div><div class="line">    CreateVertices();</div><div class="line">    CreateTriangles();</div><div class="line">    CreateColliders();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateColliders</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥æ·»åŠ ä¸€ä¸ªcubeç¢°æ’å™¨<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateColliders</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		gameObject.AddComponent&lt;BoxCollider&gt;();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="/uploads/07-one-collider.png" alt="å•ä¸ªç›’å­ç¢°æ’å™¨"></p>
<p>äº‹å®è¯æ˜ï¼ŒUnityè¶³å¤Ÿæ™ºèƒ½çš„å®šä½å’Œç¼©æ”¾ç¢°æ’å™¨ï¼Œä½¿å…¶ä¸æˆ‘ä»¬ç½‘æ ¼çš„è¾¹ç•Œæ¡†åŒ¹é…ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»ç¼©æ”¾ç¢°æ’å™¨ï¼Œä½¿å…¶ä¸ä¸¤ä¸ªç›¸å¯¹é¢çš„å¹³å¦ä¾§é¢ç›¸åŒ¹é…ã€‚ ç”±äºè¿™ä¸‰ä¸ªé¢å¯¹éƒ½éœ€è¦å®Œæˆï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°ä¸‰ä¸ªç›¸äº¤çš„å—ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateColliders</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		AddBoxCollider(xSize, ySize - roundness * <span class="number">2</span>, zSize - roundness * <span class="number">2</span>);</div><div class="line">		AddBoxCollider(xSize - roundness * <span class="number">2</span>, ySize, zSize - roundness * <span class="number">2</span>);</div><div class="line">		AddBoxCollider(xSize - roundness * <span class="number">2</span>, ySize - roundness * <span class="number">2</span>, zSize);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">AddBoxCollider</span> (<span class="params"><span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">float</span> z</span>) </span>&#123;</div><div class="line">		BoxCollider c = gameObject.AddComponent&lt;BoxCollider&gt;();</div><div class="line">		c.size = <span class="keyword">new</span> Vector3(x, y, z);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/07-box-colliders.png" alt="å¹³å¦åŒºåŸŸçš„ç›’å­ç¢°æ’"></p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨èƒ¶å›Šæ¥å¡«å……æ£±è§’ã€‚æˆ‘ä»¬éœ€è¦ç»™ä»–ä»¬æ­£ç¡®çš„æ–¹å‘ï¼ŒæŠŠä»–ä»¬å®šä½åœ¨æ¯ä¸€ä¸ªè¾¹ç¼˜çš„ä¸­å¿ƒã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">AddCapsuleCollider</span> (<span class="params"><span class="keyword">int</span> direction, <span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">float</span> z</span>) </span>&#123;</div><div class="line">		CapsuleCollider c = gameObject.AddComponent&lt;CapsuleCollider&gt;();</div><div class="line">		c.center = <span class="keyword">new</span> Vector3(x, y, z);</div><div class="line">		c.direction = direction;</div><div class="line">		c.radius = roundness;</div><div class="line">		c.height = c.center[direction] * <span class="number">2</span>f;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¯è¾¹éœ€è¦ä¸€ä¸ªèƒ¶å›Šï¼Œæ€»å…±æœ‰åäºŒä¸ªèƒ¶å›Šã€‚ æˆ‘åˆ›å»ºäº†æœ€å°ï¼Œæœ€å¤§å’Œæœ€å¤§çš„çŸ¢é‡ï¼Œä»¥ä½¿æ”¾ç½®æ›´å®¹æ˜“ã€‚</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateColliders</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		AddBoxCollider(xSize, ySize - roundness * <span class="number">2</span>, zSize - roundness * <span class="number">2</span>);</div><div class="line">		AddBoxCollider(xSize - roundness * <span class="number">2</span>, ySize, zSize - roundness * <span class="number">2</span>);</div><div class="line">		AddBoxCollider(xSize - roundness * <span class="number">2</span>, ySize - roundness * <span class="number">2</span>, zSize);</div><div class="line"></div><div class="line">		Vector3 min = Vector3.one * roundness;</div><div class="line">		Vector3 half = <span class="keyword">new</span> Vector3(xSize, ySize, zSize) * <span class="number">0.5</span>f; </div><div class="line">		Vector3 max = <span class="keyword">new</span> Vector3(xSize, ySize, zSize) - min;</div><div class="line"></div><div class="line">		AddCapsuleCollider(<span class="number">0</span>, half.x, min.y, min.z);</div><div class="line">		AddCapsuleCollider(<span class="number">0</span>, half.x, min.y, max.z);</div><div class="line">		AddCapsuleCollider(<span class="number">0</span>, half.x, max.y, min.z);</div><div class="line">		AddCapsuleCollider(<span class="number">0</span>, half.x, max.y, max.z);</div><div class="line">		</div><div class="line">		AddCapsuleCollider(<span class="number">1</span>, min.x, half.y, min.z);</div><div class="line">		AddCapsuleCollider(<span class="number">1</span>, min.x, half.y, max.z);</div><div class="line">		AddCapsuleCollider(<span class="number">1</span>, max.x, half.y, min.z);</div><div class="line">		AddCapsuleCollider(<span class="number">1</span>, max.x, half.y, max.z);</div><div class="line">		</div><div class="line">		AddCapsuleCollider(<span class="number">2</span>, min.x, min.y, half.z);</div><div class="line">		AddCapsuleCollider(<span class="number">2</span>, min.x, max.y, half.z);</div><div class="line">		AddCapsuleCollider(<span class="number">2</span>, max.x, min.y, half.z);</div><div class="line">		AddCapsuleCollider(<span class="number">2</span>, max.x, max.y, half.z);</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p><img src="/uploads/07-all-colliders.png" alt="ä¸ºæ¥ä¸‹æ¥çš„åŠ¨ä½œåšå‡†å¤‡"></p>
<p>å‰©ä¸‹è¦åšçš„å°±æ˜¯åœ¨åœ†è§’ç«‹æ–¹ä½“ä¸ŠåŠ ä¸€ä¸ªåˆšä½“ï¼Œæ­å–œä½ ï¼Œçœ‹å®Œäº†æœ¬ç« æ•™ç¨‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¥ä¸Šå› Rounded Cube 4.æœ¬ç« ä¸»é¢˜å¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Combine primitive colliders. åˆå¹¶åŸå§‹ç½‘æ ¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤ä¸ºæœ¬äººé˜…è¯»ç¬”è®°ä¸ä½œä¸ºè½¬è½½å¤„ç†,è¯¦ç»†è¿˜è¯·å‚çœ‹åŸæ–‡. &lt;a href=&quot;http://catlikecoding.com/unity/tutorials/&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¿»è¯‘" scheme="http://vrast.cn/categories/%E7%BF%BB%E8%AF%91/"/>
    
    
      <category term="UNITY3D" scheme="http://vrast.cn/tags/UNITY3D/"/>
    
  </entry>
  
</feed>
