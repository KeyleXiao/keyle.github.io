<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lazybones Kill PLAN</title>
  <subtitle>In me the tiger sniffs the rose</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://vrast.cn/"/>
  <updated>2016-11-20T14:45:05.000Z</updated>
  <id>http://vrast.cn/</id>
  
  <author>
    <name>keyle xiao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Documentation Intense Goap System.pdf</title>
    <link href="http://vrast.cn/posts/17da9059/"/>
    <id>http://vrast.cn/posts/17da9059/</id>
    <published>2016-11-20T09:24:29.000Z</published>
    <updated>2016-11-20T14:45:05.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>INTENSE GOAP System 说明文档译文。由于文档中图片较多，翻译部分如有不详细的地方还请自行对比原文。</p>
</blockquote>


	<div class="row">
	  <iframe src="http://nagland.github.io/viewer/web/viewer.html?val=http://keylexiao.github.io/uploads/Documentation-Intense-Goap-System.pdf" style="width:100%; height:550px"></iframe>
	</div>


]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;INTENSE GOAP System 说明文档译文。由于文档中图片较多，翻译部分如有不详细的地方还请自行对比原文。&lt;/p&gt;
&lt;/blockquote&gt;


	&lt;div class=&quot;row&quot;&gt;
	  &lt;iframe src=&quot;http://nag
    
    </summary>
    
      <category term="INTENSE项目源码分析" scheme="http://vrast.cn/categories/INTENSE%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="INTENSE GOAP文档" scheme="http://vrast.cn/tags/INTENSE-GOAP%E6%96%87%E6%A1%A3/"/>
    
  </entry>
  
  <entry>
    <title>IDFA zeroed FAQ</title>
    <link href="http://vrast.cn/posts/72c95874/"/>
    <id>http://vrast.cn/posts/72c95874/</id>
    <published>2016-11-18T09:50:28.000Z</published>
    <updated>2016-11-18T10:25:38.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>IDFA获取时 值为<code> 00000000-0000-0000-0000-000000000000 </code> 解决方案</p>
</blockquote>
<a id="more"></a>
<h1 id="获取IDFA的方法"><a href="#获取IDFA的方法" class="headerlink" title="获取IDFA的方法"></a>获取IDFA的方法</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> * adid =[[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString];</div></pre></td></tr></table></figure>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><p>获取出来的ID为用户广告ID，可作为用户广告的唯一标识，通常广告商都会使用此id作为标识符，如果获取不到则会造成<code>广告无法播放</code></p>
<ol>
<li>目前尚无解决办法，需要用户自己去 隐私-&gt;广告-&gt;关闭限制广告追踪</li>
<li>可以在需要项目启动的时候就判断一次广告是否开启作出相应提示</li>
</ol>
<p><a href="https://developer.apple.com/reference/adsupport/asidentifiermanager/1614151-advertisingidentifier" target="_blank" rel="external">advertisingIdentifier官方相关说明文档</a><br><a href="http://stackoverflow.com/questions/38919414/ios-10-and-idfa-zeroed-attribution" target="_blank" rel="external">stackoverflow相关问题</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;IDFA获取时 值为&lt;code&gt; 00000000-0000-0000-0000-000000000000 &lt;/code&gt; 解决方案&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://vrast.cn/categories/iOS/"/>
    
    
      <category term="Objective-C" scheme="http://vrast.cn/tags/Objective-C/"/>
    
  </entry>
  
  <entry>
    <title>Documentation Intense Tps.pdf</title>
    <link href="http://vrast.cn/posts/3c9df6f/"/>
    <id>http://vrast.cn/posts/3c9df6f/</id>
    <published>2016-11-16T13:17:11.000Z</published>
    <updated>2016-11-20T09:26:44.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>本文记录TPS Documentation阅读过程,本篇讲述了此插件的基本配置与几个代码相关的系统与相关的代码案例.本篇基本上是翻译全文,有任何问题可留言，有兴趣的话推荐你阅读原文</p>
</blockquote>
<a id="more"></a>
<h1 id="项目导入设置"><a href="#项目导入设置" class="headerlink" title="项目导入设置"></a>项目导入设置</h1><h2 id="Layers-and-tags"><a href="#Layers-and-tags" class="headerlink" title="Layers and tags"></a>Layers and tags</h2><p>添加程会使用到的 Layers &amp; tag.</p>
<p><img src="/uploads/QQ20161024-0@2x.jpg"></p>
<h2 id="场景管理"><a href="#场景管理" class="headerlink" title="场景管理"></a>场景管理</h2><p>当前有3个场景在游戏中，其中两个是包含玩家的，WeaponTest场景是测试可用物件的。有这几个prefab(Player Remy, CamRig, 3Dcanvas01Follow, EnvFx, 2Dcanvas)</p>
<ul>
<li>Camrig &amp; EnvFx 必须要在场景中，否则会报错。为了让 3Dcanvas01Follow 与 2Dcanvas 正常工作，需要有一个可用的player在场景中。</li>
<li>当前场景中只能又一个player处于激活状态。有多个则取消其激活。</li>
<li>如果你拖动一个 player prefa b到场景中，但是这个 player prefab 不能处于平台之上，意味着这个平台的layer并不实代码中支持的那个layer。</li>
<li>你需要在player身上的 SetUpAndUserInput 组建中添加 CamRig 的引用(直接拖)</li>
<li>所有的玩家设置完毕之后使用 player prefab 身上的组件 PlayerAtts ，指派新武器，指派的武器需要在场景中处于可用状态，不是prefabs，是要你在指派之前放到场景里。</li>
<li>如果你用Tps这个project，在导入之后会自动进行上面的设置</li>
</ul>
<h1 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h1><ul>
<li>所有的控制键位与逻辑都在 SetUpAndUserInput 脚本中可以找到。项目的默认设置没有进行过更改;</li>
</ul>
<p>a. Keyboard and mouse 1: Keyboard and mouse<br>a. Locomotion: W/A/S/D<br>b. Sprint: Shift<br>c. Collect: E<br>d. Jump: Space<br>e. Pullout/Holster weapon: F<br>f. Throw grenade: G<br>g. Drop weapon: H<br>h. Crouch/Stand: C<br>i. Toggle Walk/Run: LeftAlt<br>j. Fire: Mouse0<br>k. Sight/Cover Aim: Mouse1<br>l. Hipfire Aim: Mouse0<br>m. Reload: R<br>n. SecondaryFire: Mouse2<br>o. Camera/Player rotation: Mouse<br>p. Modify weapon: V<br>q. Weapon Flashlight: T<br>r. Change weapon/throwable: Keyboard arrows<br>b. Touchscreen</p>
<ul>
<li>为了触摸屏的控制，MobileControlRig 这个prefab在监视面板中需要处于可用状态另外 Mobile Input也需要在unity editor中开启。移动端控制器用来拾取，移动相机，换武器… 记住移动控制的某些特性只在特定的支持设备上可用。<br><img src="/uploads/QQ20161024-1@2x.jpg" alt="触摸屏"></li>
</ul>
<h1 id="更替角色-Character"><a href="#更替角色-Character" class="headerlink" title="更替角色(Character)"></a>更替角色(Character)</h1><p>如果你的 Character 是 humanoid 的话(这里指Animation Type),你可以很轻易的设置成你的新player。你可以检查下你的 Rig -&gt; configure ,如果所有的节点配置都是绿色的那么就没问题了。</p>
<h2 id="角色快速配置"><a href="#角色快速配置" class="headerlink" title="角色快速配置"></a>角色快速配置</h2><ul>
<li>检查下你的导入设置是否如图所示<br><img src="/uploads/QQ20161024-2@2x.jpg" alt="触摸屏"></li>
<li>创建个新场景或者直接用 WeaponTest 场景。把玩家prefab拖上来。复制一个然后重命名。把之前不用的旧 prefab 给关掉。如果导入的prefab太小了，对照之前的旧prefab 进行相应的调整。</li>
<li>把你的角色模型拖到复制出来的player prefab里。移除模型身上的 Animator 然后我们使用 player上的Animator.把角色的 Avatar 拖到 player 的 Animator 组件中。</li>
<li><p>为角色创建一个 Ragdoll(unity布娃娃)。GameObject -&gt; 3D Object -&gt; Ragdoll .然后把几个身体的部位设置下。</p>
</li>
<li><p>在你的项目页签中 IntenseTPS/Prefabs/Player/SettingUp 。你可以看到一些prefab。在监视面板中</p>
</li>
</ul>
<ol>
<li>拖放 LeftHandHold prefab 到模型的 left hand 节点下。</li>
<li>拖放 RightHandHold prefab 到模型的 right hand 节点下。</li>
<li>拖放 WeaponIK prefab 到模型的 Head 节点下。<br>最后重置这些组件的位置与旋转信息。</li>
</ol>
<ul>
<li><p>把上一步加入的三个组件的位置进行一下修正 +/-90, +/-180 。如下图所示<br><img src="/uploads/QQ20161024-3@2x.jpg" alt="注意方向"></p>
</li>
<li><p>选中新 player 找到 Health 组件，我们使用这个脚本快速关闭所有 rigidbodies &amp; ragdoll colliders。拖放 角色模型骨骼到这里。点击下（Get ragdoll colliders &amp; rigidbodys）按钮。</p>
</li>
<li><p>上一步点击按钮之后你会看见下图所示。<br><img src="/uploads/QQ20161024-4@2x.jpg" alt="顺序不重要"></p>
</li>
<li>选中角色模型，在layer中选择 PlayerBody 。</li>
</ul>
<p>如果你的模型能正确的握住武器了那就证明没问题了。都搞定之后接着来阅读 Weapon System 部分吧。</p>
<h1 id="玩家系统"><a href="#玩家系统" class="headerlink" title="玩家系统"></a>玩家系统</h1><p>在这个项目中玩家逻辑被分为多个部分，我称这些部分为 player systems.大多系统都有自己的被序列化的类。你可以直接在监视面板中更改。如果你想定义一个新系统，我非常建议你先阅读编码部分。</p>
<h2 id="武器系统"><a href="#武器系统" class="headerlink" title="武器系统"></a>武器系统</h2><p>这个系统几乎控制所有的武器，从拔枪到射击 等等。</p>
<h3 id="为一个新的武器配置一个新player-Animations"><a href="#为一个新的武器配置一个新player-Animations" class="headerlink" title="为一个新的武器配置一个新player Animations"></a>为一个新的武器配置一个新player Animations</h3><ol>
<li>Weapon System在一个Animator中使用了4个动画层(Animator Layers),RightArm, LeftArm, RightHand, LeftHand.LeftArm层模仿RightArm层。这个状态及名叫 Weapon 你看 LeftArm 层是copyRightArm层。如果你定义一个新的武器，只需要拷贝这个 Weapon 状态机然后改改就行了。</li>
<li>现在来看看 Weapon System 的动画融合树(animation blend trees) 如下图(RightArmLayer)<br> <img src="/uploads/QQ20161024-5@2x.jpg" alt="动画融合树结构1"></li>
<li><p>融合树对player使用的任何武器都适用<br> 1- PullOutWeapon<br> 2- IdleWithWeapon<br> 3- ReloadWeapon<br> 4- AimingWithWeapon<br>你需要像下图那样修改融合树，我将会使用PullOutWeapon (1) 的blend trees来描述定义的动画，因为blend trees (2,3,4) 都是用的同样的blend tree。<br> <img src="/uploads/QQ20161024-6@2x.jpg" alt="动画融合树结构2"></p>
</li>
<li><p>如果你仔细看了上面的配置，PullOutWeapon blend tree 使用了Weapon Style参数来切换单个武器的动画。事实上这里并没有用到融合。Weapon Style的参数并不能定义为1.5或者2.3之类的。Blend tree在这里只是简单的应用。你可以在这里看到Threshold的准确信息。<br>现在假说我有武器了，并且在握住武器的时候想用Weapon Style No:4 动画。我就只能添加一个motion到PullOut blend tree同时设置Threshold时间点为4。<br>如果我们添加好了所有动画并且设置好了所有的在GunAtt组件上的 weaponStyle 字段，player在拿起武器的时候就会使用这些动画了。<br>另外两个 animation/blend trees 都可以修改，方法同上。<br><img src="/uploads/QQ20161103-0@2x.jpg" alt="动画融合树结构3"></p>
</li>
</ol>
<h3 id="定义一个新武器"><a href="#定义一个新武器" class="headerlink" title="定义一个新武器"></a>定义一个新武器</h3><p>你需要一个武器模型，在倒入模型之后，照着教程做。我将设置一个名为 Colt 的模型，让其在项目中可用。</p>
<ol>
<li>将名为 AK47的武器拖入场景，设置成合适的大小。<br><img src="/uploads/QQ20161104-0@2x.jpg" alt="设置prefab"></li>
<li>把新武器模型朝向/大小改的和旧武器模型差不多。加入AK47下作为子节点，把之前的旧模型干掉。</li>
<li>重命名AK47然后保存一个新的prefab。<br><img src="/uploads/QQ20161104-1@2x.jpg" alt="设置新prefab"></li>
<li>如果武器动画是分离的，就需要创建Rigidbody, Box Collider，有必要重命名</li>
<li>设置Clip 的 collider box呈灰态，Rigidbody设置成 Non kinematic .<br><img src="/uploads/QQ20161104-2@2x.jpg" alt="设置新prefab"></li>
<li>设置上一步的 clip 节点作为武器的一个子节点。</li>
<li>选择武器并且设置一些必须字段。CurClipObject 就是上一步提到的 Clip节点。CurClipPrefab 就是你导入的模型。</li>
<li>请给这个武器创建一个新的prefab</li>
<li>给这个武器添加 GunAtt，你在这个脚本里这个定义武器各方面的行为。我将在这里该一些基本的特性 武器名字，clip capacity,武器风格等。选择一个子弹模型到 CurrentProjectilePrefab 字段。<br><img src="/uploads/QQ20161104-3@2x.jpg" alt=""></li>
<li>你可以看到武器的一些子节点，武器系统使用GunAtt来控制这些节点。EmptyShellPosRot 节点用来控制子弹初始化的位置/角度。TrailExitPos 节点用来控制射线或物体的位置。(这段话有问题 具体在项目中看)。勿要修改 FixHolderforCharacters 节点。</li>
</ol>
<ul>
<li>武器可以射出特定口径的子弹。 这意味着如果玩家的武器剪辑为空，武器系统将尝试使用PlayerAtts ammoBag字段中相同的机芯子弹进行搜索。 口径号用于区分不同武器使用的子弹。</li>
<li>如果武器没有使用射线投射，一些GunAtt字段将不会被使用，这意味着它们将被像RPG火箭弹那样的投射物覆盖</li>
</ul>
<pre><code>11. 现在指派这个新武器到 player 上。点击开始按钮你可以看到角色拿着武器站在那里
</code></pre><p><img src="/uploads/QQ20161104-4@2x.jpg" alt=""><br><img src="/uploads/QQ20161104-5@2x.jpg" alt=""></p>
<pre><code>12. 如果你没有倒入新角色可以跳过 13 步骤。停止游戏，在监视面板中选中武器并且找到 GunAtt 之上的 CharacterFixHolders 字段。对于单个角色需要绑定(拖放)6个 Transfrom 。
</code></pre><p><img src="/uploads/QQ20161114-0@2x.jpg" alt=""></p>
<pre><code>13. 这段翻译有些长,你可以对照着下图看。
</code></pre><p>点击播放，抽出武器，首先修正右手的动画。你需要选中RightHandHold的子节点 PosRotFixer 。调整到一个合适的角度位置，然后拷贝这个节点(PosRotFixer)的ttransform信息，粘贴到 AnimRightHand 之上。<br>做完了这些点击 AnimRightHand 组件上的 <save to="" temporary="">按钮，这样的话即使你停止的游戏，也不会丢失刚才的更改。<br>修正其他节点的位置， AimSight, AimHipFire, AimCover, LeftHandClip 使用 PosRotFixers 节点 就上上面操作的那样。注意，只有 LeftHandle 会被直接修改。<br>注意：你可以使用player的 PressFire2Button 当你修正瞄准动画的时候，(你不要用 Fire1Button 来修复AimHipFirePosition)和修正瞄准时候的位置。<br>当你都做完之后，保存到了 temporary ，停止游戏然后点击 Load from temporary .<br><img src="/uploads/QQ20161114-1@2x.jpg" alt="">   <img src="/uploads/QQ20161114-2@2x.jpg" alt=""><br>当角色（玩家或射手Ai）拔出武器时，将按您输入characterName字段的名称进行定位。 例如，当名为Player Remy的玩家拔出武器或瞄准它时，他将在GunAtt中使用具有匹配的字符名称的信息。</save></p>
<h3 id="投掷系统"><a href="#投掷系统" class="headerlink" title="投掷系统"></a>投掷系统</h3><p>这个系统能够投掷，在游戏中会实例化prefab。 在项目中有一个Frag Grenade示例。<br>为了让玩家投掷预制，预制需要有3个主要组件。 Rigidbody, Collider，Exploder。 您可以修改投掷的Exploder组件以定义不同的可抛出行为。 Rigidbody和Collider有些可选，<br>但投掷系统将需要 Exploder组件在prefab上才能工作。</p>
<ol>
<li>定义一个New Player的投掷动画<br>1.1 你需要为投掷定义不同的玩家动画。作为一个例子，我已经添加了一个更多的throw动画，目前没有使用。投掷是在Player的animator的第四层完成的。<br>如果你想为一个throwable添加一个不同的Player动画，你将需要遵循一个类似的方式,在武器部分示例的那样。<br>我添加了一个混合树到ReadyIdle混合树导入player animation。 如果你不想使用Far/Short 只是创建一个motion。 我设置了Threshold为2，这样，当玩家拉出这个可抛物，他会使用这些动画。 修改像PullOut / ToReady这个例子类似 其他混合树。<br><img src="/uploads/macscreenshot1.jpg" alt="注意此图右边"></li>
</ol>
<h3 id="相机系统"><a href="#相机系统" class="headerlink" title="相机系统"></a>相机系统</h3><p>它的工作原理类似于一些Player系统，如Look At system.Generally，这是由其他系统，如武器，封面等使用。<br>例如武器系统想要相机聚焦到一个位置，它会告诉相机系统这个请求，如果相机没有更重要的工作，它会执行这个请求。<br>目前，该系统完全可以覆盖第三人称，第一人称，其他系统聚焦。</p>
<h3 id="运动系统"><a href="#运动系统" class="headerlink" title="运动系统"></a>运动系统</h3><p>Locomotion系统，正如其名称所解释的那样负责运动。 该系统有4个状态，可被其他系统覆盖。</p>
<ol>
<li>用键自由移动</li>
<li>带键的静态运动（通常是转向一类的位置变换）</li>
<li>使用navmeshagent移动</li>
<li>停用状态</li>
</ol>
<h3 id="掩护系统"><a href="#掩护系统" class="headerlink" title="掩护系统"></a>掩护系统</h3><p>该系统负责玩家掩护(防护)的的每个方面。<br>掩护检测由玩家的子节点CoverChecker完成。 要修改或微调掩护检测，请使用此GameObject的CoverTargetLogic组件。 其他掩护参数可以通过Player的PlayerAtts组件修改。</p>
<h3 id="观察系统"><a href="#观察系统" class="headerlink" title="观察系统"></a>观察系统</h3><h2 id="算法和代码部分"><a href="#算法和代码部分" class="headerlink" title="算法和代码部分"></a>算法和代码部分</h2><h3 id="Player的基础"><a href="#Player的基础" class="headerlink" title="Player的基础"></a>Player的基础</h3><p>Player系统在理论上是完全独立的。 但在真实或游戏世界中，一般来说，这是不可能的。 因此，系统将总是尝试与其他系统通信。</p>
<p>我将尝试用几个例子来解释Player系统的工作流程，希望它能帮助你以后定义你的系统。</p>
<p>想象一下，武器被武器系统拉出，玩家击中目标按钮，然后再次武器系统正在播放瞄准动画，但是玩家也想在瞄准时向后移动，因此他/她按下移动返回按钮， S键。</p>
<p>如果两个系统工作而没有彼此通信，则player可能瞄准相机本身，因为Locomotion System通过转玩家来响应向后移动按钮。 然后你会得到一些有趣的行为。</p>
<p>现在让我们看看 IntenseTPS 在这样的情况如何工作。在我们的例子中，当按钮事件时触发时武器系统开始瞄准，Locomotion系统将上从武器系统得到一个消息，转向一个总是在Player和摄像机前面的对象。之后，他将始终瞄准并转向相机正在看的位置。<br>之后，当瞄准完成武器系统会告诉Locomotion系统，它不再需要转到一个位置。然后运动系统将返回其默认行为。</p>
<p>让我们假设玩家靠近墙壁，想要被掩护，他/她通过按掩护按钮进入掩体。掩护系统将进入掩体，它会要求相机覆盖自己的第三人相机状态与“掩体的特定参数”。假设它没有来自任何其他系统的其他请求，并根据Cover System的要求设置它自己。然后玩家拉出一个武器，想要瞄准，武器系统也会要求相机系统重写自己的第三人称相机，但与武器系统的参数。相机会选择哪一个？在这样的情况下，答案是最重要的。</p>
<p>一般的想法是，一个系统不能在一个参数都没有的情况下要求另一个系统改变它的状态。 该系统将如何使用该特殊参数的？ 那么，这是一个系统本身需要解决的问题。</p>
<p>通过遵循所有Player系统的这个逻辑，当你添加一个新的系统，你不必担心，如果它将与其他系统工作。</p>
<p>除此之外，系统的关键触发器不会在没有特殊参数的情况下被调用。 例如投掷系统的按钮触发开始投掷，但有时我们不希望玩家投掷手榴弹时，当进掩体面时。 </p>
<p>因此，掩体系统将修改投掷系统的触发器以在短时间内禁用其部分或全部触发器，使得我们不会错误地混淆动画。</p>
<h3 id="代码例子"><a href="#代码例子" class="headerlink" title="代码例子"></a>代码例子</h3><p>如果你已经阅读了上一部分（玩家系统基础），你应该知道玩家系统背后的基本逻辑。现在让我们来看看一些代码示例。<br>我将尝试解释我如何集成一些功能与代码示例。看看下面的代码。</p>
<p><img src="/uploads/QQ20161117-0@2x.jpg" alt="Code Sample"></p>
<p> 这段代码取自Locomotion脚本，它的工作是进入第一人称照相机并退出。它也可以写成摄像机系统的一部分，因为在摄像机系统中没有其他按钮触发的事件，它被写为Locomotion System的一部分。<br>首先if语句检查第一人称相机按钮是否被按下，然后检查它是否已经处于第一人称相机模式，然后检查是否使用</p>
<p>如果你已经阅读了上一部分（玩家系统基础），你应该知道玩家系统背后的基本逻辑。现在让我们来看看一些代码示例。</p>
<p>我将尝试解释我如何集成一些功能与代码示例。看看下面的代码。</p>
<p>这段代码取自Locomotion脚本，它的工作是进入第一人称照相机并退出。它也可以写成摄像机系统的一部分，因为在摄像机系统中没有其他按钮触发的事件，它被写为Locomotion System的一部分。<br>首先if语句检查第一人称相机按钮是否被按下，然后检查它是否已经处于第一人称相机模式，然后用<code>TriggS.LastValue.GetTrigger（LocomotionSystemTriggers.ct_FreeLook）</code>代码检查是否使用启用了第一人称相机触发。<br>因此，如果名为Triggs的属性没有被任何其他系统播放器重写，将进入第一人称观察模式。</p>
<p>当第一人称观看模式被激活时，locomotion系统将以短整数（在这种情况下为-3）的方式告诉相机重写自身到第一人称相机状态。这意味着相机将重写自身到这个状态，即使它通过另一个事件被重写和改变它的状态。</p>
<p>然后这个触发器将尝试重写武器系统的触发器，这些触发器基本上是按钮触发的事件，例如拉出武器，瞄准等…<br>相同的请求也被发送到Cover System和Throw系统，最后它将发送请求到Look At系统 来设置其自身为激活状态。<br>我们实现了什么？<br>那么，在进入第一人称观看模式之后，即使他/她按下相关按钮，玩家将不能与武器交互，他/她将不能进入掩体面等。<br>所以如果你检查else if语句（退出第一人称看模式的条件），如果玩家按下按钮或者如果<code>!TriggS.LastValue.GetTrigger（LocomotionSystemTriggers.ct_FreeLook）</code>条件为真，玩家将退出第一人称模式 ，这意味着Locomotion系统触发器属性被另一个系统重写。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;本文记录TPS Documentation阅读过程,本篇讲述了此插件的基本配置与几个代码相关的系统与相关的代码案例.本篇基本上是翻译全文,有任何问题可留言，有兴趣的话推荐你阅读原文&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="INTENSE项目源码分析" scheme="http://vrast.cn/categories/INTENSE%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="INTENSE文档" scheme="http://vrast.cn/tags/INTENSE%E6%96%87%E6%A1%A3/"/>
    
  </entry>
  
  <entry>
    <title>INTENSE TPS 项目分析概述</title>
    <link href="http://vrast.cn/posts/fba9adf2/"/>
    <id>http://vrast.cn/posts/fba9adf2/</id>
    <published>2016-11-16T13:17:11.000Z</published>
    <updated>2016-11-16T15:20:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/uploads/33DD91C0-5CC1-45B4-9CFA-4581BE138CE6.jpg" alt=""></p>
<p>支持正版请移步Unity3D AssetStore <a href="https://www.assetstore.unity3d.com/en/#!/content/41738" target="_blank" rel="external">INTENSE TPS</a></p>
<blockquote>
<p>很高兴的开始了INTENSE TPS的项目分析，今晚试玩了几把感觉整体还是非常顺畅的。AI的表现还是比较贴合大型游戏的做法。关键词: 3DUI IK动画 GOAP 集群AI AI编辑器 算法</p>
</blockquote>
<a id="more"></a>
<h1 id="待完成目录"><a href="#待完成目录" class="headerlink" title="待完成目录"></a>待完成目录</h1><h3 id="Documentation-Intense-Goap-System-pdf"><a href="#Documentation-Intense-Goap-System-pdf" class="headerlink" title="Documentation Intense Goap System.pdf"></a>Documentation Intense Goap System.pdf</h3><p>1.Soldier Sensor Layers / Other Layers 介绍<br>2.Scriptable Objects 序列化细节介绍<br>3.StateSystem 多种StateSystem介绍</p>
<h2 id="INTENSE-TPS-项目分析"><a href="#INTENSE-TPS-项目分析" class="headerlink" title="INTENSE TPS 项目分析"></a>INTENSE TPS 项目分析</h2><h3 id="3DUI"><a href="#3DUI" class="headerlink" title="3DUI"></a>3DUI</h3><p>1.UGUI 的效果制作</p>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p>1.分析动画控制逻辑<br>2.动画融合技巧(动画融合等等细节)<br>3.IK动画<br>4.结束之后 额外内容 《如何做动画系统的控制》</p>
<h3 id="GOAP"><a href="#GOAP" class="headerlink" title="GOAP"></a>GOAP</h3><p>1.AI接口梳理<br>2.细分逻辑解析(寻路，数据，武器更换等)<br>3.结束之后 额外内容 《GOAP AI结构设计》</p>
<h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p>1.手雷投掷抛物线绘制<br>2.开枪准星抖动模拟</p>
<h1 id="已完成"><a href="#已完成" class="headerlink" title="已完成"></a>已完成</h1><h2 id="文档翻译-简略"><a href="#文档翻译-简略" class="headerlink" title="文档翻译 简略"></a>文档翻译 简略</h2><h3 id="Documentation-Intense-Tps-pdf"><a href="#Documentation-Intense-Tps-pdf" class="headerlink" title="Documentation Intense Tps.pdf"></a>Documentation Intense Tps.pdf</h3><p>1.layout构成<br>2.游戏的基本逻辑<br>3.动画控制器</p>
<h1 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h1><p>知乎：游戏AI的设计和实现困难么？有哪些大师级的人物，他们有什么传奇，制作了哪些经典游戏？<br><a href="https://www.zhihu.com/question/19989350" target="_blank" rel="external">https://www.zhihu.com/question/19989350</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/uploads/33DD91C0-5CC1-45B4-9CFA-4581BE138CE6.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;支持正版请移步Unity3D AssetStore &lt;a href=&quot;https://www.assetstore.unity3d.com/en/#!/content/41738&quot;&gt;INTENSE TPS&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;很高兴的开始了INTENSE TPS的项目分析，今晚试玩了几把感觉整体还是非常顺畅的。AI的表现还是比较贴合大型游戏的做法。关键词: 3DUI IK动画 GOAP 集群AI AI编辑器 算法&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="INTENSE项目源码分析" scheme="http://vrast.cn/categories/INTENSE%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="INTENSE总纲" scheme="http://vrast.cn/tags/INTENSE%E6%80%BB%E7%BA%B2/"/>
    
  </entry>
  
  <entry>
    <title>屌丝孙悟空的不幸福生活</title>
    <link href="http://vrast.cn/posts/ae108100/"/>
    <id>http://vrast.cn/posts/ae108100/</id>
    <published>2016-11-16T13:11:31.000Z</published>
    <updated>2016-11-16T13:34:42.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>分享一些有趣的故事，人缘最好的不是孙猴子原来是一无是处的唐僧。唐僧原是高干子弟又因对佛经不感冒在上课的时候打瞌睡被佛祖罚转世取西经。西经一路唐僧做的最多的就是进出妖怪洞府，被结婚，做的普渡众生着实少。你说妖怪谁真的敢咬唐僧 哈哈。</p>
</blockquote>
<a id="more"></a>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="450" src="http://music.163.com/outchain/player?type=4&id=343553052&auto=0&height=430"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;分享一些有趣的故事，人缘最好的不是孙猴子原来是一无是处的唐僧。唐僧原是高干子弟又因对佛经不感冒在上课的时候打瞌睡被佛祖罚转世取西经。西经一路唐僧做的最多的就是进出妖怪洞府，被结婚，做的普渡众生着实少。你说妖怪谁真的敢咬唐僧 哈哈。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Self" scheme="http://vrast.cn/categories/Self/"/>
    
    
      <category term="有趣的故事" scheme="http://vrast.cn/tags/%E6%9C%89%E8%B6%A3%E7%9A%84%E6%95%85%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>Objective-C 笔记</title>
    <link href="http://vrast.cn/posts/e599b879/"/>
    <id>http://vrast.cn/posts/e599b879/</id>
    <published>2016-11-15T07:24:35.000Z</published>
    <updated>2016-11-18T10:19:16.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>记录一些 Objective-C 的实用代码片段，本篇属于个人笔记</p>
</blockquote>
<a id="more"></a>
<h1 id="常用关键字一览"><a href="#常用关键字一览" class="headerlink" title="常用关键字一览"></a>常用关键字一览</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span>、@<span class="title">implementation</span>、@<span class="title">end</span> </span></div><div class="line"><span class="keyword">@public</span>、<span class="keyword">@protected</span>、<span class="keyword">@private</span>、<span class="keyword">@selector</span> </div><div class="line"><span class="keyword">@try</span>、<span class="keyword">@catch</span>、<span class="keyword">@throw</span>、<span class="keyword">@finally</span> </div><div class="line"><span class="class"><span class="keyword">@protocol</span>、@<span class="title">optional</span>、@<span class="title">required</span>、@<span class="title">class</span></span></div><div class="line"><span class="keyword">@property</span>、<span class="keyword">@synthesize</span>、<span class="keyword">@dynamic</span></div><div class="line"><span class="built_in">BOOL</span> Class SEL <span class="literal">YES</span> <span class="literal">NO</span> <span class="keyword">id</span> <span class="keyword">self</span> <span class="keyword">super</span> <span class="literal">nil</span> atomic <span class="keyword">nonatomic</span> <span class="keyword">retain</span> <span class="keyword">assign</span> <span class="keyword">copy</span> block …</div></pre></td></tr></table></figure>
<h1 id="方法调用-基础语法"><a href="#方法调用-基础语法" class="headerlink" title="方法调用 基础语法"></a>方法调用 基础语法</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"> </div><div class="line"><span class="comment">// - 表示动态方方法</span></div><div class="line"><span class="comment">// ＋表示静态方法</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">TestClass</span> : <span class="title">NSObject</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">@public</span></div><div class="line">    <span class="comment">//下划线开头</span></div><div class="line">    <span class="built_in">NSString</span> * _name;</div><div class="line">    <span class="keyword">int</span> _age;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> * NickName;</div><div class="line"> </div><div class="line">+(<span class="keyword">void</span>) staticSayHello;</div><div class="line">-(<span class="keyword">void</span>) SayHello;</div><div class="line"> </div><div class="line">+(<span class="keyword">double</span>) staticTestWithParams:(<span class="keyword">int</span>) num ThisIsWord:(<span class="keyword">int</span>) num2;</div><div class="line"> </div><div class="line"><span class="keyword">@end</span></div><div class="line"> </div><div class="line"><span class="comment">//实现上文中的方法才可以调用</span></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">TestClass</span></span></div><div class="line"> </div><div class="line"><span class="comment">//实现构造函数</span></div><div class="line">-(<span class="keyword">id</span>)init</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"初始化构造函数..."</span>);</div><div class="line">    &#125;</div><div class="line">    returnself;</div><div class="line">&#125;</div><div class="line">-(<span class="keyword">id</span>)initWithNickname:(<span class="built_in">NSString</span>*)nickName</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"带有参数的构造 %@"</span>,nickName);</div><div class="line">    &#125;</div><div class="line">    returnself;</div><div class="line">&#125;</div><div class="line">-(<span class="keyword">id</span>)initAgeAndNickname:(<span class="keyword">int</span>)age andName :(<span class="built_in">NSString</span>*)name</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> =[<span class="keyword">super</span> init]) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"带有双参数的构造 %d +++ %@"</span>,age,name);</div><div class="line">    &#125;</div><div class="line">    returnself;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"> </div><div class="line">-(<span class="keyword">void</span>) SayHello</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Name is %@ and age is %d"</span>,_name,_age);</div><div class="line">&#125;</div><div class="line">+(<span class="keyword">void</span>)staticSayHello&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Static Call SayHello must call by Class .."</span>);</div><div class="line">&#125;</div><div class="line">+(<span class="keyword">double</span>)staticTestWithParams:(<span class="keyword">int</span>)num ThisIsWord:(<span class="keyword">int</span>) num2</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%d +========+++=%d"</span>,num,num2);</div><div class="line">    <span class="keyword">return</span> num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"> </div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</div><div class="line">    </div><div class="line">    TestClass* test = [[TestClassalloc] initAgeAndNickname:<span class="number">21</span>andName:<span class="string">@"xiaonian"</span>];</div><div class="line">    </div><div class="line">    test-&gt;_name = <span class="string">@"Hello World"</span>;</div><div class="line">    test-&gt;_age = <span class="number">21</span>;</div><div class="line">    </div><div class="line">    [test SayHello];<span class="comment">//Call Method</span></div><div class="line">    [TestClassstaticSayHello];<span class="comment">//Casll Static Method</span></div><div class="line">    [TestClassstaticTestWithParams:<span class="number">123456</span>ThisIsWord:<span class="number">890123</span>];</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"--------分隔符---------"</span>);</div><div class="line">    </div><div class="line">    Class c = [TestClass <span class="keyword">class</span>];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%p"</span>,c);</div><div class="line">    <span class="comment">//0x100004708</span></div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"--------分隔符-@SEL--------"</span>);</div><div class="line">    SEL sel = <span class="keyword">@selector</span>(SayHello);</div><div class="line">    [test performSelector:sel];</div><div class="line">    [test performSelector:<span class="keyword">@selector</span>(SayHello)];</div><div class="line">    <span class="keyword">if</span> ([test respondsToSelector:sel]) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,<span class="string">@"可以相应sel－－sayhello"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"--------分隔符-@property--------"</span>);</div><div class="line">    </div><div class="line">    [test setNickName:<span class="string">@"xiaonian"</span>];</div><div class="line">    <span class="built_in">NSString</span>* nickName = [test NickName];</div><div class="line">    test.NickName = <span class="string">@"xiaonian2"</span>;</div><div class="line">    <span class="built_in">NSString</span>* nickName2 = test.NickName;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ and %@"</span>,nickName,nickName2);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="基础类型转换"><a href="#基础类型转换" class="headerlink" title="基础类型转换"></a>基础类型转换</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> hours = floor(rawtime / <span class="number">3600000</span>);</div><div class="line"></div><div class="line"><span class="keyword">int</span> mins = floor((rawtime % <span class="number">3600000</span>) / (<span class="number">1000</span> * <span class="number">60</span>));</div><div class="line"><span class="keyword">int</span> secs = floor(((rawtime % <span class="number">3600000</span>) % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</div><div class="line"></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%d:%d:%d"</span>, hours, mins, secs);</div><div class="line"></div><div class="line"><span class="built_in">NSString</span> *hoursStr = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>, hours];</div><div class="line"><span class="built_in">NSString</span> *minsStr = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>, mins];</div><div class="line"><span class="built_in">NSString</span> *secsStr = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>, secs];</div><div class="line"></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%a:%a:%a"</span>, hoursStr, minsStr, secsStr);</div></pre></td></tr></table></figure>
<p><a href="http://stackoverflow.com/questions/2388991/objective-c-convert-int-to-nsstring-iphone" target="_blank" rel="external">参考链接 int to NSString</a></p>
<h1 id="获取设备当前网络IP地址"><a href="#获取设备当前网络IP地址" class="headerlink" title="获取设备当前网络IP地址"></a>获取设备当前网络IP地址</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取设备当前网络IP地址</span></div><div class="line">- (<span class="built_in">NSString</span> *)getIPAddress:(<span class="built_in">BOOL</span>)preferIPv4</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSArray</span> *searchArray = preferIPv4 ?</div><div class="line">    @[ <span class="comment">/*IOS_VPN @"/" IP_ADDR_IPv4, IOS_VPN @"/" IP_ADDR_IPv6,*/</span> IOS_WIFI <span class="string">@"/"</span> IP_ADDR_IPv4, IOS_WIFI <span class="string">@"/"</span> IP_ADDR_IPv6, IOS_CELLULAR <span class="string">@"/"</span> IP_ADDR_IPv4, IOS_CELLULAR <span class="string">@"/"</span> IP_ADDR_IPv6 ] :</div><div class="line">    @[ <span class="comment">/*IOS_VPN @"/" IP_ADDR_IPv6, IOS_VPN @"/" IP_ADDR_IPv4,*/</span> IOS_WIFI <span class="string">@"/"</span> IP_ADDR_IPv6, IOS_WIFI <span class="string">@"/"</span> IP_ADDR_IPv4, IOS_CELLULAR <span class="string">@"/"</span> IP_ADDR_IPv6, IOS_CELLULAR <span class="string">@"/"</span> IP_ADDR_IPv4 ] ;</div><div class="line">    </div><div class="line">    <span class="built_in">NSDictionary</span> *addresses = [<span class="keyword">self</span> getIPAddresses];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"addresses: %@"</span>, addresses);</div><div class="line">    </div><div class="line">    __block <span class="built_in">NSString</span> *address;</div><div class="line">    [searchArray enumerateObjectsUsingBlock:^(<span class="built_in">NSString</span> *key, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop)</div><div class="line">     &#123;</div><div class="line">         address = addresses[key];</div><div class="line">         <span class="keyword">if</span>(address) *stop = <span class="literal">YES</span>;</div><div class="line">     &#125; ];</div><div class="line">    <span class="keyword">return</span> address ? address : <span class="string">@"0.0.0.0"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//获取所有相关IP信息</span></div><div class="line">- (<span class="built_in">NSDictionary</span> *)getIPAddresses</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *addresses = [<span class="built_in">NSMutableDictionary</span> dictionaryWithCapacity:<span class="number">8</span>];</div><div class="line">    </div><div class="line">    <span class="comment">// retrieve the current interfaces - returns 0 on success</span></div><div class="line">    <span class="keyword">struct</span> ifaddrs *interfaces;</div><div class="line">    <span class="keyword">if</span>(!getifaddrs(&amp;interfaces)) &#123;</div><div class="line">        <span class="comment">// Loop through linked list of interfaces</span></div><div class="line">        <span class="keyword">struct</span> ifaddrs *interface;</div><div class="line">        <span class="keyword">for</span>(interface=interfaces; interface; interface=interface-&gt;ifa_next) &#123;</div><div class="line">            <span class="keyword">if</span>(!(interface-&gt;ifa_flags &amp; IFF_UP) <span class="comment">/* || (interface-&gt;ifa_flags &amp; IFF_LOOPBACK) */</span> ) &#123;</div><div class="line">                <span class="keyword">continue</span>; <span class="comment">// deeply nested code harder to read</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *addr = (<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in*)interface-&gt;ifa_addr;</div><div class="line">            <span class="keyword">char</span> addrBuf[ MAX(INET_ADDRSTRLEN, INET6_ADDRSTRLEN) ];</div><div class="line">            <span class="keyword">if</span>(addr &amp;&amp; (addr-&gt;sin_family==AF_INET || addr-&gt;sin_family==AF_INET6)) &#123;</div><div class="line">                <span class="built_in">NSString</span> *name = [<span class="built_in">NSString</span> stringWithUTF8String:interface-&gt;ifa_name];</div><div class="line">                <span class="built_in">NSString</span> *type;</div><div class="line">                <span class="keyword">if</span>(addr-&gt;sin_family == AF_INET) &#123;</div><div class="line">                    <span class="keyword">if</span>(inet_ntop(AF_INET, &amp;addr-&gt;sin_addr, addrBuf, INET_ADDRSTRLEN)) &#123;</div><div class="line">                        type = IP_ADDR_IPv4;</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in6 *addr6 = (<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in6*)interface-&gt;ifa_addr;</div><div class="line">                    <span class="keyword">if</span>(inet_ntop(AF_INET6, &amp;addr6-&gt;sin6_addr, addrBuf, INET6_ADDRSTRLEN)) &#123;</div><div class="line">                        type = IP_ADDR_IPv6;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(type) &#123;</div><div class="line">                    <span class="built_in">NSString</span> *key = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@/%@"</span>, name, type];</div><div class="line">                    addresses[key] = [<span class="built_in">NSString</span> stringWithUTF8String:addrBuf];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// Free memory</span></div><div class="line">        freeifaddrs(interfaces);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> [addresses count] ? addresses : <span class="literal">nil</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;记录一些 Objective-C 的实用代码片段，本篇属于个人笔记&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="学习手札" scheme="http://vrast.cn/categories/%E5%AD%A6%E4%B9%A0%E6%89%8B%E6%9C%AD/"/>
    
    
      <category term="Objective-C" scheme="http://vrast.cn/tags/Objective-C/"/>
    
  </entry>
  
  <entry>
    <title>YouMiSDK FAQ</title>
    <link href="http://vrast.cn/posts/61ce4672/"/>
    <id>http://vrast.cn/posts/61ce4672/</id>
    <published>2016-11-14T11:27:17.000Z</published>
    <updated>2016-11-15T07:50:50.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>记录有米视频SDK接入的一些问题 断断续续记录中📝</p>
</blockquote>
<a id="more"></a>
<h1 id="基础流程走-Document-案例"><a href="#基础流程走-Document-案例" class="headerlink" title="基础流程走 Document 案例"></a>基础流程走 Document 案例</h1><p>1.在 Unity3D 5.4.2 这个版本下打包出来的 XCode 工程 需要添加如下<br><img src="/uploads/QQ20161114-0.jpg" alt=""></p>
<h1 id="主要的一些问题-FAQ"><a href="#主要的一些问题-FAQ" class="headerlink" title="主要的一些问题 FAQ"></a>主要的一些问题 FAQ</h1><ol>
<li><p>You’ve implemented -[<uiapplicationdelegate> application:didReceiveRemoteNotification:fetchCompletionHandler:], but you still need to add “remote-notification” to the list of your supported UIBackgroundModes in your Info.plist.<br>解决方法：<br><img src="/uploads/QQ20161114-1.jpg" alt=""></uiapplicationdelegate></p>
</li>
<li><p>需要传入当前UIViewController,此处使用 <code>UnityGetGLViewController()</code> 来获取当前Unity3d使用的view.</p>
</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[UMVideoAd videoPlay:UnityGetGLViewController() videoPlayFinishCallBackBlock:^(<span class="built_in">BOOL</span> isFinishPlay)&#123;</div><div class="line">        <span class="keyword">if</span> (isFinishPlay) &#123;</div><div class="line">            <span class="comment">//You Code Here</span></div><div class="line">        &#125;<span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//You Code Here</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ol>
<li>使用的时候务必判断不同类型的返回值便于处理不同状态。譬如 增加是否有可用广告的判断</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;记录有米视频SDK接入的一些问题 断断续续记录中📝&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="SDK" scheme="http://vrast.cn/categories/SDK/"/>
    
    
      <category term="YouMi" scheme="http://vrast.cn/tags/YouMi/"/>
    
  </entry>
  
  <entry>
    <title>Coding.net Pages部署</title>
    <link href="http://vrast.cn/posts/530f864b/"/>
    <id>http://vrast.cn/posts/530f864b/</id>
    <published>2016-11-14T05:36:36.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Coding.net Pages部署 FAQ</p>
</blockquote>
<a id="more"></a>
<h1 id="Coding相关设置"><a href="#Coding相关设置" class="headerlink" title="Coding相关设置"></a>Coding相关设置</h1><h2 id="注册账户"><a href="#注册账户" class="headerlink" title="注册账户"></a>注册账户</h2><p><a href="https://coding.net/" target="_blank" rel="external">https://coding.net/</a></p>
<h2 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h2><ol>
<li>创建 coding-pages 分支(可选)</li>
<li>开启pages服务 可选master分支</li>
<li>如果有域名需要绑定 CNAME </li>
</ol>
<h2 id="配置hexo-git"><a href="#配置hexo-git" class="headerlink" title="配置hexo git"></a>配置hexo git</h2><ol>
<li><p>安装 git 扩展</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></div></pre></td></tr></table></figure>
</li>
<li><p>配置 git</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Deployment</span></div><div class="line"><span class="meta">## Docs: https:<span class="comment">//hexo.io/docs/deployment.html</span></span></div><div class="line"><span class="symbol">deploy:</span></div><div class="line"><span class="symbol">  type:</span> git</div><div class="line"><span class="symbol">  repo:</span> </div><div class="line"><span class="symbol">      github:</span> git@github.com:xxx/xxx.git</div><div class="line"><span class="symbol">      coding:</span> git@git.coding.net:xxx.git</div><div class="line"><span class="symbol">  branch:</span> master</div><div class="line"><span class="symbol">  message:</span> <span class="string">" updateed: &#123;&#123; now('YYYY-MM-DD HH:mm:ss') &#125;&#125;"</span></div></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Coding.net Pages部署 FAQ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Site" scheme="http://vrast.cn/categories/Site/"/>
    
    
      <category term="Hexo" scheme="http://vrast.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title> AppStore Create New Application FAQ</title>
    <link href="http://vrast.cn/posts/c7ee08d7/"/>
    <id>http://vrast.cn/posts/c7ee08d7/</id>
    <published>2016-10-31T02:38:30.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Agreement Update : Review the updated Paid Applications Schedule.记录上架流程与问题</p>
</blockquote>
<a id="more"></a>
<h1 id="协议升级"><a href="#协议升级" class="headerlink" title="协议升级"></a>协议升级</h1><p><img src="/uploads/QQ20161031-0@2x.jpg" alt="协议升级"></p>
<ul>
<li>更新了三个协议 Agreements, Tax, and Banking 。这次升级必须要一个一个点进去填写相应的信息。<br>协议，税务，银行卡 需要填写的信息比较简单，大约2个工作日内审核完毕。</li>
</ul>
<h1 id="iTunes-Connect上创建APP"><a href="#iTunes-Connect上创建APP" class="headerlink" title="iTunes Connect上创建APP"></a>iTunes Connect上创建APP</h1><h2 id="设置购买付费"><a href="#设置购买付费" class="headerlink" title="设置购买付费"></a>设置购买付费</h2><p>1.在 My Apps 中创建一个新App<br>2.My App -&gt; Pricing and Availability -&gt; Price Schedule 添加售价</p>
<h2 id="添加内购项目"><a href="#添加内购项目" class="headerlink" title="添加内购项目"></a>添加内购项目</h2><p>1.2.My App -&gt; In-App Purchases 添加内购项</p>
<h2 id="添加测试账户"><a href="#添加测试账户" class="headerlink" title="添加测试账户"></a>添加测试账户</h2><p>1.<a href="https://itunesconnect.apple.com" target="_blank" rel="external">User and Role -&gt; SandBox Testers -&gt; 添加沙盒测试用户</a><br>2.取消移动端的iTunes账户<br>3.需要付费时 填入测试用户</p>
<h2 id="资料填写"><a href="#资料填写" class="headerlink" title="资料填写"></a>资料填写</h2><ul>
<li>尽量详细</li>
<li>尽量不要漏</li>
</ul>
<h2 id="参考源码"><a href="#参考源码" class="headerlink" title="参考源码"></a>参考源码</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"IAPManager.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">IAPManager</span></span></div><div class="line"></div><div class="line">-(<span class="keyword">void</span>) attachObserver&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"AttachObserver"</span>);</div><div class="line">    [[<span class="built_in">SKPaymentQueue</span> defaultQueue] addTransactionObserver:<span class="keyword">self</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="built_in">BOOL</span>) CanMakePayment&#123;</div><div class="line">    <span class="keyword">return</span> [<span class="built_in">SKPaymentQueue</span> canMakePayments];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>) requestProductData:(<span class="built_in">NSString</span> *)productIdentifiers&#123;</div><div class="line">    <span class="built_in">NSArray</span> *idArray = [productIdentifiers componentsSeparatedByString:<span class="string">@"\t"</span>];</div><div class="line">    <span class="built_in">NSSet</span> *idSet = [<span class="built_in">NSSet</span> setWithArray:idArray];</div><div class="line">    [<span class="keyword">self</span> sendRequest:idSet];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)sendRequest:(<span class="built_in">NSSet</span> *)idSet&#123;</div><div class="line">    <span class="built_in">SKProductsRequest</span> *request = [[<span class="built_in">SKProductsRequest</span> alloc] initWithProductIdentifiers:idSet];</div><div class="line">    request.delegate = <span class="keyword">self</span>;</div><div class="line">    [request start];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)productsRequest:(<span class="built_in">SKProductsRequest</span> *)request didReceiveResponse:(<span class="built_in">SKProductsResponse</span> *)response&#123;</div><div class="line">    <span class="built_in">NSArray</span> *products = response.products;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (<span class="built_in">SKProduct</span> *p <span class="keyword">in</span> products) &#123;</div><div class="line">        UnitySendMessage(<span class="string">"Main"</span>, <span class="string">"ShowProductList"</span>, [[<span class="keyword">self</span> productInfo:p] UTF8String]);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(<span class="built_in">NSString</span> *invalidProductId <span class="keyword">in</span> response.invalidProductIdentifiers)&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Invalid product id:%@"</span>,invalidProductId);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)buyRequest:(<span class="built_in">NSString</span> *)productIdentifier&#123;</div><div class="line">    <span class="built_in">SKPayment</span> *payment = [<span class="built_in">SKPayment</span> paymentWithProductIdentifier:productIdentifier];</div><div class="line">    [[<span class="built_in">SKPaymentQueue</span> defaultQueue] addPayment:payment];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="built_in">NSString</span> *)productInfo:(<span class="built_in">SKProduct</span> *)product&#123;</div><div class="line">    <span class="built_in">NSArray</span> *info = [<span class="built_in">NSArray</span> arrayWithObjects:product.localizedTitle,product.localizedDescription,product.price,product.productIdentifier, <span class="literal">nil</span>];</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> [info componentsJoinedByString:<span class="string">@"\t"</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)paymentQueue:(<span class="built_in">SKPaymentQueue</span> *)queue updatedTransactions:(<span class="built_in">NSArray</span> *)transactions&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">SKPaymentTransaction</span> *transaction <span class="keyword">in</span> transactions) &#123;</div><div class="line">        <span class="keyword">switch</span> (transaction.transactionState) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="built_in">SKPaymentTransactionStatePurchased</span>:</div><div class="line">                [<span class="keyword">self</span> completeTransaction:transaction];</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="built_in">SKPaymentTransactionStateFailed</span>:</div><div class="line">                [<span class="keyword">self</span> failedTransaction:transaction];</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="built_in">SKPaymentTransactionStateRestored</span>:</div><div class="line">                [<span class="keyword">self</span> restoreTransaction:transaction];</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>) completeTransaction:(<span class="built_in">SKPaymentTransaction</span> *)transaction&#123;</div><div class="line">    <span class="built_in">NSString</span> * productIdentifier = [[<span class="built_in">NSString</span> alloc] initWithData:transaction.transactionReceipt encoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">    <span class="built_in">NSString</span> * receipt = [[productIdentifier dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>] base64EncodedStringWithOptions:<span class="built_in">NSDataBase64Encoding64CharacterLineLength</span>];</div><div class="line">    receipt = [receipt stringByReplacingOccurrencesOfString:<span class="string">@"\r"</span> withString:<span class="string">@""</span>];</div><div class="line">    receipt = [receipt stringByReplacingOccurrencesOfString:<span class="string">@"\n"</span> withString:<span class="string">@""</span>];</div><div class="line">    </div><div class="line">    UnitySendMessage(<span class="string">"PAYManager"</span>, <span class="string">"BuyGoldIAPComplete"</span>,[receipt UTF8String]);</div><div class="line">    [[<span class="built_in">SKPaymentQueue</span> defaultQueue] finishTransaction:transaction];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">-(<span class="keyword">void</span>) restoreTransaction:(<span class="built_in">SKPaymentTransaction</span> *)transaction&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Restore transaction : %@"</span>,transaction.transactionIdentifier);</div><div class="line">    [[<span class="built_in">SKPaymentQueue</span> defaultQueue] finishTransaction:transaction];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">-(<span class="keyword">void</span>) provideContent:(<span class="built_in">SKPaymentTransaction</span> *)transaction&#123;</div><div class="line"></div><div class="line">    UnitySendMessage(<span class="string">"Main"</span>, <span class="string">"ProvideContent"</span>, [transaction.transactionIdentifier UTF8String]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>) failedTransaction:(<span class="built_in">SKPaymentTransaction</span> *)transaction&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Failed transaction : %@"</span>,transaction.transactionIdentifier);</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (transaction.error.code != <span class="built_in">SKErrorPaymentCancelled</span>) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"!Cancelled"</span>);</div><div class="line">    &#125;</div><div class="line">    [[<span class="built_in">SKPaymentQueue</span> defaultQueue] finishTransaction:transaction];</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">static</span> IAPManager* iap_manager = <span class="literal">nil</span>;</div><div class="line"></div><div class="line"></div><div class="line">IAPManager* GetIAPManager()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (iap_manager == <span class="literal">nil</span>) &#123;</div><div class="line">        iap_manager = [[IAPManager alloc] init];</div><div class="line">        [iap_manager attachObserver];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> iap_manager;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">bool</span> IsProductAvailable()&#123;</div><div class="line">    <span class="keyword">return</span> [GetIAPManager() CanMakePayment];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> RequstProductInfo(<span class="keyword">void</span> *p)&#123;</div><div class="line">    <span class="built_in">NSString</span> *list = [<span class="built_in">NSString</span> stringWithUTF8String:p];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"productKey:%@"</span>,list);</div><div class="line">    [GetIAPManager() requestProductData:list];</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">void</span> BuyProduct(<span class="keyword">void</span> *p)&#123;</div><div class="line">    [GetIAPManager() buyRequest:[<span class="built_in">NSString</span> stringWithUTF8String:p]];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="WARNING"><a href="#WARNING" class="headerlink" title="WARNING"></a>WARNING</h3><ul>
<li>上传App Icon 需要上传1024*1024的，而不能有圆角</li>
<li>必须添加测试账号</li>
<li>.ipa文件不能包含中文</li>
<li>必须保证Private Policy URL的可用性</li>
<li>Cleared for Sale 需要勾选</li>
<li>支付完成需要拿着苹果收费凭据去服务器校验 验证本地服务购买的有效性</li>
<li>苹果校验错误码如下 <a href="https://sandbox.itunes.apple.com/verifyReceipt" target="_blank" rel="external">沙盒校验地址</a>   <a href="https://buy.itunes.apple.com/verifyReceipt" target="_blank" rel="external"> 正式校验地址</a><br><img src="/uploads/tmp2a22b8d6.jpg" alt="协议升级"></li>
</ul>
<p><a href="http://blog.csdn.net/lxmy2012/article/details/48444731" target="_blank" rel="external">关于协议升级的中文链接</a><br><a href="http://www.cocoachina.com/bbs/read.php?tid=330302" target="_blank" rel="external">关于商家事项的中文链接</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Agreement Update : Review the updated Paid Applications Schedule.记录上架流程与问题&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="AppStore" scheme="http://vrast.cn/categories/AppStore/"/>
    
    
      <category term="IAP" scheme="http://vrast.cn/tags/IAP/"/>
    
  </entry>
  
  <entry>
    <title>优化hexo访问速度</title>
    <link href="http://vrast.cn/posts/57edf9bb/"/>
    <id>http://vrast.cn/posts/57edf9bb/</id>
    <published>2016-10-25T13:08:56.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>优化hexo访问速度</p>
</blockquote>
<a id="more"></a>
<h1 id="三项优化"><a href="#三项优化" class="headerlink" title="三项优化"></a>三项优化</h1><ul>
<li><p>推荐使用图片压缩 图片一般都是最占带宽的，过大的图片极度影响访问速度</p>
</li>
<li><p>优化googleapis 的使用，在国内访问可以考虑换为360的cdn库 </p>
</li>
<li><p>在github托管的站点，最重要的技巧是 ping you_blog.github.io;获取最快的IP节点</p>
</li>
</ul>
<h1 id="搜索关键词"><a href="#搜索关键词" class="headerlink" title="搜索关键词"></a>搜索关键词</h1><ul>
<li>Compress All!</li>
<li>hexo googleapis</li>
<li>ping 定位IP</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;优化hexo访问速度&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Site" scheme="http://vrast.cn/categories/Site/"/>
    
    
      <category term="Hexo" scheme="http://vrast.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>UNITY3D &amp; IOS PAY</title>
    <link href="http://vrast.cn/posts/5008cb40/"/>
    <id>http://vrast.cn/posts/5008cb40/</id>
    <published>2016-10-25T07:19:40.000Z</published>
    <updated>2016-11-18T06:37:44.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>记录UNITY3D与iOS的互相调用，附通用模型</p>
</blockquote>
<a id="more"></a>
<h1 id="基本交互"><a href="#基本交互" class="headerlink" title="基本交互"></a>基本交互</h1><h2 id="标记call函数"><a href="#标记call函数" class="headerlink" title="标记call函数"></a>标记call函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[DllImport (&quot;__Internal&quot;)]</div><div class="line">private static extern float FooPluginFunction();</div></pre></td></tr></table></figure>
<h2 id="使用C来链接被call函数-不使用也可"><a href="#使用C来链接被call函数-不使用也可" class="headerlink" title="使用C来链接被call函数(不使用也可)"></a>使用C来链接被call函数(不使用也可)</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="string">"C"</span> &#123;</div><div class="line">  <span class="keyword">float</span> FooPluginFunction();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">如果不使用可以直接写在.mm文件的 @implemented  <span class="keyword">@end</span> 之间</div></pre></td></tr></table></figure>
<h2 id="在iOS层-使用-UnitySendMessage-函数给Unity场景发送消息"><a href="#在iOS层-使用-UnitySendMessage-函数给Unity场景发送消息" class="headerlink" title="在iOS层 使用 UnitySendMessage 函数给Unity场景发送消息"></a>在iOS层 使用 UnitySendMessage 函数给Unity场景发送消息</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">UnitySendMessage</span>(<span class="string">"GameObjectName1"</span>, <span class="string">"MethodName1"</span>, <span class="string">"Message to send"</span>);</div></pre></td></tr></table></figure>
<ul>
<li>必须有同名的GameObject</li>
<li>方法签名必须要对应上</li>
<li>UnitySendMessage函数是异步的，会delay一帧，然后被调用。</li>
</ul>
<h2 id="插件整合方法"><a href="#插件整合方法" class="headerlink" title="插件整合方法"></a>插件整合方法</h2><ul>
<li>.m,.mm,.c,.cpp 格式都被支持，需要至于 Plugins/iOS 文件夹下</li>
<li>.h 文件不会在Xcode project tree上显示</li>
</ul>
<h1 id="UnityGameNotification-h-Plugin-通用"><a href="#UnityGameNotification-h-Plugin-通用" class="headerlink" title="UnityGameNotification.h - Plugin 通用"></a>UnityGameNotification.h - Plugin 通用</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  NSObject+IAPModule.h</span></div><div class="line"><span class="comment">//  Unity-iPhone</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by keyle on 11/2/16.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">IAPModule</span> : <span class="title">NSObject</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span>* status;</div><div class="line">    <span class="built_in">BOOL</span> searching;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">id</span>)init;</div><div class="line">- (<span class="keyword">int</span>)getCount;</div><div class="line">- (<span class="built_in">NSString</span> *)getStatus;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h1 id="UnityGameNotification-mm-Plugin-通用"><a href="#UnityGameNotification-mm-Plugin-通用" class="headerlink" title="UnityGameNotification.mm - Plugin 通用"></a>UnityGameNotification.mm - Plugin 通用</h1><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"UnityGameNotification.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NetServiceBrowserDelegate</span> : <span class="title">NSObject</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span>* status;</div><div class="line">    <span class="built_in">BOOL</span> searching;</div><div class="line">&#125;</div><div class="line">    </div><div class="line">- (<span class="keyword">id</span>)init</div><div class="line">&#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">    searching = <span class="literal">NO</span>;</div><div class="line">	status = <span class="string">@"Initializing"</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)dealloc</div><div class="line">&#123;</div><div class="line"><span class="comment">//    [super dealloc];	</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (<span class="keyword">int</span>)getCount</div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> <span class="number">1024</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSString</span> *)getStatus</div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> status;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> UnityGameNotification* delegateObject = <span class="literal">nil</span>;</div><div class="line"></div><div class="line"><span class="comment">// Converts C style string to NSString</span></div><div class="line"><span class="built_in">NSString</span>* CreateNSString (<span class="keyword">const</span> <span class="keyword">char</span>* string)</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (string)</div><div class="line">		<span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithUTF8String: string];</div><div class="line">	<span class="keyword">else</span></div><div class="line">		<span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithUTF8String: <span class="string">""</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Helper method to create C string copy</span></div><div class="line"><span class="keyword">char</span>* MakeStringCopy (<span class="keyword">const</span> <span class="keyword">char</span>* string)</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (string == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">char</span>* res = (<span class="keyword">char</span>*)malloc(strlen(string) + <span class="number">1</span>);</div><div class="line">	strcpy(res, string);</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// When native code plugin is implemented in .mm / .cpp file, then functions</span></div><div class="line"><span class="comment">// should be surrounded with extern "C" block to conform C function naming rules</span></div><div class="line"><span class="keyword">extern</span> <span class="string">"C"</span> &#123;</div><div class="line"></div><div class="line">	<span class="keyword">void</span> _ExecuteMethodFromiOS (<span class="keyword">const</span> <span class="keyword">char</span>* arg1, <span class="keyword">const</span> <span class="keyword">char</span>* arg2)</div><div class="line">	&#123;</div><div class="line">        <span class="comment">//do some initialize work</span></div><div class="line">    &#125;</div><div class="line">	</div><div class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* _GetStringFromiOS ()</div><div class="line">	&#123;</div><div class="line">        <span class="keyword">return</span> MakeStringCopy([<span class="string">@"have fun"</span> UTF8String]);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">int</span> _GetINT ()</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1024</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* _GetServiceName (<span class="keyword">int</span> serviceNumber)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> MakeStringCopy([<span class="string">@"have fun"</span> UTF8String]);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="https://docs.unity3d.com/Manual/PluginsForIOS.html" target="_blank" rel="external">Building Plugins for iOS</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;记录UNITY3D与iOS的互相调用，附通用模型&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Unity3D&amp;iOS" scheme="http://vrast.cn/categories/Unity3D-iOS/"/>
    
    
      <category term="Interaction" scheme="http://vrast.cn/tags/Interaction/"/>
    
  </entry>
  
  <entry>
    <title>GaussianBlur Shader</title>
    <link href="http://vrast.cn/posts/321de5e/"/>
    <id>http://vrast.cn/posts/321de5e/</id>
    <published>2016-10-14T09:24:12.000Z</published>
    <updated>2016-11-15T11:03:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/uploads/QQ20161014-0.jpg" alt=""></p>
<blockquote>
<p>高斯模糊网上收集的代码 仅供学习参考</p>
</blockquote>
<a id="more"></a>
<h1 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h1>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Gaussian Blur</div><div class="line"> *</div><div class="line"> * Author(s): Flying Banana</div><div class="line"> * Date Created: 11-Nov-2015</div><div class="line"> */</div><div class="line"></div><div class="line">/**</div><div class="line"> * This is a three-pass blur shader. Quality-wise this gives the best result.</div><div class="line"> */</div><div class="line">Shader &quot;UI/Blur/UIBlurHQ&quot; &#123;</div><div class="line">    Properties &#123;</div><div class="line">        _TintColor (&quot;Tint Color&quot;, Color) = (1, 1, 1, 0.2)</div><div class="line">        _Size (&quot;Spacing&quot;, Range(0, 20)) = 5.0</div><div class="line">        _Vibrancy (&quot;Vibrancy&quot;, Range(0, 2)) = 0.2</div><div class="line">        </div><div class="line">        [HideInInspector]</div><div class="line">		_StencilComp (&quot;Stencil Comparison&quot;, Float) = 8</div><div class="line">		[HideInInspector]</div><div class="line">		_Stencil (&quot;Stencil ID&quot;, Float) = 0</div><div class="line">		[HideInInspector]</div><div class="line">		_StencilOp (&quot;Stencil Operation&quot;, Float) = 0</div><div class="line">		[HideInInspector]</div><div class="line">		_StencilWriteMask (&quot;Stencil Write Mask&quot;, Float) = 255</div><div class="line">		[HideInInspector]</div><div class="line">		_StencilReadMask (&quot;Stencil Read Mask&quot;, Float) = 255</div><div class="line"></div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    Category &#123;</div><div class="line">        // We must be transparent, so other objects are drawn before this one.</div><div class="line">        Tags &#123; </div><div class="line">        	&quot;Queue&quot;=&quot;Transparent&quot; </div><div class="line">        	&quot;IgnoreProjector&quot;=&quot;True&quot; </div><div class="line">        	&quot;RenderType&quot;=&quot;Opaque&quot; </div><div class="line">        &#125;</div><div class="line"></div><div class="line">		Stencil &#123;</div><div class="line">			Ref [_Stencil]</div><div class="line">			Comp [_StencilComp]</div><div class="line">			Pass [_StencilOp] </div><div class="line">			ReadMask [_StencilReadMask]</div><div class="line">			WriteMask [_StencilWriteMask]</div><div class="line">		&#125;</div><div class="line"></div><div class="line">        SubShader &#123;</div><div class="line"></div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            // Vertical blur</div><div class="line">            Pass &#123;</div><div class="line">                Name &quot;VERTICAL&quot;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                float _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(0,0,0,0);</div><div class="line"> </div><div class="line">                    #define GRABPIXEL(weight,kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely * _Size * 1.61, i.uvgrab.z, i.uvgrab.w))) * weight</div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(0.05, -4.0);</div><div class="line">                    sum += GRABPIXEL(0.09, -3.0);</div><div class="line">                    sum += GRABPIXEL(0.12, -2.0);</div><div class="line">                    sum += GRABPIXEL(0.15, -1.0);</div><div class="line">                    sum += GRABPIXEL(0.18,  0.0);</div><div class="line">                    sum += GRABPIXEL(0.15, +1.0);</div><div class="line">                    sum += GRABPIXEL(0.12, +2.0);</div><div class="line">                    sum += GRABPIXEL(0.09, +3.0);</div><div class="line">                    sum += GRABPIXEL(0.05, +4.0);</div><div class="line">                   </div><div class="line">                    return sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            GrabPass &#123;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            // Horizontal blur</div><div class="line">            Pass &#123;</div><div class="line">                Name &quot;HORIZONTAL&quot;</div><div class="line">            </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                float _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(0,0,0,0);</div><div class="line"> </div><div class="line">                    #define GRABPIXEL(weight,kernelx) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx * _Size * 1.61, i.uvgrab.y, i.uvgrab.z, i.uvgrab.w))) * weight</div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(0.05, -4.0);</div><div class="line">                    sum += GRABPIXEL(0.09, -3.0);</div><div class="line">                    sum += GRABPIXEL(0.12, -2.0);</div><div class="line">                    sum += GRABPIXEL(0.15, -1.0);</div><div class="line">                    sum += GRABPIXEL(0.18,  0.0);</div><div class="line">                    sum += GRABPIXEL(0.15, +1.0);</div><div class="line">                    sum += GRABPIXEL(0.12, +2.0);</div><div class="line">                    sum += GRABPIXEL(0.09, +3.0);</div><div class="line">                    sum += GRABPIXEL(0.05, +4.0);</div><div class="line">                   </div><div class="line">                    return sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line">              </div><div class="line">            GrabPass &#123;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            // Vertical blur</div><div class="line">            Pass &#123;</div><div class="line">                Name &quot;VERTICAL&quot;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                float _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(0,0,0,0);</div><div class="line"> </div><div class="line">                    #define GRABPIXEL(weight,kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely * _Size, i.uvgrab.z, i.uvgrab.w))) * weight</div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(0.05, -4.0);</div><div class="line">                    sum += GRABPIXEL(0.09, -3.0);</div><div class="line">                    sum += GRABPIXEL(0.12, -2.0);</div><div class="line">                    sum += GRABPIXEL(0.15, -1.0);</div><div class="line">                    sum += GRABPIXEL(0.18,  0.0);</div><div class="line">                    sum += GRABPIXEL(0.15, +1.0);</div><div class="line">                    sum += GRABPIXEL(0.12, +2.0);</div><div class="line">                    sum += GRABPIXEL(0.09, +3.0);</div><div class="line">                    sum += GRABPIXEL(0.05, +4.0);</div><div class="line">                   </div><div class="line">                    return sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            // Horizontal blur</div><div class="line">            Pass &#123;</div><div class="line">                Name &quot;HORIZONTAL&quot;</div><div class="line">            </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                float _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(0,0,0,0);</div><div class="line"> </div><div class="line">                    #define GRABPIXEL(weight,kernelx) tex2Dproj(_GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx * _Size, i.uvgrab.y, i.uvgrab.z, i.uvgrab.w))) * weight</div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(0.05, -4.0);</div><div class="line">                    sum += GRABPIXEL(0.09, -3.0);</div><div class="line">                    sum += GRABPIXEL(0.12, -2.0);</div><div class="line">                    sum += GRABPIXEL(0.15, -1.0);</div><div class="line">                    sum += GRABPIXEL(0.18,  0.0);</div><div class="line">                    sum += GRABPIXEL(0.15, +1.0);</div><div class="line">                    sum += GRABPIXEL(0.12, +2.0);</div><div class="line">                    sum += GRABPIXEL(0.09, +3.0);</div><div class="line">                    sum += GRABPIXEL(0.05, +4.0);</div><div class="line">                   </div><div class="line">                    return sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line">            GrabPass &#123;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            // Vertical blur</div><div class="line">            Pass &#123;</div><div class="line">                Name &quot;VERTICAL&quot;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                float _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(0,0,0,0);</div><div class="line"> </div><div class="line">                    #define GRABPIXEL(weight,kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely * _Size * 0.2, i.uvgrab.z, i.uvgrab.w))) * weight</div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(0.05, -4.0);</div><div class="line">                    sum += GRABPIXEL(0.09, -3.0);</div><div class="line">                    sum += GRABPIXEL(0.12, -2.0);</div><div class="line">                    sum += GRABPIXEL(0.15, -1.0);</div><div class="line">                    sum += GRABPIXEL(0.18,  0.0);</div><div class="line">                    sum += GRABPIXEL(0.15, +1.0);</div><div class="line">                    sum += GRABPIXEL(0.12, +2.0);</div><div class="line">                    sum += GRABPIXEL(0.09, +3.0);</div><div class="line">                    sum += GRABPIXEL(0.05, +4.0);</div><div class="line">                   </div><div class="line">                    return sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            // Horizontal blur</div><div class="line">            Pass &#123;</div><div class="line">                Name &quot;HORIZONTAL&quot;</div><div class="line">            </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                float _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(0,0,0,0);</div><div class="line"> </div><div class="line">                    #define GRABPIXEL(weight,kernelx) tex2Dproj(_GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx * _Size * 0.2, i.uvgrab.y, i.uvgrab.z, i.uvgrab.w))) * weight</div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(0.05, -4.0);</div><div class="line">                    sum += GRABPIXEL(0.09, -3.0);</div><div class="line">                    sum += GRABPIXEL(0.12, -2.0);</div><div class="line">                    sum += GRABPIXEL(0.15, -1.0);</div><div class="line">                    sum += GRABPIXEL(0.18,  0.0);</div><div class="line">                    sum += GRABPIXEL(0.15, +1.0);</div><div class="line">                    sum += GRABPIXEL(0.12, +2.0);</div><div class="line">                    sum += GRABPIXEL(0.09, +3.0);</div><div class="line">                    sum += GRABPIXEL(0.05, +4.0);</div><div class="line">                   </div><div class="line">                    return sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            // Distortion</div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            Pass &#123;</div><div class="line">                Tags &#123; &quot;LightMode&quot; = &quot;Always&quot; &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                #pragma vertex vert</div><div class="line">                #pragma fragment frag</div><div class="line">                #pragma fragmentoption ARB_precision_hint_fastest</div><div class="line">                #include &quot;UnityCG.cginc&quot;</div><div class="line">               </div><div class="line">                struct appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                struct v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    #if UNITY_UV_STARTS_AT_TOP</div><div class="line">                    float scale = -1.0;</div><div class="line">                    #else</div><div class="line">                    float scale = 1.0;</div><div class="line">                    #endif</div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    </div><div class="line">                    return o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                half4 _TintColor;</div><div class="line">                float _Vibrancy;</div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 col = tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(i.uvgrab));</div><div class="line">                    col.xyz *= 1 + _Vibrancy;</div><div class="line">                   	col = lerp (col, _TintColor, _TintColor.w);</div><div class="line">                    return col;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h1> <figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Gaussian Blur</div><div class="line"> *</div><div class="line"> * Author(s): Flying Banana</div><div class="line"> * Date Created: 25-Jul-2015</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * This is a two-pass blur shader. Performance-wise this gives the best result.</div><div class="line"> */</div><div class="line">Shader <span class="string">"UI/Blur/UIBlur"</span> &#123;</div><div class="line">    Properties &#123;</div><div class="line">        _TintColor (<span class="string">"Tint Color"</span>, Color) = (<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0.2</span>)</div><div class="line">        _Size (<span class="string">"Spacing"</span>, Range(<span class="number">0</span>, <span class="number">10</span>)) = <span class="number">5.0</span></div><div class="line">        _Vibrancy (<span class="string">"Vibrancy"</span>, Range(<span class="number">0</span>, <span class="number">2</span>)) = <span class="number">0.2</span></div><div class="line">        </div><div class="line">        [HideInInspector]</div><div class="line">		_StencilComp (<span class="string">"Stencil Comparison"</span>, Float) = <span class="number">8</span></div><div class="line">		[HideInInspector]</div><div class="line">		_Stencil (<span class="string">"Stencil ID"</span>, Float) = <span class="number">0</span></div><div class="line">		[HideInInspector]</div><div class="line">		_StencilOp (<span class="string">"Stencil Operation"</span>, Float) = <span class="number">0</span></div><div class="line">		[HideInInspector]</div><div class="line">		_StencilWriteMask (<span class="string">"Stencil Write Mask"</span>, Float) = <span class="number">255</span></div><div class="line">		[HideInInspector]</div><div class="line">		_StencilReadMask (<span class="string">"Stencil Read Mask"</span>, Float) = <span class="number">255</span></div><div class="line"></div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    Category &#123;</div><div class="line">        <span class="comment">// We must be transparent, so other objects are drawn before this one.</span></div><div class="line">        Tags &#123; </div><div class="line">        	<span class="string">"Queue"</span>=<span class="string">"Transparent"</span> </div><div class="line">        	<span class="string">"IgnoreProjector"</span>=<span class="string">"True"</span> </div><div class="line">        	<span class="string">"RenderType"</span>=<span class="string">"Opaque"</span> </div><div class="line">        &#125;</div><div class="line"></div><div class="line">		Stencil &#123;</div><div class="line">			Ref [_Stencil]</div><div class="line">			Comp [_StencilComp]</div><div class="line">			Pass [_StencilOp] </div><div class="line">			ReadMask [_StencilReadMask]</div><div class="line">			WriteMask [_StencilWriteMask]</div><div class="line">		&#125;</div><div class="line"></div><div class="line">        SubShader &#123;</div><div class="line"></div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            <span class="comment">// Vertical blur</span></div><div class="line">            Pass &#123;</div><div class="line">                Name <span class="string">"VERTICAL"</span></div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragmentoption ARB_precision_hint_fastest</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"UnityCG.cginc"</span></span></div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    <span class="meta">#<span class="meta-keyword">if</span> UNITY_UV_STARTS_AT_TOP</span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">-1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * <span class="number">0.5</span>;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    <span class="built_in">return</span> o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                <span class="keyword">float</span> _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"> </div><div class="line">                    <span class="meta">#<span class="meta-keyword">define</span> GRABPIXEL(weight,kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely * _Size * 1.61, i.uvgrab.z, i.uvgrab.w))) * weight</span></div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, <span class="number">-4.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, <span class="number">-3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, <span class="number">-2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, <span class="number">-1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.18</span>,  <span class="number">0.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, +<span class="number">1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, +<span class="number">2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, +<span class="number">3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, +<span class="number">4.0</span>);</div><div class="line">                   </div><div class="line">                    <span class="built_in">return</span> sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            GrabPass &#123;</div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// Horizontal blur</span></div><div class="line">            Pass &#123;</div><div class="line">                Name <span class="string">"HORIZONTAL"</span></div><div class="line">            </div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragmentoption ARB_precision_hint_fastest</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"UnityCG.cginc"</span></span></div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    <span class="meta">#<span class="meta-keyword">if</span> UNITY_UV_STARTS_AT_TOP</span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">-1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * <span class="number">0.5</span>;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    <span class="built_in">return</span> o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                <span class="keyword">float</span> _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"> </div><div class="line">                    <span class="meta">#<span class="meta-keyword">define</span> GRABPIXEL(weight,kernelx) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx * _Size * 1.61, i.uvgrab.y, i.uvgrab.z, i.uvgrab.w))) * weight</span></div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, <span class="number">-4.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, <span class="number">-3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, <span class="number">-2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, <span class="number">-1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.18</span>,  <span class="number">0.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, +<span class="number">1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, +<span class="number">2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, +<span class="number">3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, +<span class="number">4.0</span>);</div><div class="line">                   </div><div class="line">                    <span class="built_in">return</span> sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line">              </div><div class="line">            GrabPass &#123;</div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            <span class="comment">// Vertical blur</span></div><div class="line">            Pass &#123;</div><div class="line">                Name <span class="string">"VERTICAL"</span></div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragmentoption ARB_precision_hint_fastest</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"UnityCG.cginc"</span></span></div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    <span class="meta">#<span class="meta-keyword">if</span> UNITY_UV_STARTS_AT_TOP</span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">-1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * <span class="number">0.5</span>;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    <span class="built_in">return</span> o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                <span class="keyword">float</span> _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"> </div><div class="line">                    <span class="meta">#<span class="meta-keyword">define</span> GRABPIXEL(weight,kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely * _Size, i.uvgrab.z, i.uvgrab.w))) * weight</span></div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, <span class="number">-4.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, <span class="number">-3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, <span class="number">-2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, <span class="number">-1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.18</span>,  <span class="number">0.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, +<span class="number">1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, +<span class="number">2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, +<span class="number">3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, +<span class="number">4.0</span>);</div><div class="line">                   </div><div class="line">                    <span class="built_in">return</span> sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// Horizontal blur</span></div><div class="line">            Pass &#123;</div><div class="line">                Name <span class="string">"HORIZONTAL"</span></div><div class="line">            </div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragmentoption ARB_precision_hint_fastest</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"UnityCG.cginc"</span></span></div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    <span class="meta">#<span class="meta-keyword">if</span> UNITY_UV_STARTS_AT_TOP</span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">-1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * <span class="number">0.5</span>;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    <span class="built_in">return</span> o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                <span class="keyword">float</span> _Size;</div><div class="line">               </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 sum = half4(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"> </div><div class="line">                    <span class="meta">#<span class="meta-keyword">define</span> GRABPIXEL(weight,kernelx) tex2Dproj(_GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx * _Size, i.uvgrab.y, i.uvgrab.z, i.uvgrab.w))) * weight</span></div><div class="line"> </div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, <span class="number">-4.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, <span class="number">-3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, <span class="number">-2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, <span class="number">-1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.18</span>,  <span class="number">0.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.15</span>, +<span class="number">1.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.12</span>, +<span class="number">2.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.09</span>, +<span class="number">3.0</span>);</div><div class="line">                    sum += GRABPIXEL(<span class="number">0.05</span>, +<span class="number">4.0</span>);</div><div class="line">                   </div><div class="line">                    <span class="built_in">return</span> sum;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="comment">// Distortion</span></div><div class="line">            GrabPass &#123;                         </div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            Pass &#123;</div><div class="line">                Tags &#123; <span class="string">"LightMode"</span> = <span class="string">"Always"</span> &#125;</div><div class="line">               </div><div class="line">                CGPROGRAM</div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">pragma</span> fragmentoption ARB_precision_hint_fastest</span></div><div class="line">                <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"UnityCG.cginc"</span></span></div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> appdata_t &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float2 texcoord: TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                <span class="keyword">struct</span> v2f &#123;</div><div class="line">                    float4 vertex : POSITION;</div><div class="line">                    float4 uvgrab : TEXCOORD0;</div><div class="line">                &#125;;</div><div class="line">               </div><div class="line">                v2f vert (appdata_t v) &#123;</div><div class="line">                    v2f o;</div><div class="line">                    o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);</div><div class="line">                    <span class="meta">#<span class="meta-keyword">if</span> UNITY_UV_STARTS_AT_TOP</span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">-1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">                    <span class="keyword">float</span> scale = <span class="number">1.0</span>;</div><div class="line">                    <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">                    o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * <span class="number">0.5</span>;</div><div class="line">                    o.uvgrab.zw = o.vertex.zw;</div><div class="line">                    </div><div class="line">                    <span class="built_in">return</span> o;</div><div class="line">                &#125;</div><div class="line">               </div><div class="line">                half4 _TintColor;</div><div class="line">                <span class="keyword">float</span> _Vibrancy;</div><div class="line">                sampler2D _GrabTexture;</div><div class="line">                float4 _GrabTexture_TexelSize;</div><div class="line">                </div><div class="line">                half4 frag( v2f i ) : COLOR &#123;</div><div class="line">                    half4 col = tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(i.uvgrab));</div><div class="line">                    col.xyz *= <span class="number">1</span> + _Vibrancy;</div><div class="line">                   	col = lerp (col, _TintColor, _TintColor.w);</div><div class="line">                    <span class="built_in">return</span> col;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                ENDCG</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/uploads/QQ20161014-0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;高斯模糊网上收集的代码 仅供学习参考&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="图形学" scheme="http://vrast.cn/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/"/>
    
    
      <category term="Shader" scheme="http://vrast.cn/tags/Shader/"/>
    
  </entry>
  
  <entry>
    <title>让Git密匙同时存在多个</title>
    <link href="http://vrast.cn/posts/8a54b94d/"/>
    <id>http://vrast.cn/posts/8a54b94d/</id>
    <published>2016-10-14T08:47:16.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>今天遇到在coding上部署了项目，生成密匙后发现不能正常push，遂发现了这个小秘密</p>
</blockquote>
<a id="more"></a>
<h1 id="创建confg用来管理多个密匙"><a href="#创建confg用来管理多个密匙" class="headerlink" title="创建confg用来管理多个密匙"></a>创建confg用来管理多个密匙</h1><p>1.切到ssh目录 ~/.ssh<br>2.创建config文件 vim config<br>3.替换如下 注意IdentityFile一栏中不需要文件的扩展名</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Host github.com</div><div class="line">PreferredAuthentications publickey</div><div class="line">IdentityFile ~/.ssh/KeyNameWithoutExtension</div><div class="line"><span class="keyword">User</span> <span class="title">username</span></div><div class="line"></div><div class="line">Host git.coding.net</div><div class="line">PreferredAuthentications publickey</div><div class="line">IdentityFile ~/.ssh/KeyNameWithoutExtension</div><div class="line"><span class="keyword">User</span> <span class="title">username</span></div></pre></td></tr></table></figure>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>ssh -T git@xxx.com</p>
<p><img src="/uploads/QQ20161014-0@2x.jpg" alt=""></p>
<h1 id="备注-生产密匙指令"><a href="#备注-生产密匙指令" class="headerlink" title="备注 生产密匙指令"></a>备注 生产密匙指令</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">ssh-keygen</span> <span class="selector-tag">-t</span> <span class="selector-tag">rsa</span> <span class="selector-tag">-C</span> "<span class="selector-tag">your_mail_addr</span>@<span class="keyword">gmail</span>.<span class="keyword">com</span>" 添加公钥</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;今天遇到在coding上部署了项目，生成密匙后发现不能正常push，遂发现了这个小秘密&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Git" scheme="http://vrast.cn/categories/Git/"/>
    
    
      <category term="Git技巧" scheme="http://vrast.cn/tags/Git%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>优化XCode磁盘空间占用</title>
    <link href="http://vrast.cn/posts/aae0baa1/"/>
    <id>http://vrast.cn/posts/aae0baa1/</id>
    <published>2016-10-12T09:43:37.000Z</published>
    <updated>2016-11-18T06:38:21.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>网上介绍五花八门 其实主要就是这两项占磁盘，平均一次IPA打包要占用最少1G</p>
</blockquote>
<a id="more"></a>
<p>1.移除Archives<br>影响：不可恢复；Adhoc或者App Store版本会被删除。建议备份dSYM文件夹<br>路径：~/Library/Developer/Xcode/Archives</p>
<p>2.移除DerivedData<br>影响：可重新生成；会删除build生成的项目索引、build输出以及日志。重新打开项目时会重新生成，大的项目会耗费一些时间。<br>路径：~/Library/Developer/Xcode/DerivedData</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;网上介绍五花八门 其实主要就是这两项占磁盘，平均一次IPA打包要占用最少1G&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Mac" scheme="http://vrast.cn/categories/Mac/"/>
    
    
      <category term="XCode" scheme="http://vrast.cn/tags/XCode/"/>
    
  </entry>
  
  <entry>
    <title>Graphics.PresentAndSync FAQ</title>
    <link href="http://vrast.cn/posts/abba0161/"/>
    <id>http://vrast.cn/posts/abba0161/</id>
    <published>2016-10-10T11:21:35.000Z</published>
    <updated>2016-11-18T06:37:53.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/uploads/EBA9A054-30D8-4A8F-AC61-82B2BE9112DB.jpg" alt=""></p>
<blockquote>
<p>PresentAndSync导致程序卡顿 本篇从多个角度介绍了针对PresentAndSync的措施</p>
</blockquote>
 <a id="more"></a>
<h1 id="关于VSync在iOS平台上的表现"><a href="#关于VSync在iOS平台上的表现" class="headerlink" title="关于VSync在iOS平台上的表现"></a>关于VSync在iOS平台上的表现</h1><p>1.iOS devices are always vsynced and that can’t be changed. vsync is allways ON, for iOS and cannot be turned off<br>2.By default the framerate is capped at 30;<br>3.you can use Application.targetFrameRate to change it to 60.</p>
<h1 id="Graphics-PresentAndSync-是什么？"><a href="#Graphics-PresentAndSync-是什么？" class="headerlink" title="Graphics.PresentAndSync 是什么？"></a>Graphics.PresentAndSync 是什么？</h1><p>1.主线程进行Present时的等待时间和等待垂直同步的时间<br>2.其真实的意思应该是为了在渲染子线程（Rendering Thread）中进行Present，当前主线程（MainThread）需要等待的时间。<br>3.引擎会在主线程中进行Present(当前绝大多数的移动游戏均在使用该中操作)，当然，Present操作同样需要等待GPU完成上一次的渲染。如果GPU渲染开销很大，则CPU的Present操作将一直处于等待操作，其等待时间，即为当前帧的Graphics.PresentAndSync时间</p>
<h1 id="为什么会导致Graphics-PresentAndSync过高💥"><a href="#为什么会导致Graphics-PresentAndSync过高💥" class="headerlink" title="为什么会导致Graphics.PresentAndSync过高💥"></a>为什么会导致Graphics.PresentAndSync过高💥</h1><p>CPU端开销很高，使得Present执行时错过了VSync操作，这样，Present将不得不等待下一次VSync的到来，从而造成了Gfx.WaitForPresent 和 Graphics.PresentAndSync的CPU开销较高。这种情况在CPU端加载过量资源时特别容易发生，比如WWW加载较大的AssetBundle、Resource.Load加载大量的Texture等等。</p>
<p>造成这两个参数的CPU占用较高的原因主要有以下三种原因：<br>1.CPU开销非常低，所以CPU在等待GPU完成渲染工作或等待VSync的到来；<br>2.CPU开销很高，使Present错过了当前帧的VSync，即不得不等待下一次VSync的到来<br>3.GPU开销很高，CPU的Present需要等待GPU上一帧渲染工作的完成。</p>
<h1 id="一些论坛的FAQ有一定参考意义"><a href="#一些论坛的FAQ有一定参考意义" class="headerlink" title="一些论坛的FAQ有一定参考意义"></a>一些论坛的FAQ有一定参考意义</h1><h2 id="这个是硬件设备强制开启的，Unity是无法对其进行关闭的"><a href="#这个是硬件设备强制开启的，Unity是无法对其进行关闭的" class="headerlink" title="这个是硬件设备强制开启的，Unity是无法对其进行关闭的"></a>这个是硬件设备强制开启的，Unity是无法对其进行关闭的</h2><p>出现这种情况的问题可能有以下几种：<br>1、渲染成本过高，可能使用了iPad2当前OS无法很好支持的渲染功能。<br>2、是否在其他线程中有大量加载资源的情况出现，该情况同样会导致该选项过高（原因是垂直同步）</p>
<h2 id="通过对帧数的限制来防止垂直同步的等待"><a href="#通过对帧数的限制来防止垂直同步的等待" class="headerlink" title="通过对帧数的限制来防止垂直同步的等待"></a>通过对帧数的限制来防止垂直同步的等待</h2><p>发现在unity上对帧数限制不管用，后来在xcode上面的接收unity帧数的函数里强行对帧行进了限制</p>
<h1 id="解决卡顿的一些建议"><a href="#解决卡顿的一些建议" class="headerlink" title="解决卡顿的一些建议"></a>解决卡顿的一些建议</h1><p>1.强制关闭垂直同步方案,强制设置帧率至60(仍然需要做CPU优化)<br>2.均摊计算到不同帧，降低CPU计算 使用Profiler查找开销源<br>3.优化Shader GPU 垂直同步问题是双向的，既要优化CPU也要优化GPU运算</p>
<h1 id="一些类似的问题"><a href="#一些类似的问题" class="headerlink" title="一些类似的问题"></a>一些类似的问题</h1><h2 id="场景1-IPhone4-Unity3D-Version4-X-遇到"><a href="#场景1-IPhone4-Unity3D-Version4-X-遇到" class="headerlink" title="场景1 IPhone4 Unity3D Version4.X 遇到"></a>场景1 IPhone4 Unity3D Version4.X 遇到</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">As it turns out, we hade to modify our shader code. The same shaders that had very little performance impact in 3.3 had massive performance impact on iOS in 3.4. So if you are stuck, <span class="keyword">check</span> there. Also, <span class="keyword">in</span> AppController.mm, <span class="keyword">change</span> this:</div><div class="line"></div><div class="line"><span class="keyword">define</span> USE_OPENGLES20_IF_AVAILABLE <span class="number">1</span></div><div class="line"><span class="keyword">To</span> this:</div><div class="line"><span class="keyword">define</span> USE_OPENGLES20_IF_AVAILABLE <span class="number">0</span></div><div class="line">Which we <span class="keyword">found</span> also gave us a significant FPS increase (nearly doubled our framerate <span class="keyword">on</span> iOS).</div><div class="line"></div><div class="line"><span class="keyword">url</span> : <span class="keyword">http</span>://answers.unity3d.com/questions/<span class="number">152966</span>/massive-<span class="keyword">performance</span>-decrease-<span class="keyword">in</span><span class="number">-34</span>-devicepresent-t.html</div></pre></td></tr></table></figure>
<h2 id="场景2-Unity3D-5-X"><a href="#场景2-Unity3D-5-X" class="headerlink" title="场景2 Unity3D 5.X"></a>场景2 Unity3D 5.X</h2><figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">In</span> <span class="number">5.4</span> uncheking the <span class="string">"Auto Graphics API "</span> ( <span class="built_in">in</span> <span class="built_in">player</span> settings) <span class="built_in">and</span> deleting GLES3 Gave me back a few <span class="built_in">FPS</span></div></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://answers.unity3d.com/questions/602628/why-does-my-game-require-so-much-rendering-power.html" target="_blank" rel="external">http://answers.unity3d.com/questions/602628/why-does-my-game-require-so-much-rendering-power.html</a><br><a href="http://answers.unity3d.com/questions/152966/massive-performance-decrease-in-34-devicepresent-t.html" target="_blank" rel="external">http://answers.unity3d.com/questions/152966/massive-performance-decrease-in-34-devicepresent-t.html</a><br><a href="https://forum.unity3d.com/threads/graphics-presentandsync-problem.318705/" target="_blank" rel="external">https://forum.unity3d.com/threads/graphics-presentandsync-problem.318705/</a><br><a href="https://docs.unity3d.com/Manual/class-QualitySettings.html" target="_blank" rel="external">https://docs.unity3d.com/Manual/class-QualitySettings.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/uploads/EBA9A054-30D8-4A8F-AC61-82B2BE9112DB.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PresentAndSync导致程序卡顿 本篇从多个角度介绍了针对PresentAndSync的措施&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="http://vrast.cn/categories/Unity3D/"/>
    
    
      <category term="Optimize" scheme="http://vrast.cn/tags/Optimize/"/>
    
  </entry>
  
  <entry>
    <title>关于现在</title>
    <link href="http://vrast.cn/posts/82640783/"/>
    <id>http://vrast.cn/posts/82640783/</id>
    <published>2016-09-27T10:07:14.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>看了点<a href="https://www.zhihu.com/question/23442256" target="_blank" rel="external">知乎</a>上的问答挺有意思的这里记录下 顺便写点自己的感想。</p>
</blockquote>
<a id="more"></a>
<p>规划赶不上变化</p>
<p>把自己能力提高</p>
<p>不要将创业算入职业规划</p>
<p>在工作中寻找机会</p>
<p>和朋友交流</p>
<p>勤奋务实</p>
<p>做好本职工作</p>
<p>命运是什么，命就是活着，运就是机遇</p>
<p>能给自己一个合适的定位 是再好不过了。人一生大部分时间都是用来了解自己</p>
<p>所有的得到都是有代价的 至于代价并不决定得到多少</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;看了点&lt;a href=&quot;https://www.zhihu.com/question/23442256&quot;&gt;知乎&lt;/a&gt;上的问答挺有意思的这里记录下 顺便写点自己的感想。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="生活" scheme="http://vrast.cn/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="None" scheme="http://vrast.cn/tags/None/"/>
    
  </entry>
  
  <entry>
    <title>Save rendertexture to image in file</title>
    <link href="http://vrast.cn/posts/df383137/"/>
    <id>http://vrast.cn/posts/df383137/</id>
    <published>2016-09-27T03:32:17.000Z</published>
    <updated>2016-11-18T06:37:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/uploads/QQ20160927-0.jpg"></p>
<blockquote>
<p>将Unity3d RenderTexture动态渲染出来的图保存到本地</p>
</blockquote>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">using UnityEngine;</div><div class="line">using System.Collections;</div><div class="line">using System.IO;</div><div class="line"></div><div class="line">public class CreateImage : MonoBehaviour</div><div class="line">&#123;</div><div class="line">    public RenderTexture render_texture;</div><div class="line">    public Texture2D texture2D;</div><div class="line">    public Plane plane;</div><div class="line"></div><div class="line">    public Camera _cameraWithRendTexture;</div><div class="line">    public TextMesh _percentMesh;</div><div class="line">    public TextMesh _nameMesh;</div><div class="line">    public int _heightInPixelsOfCertificate = 1488;</div><div class="line"></div><div class="line">    public void SaveCertificate()</div><div class="line">    &#123;</div><div class="line">        if (!_cameraWithRendTexture)</div><div class="line">            _cameraWithRendTexture = GameObject.Find(&quot;CertificateCamera&quot;).GetComponent&lt;Camera&gt;();</div><div class="line">        if (!_nameMesh)</div><div class="line">            _nameMesh = GameObject.Find(&quot;bName&quot;).GetComponent&lt;TextMesh&gt;();</div><div class="line">        if (!_percentMesh)</div><div class="line">            _percentMesh = GameObject.Find(&quot;dPercent&quot;).GetComponent&lt;TextMesh&gt;();</div><div class="line">        RenderTexture.active = _cameraWithRendTexture.targetTexture;</div><div class="line">        Texture2D newTexture = new Texture2D(_cameraWithRendTexture.targetTexture.width, _cameraWithRendTexture.targetTexture.height, TextureFormat.ARGB32, false);</div><div class="line">        newTexture.ReadPixels(new Rect(0, 0, _cameraWithRendTexture.targetTexture.width, _cameraWithRendTexture.targetTexture.height), 0, 0, false);</div><div class="line">        newTexture.Apply();</div><div class="line">        Color[] colorArrayCropped = newTexture.GetPixels(0, newTexture.height - _heightInPixelsOfCertificate, newTexture.width, _heightInPixelsOfCertificate);</div><div class="line">        Texture2D croppedTex = new Texture2D(newTexture.width, _heightInPixelsOfCertificate, TextureFormat.ARGB32, false);</div><div class="line">        croppedTex.SetPixels(colorArrayCropped);</div><div class="line">        croppedTex = FillInClear(croppedTex, _cameraWithRendTexture.backgroundColor);</div><div class="line">        croppedTex.Apply();</div><div class="line">        byte[] bytes = croppedTex.EncodeToPNG();</div><div class="line"></div><div class="line">        File.WriteAllBytes(&quot;Save File Path Here&quot;, bytes);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Texture2D FillInClear(Texture2D tex2D, Color whatToFillWith)</div><div class="line">    &#123;</div><div class="line"></div><div class="line">        for (int i = 0; i &lt; tex2D.width; i++)</div><div class="line">        &#123;</div><div class="line">            for (int j = 0; j &lt; tex2D.height; j++)</div><div class="line">            &#123;</div><div class="line">                if (tex2D.GetPixel(i, j) == Color.clear)</div><div class="line">                    tex2D.SetPixel(i, j, whatToFillWith);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return tex2D;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/uploads/QQ20160927-0.jpg&quot; /&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;将Unity3d RenderTexture动态渲染出来的图保存到本地&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="http://vrast.cn/categories/Unity3D/"/>
    
    
      <category term="rendertexure" scheme="http://vrast.cn/tags/rendertexure/"/>
    
  </entry>
  
  <entry>
    <title>protobuf-net ios 无法运行解决方案</title>
    <link href="http://vrast.cn/posts/d88c5041/"/>
    <id>http://vrast.cn/posts/d88c5041/</id>
    <published>2016-09-21T11:02:16.000Z</published>
    <updated>2016-11-18T06:38:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/uploads/QQ20160921-1@2x.jpg" alt=""></p>
<blockquote>
<p>protobuf-net ios 无法运行解决方案</p>
</blockquote>
<a id="more"></a>
<h1 id="使用上图所示-源码-方式-调用protobuf。"><a href="#使用上图所示-源码-方式-调用protobuf。" class="headerlink" title="使用上图所示 源码 方式 调用protobuf。"></a>使用上图所示 源码 方式 调用protobuf。</h1><h1 id="在unity3d-project-setting-中使用-net-subset-子集。"><a href="#在unity3d-project-setting-中使用-net-subset-子集。" class="headerlink" title="在unity3d project setting 中使用 .net subset 子集。"></a>在unity3d project setting 中使用 .net subset 子集。</h1>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/uploads/QQ20160921-1@2x.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;protobuf-net ios 无法运行解决方案&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="http://vrast.cn/categories/Unity3D/"/>
    
    
      <category term="protobuf" scheme="http://vrast.cn/tags/protobuf/"/>
    
  </entry>
  
  <entry>
    <title>马上就要关闭运营一年的网站了</title>
    <link href="http://vrast.cn/posts/aa040ce4/"/>
    <id>http://vrast.cn/posts/aa040ce4/</id>
    <published>2016-09-21T05:07:04.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/uploads/QQ20160921-0.jpg" alt=""></p>
<blockquote>
<p>SS站 运营了一年整 现在终于停服了，做自己擅长的事很重要,否则就只是徒劳</p>
</blockquote>
<a id="more"></a>
<h1 id="兴趣"><a href="#兴趣" class="headerlink" title="兴趣"></a>兴趣</h1><pre><code>做了一年VPN网站，从最开始的VPN连接，到后面的shadowsocks,再后来自己租vps建站，弄前端 ，优化 等等... 总之还是有收获的 。虽然浪费了很长很长一段时间。但是有点意思 玩儿嘛 总是要付出点什么的。
</code></pre><h1 id="做自己擅长的事"><a href="#做自己擅长的事" class="headerlink" title="做自己擅长的事"></a>做自己擅长的事</h1><pre><code>有时间就做自己擅长的事 做到极致 便是成功。与其跨领域从零开始学起 不如把现在手头的上的事做到最棒。
</code></pre><h1 id="想法"><a href="#想法" class="headerlink" title="想法"></a>想法</h1><pre><code>看来要很长一段时间不沾VPS了，这东西有毒。有这些时间 还是做点实际点的东西 如果立下一个小目标。:-）
</code></pre><h1 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h1><pre><code>好多事情都列在墙头 没有动手，时光易逝还是先做重要的事吧
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/uploads/QQ20160921-0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SS站 运营了一年整 现在终于停服了，做自己擅长的事很重要,否则就只是徒劳&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Host" scheme="http://vrast.cn/categories/Host/"/>
    
    
      <category term="VPN" scheme="http://vrast.cn/tags/VPN/"/>
    
  </entry>
  
  <entry>
    <title>zsh技巧</title>
    <link href="http://vrast.cn/posts/830f33fc/"/>
    <id>http://vrast.cn/posts/830f33fc/</id>
    <published>2016-09-21T04:14:40.000Z</published>
    <updated>2016-11-15T03:55:22.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>关于zsh的一些特性与技巧 </p>
</blockquote>
<p><img src="/uploads/QQ20160921-0@2x.jpg" alt=""></p>
<a id="more"></a>
<h1 id="TAB自动补全"><a href="#TAB自动补全" class="headerlink" title="TAB自动补全"></a>TAB自动补全</h1><h1 id="R-递归查找历史命令的使用"><a href="#R-递归查找历史命令的使用" class="headerlink" title="+R 递归查找历史命令的使用"></a><ctrl>+R 递归查找历史命令的使用</ctrl></h1><h1 id="查看环境变量"><a href="#查看环境变量" class="headerlink" title="查看环境变量"></a>查看环境变量</h1><h2 id="pwd"><a href="#pwd" class="headerlink" title="$pwd"></a>$pwd<tab></tab></h2><h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><h2 id="ps-查看进程"><a href="#ps-查看进程" class="headerlink" title="ps 查看进程"></a>ps 查看进程</h2><h2 id="Kill-Progress"><a href="#Kill-Progress" class="headerlink" title="Kill Progress"></a>Kill Progress</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> r &lt;<span class="literal">TAB</span>&gt;</div></pre></td></tr></table></figure>
<p>#说明<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Command --<span class="params">&lt;TAB&gt;</span> <span class="comment">//快捷说明</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;关于zsh的一些特性与技巧 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/uploads/QQ20160921-0@2x.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Terminal" scheme="http://vrast.cn/categories/Terminal/"/>
    
    
      <category term="ZSH" scheme="http://vrast.cn/tags/ZSH/"/>
    
  </entry>
  
</feed>
